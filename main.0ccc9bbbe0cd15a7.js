"use strict";(self.webpackChunkmaroc_seisme=self.webpackChunkmaroc_seisme||[]).push([[179],{2011:(Vt,Ve,U)=>{U.d(Ve,{Dh:()=>we,GT:()=>_e,cc:()=>Fe,hO:()=>We,on:()=>Q,pX:()=>de,xv:()=>Te});var p=U(4650),ne=U(1274),F=U(710);Vt=U.hmd(Vt);const oe=["ngOnDestroy"],de=(ye,Pt,kt,Qe={})=>new Proxy(ye,{get:(Be,Ne)=>kt.runOutsideAngular(()=>{var tt;if(ye[Ne])return!(null===(tt=Qe?.spy)||void 0===tt)&&tt.get&&Qe.spy.get(Ne,ye[Ne]),ye[Ne];if(oe.indexOf(Ne)>-1)return()=>{};const nt=Pt.toPromise().then(Ee=>{const Me=Ee&&Ee[Ne];return"function"==typeof Me?Me.bind(Ee):Me&&Me.then?Me.then(ct=>kt.run(()=>ct)):kt.run(()=>Me)});return new Proxy(()=>{},{get:(Ee,Me)=>nt[Me],apply:(Ee,Me,ct)=>nt.then(at=>{var Wt;const lt=at&&at(...ct);return!(null===(Wt=Qe?.spy)||void 0===Wt)&&Wt.apply&&Qe.spy.apply(Ne,ct,lt),lt})})})}),_e=(ye,Pt)=>{Pt.forEach(kt=>{Object.getOwnPropertyNames(kt.prototype||kt).forEach(Qe=>{Object.defineProperty(ye.prototype,Qe,Object.getOwnPropertyDescriptor(kt.prototype||kt,Qe))})})};class he{constructor(Pt){return Pt}}const we=new p.OlP("angularfire2.app.options"),Te=new p.OlP("angularfire2.app.name");function Q(ye,Pt,kt){const Be="object"==typeof kt&&kt||{};Be.name=Be.name||"string"==typeof kt&&kt||"[DEFAULT]";const tt=ne.Z.apps.filter(nt=>nt&&nt.name===Be.name)[0]||Pt.runOutsideAngular(()=>ne.Z.initializeApp(ye,Be));try{JSON.stringify(ye)!==JSON.stringify(tt.options)&&W("error",`${tt.name} Firebase App already initialized with different options${Vt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new he(tt)}const W=(ye,...Pt)=>{(0,p.X6Q)()&&typeof console<"u"&&console[ye](...Pt)},X={provide:he,useFactory:Q,deps:[we,p.R0b,[new p.FiY,Te]]};let We=(()=>{class ye{constructor(kt){ne.Z.registerVersion("angularfire",F.q4.full,"core"),ne.Z.registerVersion("angularfire",F.q4.full,"app-compat"),ne.Z.registerVersion("angular",p.q4F.full,kt.toString())}static initializeApp(kt,Qe){return{ngModule:ye,providers:[{provide:we,useValue:kt},{provide:Te,useValue:Qe}]}}}return ye.\u0275fac=function(kt){return new(kt||ye)(p.LFG(p.Lbi))},ye.\u0275mod=p.oAB({type:ye}),ye.\u0275inj=p.cJS({providers:[X]}),ye})();function Fe(ye,Pt,kt,Qe,Be){const[,Ne,tt]=globalThis.\u0275AngularfireInstanceCache.find(nt=>nt[0]===ye)||[];if(Ne)return function Re(ye,Pt){try{return ye.toString()===Pt.toString()}catch{return ye===Pt}}(Be,tt)||(be("error",`${Pt} was already initialized on the ${kt} Firebase App with different settings.${vt?" You may need to reload as Firebase is not HMR aware.":""}`),be("warn",{is:Be,was:tt})),Ne;{const nt=Qe();return globalThis.\u0275AngularfireInstanceCache.push([ye,nt,Be]),nt}}const vt=!!Vt.hot,be=(ye,...Pt)=>{(0,p.X6Q)()&&typeof console<"u"&&console[ye](...Pt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},710:(Vt,Ve,U)=>{U.d(Ve,{q4:()=>Ra,iC:()=>yc,HU:()=>kg,vb:()=>yu,JM:()=>Do});var p=U(4650),ne=U(8140),F=U(5861),oe=U(9681),de=U(2090),_e=U(4859),he=U(1877);let Te,Q;const We=new WeakMap,Fe=new WeakMap,Re=new WeakMap,vt=new WeakMap,be=new WeakMap;let kt={get(b,D,P){if(b instanceof IDBTransaction){if("done"===D)return Fe.get(b);if("objectStoreNames"===D)return b.objectStoreNames||Re.get(b);if("store"===D)return P.objectStoreNames[1]?void 0:P.objectStore(P.objectStoreNames[0])}return tt(b[D])},set:(b,D,P)=>(b[D]=P,!0),has:(b,D)=>b instanceof IDBTransaction&&("done"===D||"store"===D)||D in b};function Ne(b){return"function"==typeof b?function Be(b){return b!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function X(){return Q||(Q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(b)?function(...D){return b.apply(nt(this),D),tt(We.get(this))}:function(...D){return tt(b.apply(nt(this),D))}:function(D,...P){const O=b.call(nt(this),D,...P);return Re.set(O,D.sort?D.sort():[D]),tt(O)}}(b):(b instanceof IDBTransaction&&function Pt(b){if(Fe.has(b))return;const D=new Promise((P,O)=>{const j=()=>{b.removeEventListener("complete",te),b.removeEventListener("error",ve),b.removeEventListener("abort",ve)},te=()=>{P(),j()},ve=()=>{O(b.error||new DOMException("AbortError","AbortError")),j()};b.addEventListener("complete",te),b.addEventListener("error",ve),b.addEventListener("abort",ve)});Fe.set(b,D)}(b),((b,D)=>D.some(P=>b instanceof P))(b,function W(){return Te||(Te=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(b,kt):b)}function tt(b){if(b instanceof IDBRequest)return function ye(b){const D=new Promise((P,O)=>{const j=()=>{b.removeEventListener("success",te),b.removeEventListener("error",ve)},te=()=>{P(tt(b.result)),j()},ve=()=>{O(b.error),j()};b.addEventListener("success",te),b.addEventListener("error",ve)});return D.then(P=>{P instanceof IDBCursor&&We.set(P,b)}).catch(()=>{}),be.set(D,b),D}(b);if(vt.has(b))return vt.get(b);const D=Ne(b);return D!==b&&(vt.set(b,D),be.set(D,b)),D}const nt=b=>be.get(b),ct=["get","getKey","getAll","getAllKeys","count"],at=["put","add","delete","clear"],Wt=new Map;function lt(b,D){var P;if(!(b instanceof IDBDatabase)||D in b||"string"!=typeof D)return;if(Wt.get(D))return Wt.get(D);const O=D.replace(/FromIndex$/,""),j=D!==O,te=at.includes(O);if(!(O in(j?IDBIndex:IDBObjectStore).prototype)||!te&&!ct.includes(O))return;const ve=function(Ke){return(P=P||(0,F.Z)(function*(gt,...st){const Nt=this.transaction(gt,te?"readwrite":"readonly");let _n=Nt.store;return j&&(_n=_n.index(st.shift())),(yield Promise.all([_n[O](...st),te&&Nt.done]))[0]})).apply(this,arguments)};return Wt.set(D,ve),ve}var $n,ts,dr,Si,ue,re,xe,Ce,et,De,bt,Ht,On,Ut,pn,Jn;!function Qe(b){kt=b(kt)}(b=>({...b,get:(D,P,O)=>lt(D,P)||b.get(D,P,O),has:(D,P)=>!!lt(D,P)||b.has(D,P)}));const hn="@firebase/installations",pi="w:0.6.4",At="FIS_v2",Hn=new de.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function qr(b){return b instanceof de.ZR&&b.code.includes("request-failed")}function vn({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function Mt(b){return{token:b.token,requestStatus:2,expiresIn:Kr(b.expiresIn),creationTime:Date.now()}}function Ot(b,D){return($n=$n||(0,F.Z)(function*(P,O){const te=(yield O.json()).error;return Hn.create("request-failed",{requestName:P,serverCode:te.code,serverMessage:te.message,serverStatus:te.status})})).apply(this,arguments)}function Vn({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function xi(b,{refreshToken:D}){const P=Vn(b);return P.append("Authorization",function Jt(b){return`${At} ${b}`}(D)),P}function Wr(b){return(ts=ts||(0,F.Z)(function*(D){const P=yield D();return P.status>=500&&P.status<600?D():P})).apply(this,arguments)}function Kr(b){return Number(b.replace("s","000"))}function qs(b,D){return(dr=dr||(0,F.Z)(function*({appConfig:P,heartbeatServiceProvider:O},{fid:j}){const te=vn(P),ve=Vn(P),ke=O.getImmediate({optional:!0});if(ke){const Nt=yield ke.getHeartbeatsHeader();Nt&&ve.append("x-firebase-client",Nt)}const gt={method:"POST",headers:ve,body:JSON.stringify({fid:j,authVersion:At,appId:P.appId,sdkVersion:pi})},st=yield Wr(()=>fetch(te,gt));if(st.ok){const Nt=yield st.json();return{fid:Nt.fid||j,registrationStatus:2,refreshToken:Nt.refreshToken,authToken:Mt(Nt.authToken)}}throw yield Ot("Create Installation",st)})).apply(this,arguments)}function Sn(b){return new Promise(D=>{setTimeout(D,b)})}const En=/^[cdef][\w-]{21}$/;function Ri(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const P=function Le(b){return function go(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return En.test(P)?P:""}catch{return""}}function Y(b){return`${b.appName}!${b.appId}`}const Ae=new Map;function rt(b,D){const P=Y(b);xn(P,D),function q(b,D){const P=function ee(){return!G&&"BroadcastChannel"in self&&(G=new BroadcastChannel("[Firebase] FID Change"),G.onmessage=b=>{xn(b.data.key,b.data.fid)}),G}();P&&P.postMessage({key:b,fid:D}),function fe(){0===Ae.size&&G&&(G.close(),G=null)}()}(P,D)}function xn(b,D){const P=Ae.get(b);if(P)for(const O of P)O(D)}let G=null;const zt="firebase-installations-store";let gn=null;function Rn(){return gn||(gn=function Ee(b,D,{blocked:P,upgrade:O,blocking:j,terminated:te}={}){const ve=indexedDB.open(b,D),ke=tt(ve);return O&&ve.addEventListener("upgradeneeded",Ke=>{O(tt(ve.result),Ke.oldVersion,Ke.newVersion,tt(ve.transaction))}),P&&ve.addEventListener("blocked",()=>P()),ke.then(Ke=>{te&&Ke.addEventListener("close",()=>te()),j&&Ke.addEventListener("versionchange",()=>j())}).catch(()=>{}),ke}("firebase-installations-database",1,{upgrade:(b,D)=>{0===D&&b.createObjectStore(zt)}})),gn}function Xe(b,D){return(Si=Si||(0,F.Z)(function*(P,O){const j=Y(P),ve=(yield Rn()).transaction(zt,"readwrite"),ke=ve.objectStore(zt),Ke=yield ke.get(j);return yield ke.put(O,j),yield ve.done,(!Ke||Ke.fid!==O.fid)&&rt(P,O.fid),O})).apply(this,arguments)}function Bt(b){return(ue=ue||(0,F.Z)(function*(D){const P=Y(D),j=(yield Rn()).transaction(zt,"readwrite");yield j.objectStore(zt).delete(P),yield j.done})).apply(this,arguments)}function St(b,D){return(re=re||(0,F.Z)(function*(P,O){const j=Y(P),ve=(yield Rn()).transaction(zt,"readwrite"),ke=ve.objectStore(zt),Ke=yield ke.get(j),gt=O(Ke);return void 0===gt?yield ke.delete(j):yield ke.put(gt,j),yield ve.done,gt&&(!Ke||Ke.fid!==gt.fid)&&rt(P,gt.fid),gt})).apply(this,arguments)}function Kn(b){return(xe=xe||(0,F.Z)(function*(D){let P;const O=yield St(D.appConfig,j=>{const te=Pi(j),ve=_r(D,te);return P=ve.registrationPromise,ve.installationEntry});return""===O.fid?{installationEntry:yield P}:{installationEntry:O,registrationPromise:P}})).apply(this,arguments)}function Pi(b){return mo(b||{fid:Ri(),registrationStatus:0})}function _r(b,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Hn.create("app-offline"))};const P={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},O=function ga(b,D){return(Ce=Ce||(0,F.Z)(function*(P,O){try{const j=yield qs(P,O);return Xe(P.appConfig,j)}catch(j){throw qr(j)&&409===j.customData.serverCode?yield Bt(P.appConfig):yield Xe(P.appConfig,{fid:O.fid,registrationStatus:0}),j}})).apply(this,arguments)}(b,P);return{installationEntry:P,registrationPromise:O}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Zn(b)}:{installationEntry:D}}function Zn(b){return(et=et||(0,F.Z)(function*(D){let P=yield zu(D.appConfig);for(;1===P.registrationStatus;)yield Sn(100),P=yield zu(D.appConfig);if(0===P.registrationStatus){const{installationEntry:O,registrationPromise:j}=yield Kn(D);return j||O}return P})).apply(this,arguments)}function zu(b){return St(b,D=>{if(!D)throw Hn.create("installation-not-found");return mo(D)})}function mo(b){return function rn(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function _o(b,D){return(De=De||(0,F.Z)(function*({appConfig:P,heartbeatServiceProvider:O},j){const te=rr(P,j),ve=xi(P,j),ke=O.getImmediate({optional:!0});if(ke){const Nt=yield ke.getHeartbeatsHeader();Nt&&ve.append("x-firebase-client",Nt)}const gt={method:"POST",headers:ve,body:JSON.stringify({installation:{sdkVersion:pi,appId:P.appId}})},st=yield Wr(()=>fetch(te,gt));if(st.ok)return Mt(yield st.json());throw yield Ot("Generate Auth Token",st)})).apply(this,arguments)}function rr(b,{fid:D}){return`${vn(b)}/${D}/authTokens:generate`}function yr(b){return(bt=bt||(0,F.Z)(function*(D,P=!1){let O;const j=yield St(D.appConfig,ve=>{if(!ze(ve))throw Hn.create("not-registered");const ke=ve.authToken;if(!P&&Sr(ke))return ve;if(1===ke.requestStatus)return O=Go(D,P),ve;{if(!navigator.onLine)throw Hn.create("app-offline");const Ke=ma(ve);return O=yo(D,Ke),Ke}});return O?yield O:j.authToken})).apply(this,arguments)}function Go(b,D){return(Ht=Ht||(0,F.Z)(function*(P,O){let j=yield er(P.appConfig);for(;1===j.authToken.requestStatus;)yield Sn(100),j=yield er(P.appConfig);const te=j.authToken;return 0===te.requestStatus?yr(P,O):te})).apply(this,arguments)}function er(b){return St(b,D=>{if(!ze(D))throw Hn.create("not-registered");return function Ln(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function yo(b,D){return(On=On||(0,F.Z)(function*(P,O){try{const j=yield _o(P,O),te=Object.assign(Object.assign({},O),{authToken:j});return yield Xe(P.appConfig,te),j}catch(j){if(!qr(j)||401!==j.customData.serverCode&&404!==j.customData.serverCode){const te=Object.assign(Object.assign({},O),{authToken:{requestStatus:0}});yield Xe(P.appConfig,te)}else yield Bt(P.appConfig);throw j}})).apply(this,arguments)}function ze(b){return void 0!==b&&2===b.registrationStatus}function Sr(b){return 2===b.requestStatus&&!function Mi(b){const D=Date.now();return D<b.creationTime||b.creationTime+b.expiresIn<D+36e5}(b)}function ma(b){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:D})}function qu(b){return(Jn=Jn||(0,F.Z)(function*(D){const{registrationPromise:P}=yield Kn(D);P&&(yield P)})).apply(this,arguments)}function ln(b){return Hn.create("missing-app-config-values",{valueName:b})}const Ni="installations",Ku=b=>{const D=b.getProvider("app").getImmediate(),P=function ir(b){if(!b||!b.options)throw ln("App Configuration");if(!b.name)throw ln("App Name");const D=["projectId","apiKey","appId"];for(const P of D)if(!b.options[P])throw ln(P);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(D);return{app:D,appConfig:P,heartbeatServiceProvider:(0,oe._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},qc=b=>{const D=b.getProvider("app").getImmediate(),P=(0,oe._getProvider)(D,Ni).getImmediate();return{getId:()=>function Jh(b){return(Ut=Ut||(0,F.Z)(function*(D){const P=D,{installationEntry:O,registrationPromise:j}=yield Kn(P);return j?j.catch(console.error):yr(P).catch(console.error),O.fid})).apply(this,arguments)}(P),getToken:j=>function Xh(b){return(pn=pn||(0,F.Z)(function*(D,P=!1){const O=D;return yield qu(O),(yield yr(O,P)).token})).apply(this,arguments)}(P,j)}};var Ja;(function Hi(){(0,oe._registerComponent)(new _e.wA(Ni,Ku,"PUBLIC")),(0,oe._registerComponent)(new _e.wA("installations-internal",qc,"PRIVATE"))})(),(0,oe.registerVersion)(hn,"0.6.4"),(0,oe.registerVersion)(hn,"0.6.4","esm2017");const U_="@firebase/remote-config",vr=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Kc{constructor(D,P,O,j){this.client=D,this.storage=P,this.storageCache=O,this.logger=j}isCachedDataFresh(D,P){if(!P)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const O=Date.now()-P,j=O<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${O}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${j}.`),j}fetch(D){var P=this;return(0,F.Z)(function*(){const[O,j]=yield Promise.all([P.storage.getLastSuccessfulFetchTimestampMillis(),P.storage.getLastSuccessfulFetchResponse()]);if(j&&P.isCachedDataFresh(D.cacheMaxAgeMillis,O))return j;D.eTag=j&&j.eTag;const te=yield P.client.fetch(D),ve=[P.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===te.status&&ve.push(P.storage.setLastSuccessfulFetchResponse(te)),yield Promise.all(ve),te})()}}function Zc(b=navigator){return b.languages&&b.languages[0]||b.language}class Qc{constructor(D,P,O,j,te,ve){this.firebaseInstallations=D,this.sdkVersion=P,this.namespace=O,this.projectId=j,this.apiKey=te,this.appId=ve}fetch(D){var P=this;return(0,F.Z)(function*(){const[O,j]=yield Promise.all([P.firebaseInstallations.getId(),P.firebaseInstallations.getToken()]),ve=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${P.projectId}/namespaces/${P.namespace}:fetch?key=${P.apiKey}`,ke={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},Ke={sdk_version:P.sdkVersion,app_instance_id:O,app_instance_id_token:j,app_id:P.appId,language_code:Zc()},gt={method:"POST",headers:ke,body:JSON.stringify(Ke)},st=fetch(ve,gt),Nt=new Promise((en,as)=>{D.signal.addEventListener(()=>{const So=new Error("The operation was aborted.");So.name="AbortError",as(So)})});let _n;try{yield Promise.race([st,Nt]),_n=yield st}catch(en){let as="fetch-client-network";throw"AbortError"===en?.name&&(as="fetch-timeout"),vr.create(as,{originalErrorMessage:en?.message})}let zn=_n.status;const an=_n.headers.get("ETag")||void 0;let Cr,Ur;if(200===_n.status){let en;try{en=yield _n.json()}catch(as){throw vr.create("fetch-client-parse",{originalErrorMessage:as?.message})}Cr=en.entries,Ur=en.state}if("INSTANCE_STATE_UNSPECIFIED"===Ur?zn=500:"NO_CHANGE"===Ur?zn=304:("NO_TEMPLATE"===Ur||"EMPTY_CONFIG"===Ur)&&(Cr={}),304!==zn&&200!==zn)throw vr.create("fetch-status",{httpStatus:zn});return{status:zn,eTag:an,config:Cr}})()}}class Wo{constructor(D,P){this.client=D,this.storage=P}fetch(D){var P=this;return(0,F.Z)(function*(){const O=(yield P.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return P.attemptFetch(D,O)})()}attemptFetch(D,{throttleEndTimeMillis:P,backoffCount:O}){var j=this;return(0,F.Z)(function*(){yield function rf(b,D){return new Promise((P,O)=>{const j=Math.max(D-Date.now(),0),te=setTimeout(P,j);b.addEventListener(()=>{clearTimeout(te),O(vr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,P);try{const te=yield j.client.fetch(D);return yield j.storage.deleteThrottleMetadata(),te}catch(te){if(!function sf(b){if(!(b instanceof de.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}(te))throw te;const ve={throttleEndTimeMillis:Date.now()+(0,de.$s)(O),backoffCount:O+1};return yield j.storage.setThrottleMetadata(ve),j.attemptFetch(D,ve)}})()}}class Ko{constructor(D,P,O,j,te){this.app=D,this._client=P,this._storageCache=O,this._storage=j,this._logger=te,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ld(b,D){const P=b.target.error||void 0;return vr.create(D,{originalErrorMessage:P&&P?.message})}const Ks="app_namespace_store";class uf{constructor(D,P,O,j=function Fr(){return new Promise((b,D)=>{try{const P=indexedDB.open("firebase_remote_config",1);P.onerror=O=>{D(ld(O,"storage-open"))},P.onsuccess=O=>{b(O.target.result)},P.onupgradeneeded=O=>{0===O.oldVersion&&O.target.result.createObjectStore(Ks,{keyPath:"compositeKey"})}}catch(P){D(vr.create("storage-open",{originalErrorMessage:P?.message}))}})}()){this.appId=D,this.appName=P,this.namespace=O,this.openDbPromise=j}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var P=this;return(0,F.Z)(function*(){const O=yield P.openDbPromise;return new Promise((j,te)=>{const ke=O.transaction([Ks],"readonly").objectStore(Ks),Ke=P.createCompositeKey(D);try{const gt=ke.get(Ke);gt.onerror=st=>{te(ld(st,"storage-get"))},gt.onsuccess=st=>{const Nt=st.target.result;j(Nt?Nt.value:void 0)}}catch(gt){te(vr.create("storage-get",{originalErrorMessage:gt?.message}))}})})()}set(D,P){var O=this;return(0,F.Z)(function*(){const j=yield O.openDbPromise;return new Promise((te,ve)=>{const Ke=j.transaction([Ks],"readwrite").objectStore(Ks),gt=O.createCompositeKey(D);try{const st=Ke.put({compositeKey:gt,value:P});st.onerror=Nt=>{ve(ld(Nt,"storage-set"))},st.onsuccess=()=>{te()}}catch(st){ve(vr.create("storage-set",{originalErrorMessage:st?.message}))}})})()}delete(D){var P=this;return(0,F.Z)(function*(){const O=yield P.openDbPromise;return new Promise((j,te)=>{const ke=O.transaction([Ks],"readwrite").objectStore(Ks),Ke=P.createCompositeKey(D);try{const gt=ke.delete(Ke);gt.onerror=st=>{te(ld(st,"storage-delete"))},gt.onsuccess=()=>{j()}}catch(gt){te(vr.create("storage-delete",{originalErrorMessage:gt?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class K_{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,F.Z)(function*(){const P=D.storage.getLastFetchStatus(),O=D.storage.getLastSuccessfulFetchTimestampMillis(),j=D.storage.getActiveConfig(),te=yield P;te&&(D.lastFetchStatus=te);const ve=yield O;ve&&(D.lastSuccessfulFetchTimestampMillis=ve);const ke=yield j;ke&&(D.activeConfig=ke)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function mg(){return(Ja=Ja||(0,F.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}let nu,Zr;!function tu(){(0,oe._registerComponent)(new _e.wA("remote-config",function b(D,{instanceIdentifier:P}){const O=D.getProvider("app").getImmediate(),j=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw vr.create("registration-window");if(!(0,de.hl)())throw vr.create("indexed-db-unavailable");const{projectId:te,apiKey:ve,appId:ke}=O.options;if(!te)throw vr.create("registration-project-id");if(!ve)throw vr.create("registration-api-key");if(!ke)throw vr.create("registration-app-id");const Ke=new uf(ke,O.name,P=P||"firebase"),gt=new K_(Ke),st=new he.Yd(U_);st.logLevel=he.in.ERROR;const Nt=new Qc(j,oe.SDK_VERSION,P,te,ve,ke),_n=new Wo(Nt,Ke),zn=new Kc(_n,Ke,gt,st),an=new Ko(O,zn,gt,Ke,st);return function Xa(b){const D=(0,de.m9)(b);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(an),an},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(U_,"0.4.4"),(0,oe.registerVersion)(U_,"0.4.4","esm2017")}();const cf=new WeakMap,Zs=new WeakMap,va=new WeakMap,gs=new WeakMap,Kt=new WeakMap;let dd={get(b,D,P){if(b instanceof IDBTransaction){if("done"===D)return Zs.get(b);if("objectStoreNames"===D)return b.objectStoreNames||va.get(b);if("store"===D)return P.objectStoreNames[1]?void 0:P.objectStore(P.objectStoreNames[0])}return Qs(b[D])},set:(b,D,P)=>(b[D]=P,!0),has:(b,D)=>b instanceof IDBTransaction&&("done"===D||"store"===D)||D in b};function hd(b){return"function"==typeof b?function vg(b){return b!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Yc(){return Zr||(Zr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(b)?function(...D){return b.apply(df(this),D),Qs(cf.get(this))}:function(...D){return Qs(b.apply(df(this),D))}:function(D,...P){const O=b.call(df(this),D,...P);return va.set(O,D.sort?D.sort():[D]),Qs(O)}}(b):(b instanceof IDBTransaction&&function Er(b){if(Zs.has(b))return;const D=new Promise((P,O)=>{const j=()=>{b.removeEventListener("complete",te),b.removeEventListener("error",ve),b.removeEventListener("abort",ve)},te=()=>{P(),j()},ve=()=>{O(b.error||new DOMException("AbortError","AbortError")),j()};b.addEventListener("complete",te),b.addEventListener("error",ve),b.addEventListener("abort",ve)});Zs.set(b,D)}(b),((b,D)=>D.some(P=>b instanceof P))(b,function _g(){return nu||(nu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(b,dd):b)}function Qs(b){if(b instanceof IDBRequest)return function lf(b){const D=new Promise((P,O)=>{const j=()=>{b.removeEventListener("success",te),b.removeEventListener("error",ve)},te=()=>{P(Qs(b.result)),j()},ve=()=>{O(b.error),j()};b.addEventListener("success",te),b.addEventListener("error",ve)});return D.then(P=>{P instanceof IDBCursor&&cf.set(P,b)}).catch(()=>{}),Kt.set(D,b),D}(b);if(gs.has(b))return gs.get(b);const D=hd(b);return D!==b&&(gs.set(b,D),Kt.set(D,b)),D}const df=b=>Kt.get(b);function Ue(b,D,{blocked:P,upgrade:O,blocking:j,terminated:te}={}){const ve=indexedDB.open(b,D),ke=Qs(ve);return O&&ve.addEventListener("upgradeneeded",Ke=>{O(Qs(ve.result),Ke.oldVersion,Ke.newVersion,Qs(ve.transaction))}),P&&ve.addEventListener("blocked",()=>P()),ke.then(Ke=>{te&&Ke.addEventListener("close",()=>te()),j&&Ke.addEventListener("versionchange",()=>j())}).catch(()=>{}),ke}function mn(b,{blocked:D}={}){const P=indexedDB.deleteDatabase(b);return D&&P.addEventListener("blocked",()=>D()),Qs(P).then(()=>{})}const Ea=["get","getKey","getAll","getAllKeys","count"],fd=["put","add","delete","clear"],Ir=new Map;function pd(b,D){var P;if(!(b instanceof IDBDatabase)||D in b||"string"!=typeof D)return;if(Ir.get(D))return Ir.get(D);const O=D.replace(/FromIndex$/,""),j=D!==O,te=fd.includes(O);if(!(O in(j?IDBIndex:IDBObjectStore).prototype)||!te&&!Ea.includes(O))return;const ve=function(Ke){return(P=P||(0,F.Z)(function*(gt,...st){const Nt=this.transaction(gt,te?"readwrite":"readonly");let _n=Nt.store;return j&&(_n=_n.index(st.shift())),(yield Promise.all([_n[O](...st),te&&Nt.done]))[0]})).apply(this,arguments)};return Ir.set(D,ve),ve}var Zo,Gi,Jc,Ju,gd,hr,Z_,hf,Vr,oi,ff,ki,Ys,Eg,pf,Ig,md,Js,Xc,Xu;!function yg(b){dd=b(dd)}(b=>({...b,get:(D,P,O)=>pd(D,P)||b.get(D,P,O),has:(D,P)=>!!pd(D,P)||b.has(D,P)}));const _d="/firebase-messaging-sw.js",_s="/firebase-cloud-messaging-push-scope",Eo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",yd="google.c.a.c_id",vd="google.c.a.c_l",ec="google.c.a.ts",Y_="google.c.a.e";var Lr=(()=>{return(b=Lr||(Lr={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",Lr;var b})();function Qr(b){const D=new Uint8Array(b);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function sr(b){const P=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),O=atob(P),j=new Uint8Array(O.length);for(let te=0;te<O.length;++te)j[te]=O.charCodeAt(te);return j}const tc="fcm_token_details_db",gf="fcm_token_object_Store";function J_(b){return(Zo=Zo||(0,F.Z)(function*(D){var P;if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ke=>ke.name).includes(tc))return null;let O=null;return(yield Ue(tc,5,{upgrade:function(ve,ke,Ke,gt){return(P=P||(0,F.Z)(function*(st,Nt,_n,zn){var an;if(Nt<2||!st.objectStoreNames.contains(gf))return;const Cr=zn.objectStore(gf),Ur=yield Cr.index("fcmSenderId").get(D);if(yield Cr.clear(),Ur)if(2===Nt){const en=Ur;if(!en.auth||!en.p256dh||!en.endpoint)return;O={token:en.fcmToken,createTime:null!==(an=en.createTime)&&void 0!==an?an:Date.now(),subscriptionOptions:{auth:en.auth,p256dh:en.p256dh,endpoint:en.endpoint,swScope:en.swScope,vapidKey:"string"==typeof en.vapidKey?en.vapidKey:Qr(en.vapidKey)}}}else if(3===Nt){const en=Ur;O={token:en.fcmToken,createTime:en.createTime,subscriptionOptions:{auth:Qr(en.auth),p256dh:Qr(en.p256dh),endpoint:en.endpoint,swScope:en.swScope,vapidKey:Qr(en.vapidKey)}}}else if(4===Nt){const en=Ur;O={token:en.fcmToken,createTime:en.createTime,subscriptionOptions:{auth:Qr(en.auth),p256dh:Qr(en.p256dh),endpoint:en.endpoint,swScope:en.swScope,vapidKey:Qr(en.vapidKey)}}}})).apply(this,arguments)}})).close(),yield mn(tc),yield mn("fcm_vapid_details_db"),yield mn("undefined"),Ed(O)?O:null})).apply(this,arguments)}function Ed(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:D}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Xs="firebase-messaging-store";let Qo=null;function Ia(){return Qo||(Qo=Ue("firebase-messaging-database",1,{upgrade:(b,D)=>{0===D&&b.createObjectStore(Xs)}})),Qo}function Id(b){return(Gi=Gi||(0,F.Z)(function*(D){const P=wa(D),j=yield(yield Ia()).transaction(Xs).objectStore(Xs).get(P);if(j)return j;{const te=yield J_(D.appConfig.senderId);if(te)return yield wd(D,te),te}})).apply(this,arguments)}function wd(b,D){return(Jc=Jc||(0,F.Z)(function*(P,O){const j=wa(P),ve=(yield Ia()).transaction(Xs,"readwrite");return yield ve.objectStore(Xs).put(O,j),yield ve.done,O})).apply(this,arguments)}function eo(b){return(Ju=Ju||(0,F.Z)(function*(D){const P=wa(D),j=(yield Ia()).transaction(Xs,"readwrite");yield j.objectStore(Xs).delete(P),yield j.done})).apply(this,arguments)}function wa({appConfig:b}){return b.appId}const gi=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function nl(b,D){return(gd=gd||(0,F.Z)(function*(P,O){const j=yield Io(P),te=rc(O),ve={method:"POST",headers:j,body:JSON.stringify(te)};let ke;try{ke=yield(yield fetch(nc(P.appConfig),ve)).json()}catch(Ke){throw gi.create("token-subscribe-failed",{errorInfo:Ke?.toString()})}if(ke.error)throw gi.create("token-subscribe-failed",{errorInfo:ke.error.message});if(!ke.token)throw gi.create("token-subscribe-no-token");return ke.token})).apply(this,arguments)}function iu(b,D){return(hr=hr||(0,F.Z)(function*(P,O){const j=yield Io(P),te=rc(O.subscriptionOptions),ve={method:"PATCH",headers:j,body:JSON.stringify(te)};let ke;try{ke=yield(yield fetch(`${nc(P.appConfig)}/${O.token}`,ve)).json()}catch(Ke){throw gi.create("token-update-failed",{errorInfo:Ke?.toString()})}if(ke.error)throw gi.create("token-update-failed",{errorInfo:ke.error.message});if(!ke.token)throw gi.create("token-update-no-token");return ke.token})).apply(this,arguments)}function Td(b,D){return(Z_=Z_||(0,F.Z)(function*(P,O){const te={method:"DELETE",headers:yield Io(P)};try{const ke=yield(yield fetch(`${nc(P.appConfig)}/${O}`,te)).json();if(ke.error)throw gi.create("token-unsubscribe-failed",{errorInfo:ke.error.message})}catch(ve){throw gi.create("token-unsubscribe-failed",{errorInfo:ve?.toString()})}})).apply(this,arguments)}function nc({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Io(b){return(hf=hf||(0,F.Z)(function*({appConfig:D,installations:P}){const O=yield P.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${O}`})})).apply(this,arguments)}function rc({p256dh:b,auth:D,endpoint:P,vapidKey:O}){const j={web:{endpoint:P,auth:D,p256dh:b}};return O!==Eo&&(j.web.applicationPubKey=O),j}const rl=6048e5;function ic(b){return(Vr=Vr||(0,F.Z)(function*(D){const P=yield _f(D.swRegistration,D.vapidKey),O={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:P.endpoint,auth:Qr(P.getKey("auth")),p256dh:Qr(P.getKey("p256dh"))},j=yield Id(D.firebaseDependencies);if(j){if(su(j.subscriptionOptions,O))return Date.now()>=j.createTime+rl?sc(D,{token:j.token,createTime:Date.now(),subscriptionOptions:O}):j.token;try{yield Td(D.firebaseDependencies,j.token)}catch(te){console.warn(te)}return Cd(D.firebaseDependencies,O)}return Cd(D.firebaseDependencies,O)})).apply(this,arguments)}function il(b){return(oi=oi||(0,F.Z)(function*(D){const P=yield Id(D.firebaseDependencies);P&&(yield Td(D.firebaseDependencies,P.token),yield eo(D.firebaseDependencies));const O=yield D.swRegistration.pushManager.getSubscription();return!O||O.unsubscribe()})).apply(this,arguments)}function sc(b,D){return(ff=ff||(0,F.Z)(function*(P,O){try{const j=yield iu(P.firebaseDependencies,O),te=Object.assign(Object.assign({},O),{token:j,createTime:Date.now()});return yield wd(P.firebaseDependencies,te),j}catch(j){throw yield il(P),j}})).apply(this,arguments)}function Cd(b,D){return(ki=ki||(0,F.Z)(function*(P,O){const te={token:yield nl(P,O),createTime:Date.now(),subscriptionOptions:O};return yield wd(P,te),te.token})).apply(this,arguments)}function _f(b,D){return(Ys=Ys||(0,F.Z)(function*(P,O){return(yield P.pushManager.getSubscription())||P.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:sr(O)})})).apply(this,arguments)}function su(b,D){return D.vapidKey===b.vapidKey&&D.endpoint===b.endpoint&&D.auth===b.auth&&D.p256dh===b.p256dh}function yf(b){const D={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function wo(b,D){if(!D.notification)return;b.notification={};const P=D.notification.title;P&&(b.notification.title=P);const O=D.notification.body;O&&(b.notification.body=O);const j=D.notification.image;j&&(b.notification.image=j);const te=D.notification.icon;te&&(b.notification.icon=te)}(D,b),function ou(b,D){!D.data||(b.data=D.data)}(D,b),function oc(b,D){var P,O,j,te,ve;if(!(D.fcmOptions||null!==(P=D.notification)&&void 0!==P&&P.click_action))return;b.fcmOptions={};const ke=null!==(j=null===(O=D.fcmOptions)||void 0===O?void 0:O.link)&&void 0!==j?j:null===(te=D.notification)||void 0===te?void 0:te.click_action;ke&&(b.fcmOptions.link=ke);const Ke=null===(ve=D.fcmOptions)||void 0===ve?void 0:ve.analytics_label;Ke&&(b.fcmOptions.analyticsLabel=Ke)}(D,b),D}function Tg(b){return"object"==typeof b&&!!b&&yd in b}function Ta(b,D){const P=[];for(let O=0;O<b.length;O++)P.push(b.charAt(O)),O<D.length&&P.push(D.charAt(O));return P.join("")}function ac(b){return gi.create("missing-app-config-values",{valueName:b})}Ta("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ta("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ys{constructor(D,P,O){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const j=function Ad(b){if(!b||!b.options)throw ac("App Configuration Object");if(!b.name)throw ac("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:P}=b;for(const O of D)if(!P[O])throw ac(O);return{appName:b.name,projectId:P.projectId,apiKey:P.apiKey,appId:P.appId,senderId:P.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:j,installations:P,analyticsProvider:O}}_delete(){return Promise.resolve()}}function bd(b){return(Eg=Eg||(0,F.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(_d,{scope:_s}),D.swRegistration.update().catch(()=>{})}catch(P){throw gi.create("failed-service-worker-registration",{browserErrorMessage:P?.message})}})).apply(this,arguments)}function Ca(b,D){return(pf=pf||(0,F.Z)(function*(P,O){if(!O&&!P.swRegistration&&(yield bd(P)),O||!P.swRegistration){if(!(O instanceof ServiceWorkerRegistration))throw gi.create("invalid-sw-registration");P.swRegistration=O}})).apply(this,arguments)}function Dd(b,D){return(Ig=Ig||(0,F.Z)(function*(P,O){O?P.vapidKey=O:P.vapidKey||(P.vapidKey=Eo)})).apply(this,arguments)}function uc(b,D,P){return(Js=Js||(0,F.Z)(function*(O,j,te){const ve=sl(j);(yield O.firebaseDependencies.analyticsProvider.get()).logEvent(ve,{message_id:te[yd],message_name:te[vd],message_time:te[ec],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function sl(b){switch(b){case Lr.NOTIFICATION_CLICKED:return"notification_open";case Lr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}const al="@firebase/messaging",ul=b=>{const D=new ys(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",P=>function ol(b,D){return(Xc=Xc||(0,F.Z)(function*(P,O){const j=O.data;if(!j.isFirebaseMessaging)return;P.onMessageHandler&&j.messageType===Lr.PUSH_RECEIVED&&("function"==typeof P.onMessageHandler?P.onMessageHandler(yf(j)):P.onMessageHandler.next(yf(j)));const te=j.data;Tg(te)&&"1"===te[Y_]&&(yield uc(P,j.messageType,te))})).apply(this,arguments)}(D,P)),D},Sd=b=>{const D=b.getProvider("messaging").getImmediate();return{getToken:O=>function To(b,D){return(md=md||(0,F.Z)(function*(P,O){if(!navigator)throw gi.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw gi.create("permission-blocked");return yield Dd(P,O?.vapidKey),yield Ca(P,O?.serviceWorkerRegistration),ic(P)})).apply(this,arguments)}(D,O)}};function au(){return(Xu=Xu||(0,F.Z)(function*(){try{yield(0,de.eu)()}catch{return!1}return typeof window<"u"&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}var Co,cu,cl,Ef,xd,Aa,ll,dl,kn;!function X_(){(0,oe._registerComponent)(new _e.wA("messaging",ul,"PUBLIC")),(0,oe._registerComponent)(new _e.wA("messaging-internal",Sd,"PRIVATE")),(0,oe.registerVersion)(al,"0.12.4"),(0,oe.registerVersion)(al,"0.12.4","esm2017")}();const Rd="analytics",YC="firebase_id",Da="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Md="https://www.googletagmanager.com/gtag/js",fr=new he.Yd("@firebase/analytics"),os=new de.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function fn(b){if(!b.startsWith(Md)){const D=os.create("invalid-gtag-resource",{gtagURL:b});return fr.warn(D.message),""}return b}function dc(b){return Promise.all(b.map(D=>D.catch(P=>P)))}function ry(b,D){const P=function zi(b,D){let P;return window.trustedTypes&&(P=window.trustedTypes.createPolicy(b,D)),P}("firebase-js-sdk-policy",{createScriptURL:fn}),O=document.createElement("script"),j=`${Md}?l=${b}&id=${D}`;O.src=P?P?.createScriptURL(j):j,O.async=!0,document.head.appendChild(O)}function Oi(b,D,P,O,j,te){return(Co=Co||(0,F.Z)(function*(ve,ke,Ke,gt,st,Nt){const _n=gt[st];try{if(_n)yield ke[_n];else{const an=(yield dc(Ke)).find(Cr=>Cr.measurementId===st);an&&(yield ke[an.appId])}}catch(zn){fr.error(zn)}ve("config",st,Nt)})).apply(this,arguments)}function Os(b,D,P,O,j){return(cu=cu||(0,F.Z)(function*(te,ve,ke,Ke,gt){try{let st=[];if(gt&&gt.send_to){let Nt=gt.send_to;Array.isArray(Nt)||(Nt=[Nt]);const _n=yield dc(ke);for(const zn of Nt){const an=_n.find(Ur=>Ur.measurementId===zn),Cr=an&&ve[an.appId];if(!Cr){st=[];break}st.push(Cr)}}0===st.length&&(st=Object.values(ve)),yield Promise.all(st),te("event",Ke,gt||{})}catch(st){fr.error(st)}})).apply(this,arguments)}function hc(b){const D=window.document.getElementsByTagName("script");for(const P of Object.values(D))if(P.src&&P.src.includes(Md)&&P.src.includes(b))return P;return null}const wf=new class iy{constructor(D={},P=1e3){this.throttleMetadata=D,this.intervalMillis=P}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,P){this.throttleMetadata[D]=P}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function sy(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function bg(b){return(cl=cl||(0,F.Z)(function*(D){var P;const{appId:O,apiKey:j}=D,te={method:"GET",headers:sy(j)},ve=Da.replace("{app-id}",O),ke=yield fetch(ve,te);if(200!==ke.status&&304!==ke.status){let Ke="";try{const gt=yield ke.json();null!==(P=gt.error)&&void 0!==P&&P.message&&(Ke=gt.error.message)}catch{}throw os.create("config-fetch-failed",{httpStatus:ke.status,responseMessage:Ke})}return ke.json()})).apply(this,arguments)}function qi(b){return(Ef=Ef||(0,F.Z)(function*(D,P=wf,O){const{appId:j,apiKey:te,measurementId:ve}=D.options;if(!j)throw os.create("no-app-id");if(!te){if(ve)return{measurementId:ve,appId:j};throw os.create("no-api-key")}const ke=P.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ke=new pu;return setTimeout((0,F.Z)(function*(){Ke.abort()}),void 0!==O?O:6e4),kd({appId:j,apiKey:te,measurementId:ve},ke,Ke,P)})).apply(this,arguments)}function kd(b,D,P){return(xd=xd||(0,F.Z)(function*(O,{throttleEndTimeMillis:j,backoffCount:te},ve,ke=wf){var Ke;const{appId:gt,measurementId:st}=O;try{yield fc(ve,j)}catch(Nt){if(st)return fr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${st} provided in the "measurementId" field in the local Firebase config. [${Nt?.message}]`),{appId:gt,measurementId:st};throw Nt}try{const Nt=yield bg(O);return ke.deleteThrottleMetadata(gt),Nt}catch(Nt){const _n=Nt;if(!XC(_n)){if(ke.deleteThrottleMetadata(gt),st)return fr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${st} provided in the "measurementId" field in the local Firebase config. [${_n?.message}]`),{appId:gt,measurementId:st};throw Nt}const zn=503===Number(null===(Ke=_n?.customData)||void 0===Ke?void 0:Ke.httpStatus)?(0,de.$s)(te,ke.intervalMillis,30):(0,de.$s)(te,ke.intervalMillis),an={throttleEndTimeMillis:Date.now()+zn,backoffCount:te+1};return ke.setThrottleMetadata(gt,an),fr.debug(`Calling attemptFetch again in ${zn} millis`),kd(O,an,ve,ke)}})).apply(this,arguments)}function fc(b,D){return new Promise((P,O)=>{const j=Math.max(D-Date.now(),0),te=setTimeout(P,j);b.addEventListener(()=>{clearTimeout(te),O(os.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function XC(b){if(!(b instanceof de.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}class pu{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Tf,mi;function Sg(b){mi=b}function ai(b){Tf=b}function Gn(){return(ll=ll||(0,F.Z)(function*(){if(!(0,de.hl)())return fr.warn(os.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,de.eu)()}catch(b){return fr.warn(os.create("indexeddb-unavailable",{errorInfo:b?.toString()}).message),!1}return!0})).apply(this,arguments)}class Ft{constructor(D){this.app=D}_delete(){return delete Wn[this.app.options.appId],Promise.resolve()}}let Wn={},gu=[];const pl={};let pc,Xt,to="dataLayer",mu=!1;function vs(b,D,P){!function Fd(){const b=[];if((0,de.ru)()&&b.push("This is a browser extension environment."),(0,de.zI)()||b.push("Cookies are not available."),b.length>0){const D=b.map((O,j)=>`(${j+1}) ${O}`).join(" "),P=os.create("invalid-analytics-context",{errorInfo:D});fr.warn(P.message)}}();const O=b.options.appId;if(!O)throw os.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw os.create("no-api-key");fr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Wn[O])throw os.create("already-exists",{id:O});if(!mu){!function Cg(b){let D=[];Array.isArray(window[b])?D=window[b]:window[b]=D}(to);const{wrappedGtag:te,gtagCore:ve}=function hu(b,D,P,O,j){let te=function(...ve){window[O].push(arguments)};return window[j]&&"function"==typeof window[j]&&(te=window[j]),window[j]=function Ag(b,D,P,O){var j;return function te(ve){return(j=j||(0,F.Z)(function*(ke,...Ke){try{if("event"===ke){const[gt,st]=Ke;yield Os(b,D,P,gt,st)}else if("config"===ke){const[gt,st]=Ke;yield Oi(b,D,P,O,gt,st)}else if("consent"===ke){const[gt]=Ke;b("consent","update",gt)}else if("get"===ke){const[gt,st,Nt]=Ke;b("get",gt,st,Nt)}else if("set"===ke){const[gt]=Ke;b("set",gt)}else b(ke,...Ke)}catch(gt){fr.error(gt)}})).apply(this,arguments)}}(te,b,D,P),{gtagCore:te,wrappedGtag:window[j]}}(Wn,gu,pl,to,"gtag");Xt=te,pc=ve,mu=!0}return Wn[O]=function Ao(b,D,P,O,j,te,ve){return(dl=dl||(0,F.Z)(function*(ke,Ke,gt,st,Nt,_n,zn){var an;const Cr=qi(ke);Cr.then(ro=>{gt[ro.measurementId]=ro.appId,ke.options.measurementId&&ro.measurementId!==ke.options.measurementId&&fr.warn(`The measurement ID in the local Firebase config (${ke.options.measurementId}) does not match the measurement ID fetched from the server (${ro.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ro=>fr.error(ro)),Ke.push(Cr);const Ur=Gn().then(ro=>{if(ro)return st.getId()}),[en,as]=yield Promise.all([Cr,Ur]);hc(_n)||ry(_n,en.measurementId),mi&&(Nt("consent","default",mi),Sg(void 0)),Nt("js",new Date);const So=null!==(an=zn?.config)&&void 0!==an?an:{};return So.origin="firebase",So.update=!0,null!=as&&(So[YC]=as),Nt("config",en.measurementId,So),Tf&&(Nt("set",Tf),ai(void 0)),en.measurementId})).apply(this,arguments)}(b,gu,pl,D,pc,to,P),new Ft(b)}function Sa(){return(kn=kn||(0,F.Z)(function*(){if((0,de.ru)()||!(0,de.zI)()||!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}const Ld="@firebase/analytics";!function ht(){(0,oe._registerComponent)(new _e.wA(Rd,(D,{options:P})=>vs(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),P),"PUBLIC")),(0,oe._registerComponent)(new _e.wA("analytics-internal",function b(D){try{const P=D.getProvider(Rd).getImmediate();return{logEvent:(O,j,te)=>function or(b,D,P,O){b=(0,de.m9)(b),function oy(b,D,P,O,j){return(Aa=Aa||(0,F.Z)(function*(te,ve,ke,Ke,gt){if(gt&&gt.global)te("event",ke,Ke);else{const st=yield ve;te("event",ke,Object.assign(Object.assign({},Ke),{send_to:st}))}})).apply(this,arguments)}(Xt,Wn[b.app.options.appId],D,P,O).catch(j=>fr.error(j))}(P,O,j,te)}}catch(P){throw os.create("interop-component-reg-failed",{reason:P})}},"PRIVATE")),(0,oe.registerVersion)(Ld,"0.10.0"),(0,oe.registerVersion)(Ld,"0.10.0","esm2017")}();var Es=U(4408),_l=U(7565);const Cf=new class _u extends _l.v{}(class Yt extends Es.o{constructor(D,P){super(D,P),this.scheduler=D,this.work=P}schedule(D,P=0){return P>0?super.schedule(D,P):(this.delay=P,this.state=D,this.scheduler.flush(this),this)}execute(D,P){return P>0||this.closed?super.execute(D,P):this._execute(D,P)}requestAsyncId(D,P,O=0){return null!=O&&O>0||null==O&&this.delay>0?super.requestAsyncId(D,P,O):(D.flush(this),0)}});var Rg=U(4986),Af=U(8505),Pg=U(9468),_i=U(5363);const Ra=new p.GfV("7.6.1"),Tr="__angularfire_symbol__analyticsIsSupportedValue",no="__angularfire_symbol__analyticsIsSupported",vl="__angularfire_symbol__remoteConfigIsSupportedValue",Ud="__angularfire_symbol__remoteConfigIsSupported",bo="__angularfire_symbol__messagingIsSupportedValue",El="__angularfire_symbol__messagingIsSupported";function Do(b,D,P){if(D){if(1===D.length)return D[0];const te=D.filter(ve=>ve.app===P);if(1===te.length)return te[0]}return P.container.getProvider(b).getImmediate({optional:!0})}globalThis[no]||(globalThis[no]=Sa().then(b=>globalThis[Tr]=b).catch(()=>globalThis[Tr]=!1)),globalThis[El]||(globalThis[El]=au().then(b=>globalThis[bo]=b).catch(()=>globalThis[bo]=!1)),globalThis[Ud]||(globalThis[Ud]=mg().then(b=>globalThis[vl]=b).catch(()=>globalThis[vl]=!1));const yu=(b,D)=>{const P=D?[D]:(0,ne.C6)(),O=[];return P.forEach(j=>{j.container.getProvider(b).instances.forEach(ve=>{O.includes(ve)||O.push(ve)})}),O};function mc(){}class Ng{constructor(D,P=Cf){this.zone=D,this.delegate=P}now(){return this.delegate.now()}schedule(D,P,O){const j=this.zone;return this.delegate.schedule(function(ve){j.runGuarded(()=>{D.apply(this,[ve])})},P,O)}}class _c{constructor(D){this.zone=D,this.task=null}call(D,P){const O=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",mc,{},mc,mc)),P.pipe((0,Af.b)({next:O,complete:O,error:O})).subscribe(D).add(O)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let kg=(()=>{class b{constructor(P){this.ngZone=P,this.outsideAngular=P.runOutsideAngular(()=>new Ng(Zone.current)),this.insideAngular=P.run(()=>new Ng(Zone.current,Rg.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(P){return new(P||b)(p.LFG(p.R0b))},b.\u0275prov=p.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Jo(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function yc(b){return Jo(),function Il(b){return function(P){return(P=P.lift(new _c(b.ngZone))).pipe((0,Pg.R)(b.outsideAngular),(0,_i.Q)(b.insideAngular))}}(Jo())(b)}},2090:(Vt,Ve,U)=>{U.d(Ve,{$s:()=>rt,BH:()=>Ne,G6:()=>Si,L:()=>Te,LL:()=>De,Pz:()=>Be,Sg:()=>tt,UG:()=>Me,US:()=>_e,ZB:()=>X,ZR:()=>et,aH:()=>Qe,b$:()=>Wt,eu:()=>re,hl:()=>ue,jU:()=>ct,m9:()=>xn,ne:()=>vn,pd:()=>Hn,r3:()=>mr,ru:()=>at,tV:()=>Q,uI:()=>Ee,vZ:()=>ns,w1:()=>$n,xO:()=>po,xb:()=>pi,z$:()=>nt,zI:()=>xe,zd:()=>pa});const oe=function(q){const G=[];let ee=0;for(let fe=0;fe<q.length;fe++){let ae=q.charCodeAt(fe);ae<128?G[ee++]=ae:ae<2048?(G[ee++]=ae>>6|192,G[ee++]=63&ae|128):55296==(64512&ae)&&fe+1<q.length&&56320==(64512&q.charCodeAt(fe+1))?(ae=65536+((1023&ae)<<10)+(1023&q.charCodeAt(++fe)),G[ee++]=ae>>18|240,G[ee++]=ae>>12&63|128,G[ee++]=ae>>6&63|128,G[ee++]=63&ae|128):(G[ee++]=ae>>12|224,G[ee++]=ae>>6&63|128,G[ee++]=63&ae|128)}return G},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,G){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ee=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,fe=[];for(let ae=0;ae<q.length;ae+=3){const dt=q[ae],zt=ae+1<q.length,gn=zt?q[ae+1]:0,Rn=ae+2<q.length,Xe=Rn?q[ae+2]:0;let Kn=(15&gn)<<2|Xe>>6,Pi=63&Xe;Rn||(Pi=64,zt||(Kn=64)),fe.push(ee[dt>>2],ee[(3&dt)<<4|gn>>4],ee[Kn],ee[Pi])}return fe.join("")},encodeString(q,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(q):this.encodeByteArray(oe(q),G)},decodeString(q,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(q):function(q){const G=[];let ee=0,fe=0;for(;ee<q.length;){const ae=q[ee++];if(ae<128)G[fe++]=String.fromCharCode(ae);else if(ae>191&&ae<224){const dt=q[ee++];G[fe++]=String.fromCharCode((31&ae)<<6|63&dt)}else if(ae>239&&ae<365){const Rn=((7&ae)<<18|(63&q[ee++])<<12|(63&q[ee++])<<6|63&q[ee++])-65536;G[fe++]=String.fromCharCode(55296+(Rn>>10)),G[fe++]=String.fromCharCode(56320+(1023&Rn))}else{const dt=q[ee++],zt=q[ee++];G[fe++]=String.fromCharCode((15&ae)<<12|(63&dt)<<6|63&zt)}}return G.join("")}(this.decodeStringToByteArray(q,G))},decodeStringToByteArray(q,G){this.init_();const ee=G?this.charToByteMapWebSafe_:this.charToByteMap_,fe=[];for(let ae=0;ae<q.length;){const dt=ee[q.charAt(ae++)],gn=ae<q.length?ee[q.charAt(ae)]:0;++ae;const Xe=ae<q.length?ee[q.charAt(ae)]:64;++ae;const St=ae<q.length?ee[q.charAt(ae)]:64;if(++ae,null==dt||null==gn||null==Xe||null==St)throw new he;fe.push(dt<<2|gn>>4),64!==Xe&&(fe.push(gn<<4&240|Xe>>2),64!==St&&fe.push(Xe<<6&192|St))}return fe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}};class he extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Te=function(q){return function(q){const G=oe(q);return _e.encodeByteArray(G,!0)}(q).replace(/\./g,"")},Q=function(q){try{return _e.decodeString(q,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function X(q,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return G}for(const ee in G)!G.hasOwnProperty(ee)||!We(ee)||(q[ee]=X(q[ee],G[ee]));return q}function We(q){return"__proto__"!==q}const ye=()=>{try{return function Fe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const q=process.env.__FIREBASE_DEFAULTS__;return q?JSON.parse(q):void 0})()||(()=>{if(typeof document>"u")return;let q;try{q=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const G=q&&Q(q[1]);return G&&JSON.parse(G)})()}catch(q){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${q}`)}},Qe=()=>{var q;return null===(q=ye())||void 0===q?void 0:q.config},Be=q=>{var G;return null===(G=ye())||void 0===G?void 0:G[`_${q}`]};class Ne{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,ee)=>{this.resolve=G,this.reject=ee})}wrapCallback(G){return(ee,fe)=>{ee?this.reject(ee):this.resolve(fe),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(ee):G(ee,fe))}}}function tt(q,G){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const fe=G||"demo-project",ae=q.iat||0,dt=q.sub||q.user_id;if(!dt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const zt=Object.assign({iss:`https://securetoken.google.com/${fe}`,aud:fe,iat:ae,exp:ae+3600,auth_time:ae,sub:dt,user_id:dt,firebase:{sign_in_provider:"custom",identities:{}}},q);return[Te(JSON.stringify({alg:"none",type:"JWT"})),Te(JSON.stringify(zt)),""].join(".")}function nt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ee(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nt())}function Me(){var q;const G=null===(q=ye())||void 0===q?void 0:q.forceEnvironment;if("node"===G)return!0;if("browser"===G)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ct(){return"object"==typeof self&&self.self===self}function at(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function Wt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function $n(){const q=nt();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function Si(){return!Me()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ue(){try{return"object"==typeof indexedDB}catch{return!1}}function re(){return new Promise((q,G)=>{try{let ee=!0;const fe="validate-browser-context-for-indexeddb-analytics-module",ae=self.indexedDB.open(fe);ae.onsuccess=()=>{ae.result.close(),ee||self.indexedDB.deleteDatabase(fe),q(!0)},ae.onupgradeneeded=()=>{ee=!1},ae.onerror=()=>{var dt;G((null===(dt=ae.error)||void 0===dt?void 0:dt.message)||"")}}catch(ee){G(ee)}})}function xe(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class et extends Error{constructor(G,ee,fe){super(ee),this.code=G,this.customData=fe,this.name="FirebaseError",Object.setPrototypeOf(this,et.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,De.prototype.create)}}class De{constructor(G,ee,fe){this.service=G,this.serviceName=ee,this.errors=fe}create(G,...ee){const fe=ee[0]||{},ae=`${this.service}/${G}`,dt=this.errors[G],zt=dt?function bt(q,G){return q.replace(Ht,(ee,fe)=>{const ae=G[fe];return null!=ae?String(ae):`<${fe}?>`})}(dt,fe):"Error";return new et(ae,`${this.serviceName}: ${zt} (${ae}).`,fe)}}const Ht=/\{\$([^}]+)}/g;function mr(q,G){return Object.prototype.hasOwnProperty.call(q,G)}function pi(q){for(const G in q)if(Object.prototype.hasOwnProperty.call(q,G))return!1;return!0}function ns(q,G){if(q===G)return!0;const ee=Object.keys(q),fe=Object.keys(G);for(const ae of ee){if(!fe.includes(ae))return!1;const dt=q[ae],zt=G[ae];if(fo(dt)&&fo(zt)){if(!ns(dt,zt))return!1}else if(dt!==zt)return!1}for(const ae of fe)if(!ee.includes(ae))return!1;return!0}function fo(q){return null!==q&&"object"==typeof q}function po(q){const G=[];for(const[ee,fe]of Object.entries(q))Array.isArray(fe)?fe.forEach(ae=>{G.push(encodeURIComponent(ee)+"="+encodeURIComponent(ae))}):G.push(encodeURIComponent(ee)+"="+encodeURIComponent(fe));return G.length?"&"+G.join("&"):""}function pa(q){const G={};return q.replace(/^\?/,"").split("&").forEach(fe=>{if(fe){const[ae,dt]=fe.split("=");G[decodeURIComponent(ae)]=decodeURIComponent(dt)}}),G}function Hn(q){const G=q.indexOf("?");if(!G)return"";const ee=q.indexOf("#",G);return q.substring(G,ee>0?ee:void 0)}function vn(q,G){const ee=new Mt(q,G);return ee.subscribe.bind(ee)}class Mt{constructor(G,ee){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ee,this.task.then(()=>{G(this)}).catch(fe=>{this.error(fe)})}next(G){this.forEachObserver(ee=>{ee.next(G)})}error(G){this.forEachObserver(ee=>{ee.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,ee,fe){let ae;if(void 0===G&&void 0===ee&&void 0===fe)throw new Error("Missing Observer.");ae=function Vn(q,G){if("object"!=typeof q||null===q)return!1;for(const ee of G)if(ee in q&&"function"==typeof q[ee])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:ee,complete:fe},void 0===ae.next&&(ae.next=xi),void 0===ae.error&&(ae.error=xi),void 0===ae.complete&&(ae.complete=xi);const dt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ae.error(this.finalError):ae.complete()}catch{}}),this.observers.push(ae),dt}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let ee=0;ee<this.observers.length;ee++)this.sendOne(ee,G)}sendOne(G,ee){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{ee(this.observers[G])}catch(fe){typeof console<"u"&&console.error&&console.error(fe)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xi(){}function rt(q,G=1e3,ee=2){const fe=G*Math.pow(ee,q),ae=Math.round(.5*fe*(Math.random()-.5)*2);return Math.min(144e5,fe+ae)}function xn(q){return q&&q._delegate?q._delegate:q}},7815:(Vt,Ve,U)=>{var p=U(4650);let ne=null;function F(){return ne}const he=new p.OlP("DocumentToken");let we=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Te(){return(0,p.LFG)(W)}()},providedIn:"platform"}),n})();const Q=new p.OlP("Location Initialized");let W=(()=>{class n extends we{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){X()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){X()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(he))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function We(){return new W((0,p.LFG)(he))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function Fe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Re(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function vt(n){return n&&"?"!==n[0]?"?"+n:n}let be=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(Pt)},providedIn:"root"}),n})();const ye=new p.OlP("appBaseHref");let Pt=(()=>{class n extends be{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(he).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Fe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+vt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const u=this.prepareExternalUrl(i+vt(s));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,s){const u=this.prepareExternalUrl(i+vt(s));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(we),p.LFG(ye,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kt=(()=>{class n extends be{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Fe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let u=this.prepareExternalUrl(i+vt(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,s){let u=this.prepareExternalUrl(i+vt(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(we),p.LFG(ye,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Qe=(()=>{class n{constructor(t){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Re(tt(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+vt(r))}normalize(t){return n.stripTrailingSlash(function Ne(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,tt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+vt(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+vt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=vt,n.joinWithSlash=Fe,n.stripTrailingSlash=Re,n.\u0275fac=function(t){return new(t||n)(p.LFG(be))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Be(){return new Qe((0,p.LFG)(be))}()},providedIn:"root"}),n})();function tt(n){return n.replace(/\/index.html$/,"")}function ma(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}class _a{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zo=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new _a(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===s?void 0:s);else if(null!==s){const l=r.get(s);r.move(l,u),Wu(l,i)}});for(let i=0,s=r.length;i<s;i++){const l=r.get(i).context;l.index=i,l.count=s,l.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Wu(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Wu(n,e){n.context.$implicit=e.item}let si=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new ir,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ln("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ln("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class ir{constructor(){this.$implicit=null,this.ngIf=null}}function ln(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}let sf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function Ks(n){return"server"===n}let uf=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new K_((0,p.LFG)(he),window)}),n})();class K_{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ss(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const u=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=tu(this.window.history)||tu(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function tu(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Yu{}class Io extends class nc extends class _e{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function de(n){ne||(ne=n)}(new Io)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function rl(){return rc=rc||document.querySelector("base"),rc?rc.getAttribute("href"):null}();return null==t?null:function il(n){ic=ic||document.createElement("a"),ic.setAttribute("href",n);const e=ic.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){rc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ma(document.cookie,e)}}let ic,rc=null;const sc=new p.OlP("TRANSITION_ID"),_f=[{provide:p.ip1,useFactory:function Cd(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[sc,he,p.zs3],multi:!0}];let yf=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const wo=new p.OlP("EventManagerPlugins");let ou=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const u=i[s];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(wo),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class oc{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Tg=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Ta=(()=>{class n extends Tg{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const u=this._doc.createElement("style");u.textContent=s,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ad),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ad))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(he))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Ad(n){F().remove(n)}const ac={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ys=/%COMP%/g;function ol(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?ol(n,i,t):(i=i.replace(ys,n),t.push(i))}return t}function al(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ul=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Sd(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case p.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new ey(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case p.ifc.ShadowDom:return new ty(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=ol(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ou),p.LFG(Ta),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Sd{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ac[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(uu(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(uu(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=ac[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ac[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,i&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,al(r)):this.eventManager.addEventListener(e,t,al(r))}}function uu(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ey extends Sd{constructor(e,t,r,i){super(e),this.component=r;const s=ol(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function uc(n){return"_ngcontent-%COMP%".replace(ys,n)}(i+"-"+r.id),this.hostAttr=function sl(n){return"_nghost-%COMP%".replace(ys,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ty extends Sd{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=ol(i.id,i.styles,[]);for(let u=0;u<s.length;u++){const l=document.createElement("style");l.textContent=s[u],this.shadowRoot.appendChild(l)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ny=(()=>{class n extends oc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(he))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const cc=["alt","control","meta","shift"],cE={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Co={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let cu=(()=>{class n extends oc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),u=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,s.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let u="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),u="code."),cc.forEach(y=>{const I=r.indexOf(y);I>-1&&(r.splice(I,1),u+=y+".")}),u+=s,0!=r.length||0===s.length)return null;const f={};return f.domEventName=i,f.fullKey=u,f}static matchEventFullKeyCode(t,r){let i=cE[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),cc.forEach(u=>{u!==i&&(0,Co[u])(t)&&(s+=u+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(he))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const ll=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function ba(){Io.makeCurrent()},multi:!0},{provide:he,useFactory:function du(){return(0,p.RDi)(document),document},deps:[]}]),dl=new p.OlP(""),kn=[{provide:p.rWj,useClass:class su{addToWindow(e){p.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const i=p.dqk.getAllAngularTestabilities();let s=i.length,u=!1;const l=function(f){u=u||f,s--,0==s&&r(u)};i.forEach(function(f){f.whenStable(l)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],If=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function lc(){return new p.qLn},deps:[]},{provide:wo,useClass:ny,multi:!0,deps:[he,p.R0b,p.Lbi]},{provide:wo,useClass:cu,multi:!0,deps:[he]},{provide:ul,useClass:ul,deps:[ou,Ta,p.AFp]},{provide:p.FYo,useExisting:ul},{provide:Tg,useExisting:Ta},{provide:Ta,useClass:Ta,deps:[he]},{provide:ou,useClass:ou,deps:[wo,p.R0b]},{provide:Yu,useClass:yf,deps:[]},[]];let Rd=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:sc,useExisting:p.AFp},_f]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(dl,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[...If,...kn],imports:[sf,p.hGG]}),n})(),Md=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(he))},n.\u0275prov=p.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Da(){return new Md((0,p.LFG)(he))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;const fl_firebaseConfig={apiKey:"AIzaSyBZKgZiU-ed6sff-K8MMcob2NpqdiCSvD8",authDomain:"maroc-seisme.firebaseapp.com",projectId:"maroc-seisme",storageBucket:"maroc-seisme.appspot.com",messagingSenderId:"861103668171",appId:"1:861103668171:web:807a8ae0fe6e33fa1c144e",measurementId:"G-0QX2W1ERBN"};var mi=U(2011),Sg=U(4986),ai=U(9751),Gn=U(8996),Ao=U(7669);function Ft(...n){const e=(0,Ao.yG)(n);return(0,Gn.D)(n,e)}var Wn=U(710),gu=U(8189);function to(...n){return function pl(){return(0,gu.J)(1)}()((0,Gn.D)(n,(0,Ao.yG)(n)))}var wr=U(4482);function pc(...n){const e=(0,Ao.yG)(n);return(0,wr.e)((t,r)=>{(e?to(n,t,e):to(n,t)).subscribe(r)})}var Xt=U(5403);function mu(){return(0,wr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Xt.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var Zt=U(4004);function Fd(n,e,t,r,i){return(s,u)=>{let l=t,f=e,y=0;s.subscribe((0,Xt.x)(u,I=>{const w=y++;f=l?n(f,I,w):(l=!0,I),r&&u.next(f)},i&&(()=>{l&&u.next(f),u.complete()})))}}function vs(n,e){return(0,wr.e)(Fd(n,e,arguments.length>=2,!0))}var gl=U(4671);function Sa(n,e){return n===e}function Fi(n,e){return(0,wr.e)((t,r)=>{let i=0;t.subscribe((0,Xt.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}U(8463),U(6101);var ht,H=U(5861),xa=(U(9752),U(4859)),or=U(1877),Et=U(2090),Ld=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wi={},Es=Es||{},Yt=Ld||self;function _l(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function _u(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var yl="closure_uid_"+(1e9*Math.random()>>>0),Rg=0;function Af(n,e,t){return n.call.apply(n.bind,arguments)}function Pg(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function _i(n,e,t){return(_i=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Af:Pg).apply(null,arguments)}function Ra(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function no(){this.s=this.s,this.o=this.o}no.prototype.s=!1,no.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Cf(n){Object.prototype.hasOwnProperty.call(n,yl)&&n[yl]||(n[yl]=++Rg)}(this)},no.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ud=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function bo(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function El(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(_l(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let u=0;u<s;u++)n[i+u]=r[u]}else n.push(r)}}function Yr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Yr.prototype.h=function(){this.defaultPrevented=!0};var Mg=function(){if(!Yt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Yt.addEventListener("test",()=>{},e),Yt.removeEventListener("test",()=>{},e)}catch{}return n}();function Pa(n){return/^[\s\xa0]*$/.test(n)}function Bd(){var n=Yt.navigator;return n&&(n=n.userAgent)?n:""}function Do(n){return-1!=Bd().indexOf(n)}function yu(n){return yu[" "](n),n}yu[" "]=function(){};var $d,Ng=Do("Opera"),_c=Do("Trident")||Do("MSIE"),kg=Do("Edge"),Jo=kg||_c,jd=Do("Gecko")&&!(-1!=Bd().toLowerCase().indexOf("webkit")&&!Do("Edge"))&&!(Do("Trident")||Do("MSIE"))&&!Do("Edge"),Xo=-1!=Bd().toLowerCase().indexOf("webkit")&&!Do("Edge");function vu(){var n=Yt.document;return n?n.documentMode:void 0}e:{var yc="",Il=function(){var n=Bd();return jd?/rv:([^\);]+)(\)|;)/.exec(n):kg?/Edge\/([\d\.]+)/.exec(n):_c?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Xo?/WebKit\/(\S+)/.exec(n):Ng?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(Il&&(yc=Il?Il[1]:""),_c){var Is=vu();if(null!=Is&&Is>parseFloat(yc)){$d=String(Is);break e}}$d=yc}var D=Yt.document&&_c&&(vu()||parseInt($d,10))||void 0;function P(n,e){if(Yr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(jd){e:{try{yu(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:O[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&P.$.h.call(this)}}var O={2:"touch",3:"pen",4:"mouse"};P.prototype.h=function(){P.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var j="closure_listenable_"+(1e6*Math.random()|0),te=0;function ve(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++te,this.fa=this.ia=!1}function ke(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Ke(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function st(n){const e={};for(const t in n)e[t]=n[t];return e}const Nt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _n(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<Nt.length;s++)t=Nt[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function zn(n){this.src=n,this.g={},this.h=0}function an(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=Ud(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(ke(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Cr(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}zn.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var u=Cr(n,e,r,i);return-1<u?(e=n[u],t||(e.ia=!1)):((e=new ve(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var Ur="closure_lm_"+(1e6*Math.random()|0),en={};function as(n,e,t,r,i){if(r&&r.once)return Og(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)as(n,e[s],t,r,i);return null}return t=Vg(t),n&&n[j]?n.O(e,t,_u(r)?!!r.capture:!!r,i):So(n,e,t,!1,r,i)}function So(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var u=_u(i)?!!i.capture:!!i,l=Tl(n);if(l||(n[Ur]=l=new zn(n)),(t=l.add(e,t,r,u,s)).proxy)return t;if(r=function ro(){const e=Df;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Mg||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Fg(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Og(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Og(n,e[s],t,r,i);return null}return t=Vg(t),n&&n[j]?n.P(e,t,_u(r)?!!r.capture:!!r,i):So(n,e,t,!0,r,i)}function lE(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)lE(n,e[s],t,r,i);else r=_u(r)?!!r.capture:!!r,t=Vg(t),n&&n[j]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Cr(s=n.g[e],t,r,i))&&(ke(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=Tl(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Cr(e,t,r,i)),(t=-1<n?e[n]:null)&&wl(t))}function wl(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[j])an(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Fg(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Tl(e))?(an(t,n),0==t.h&&(t.src=null,e[Ur]=null)):ke(n)}}}function Fg(n){return n in en?en[n]:en[n]="on"+n}function Df(n,e){if(n.fa)n=!0;else{e=new P(e,this);var t=n.listener,r=n.la||n.src;n.ia&&wl(n),n=t.call(r,e)}return n}function Tl(n){return(n=n[Ur])instanceof zn?n:null}var Cl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vg(n){return"function"==typeof n?n:(n[Cl]||(n[Cl]=function(e){return n.handleEvent(e)}),n[Cl])}function ui(){no.call(this),this.i=new zn(this),this.S=this,this.J=null}function Vi(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Yr(e,n);else if(e instanceof Yr)e.target=e.target||n;else{var i=e;_n(e=new Yr(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var u=e.g=t[s];i=Eu(u,r,!0,e)&&i}if(i=Eu(u=e.g=n,r,!0,e)&&i,i=Eu(u,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=Eu(u=e.g=t[s],r,!1,e)&&i}function Eu(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var u=e[s];if(u&&!u.fa&&u.capture==t){var l=u.listener,f=u.la||u.src;u.ia&&an(n.i,u),i=!1!==l.call(f,r)&&i}}return i&&!r.defaultPrevented}ui.prototype[j]=!0,ui.prototype.removeEventListener=function(n,e,t,r){lE(this,n,e,t,r)},ui.prototype.N=function(){if(ui.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)ke(t[r]);delete n.g[e],n.h--}}this.J=null},ui.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ui.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Lg=Yt.JSON.stringify;class cy{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function Ug(){var n=Hd;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}class ly{constructor(){this.h=this.g=null}add(e,t){const r=Sf.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}}var Sf=new cy(()=>new dE,n=>n.reset());class dE{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function vc(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function xf(n){Yt.setTimeout(()=>{throw n},0)}let Ec,xo=!1,Hd=new ly,dy=()=>{const n=Yt.Promise.resolve(void 0);Ec=()=>{n.then(hE)}};var hE=()=>{for(var n;n=Ug();){try{n.h.call(n.g)}catch(t){xf(t)}var e=Sf;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}xo=!1};function Rf(n,e){ui.call(this),this.h=n||1,this.g=e||Yt,this.j=_i(this.qb,this),this.l=Date.now()}function Bg(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function jg(n,e,t){if("function"==typeof n)t&&(n=_i(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=_i(n.handleEvent,n)}return 2147483647<Number(e)?-1:Yt.setTimeout(n,e||0)}function hy(n){n.g=jg(()=>{n.g=null,n.i&&(n.i=!1,hy(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}(ht=Rf.prototype).ga=!1,ht.T=null,ht.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Vi(this,"tick"),this.ga&&(Bg(this),this.start()))}},ht.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ht.N=function(){Rf.$.N.call(this),Bg(this),delete this.g};class fy extends no{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:hy(this)}N(){super.N(),this.g&&(Yt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ic(n){no.call(this),this.h=n,this.g={}}var $g=[];function Pf(n,e,t,r){Array.isArray(t)||(t&&($g[0]=t.toString()),t=$g);for(var i=0;i<t.length;i++){var s=as(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function py(n){Ke(n.g,function(e,t){this.g.hasOwnProperty(t)&&wl(e)},n),n.g={}}function Gd(){this.g=!0}function ws(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function _y(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var u=1;u<i.length;u++)i[u]=""}}}return Lg(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Ic.prototype.N=function(){Ic.$.N.call(this),py(this)},Ic.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Gd.prototype.Ea=function(){this.g=!1},Gd.prototype.info=function(){};var wc={},Nf=null;function Tc(){return Nf=Nf||new ui}function yy(n){Yr.call(this,wc.Ta,n)}function Al(n){const e=Tc();Vi(e,new yy(e))}function kf(n,e){Yr.call(this,wc.STAT_EVENT,n),this.stat=e}function Ki(n){const e=Tc();Vi(e,new kf(e,n))}function zd(n,e){Yr.call(this,wc.Ua,n),this.size=e}function Cc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Yt.setTimeout(function(){n()},e)}wc.Ta="serverreachability",wc.STAT_EVENT="statevent",wc.Ua="timingevent";var Iu={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},qd={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function wu(){}var Vf,Ac={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Tu(){Yr.call(this,"d")}function Hg(){Yr.call(this,"c")}function Lf(){}function Wd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Ic(this),this.P=Kd,this.V=new Rf(n=Jo?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Uf}function Uf(){this.i=null,this.g="",this.h=!1}Lf.prototype.g=function(){return new XMLHttpRequest},Lf.prototype.i=function(){return{}},Vf=new Lf;var Kd=45e3,Cu={},bc={};function Ma(n,e,t){n.L=1,n.v=$f(Po(e)),n.s=t,n.S=!0,vy(n,null)}function vy(n,e){n.G=Date.now(),Dc(n),n.A=Po(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),V(t.i,"t",r),n.C=0,t=n.l.J,n.h=new Uf,n.g=Xd(n.l,t?e:null,!n.s),0<n.O&&(n.M=new fy(_i(n.Pa,n,n.g),n.O)),Pf(n.U,n.g,"readystatechange",n.nb),e=n.I?st(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Al(),function gy(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var u="",l=s.split("&"),f=0;f<l.length;f++){var y=l[f].split("=");if(1<y.length){var I=y[0];y=y[1];var w=I.split("_");u=2<=w.length&&"type"==w[1]?u+(I+"=")+y+"&":u+(I+"=redacted&")}}else u=null;else u=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Ts(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function Zd(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=Ey(n,t),i==bc){4==e&&(n.o=4,Ki(14),r=!1),ws(n.j,n.m,null,"[Incomplete Response]");break}if(i==Cu){n.o=4,Ki(15),ws(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ws(n.j,n.m,i,null),Ro(n,i)}Ts(n)&&i!=bc&&i!=Cu&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ki(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Xg(e),e.M=!0,Ki(11))):(ws(n.j,n.m,t,"[Invalid Chunked Response]"),ka(n),Na(n))}function Ey(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?bc:(t=Number(e.substring(t,r)),isNaN(t)?Cu:(r+=1)+t>e.length?bc:(e=e.slice(r,r+t),n.C=r+t,e))}function Dc(n){n.Y=Date.now()+n.P,Bf(n,n.P)}function Bf(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Cc(_i(n.lb,n),e)}function Qd(n){n.B&&(Yt.clearTimeout(n.B),n.B=null)}function Na(n){0==n.l.H||n.J||yE(n.l,n)}function ka(n){Qd(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,Bg(n.V),py(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Ro(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Qn(t.i,n)))if(!n.K&&Qn(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Au(t),Ry(t)}_E(t),Ki(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=Cc(_i(t.ib,t),6e3));if(1>=sn(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Jd(t,11)}else if((n.K||t.g==n)&&Au(t),!Pa(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.V=y[0],y=y[1],2==t.H)if("c"==y[0]){t.K=y[1],t.pa=y[2];const I=y[3];null!=I&&(t.ra=I,t.l.info("VER="+t.ra));const w=y[4];null!=w&&(t.Ga=w,t.l.info("SVER="+t.Ga));const x=y[5];null!=x&&"number"==typeof x&&0<x&&(t.L=r=1.5*x,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const M=n.g;if(M){const B=M.g?M.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var s=r.i;s.g||-1==B.indexOf("spdy")&&-1==B.indexOf("quic")&&-1==B.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Li(s,s.h),s.h=null))}if(r.F){const Z=M.g?M.g.getResponseHeader("X-HTTP-Session-Id"):null;Z&&(r.Da=Z,tr(r.I,r.F,Z))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var u=n;if((r=t).wa=vE(r,r.J?r.pa:null,r.Y),u.K){Zi(r.i,u);var l=u,f=r.L;f&&l.setTimeout(f),l.B&&(Qd(l),Dc(l)),r.g=u}else Jg(r);0<t.j.length&&Qg(t)}else"stop"!=y[0]&&"close"!=y[0]||Jd(t,7);else 3==t.H&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?Jd(t,7):sA(t):"noop"!=y[0]&&t.h&&t.h.Aa(y),t.A=0)}Al()}catch{}}function zg(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(_l(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Iy(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(_l(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Gg(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(_l(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(ht=Wd.prototype).setTimeout=function(n){this.P=n},ht.nb=function(n){n=n.target;const e=this.M;e&&3==Fa(n)?e.l():this.Pa(n)},ht.Pa=function(n){try{if(n==this.g)e:{const I=Fa(this.g);var e=this.g.Ia();if(this.g.da(),!(3>I)&&(3!=I||Jo||this.g&&(this.h.h||this.g.ja()||mE(this.g)))){this.J||4!=I||7==e||Al(),Qd(this);var t=this.g.da();this.ca=t;t:if(Ts(this)){var r=mE(this.g);n="";var i=r.length,s=4==Fa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ka(this),Na(this);var u="";break t}this.h.i=new Yt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==t,function my(n,e,t,r,i,s,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+u})}(this.j,this.u,this.A,this.m,this.W,I,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var l,f=this.g;if((l=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Pa(l)){var y=l;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Ki(12),ka(this),Na(this);break e}ws(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ro(this,t)}this.S?(Zd(this,I,u),Jo&&this.i&&3==I&&(Pf(this.U,this.V,"tick",this.mb),this.V.start())):(ws(this.j,this.m,u,null),Ro(this,u)),4==I&&ka(this),this.i&&!this.J&&(4==I?yE(this.l,this):(this.i=!1,Dc(this)))}else(function rA(n){const e={};n=(n.g&&2<=Fa(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Pa(n[r]))continue;var t=vc(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function gt(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Ki(12)):(this.o=0,Ki(13)),ka(this),Na(this)}}}catch{}},ht.mb=function(){if(this.g){var n=Fa(this.g),e=this.g.ja();this.C<e.length&&(Qd(this),Zd(this,n,e),this.i&&4!=n&&Dc(this))}},ht.cancel=function(){this.J=!0,ka(this)},ht.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Mf(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Al(),Ki(17)),ka(this),this.o=2,Na(this)):Bf(this,this.Y-n)};var wy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jr(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Jr){this.h=n.h,jf(this,n.j),this.s=n.s,this.g=n.g,ci(this,n.m),this.l=n.l;var e=n.i,t=new m;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),ea(this,t),this.o=n.o}else n&&(e=String(n).match(wy))?(this.h=!1,jf(this,e[1]||"",!0),this.s=Hf(e[2]||""),this.g=Hf(e[3]||"",!0),ci(this,e[4]),this.l=Hf(e[5]||"",!0),ea(this,e[6]||"",!0),this.o=Hf(e[7]||"")):(this.h=!1,this.i=new m(null,this.h))}function Po(n){return new Jr(n)}function jf(n,e,t){n.j=t?Hf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function ci(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function ea(n,e,t){e instanceof m?(n.i=e,function ie(n,e){e&&!n.j&&(E(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(S(this,r),V(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=bl(e,C)),n.i=new m(e,n.h))}function tr(n,e,t){n.i.set(e,t)}function $f(n){return tr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Hf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function bl(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,eA),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function eA(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Jr.prototype.toString=function(){var n=[],e=this.j;e&&n.push(bl(e,fE,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(bl(e,fE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(bl(t,"/"==t.charAt(0)?pE:Cy,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",bl(t,g)),n.join("")};var fE=/[#\/\?@]/g,Cy=/[#\?:]/g,pE=/[#\?]/g,C=/[#\?@]/g,g=/#/g;function m(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function E(n){n.g||(n.g=new Map,n.h=0,n.i&&function Ty(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function S(n,e){E(n),e=z(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function N(n,e){return E(n),e=z(n,e),n.g.has(e)}function V(n,e,t){S(n,e),0<t.length&&(n.i=null,n.g.set(z(n,e),bo(t)),n.h+=t.length)}function z(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function It(n){this.l=n||ut,n=Yt.PerformanceNavigationTiming?0<(n=Yt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Yt.g&&Yt.g.Ka&&Yt.g.Ka()&&Yt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ht=m.prototype).add=function(n,e){E(this),this.i=null,n=z(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ht.forEach=function(n,e){E(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ht.ta=function(){E(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},ht.Z=function(n){E(this);let e=[];if("string"==typeof n)N(this,n)&&(e=e.concat(this.g.get(z(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ht.set=function(n,e){return E(this),this.i=null,N(this,n=z(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ht.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},ht.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),u=this.Z(r);for(r=0;r<u.length;r++){var i=s;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var n,ut=10;function xt(n){return!!n.h||!!n.g&&n.g.size>=n.j}function sn(n){return n.h?1:n.g?n.g.size:0}function Qn(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Li(n,e){n.g?n.g.add(e):n.h=e}function Zi(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Sc(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return bo(n.i)}function qg(){this.g=new class{stringify(n){return Yt.JSON.stringify(n,void 0)}parse(n){return Yt.JSON.parse(n,void 0)}}}function by(n,e,t){const r=t||"";try{zg(n,function(i,s){let u=i;_u(i)&&(u=Lg(i)),e.push(r+s+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Oa(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Dl(n){this.l=n.fc||null,this.j=n.ob||!1}function Sl(n,e){ui.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Yd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}It.prototype.cancel=function(){if(this.i=Sc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Dl.prototype.g=function(){return new Sl(this.l,this.j)},Dl.prototype.i=(n={},function(){return n});var Yd=0;function Br(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Kg(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Zg(n)}function Zg(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ht=Sl.prototype).open=function(n,e){if(this.readyState!=Yd)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Zg(this)},ht.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Yt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ht.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Kg(this)),this.readyState=Yd},ht.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Zg(this)),this.g&&(this.readyState=3,Zg(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Yt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Br(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},ht.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Kg(this):Zg(this),3==this.readyState&&Br(this)}},ht.Za=function(n){this.g&&(this.response=this.responseText=n,Kg(this))},ht.Ya=function(n){this.g&&(this.response=n,Kg(this))},ht.ka=function(){this.g&&Kg(this)},ht.setRequestHeader=function(n,e){this.v.append(n,e)},ht.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ht.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")};var gE=Yt.JSON.parse;function jr(n){ui.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=tA,this.L=this.M=!1}var tA="",oR=/^https?$/i,aR=["POST","PUT"];function nA(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,cR(n),xl(n)}function cR(n){n.F||(n.F=!0,Vi(n,"complete"),Vi(n,"error"))}function lR(n){if(n.h&&typeof Es<"u"&&(!n.C[1]||4!=Fa(n)||2!=n.da()))if(n.v&&4==Fa(n))jg(n.La,0,n);else if(Vi(n,"readystatechange"),4==Fa(n)){n.h=!1;try{const u=n.da();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===u){var i=String(n.I).match(wy)[1]||null;!i&&Yt.self&&Yt.self.location&&(i=Yt.self.location.protocol.slice(0,-1)),r=!oR.test(i?i.toLowerCase():"")}t=r}if(t)Vi(n,"complete"),Vi(n,"success");else{n.m=6;try{var s=2<Fa(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",cR(n)}}finally{xl(n)}}}function xl(n,e){if(n.g){Dy(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Vi(n,"ready");try{t.onreadystatechange=r}catch{}}}function Dy(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Yt.clearTimeout(n.A),n.A=null)}function Fa(n){return n.g?n.g.readyState:0}function mE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case tA:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function iA(n){let e="";return Ke(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Sy(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=iA(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):tr(n,e,t))}function Gf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function xy(n){this.Ga=0,this.j=[],this.l=new Gd,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Gf("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Gf("baseRetryDelayMs",5e3,n),this.hb=Gf("retryDelaySeedMs",1e4,n),this.eb=Gf("forwardChannelMaxRetries",2,n),this.xa=Gf("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new It(n&&n.concurrentRequestLimit),this.Ja=new qg,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function sA(n){if(Py(n),3==n.H){var e=n.W++,t=Po(n.I);if(tr(t,"SID",n.K),tr(t,"RID",e),tr(t,"TYPE","terminate"),Yg(n,t),(e=new Wd(n,n.l,e)).L=2,e.v=$f(Po(t)),t=!1,Yt.navigator&&Yt.navigator.sendBeacon)try{t=Yt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Yt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Xd(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Dc(e)}aA(n)}function Ry(n){n.g&&(Xg(n),n.g.cancel(),n.g=null)}function Py(n){Ry(n),n.u&&(Yt.clearTimeout(n.u),n.u=null),Au(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Yt.clearTimeout(n.m),n.m=null)}function Qg(n){if(!xt(n.i)&&!n.m){n.m=!0;var e=n.Na;Ec||dy(),xo||(Ec(),xo=!0),Hd.add(e,n),n.C=0}}function Rl(n,e){var t;t=e?e.m:n.W++;const r=Po(n.I);tr(r,"SID",n.K),tr(r,"RID",t),tr(r,"AID",n.V),Yg(n,r),n.o&&n.s&&Sy(r,n.o,n.s),t=new Wd(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=My(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Li(n.i,t),Ma(t,r,e)}function Yg(n,e){n.na&&Ke(n.na,function(t,r){tr(e,r,t)}),n.h&&zg({},function(t,r){tr(e,r,t)})}function My(n,e,t){t=Math.min(n.j.length,t);var r=n.h?_i(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const u=["count="+t];-1==s?0<t?(s=i[0].g,u.push("ofs="+s)):s=0:u.push("ofs="+s);let l=!0;for(let f=0;f<t;f++){let y=i[f].g;const I=i[f].map;if(y-=s,0>y)s=Math.max(0,i[f].g-100),l=!1;else try{by(I,u,"req"+y+"_")}catch{r&&r(I)}}if(l){r=u.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function Jg(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Ec||dy(),xo||(Ec(),xo=!0),Hd.add(e,n),n.A=0}}function _E(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Cc(_i(n.Ma,n),Ny(n,n.A)),n.A++,0))}function Xg(n){null!=n.B&&(Yt.clearTimeout(n.B),n.B=null)}function em(n){n.g=new Wd(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Po(n.wa);tr(e,"RID","rpc"),tr(e,"SID",n.K),tr(e,"AID",n.V),tr(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&tr(e,"TO",n.qa),tr(e,"TYPE","xmlhttp"),Yg(n,e),n.o&&n.s&&Sy(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=$f(Po(e)),t.s=null,t.S=!0,vy(t,n)}function Au(n){null!=n.v&&(Yt.clearTimeout(n.v),n.v=null)}function yE(n,e){var t=null;if(n.g==e){Au(n),Xg(n),n.g=null;var r=2}else{if(!Qn(n.i,e))return;t=e.F,Zi(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Vi(r=Tc(),new zd(r,t)),Qg(n)}else Jg(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function oA(n,e){return!(sn(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Cc(_i(n.Na,n,e),Ny(n,n.C)),n.C++,0)))}(n,e)||2==r&&_E(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Jd(n,5);break;case 4:Jd(n,10);break;case 3:Jd(n,6);break;default:Jd(n,2)}}function Ny(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Jd(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=_i(n.pb,n);t||(t=new Jr("//www.google.com/images/cleardot.gif"),Yt.location&&"http"==Yt.location.protocol||jf(t,"https"),$f(t)),function Wg(n,e){const t=new Gd;if(Yt.Image){const r=new Image;r.onload=Ra(Oa,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ra(Oa,t,r,"TestLoadImage: error",!1,e),r.onabort=Ra(Oa,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ra(Oa,t,r,"TestLoadImage: timeout",!1,e),Yt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ki(2);n.H=0,n.h&&n.h.za(e),aA(n),Py(n)}function aA(n){if(n.H=0,n.ma=[],n.h){const e=Sc(n.i);(0!=e.length||0!=n.j.length)&&(El(n.ma,e),El(n.ma,n.j),n.i.i.length=0,bo(n.j),n.j.length=0),n.h.ya()}}function vE(n,e,t){var r=t instanceof Jr?Po(t):new Jr(t);if(""!=r.g)e&&(r.g=e+"."+r.g),ci(r,r.m);else{var i=Yt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Jr(null);r&&jf(s,r),e&&(s.g=e),i&&ci(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&tr(r,t,e),tr(r,"VER",n.ra),Yg(n,r),r}function Xd(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new jr(t&&n.Ha&&!n.va?new Dl({ob:!0}):n.va)).Oa(n.J),e}function ky(){if(_c&&!(10<=Number(D)))throw Error("Environmental error: no available transport.")}function Mo(n,e){ui.call(this),this.g=new xy(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Pa(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Pa(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new zf(this)}function cA(n){Tu.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Oy(){Hg.call(this),this.status=1}function zf(n){this.g=n}function Va(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Fy(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],u=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;u=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(u<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|u>>>10))+((u=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|u>>>10))+((u=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|u>>>10))+((u=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|u>>>10))+((u=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|u>>>12))+((u=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|u>>>9))+((u=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|u>>>17))+((u=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|u>>>17))+((u=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|u>>>17))+((u=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|u>>>11))+((s=(e=t+((u=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|u>>>22))^((i=s+((u=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|u>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(u<<21&4294967295|u>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function nr(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(ht=jr.prototype).Oa=function(n){this.M=n},ht.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Vf.g(),this.C=function Ff(n){return n.h||(n.h=n.i())}(this.u?this.u:Vf),this.g.onreadystatechange=_i(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void nA(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=Yt.FormData&&n instanceof Yt.FormData,!(0<=Ud(aR,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,u]of t)this.g.setRequestHeader(s,u);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Dy(this),0<this.B&&((this.L=function uR(n){return _c&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_i(this.ua,this)):this.A=jg(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){nA(this,s)}},ht.ua=function(){typeof Es<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Vi(this,"timeout"),this.abort(8))},ht.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Vi(this,"complete"),Vi(this,"abort"),xl(this))},ht.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xl(this,!0)),jr.$.N.call(this)},ht.La=function(){this.s||(this.G||this.v||this.l?lR(this):this.kb())},ht.kb=function(){lR(this)},ht.isActive=function(){return!!this.g},ht.da=function(){try{return 2<Fa(this)?this.g.status:-1}catch{return-1}},ht.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ht.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),gE(e)}},ht.Ia=function(){return this.m},ht.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ht=xy.prototype).ra=8,ht.H=1,ht.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Wd(this,this.l,n);let s=this.s;if(this.U&&(s?(s=st(s),_n(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=My(this,i,e),tr(t=Po(this.I),"RID",n),tr(t,"CVER",22),this.F&&tr(t,"X-HTTP-Session-Id",this.F),Yg(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(iA(s)))+"&"+e:this.o&&Sy(t,this.o,s)),Li(this.i,i),this.bb&&tr(t,"TYPE","init"),this.P?(tr(t,"$req",e),tr(t,"SID","null"),i.aa=!0,Ma(i,t,null)):Ma(i,t,e),this.H=2}}else 3==this.H&&(n?Rl(this,n):0==this.j.length||xt(this.i)||Rl(this))},ht.Ma=function(){if(this.u=null,em(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Cc(_i(this.jb,this),n)}},ht.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ki(10),Ry(this),em(this))},ht.ib=function(){null!=this.v&&(this.v=null,Ry(this),_E(this),Ki(19))},ht.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Ki(2)):(this.l.info("Failed to ping google.com"),Ki(1))},ht.isActive=function(){return!!this.h&&this.h.isActive(this)},(ht=function uA(){}.prototype).Ba=function(){},ht.Aa=function(){},ht.za=function(){},ht.ya=function(){},ht.isActive=function(){return!0},ht.Va=function(){},ky.prototype.g=function(n,e){return new Mo(n,e)},Mo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Ki(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=vE(n,null,n.Y),Qg(n)},Mo.prototype.close=function(){sA(this.g)},Mo.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Lg(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Qg(e)},Mo.prototype.N=function(){this.g.h=null,delete this.j,sA(this.g),delete this.g,Mo.$.N.call(this)},zf.prototype.Ba=function(){Vi(this.g,"a")},zf.prototype.Aa=function(n){Vi(this.g,new cA(n))},zf.prototype.za=function(n){Vi(this.g,new Oy)},zf.prototype.ya=function(){Vi(this.g,"b")},Va.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Va.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)Fy(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){Fy(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){Fy(this,r),i=0;break}}this.h=i,this.i+=e},Va.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var dR={};function eh(n){return-128<=n&&128>n?function mc(n,e){var t=dR;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new nr([0|e],0>e?-1:0)}):new nr([0|n],0>n?-1:0)}function bu(n){if(isNaN(n)||!isFinite(n))return qf;if(0>n)return us(bu(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=nh;return new nr(e,0)}var nh=4294967296,qf=eh(0),dA=eh(1),EE=eh(16777216);function xc(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function ta(n){return-1==n.h}function us(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new nr(t,~n.h).add(dA)}function tm(n,e){return n.add(us(e))}function nm(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function rh(n,e){this.g=n,this.h=e}function Wf(n,e){if(xc(e))throw Error("division by zero");if(xc(n))return new rh(qf,qf);if(ta(n))return e=Wf(us(n),e),new rh(us(e.g),us(e.h));if(ta(e))return e=Wf(n,us(e)),new rh(us(e.g),e.h);if(30<n.g.length){if(ta(n)||ta(e))throw Error("slowDivide_ only works with positive integers.");for(var t=dA,r=e;0>=r.X(n);)t=hA(t),r=hA(r);var i=Pl(t,1),s=Pl(r,1);for(r=Pl(r,2),t=Pl(t,2);!xc(r);){var u=s.add(r);0>=u.X(n)&&(i=i.add(t),s=u),r=Pl(r,1),t=Pl(t,1)}return e=tm(n,i.R(e)),new rh(i,e)}for(i=qf;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),u=(s=bu(t)).R(e);ta(u)||0<u.X(n);)u=(s=bu(t-=r)).R(e);xc(s)&&(s=dA),i=i.add(s),n=tm(n,u)}return new rh(i,n)}function hA(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new nr(t,n.h)}function Pl(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new nr(i,n.h)}(ht=nr.prototype).ea=function(){if(ta(this))return-us(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:nh+r)*e,e*=nh}return n},ht.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(xc(this))return"0";if(ta(this))return"-"+us(this).toString(n);for(var e=bu(Math.pow(n,6)),t=this,r="";;){var i=Wf(t,e).g,s=((0<(t=tm(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(xc(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},ht.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},ht.X=function(n){return ta(n=tm(this,n))?-1:xc(n)?0:1},ht.abs=function(){return ta(this)?us(this):this},ht.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),u=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=u>>>16,t[i]=(u&=65535)<<16|(s&=65535)}return new nr(t,-2147483648&t[t.length-1]?-1:0)},ht.R=function(n){if(xc(this)||xc(n))return qf;if(ta(this))return ta(n)?us(this).R(us(n)):us(us(this).R(n));if(ta(n))return us(this.R(us(n)));if(0>this.X(EE)&&0>n.X(EE))return bu(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,u=65535&this.D(r),l=n.D(i)>>>16,f=65535&n.D(i);t[2*r+2*i]+=u*f,nm(t,2*r+2*i),t[2*r+2*i+1]+=s*f,nm(t,2*r+2*i+1),t[2*r+2*i+1]+=u*l,nm(t,2*r+2*i+1),t[2*r+2*i+2]+=s*l,nm(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new nr(t,0)},ht.gb=function(n){return Wf(this,n).h},ht.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new nr(t,this.h&n.h)},ht.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new nr(t,this.h|n.h)},ht.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new nr(t,this.h^n.h)},ky.prototype.createWebChannel=ky.prototype.g,Mo.prototype.send=Mo.prototype.u,Mo.prototype.open=Mo.prototype.m,Mo.prototype.close=Mo.prototype.close,Iu.NO_ERROR=0,Iu.TIMEOUT=8,Iu.HTTP_ERROR=6,qd.COMPLETE="complete",wu.EventType=Ac,Ac.OPEN="a",Ac.CLOSE="b",Ac.ERROR="c",Ac.MESSAGE="d",ui.prototype.listen=ui.prototype.O,jr.prototype.listenOnce=jr.prototype.P,jr.prototype.getLastError=jr.prototype.Sa,jr.prototype.getLastErrorCode=jr.prototype.Ia,jr.prototype.getStatus=jr.prototype.da,jr.prototype.getResponseJson=jr.prototype.Wa,jr.prototype.getResponseText=jr.prototype.ja,jr.prototype.send=jr.prototype.ha,jr.prototype.setWithCredentials=jr.prototype.Oa,Va.prototype.digest=Va.prototype.l,Va.prototype.reset=Va.prototype.reset,Va.prototype.update=Va.prototype.j,nr.prototype.add=nr.prototype.add,nr.prototype.multiply=nr.prototype.R,nr.prototype.modulo=nr.prototype.gb,nr.prototype.compare=nr.prototype.X,nr.prototype.toNumber=nr.prototype.ea,nr.prototype.toString=nr.prototype.toString,nr.prototype.getBits=nr.prototype.D,nr.fromNumber=bu,nr.fromString=function th(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return us(th(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=bu(Math.pow(e,8)),r=qf,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),u=parseInt(n.substring(i,i+s),e);8>s?(s=bu(Math.pow(e,s)),r=r.R(s).add(bu(u))):r=(r=r.R(t)).add(bu(u))}return r};var pA,mR,_R,vR,CE,gA,AE,mA,_A,na,yA,bE,vA,EA,IA,wA,DE,TA,CA,AA,on,SE,xE,RE,bA,DA,SA,ME,Ly,Uy,MA,IR,wR,rm=Wi.createWebChannelTransport=function(){return new ky},hR=Wi.getStatEventTarget=function(){return Tc()},IE=Wi.ErrorCode=Iu,fR=Wi.EventType=qd,pR=Wi.Event=wc,fA=Wi.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},gR=Wi.FetchXmlHttpFactory=Dl,Vy=Wi.WebChannel=wu,Kf=Wi.XhrIo=jr,Rc=Wi.Md5=Va,Zf=Wi.Integer=nr;class Qi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qi.UNAUTHENTICATED=new Qi(null),Qi.GOOGLE_CREDENTIALS=new Qi("google-credentials-uid"),Qi.FIRST_PARTY=new Qi("first-party-uid"),Qi.MOCK_USER=new Qi("mock-user");let ih="9.23.0";const sh=new or.Yd("@firebase/firestore");function OE(){return sh.logLevel}function Ze(n,...e){if(sh.logLevel<=or.in.DEBUG){const t=e.map(FE);sh.debug(`Firestore (${ih}): ${n}`,...t)}}function Xr(n,...e){if(sh.logLevel<=or.in.ERROR){const t=e.map(FE);sh.error(`Firestore (${ih}): ${n}`,...t)}}function Fs(n,...e){if(sh.logLevel<=or.in.WARN){const t=e.map(FE);sh.warn(`Firestore (${ih}): ${n}`,...t)}}function FE(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ct(n="Unexpected state"){const e=`FIRESTORE (${ih}) INTERNAL ASSERTION FAILED: `+n;throw Xr(e),new Error(e)}function jt(n,e){n||Ct()}function mt(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class je extends Et.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class yi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class kA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Qi.UNAUTHENTICATED))}shutdown(){}}class gO{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Qi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class LE{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new gO(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Qi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}function VA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class UE{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=VA(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function nn(n,e){return n<e?-1:n>e?1:0}function Cs(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class xr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new je(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new je(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new je(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new je(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return xr.fromMillis(Date.now())}static fromDate(e){return xr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new xr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?nn(this.nanoseconds,e.nanoseconds):nn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Lt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Lt(e)}static min(){return new Lt(new xr(0,0))}static max(){return new Lt(new xr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class No{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ct(),void 0===r?r=e.length-t:r>e.length-t&&Ct(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===No.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof No?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),u=t.get(i);if(s<u)return-1;if(s>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class An extends No{construct(e,t,r){return new An(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new je(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new An(t)}static emptyPath(){return new An([])}}const LA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rr extends No{construct(e,t,r){return new Rr(e,t,r)}static isValidIdentifier(e){return LA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Rr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new je(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const l=e[i];if("\\"===l){if(i+1===e.length)throw new je(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new je(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else"`"===l?(u=!u,i++):"."!==l||u?(r+=l,i++):(s(),i++)}if(s(),u)throw new je(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rr(t)}static emptyPath(){return new Rr([])}}class ft{constructor(e){this.path=e}static fromPath(e){return new ft(An.fromString(e))}static fromName(e){return new ft(An.fromString(e).popFirst(5))}static empty(){return new ft(An.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===An.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return An.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ft(new An(e.slice()))}}function BA(n){return new ko(n.readTime,n.key,-1)}class ko{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ko(Lt.min(),ft.empty(),-1)}static max(){return new ko(Lt.max(),ft.empty(),-1)}}function $E(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ft.comparator(n.documentKey,e.documentKey),0!==t?t:nn(n.largestBatchId,e.largestBatchId))}const jA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";function ah(n){return(pA=pA||(0,H.Z)(function*(e){if(e.code!==pe.FAILED_PRECONDITION||e.message!==jA)throw e;Ze("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let i=0,s=0,u=!1;e.forEach(l=>{++i,l.next(()=>{++s,u&&s===i&&t()},f=>r(f))}),u=!0,s===i&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(i=>i?le.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new le((r,i)=>{const s=e.length,u=new Array(s);let l=0;for(let f=0;f<s;f++){const y=f;t(e[y]).next(I=>{u[y]=I,++l,l===s&&r(u)},I=>i(I))}})}static doWhile(e,t){return new le((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}function Su(n){return"IndexedDbTransactionError"===n.name}let ia=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function jy(n){return null==n}function $y(n){return 0===n&&1/n==-1/0}function KA(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Pc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ZA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ar{constructor(e,t){this.comparator=e,this.root=t||ls.EMPTY}insert(e,t){return new ar(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ls.BLACK,null,null))}remove(e){return new ar(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ls.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new um(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new um(this.root,e,this.comparator,!1)}getReverseIterator(){return new um(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new um(this.root,e,this.comparator,!0)}}class um{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ls{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ls.RED,this.left=i??ls.EMPTY,this.right=s??ls.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ls(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ls.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ls.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ls.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ls.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ct();const e=this.left.check();if(e!==this.right.check())throw Ct();return e+(this.isRed()?0:1)}}ls.EMPTY=null,ls.RED=!0,ls.BLACK=!1,ls.EMPTY=new class{constructor(){this.size=0}get key(){throw Ct()}get value(){throw Ct()}get color(){throw Ct()}get left(){throw Ct()}get right(){throw Ct()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ls(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class In{constructor(e){this.comparator=e,this.data=new ar(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new XE(this.data.getIterator())}getIteratorFrom(e){return new XE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof In)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new In(this.comparator);return t.data=e,t}}class XE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Oo{constructor(e){this.fields=e,e.sort(Rr.comparator)}static empty(){return new Oo([])}unionWith(e){let t=new In(Rr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Oo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Cs(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class QA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class vi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new QA("Invalid base64 string: "+i):i}}(e);return new vi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new vi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vi.EMPTY_BYTE_STRING=new vi("");const NR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kl(n){if(jt(!!n),"string"==typeof n){let e=0;const t=NR.exec(n);if(jt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ei(n.seconds),nanos:ei(n.nanos)}}function ei(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function xu(n){return"string"==typeof n?vi.fromBase64String(n):vi.fromUint8Array(n)}function Ky(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function cm(n){const e=n.mapValue.fields.__previous_value__;return Ky(e)?cm(e):e}function lm(n){const e=kl(n.mapValue.fields.__local_write_time__.timestampValue);return new xr(e.seconds,e.nanos)}class kR{constructor(e,t,r,i,s,u,l,f,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=l,this.longPollingOptions=f,this.useFetchStreams=y}}class Mc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Mc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Mc&&e.projectId===this.projectId&&e.database===this.database}}const Nc_mapValue={fields:{__type__:{stringValue:"__max__"}}};function ds(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ky(n)?4:FR(n)?9007199254740991:10:Ct()}function sa(n,e){if(n===e)return!0;const t=ds(n);if(t!==ds(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lm(n).isEqual(lm(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=kl(r.timestampValue),u=kl(i.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,xu(n.bytesValue).isEqual(xu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return ei(r.geoPointValue.latitude)===ei(i.geoPointValue.latitude)&&ei(r.geoPointValue.longitude)===ei(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return ei(r.integerValue)===ei(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=ei(r.doubleValue),u=ei(i.doubleValue);return s===u?$y(s)===$y(u):isNaN(s)&&isNaN(u)}return!1}(n,e);case 9:return Cs(n.arrayValue.values||[],e.arrayValue.values||[],sa);case 10:return function(r,i){const s=r.mapValue.fields||{},u=i.mapValue.fields||{};if(KA(s)!==KA(u))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(void 0===u[l]||!sa(s[l],u[l])))return!1;return!0}(n,e);default:return Ct()}var i}function dm(n,e){return void 0!==(n.values||[]).find(t=>sa(t,e))}function Ol(n,e){if(n===e)return 0;const t=ds(n),r=ds(e);if(t!==r)return nn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return nn(n.booleanValue,e.booleanValue);case 2:return function(i,s){const u=ei(i.integerValue||i.doubleValue),l=ei(s.integerValue||s.doubleValue);return u<l?-1:u>l?1:u===l?0:isNaN(u)?isNaN(l)?0:-1:1}(n,e);case 3:return OR(n.timestampValue,e.timestampValue);case 4:return OR(lm(n),lm(e));case 5:return nn(n.stringValue,e.stringValue);case 6:return function(i,s){const u=xu(i),l=xu(s);return u.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const u=i.split("/"),l=s.split("/");for(let f=0;f<u.length&&f<l.length;f++){const y=nn(u[f],l[f]);if(0!==y)return y}return nn(u.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const u=nn(ei(i.latitude),ei(s.latitude));return 0!==u?u:nn(ei(i.longitude),ei(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const u=i.values||[],l=s.values||[];for(let f=0;f<u.length&&f<l.length;++f){const y=Ol(u[f],l[f]);if(y)return y}return nn(u.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Nc_mapValue&&s===Nc_mapValue)return 0;if(i===Nc_mapValue)return 1;if(s===Nc_mapValue)return-1;const u=i.fields||{},l=Object.keys(u),f=s.fields||{},y=Object.keys(f);l.sort(),y.sort();for(let I=0;I<l.length&&I<y.length;++I){const w=nn(l[I],y[I]);if(0!==w)return w;const x=Ol(u[l[I]],f[y[I]]);if(0!==x)return x}return nn(l.length,y.length)}(n.mapValue,e.mapValue);default:throw Ct()}}function OR(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return nn(n,e);const t=kl(n),r=kl(e),i=nn(t.seconds,r.seconds);return 0!==i?i:nn(t.nanos,r.nanos)}function uh(n){return tI(n)}function tI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=kl(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?xu(n.bytesValue).toBase64():"referenceValue"in n?ft.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const u of r.values||[])s?s=!1:i+=",",i+=tI(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",u=!0;for(const l of i)u?u=!1:s+=",",s+=`${l}:${tI(r.fields[l])}`;return s+"}"}(n.mapValue):Ct();var e}function ch(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function hm(n){return!!n&&"integerValue"in n}function fm(n){return!!n&&"arrayValue"in n}function YA(n){return!!n&&"nullValue"in n}function pm(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function np(n){return!!n&&"mapValue"in n}function Fl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Pc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Fl(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Fl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function FR(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class Yi{constructor(e){this.value=e}static empty(){return new Yi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!np(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fl(t)}setAll(e){let t=Rr.emptyPath(),r={},i=[];e.forEach((u,l)=>{if(!t.isImmediateParentOf(l)){const f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=l.popLast()}u?r[l.lastSegment()]=Fl(u):i.push(l.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());np(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return sa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];np(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Pc(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Yi(Fl(this.value))}}function sI(n){const e=[];return Pc(n.fields,(t,r)=>{const i=new Rr([t]);if(np(r)){const s=sI(r.mapValue).fields;if(0===s.length)e.push(i);else for(const u of s)e.push(i.child(u))}else e.push(i)}),new Oo(e)}class ur{constructor(e,t,r,i,s,u,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=u,this.documentState=l}static newInvalidDocument(e){return new ur(e,0,Lt.min(),Lt.min(),Lt.min(),Yi.empty(),0)}static newFoundDocument(e,t,r,i){return new ur(e,1,t,Lt.min(),r,i,0)}static newNoDocument(e,t){return new ur(e,2,t,Lt.min(),Lt.min(),Yi.empty(),0)}static newUnknownDocument(e,t){return new ur(e,3,t,Lt.min(),Lt.min(),Yi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Lt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Lt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ur&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ur(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class As{constructor(e,t){this.position=e,this.inclusive=t}}function gm(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],u=n.position[i];if(r=s.field.isKeyField()?ft.comparator(ft.fromName(u.referenceValue),t.key):Ol(u,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function mm(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!sa(n.position[t],e.position[t]))return!1;return!0}class Ru{constructor(e,t="asc"){this.field=e,this.dir=t}}function VR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Yy{}class wn extends Yy{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new BR(e,t,r):"array-contains"===t?new cI(e,r):"in"===t?new nb(e,r):"not-in"===t?new jR(e,r):"array-contains-any"===t?new $R(e,r):new wn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new eb(e,r):new uI(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ol(t,this.value)):null!==t&&ds(this.value)===ds(t)&&this.matchesComparison(Ol(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ct()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Yn extends Yy{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Yn(e,t)}matches(e){return rp(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function rp(n){return"and"===n.op}function oI(n){return function LR(n){for(const e of n.filters)if(e instanceof Yn)return!1;return!0}(n)&&rp(n)}function aI(n){if(n instanceof wn)return n.field.canonicalString()+n.op.toString()+uh(n.value);if(oI(n))return n.filters.map(e=>aI(e)).join(",");{const e=n.filters.map(t=>aI(t)).join(",");return`${n.op}(${e})`}}function UR(n,e){return n instanceof wn?(t=n,(r=e)instanceof wn&&t.op===r.op&&t.field.isEqual(r.field)&&sa(t.value,r.value)):n instanceof Yn?function(t,r){return r instanceof Yn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,s,u)=>i&&UR(s,r.filters[u]),!0)}(n,e):void Ct();var t,r}function XA(n){return n instanceof wn?`${(e=n).field.canonicalString()} ${e.op} ${uh(e.value)}`:n instanceof Yn?function(e){return e.op.toString()+" {"+e.getFilters().map(XA).join(" ,")+"}"}(n):"Filter";var e}class BR extends wn{constructor(e,t,r){super(e,t,r),this.key=ft.fromName(r.referenceValue)}matches(e){const t=ft.comparator(e.key,this.key);return this.matchesComparison(t)}}class eb extends wn{constructor(e,t){super(e,"in",t),this.keys=tb(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class uI extends wn{constructor(e,t){super(e,"not-in",t),this.keys=tb(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function tb(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ft.fromName(r.referenceValue))}class cI extends wn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fm(t)&&dm(t.arrayValue,this.value)}}class nb extends wn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&dm(this.value.arrayValue,t)}}class jR extends wn{constructor(e,t){super(e,"not-in",t)}matches(e){if(dm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!dm(this.value.arrayValue,t)}}class $R extends wn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>dm(this.value.arrayValue,r))}}class HR{constructor(e,t=null,r=[],i=[],s=null,u=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=u,this.endAt=l,this.dt=null}}function lI(n,e=null,t=[],r=[],i=null,s=null,u=null){return new HR(n,e,t,r,i,s,u)}function dh(n){const e=mt(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>aI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),jy(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>uh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>uh(r)).join(",")),e.dt=t}return e.dt}function Vl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!VR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!UR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!mm(n.startAt,e.startAt)&&mm(n.endAt,e.endAt)}function Pu(n){return ft.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class kc{constructor(e,t=null,r=[],i=[],s=null,u="F",l=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=u,this.startAt=l,this.endAt=f,this.wt=null,this._t=null}}function sp(n){return new kc(n)}function Ua(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function hh(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Ui(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Oc(n){return null!==n.collectionGroup}function Mu(n){const e=mt(n);if(null===e.wt){e.wt=[];const t=Ui(e),r=hh(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Ru(t)),e.wt.push(new Ru(Rr.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Ru(Rr.keyField(),s))}}}return e.wt}function pr(n){const e=mt(n);if(!e._t)if("F"===e.limitType)e._t=lI(e.path,e.collectionGroup,Mu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Mu(e))t.push(new Ru(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new As(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new As(e.startAt.position,e.startAt.inclusive):null;e._t=lI(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function _m(n,e){e.getFirstInequalityField(),Ui(n);const t=n.filters.concat([e]);return new kc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Fc(n,e,t){return new kc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Nu(n,e){return Vl(pr(n),pr(e))&&n.limitType===e.limitType}function fh(n){return`${dh(pr(n))}|lt:${n.limitType}`}function Ll(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>XA(r)).join(", ")}]`),jy(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>uh(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>uh(r)).join(",")),`Target(${t})`}(pr(n))}; limitType=${n.limitType})`}function ku(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ft.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Mu(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,u){const l=gm(i,s,u);return i.inclusive?l<=0:l<0}(t.startAt,Mu(t),r)||t.endAt&&!function(i,s,u){const l=gm(i,s,u);return i.inclusive?l>=0:l>0}(t.endAt,Mu(t),r)));var t,r}function gh(n){return(e,t)=>{let r=!1;for(const i of Mu(n)){const s=op(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function op(n,e,t){const r=n.field.isKeyField()?ft.comparator(e.key,t.key):function(i,s,u){const l=s.data.field(i),f=u.data.field(i);return null!==l&&null!==f?Ol(l,f):Ct()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ct()}}class io{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Pc(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return ZA(this.inner)}size(){return this.innerSize}}const ib=new ar(ft.comparator);function Vs(){return ib}const hI=new ar(ft.comparator);function ap(...n){let e=hI;for(const t of n)e=e.insert(t.key,t);return e}function fI(n){let e=hI;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ba(){return up()}function pI(){return up()}function up(){return new io(n=>n.toString(),(n,e)=>n.isEqual(e))}const sb=new ar(ft.comparator),GR=new In(ft.comparator);function dn(...n){let e=GR;for(const t of n)e=e.add(t);return e}const ob=new In(nn);function ab(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$y(e)?"-0":e}}function Xy(n){return{integerValue:""+n}}function ev(n,e){return function DR(n){return"number"==typeof n&&Number.isInteger(n)&&!$y(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?Xy(e):ab(n,e)}class tv{constructor(){this._=void 0}}function nv(n,e,t){return n instanceof cp?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Ky(i)&&(i=cm(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Ou?ym(n,e):n instanceof Ul?mI(n,e):function(r,i){const s=iv(r,i),u=_I(s)+_I(r.gt);return hm(s)&&hm(r.gt)?Xy(u):ab(r.serializer,u)}(n,e)}function rv(n,e,t){return n instanceof Ou?ym(n,e):n instanceof Ul?mI(n,e):t}function iv(n,e){return n instanceof Bl?hm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class cp extends tv{}class Ou extends tv{constructor(e){super(),this.elements=e}}function ym(n,e){const t=yI(e);for(const r of n.elements)t.some(i=>sa(i,r))||t.push(r);return{arrayValue:{values:t}}}class Ul extends tv{constructor(e){super(),this.elements=e}}function mI(n,e){let t=yI(e);for(const r of n.elements)t=t.filter(i=>!sa(i,r));return{arrayValue:{values:t}}}class Bl extends tv{constructor(e,t){super(),this.serializer=e,this.gt=t}}function _I(n){return ei(n.integerValue||n.doubleValue)}function yI(n){return fm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class zR{constructor(e,t){this.version=e,this.transformResults=t}}class Ar{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ar}static exists(e){return new Ar(void 0,e)}static updateTime(e){return new Ar(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Em{}function vI(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new _h(n.key,Ar.none()):new jl(n.key,n.data,Ar.none());{const t=n.data,r=Yi.empty();let i=new In(Rr.comparator);for(let s of e.fields)if(!i.has(s)){let u=t.field(s);null===u&&s.length>1&&(s=s.popLast(),u=t.field(s)),null===u?r.delete(s):r.set(s,u),i=i.add(s)}return new Fu(n.key,r,new Oo(i.toArray()),Ar.none())}}function qR(n,e,t){n instanceof jl?function(r,i,s){const u=r.value.clone(),l=wI(r.fieldTransforms,i,s.transformResults);u.setAll(l),i.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Fu?function(r,i,s){if(!vm(r.precondition,i))return void i.convertToUnknownDocument(s.version);const u=wI(r.fieldTransforms,i,s.transformResults),l=i.data;l.setAll(II(r)),l.setAll(u),i.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Im(n,e,t,r){return n instanceof jl?function(i,s,u,l){if(!vm(i.precondition,s))return u;const f=i.value.clone(),y=TI(i.fieldTransforms,l,s);return f.setAll(y),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof Fu?function(i,s,u,l){if(!vm(i.precondition,s))return u;const f=TI(i.fieldTransforms,l,s),y=s.data;return y.setAll(II(i)),y.setAll(f),s.convertToFoundDocument(s.version,y).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(I=>I.field))}(n,e,t,r):(u=t,vm(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):u);var s,u}function WR(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=iv(r.transform,i||null);null!=s&&(null===t&&(t=Yi.empty()),t.set(r.field,s))}return t||null}function EI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Cs(t,r,(i,s)=>function ub(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Ou&&r instanceof Ou||t instanceof Ul&&r instanceof Ul?Cs(t.elements,r.elements,sa):t instanceof Bl&&r instanceof Bl?sa(t.gt,r.gt):t instanceof cp&&r instanceof cp);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class jl extends Em{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Fu extends Em{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function II(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function wI(n,e,t){const r=new Map;jt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],u=s.transform,l=e.data.field(s.field);r.set(s.field,rv(u,l,t[i]))}return r}function TI(n,e,t){const r=new Map;for(const i of n){const s=i.transform,u=t.data.field(i.field);r.set(i.field,nv(s,u,e))}return r}class _h extends Em{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sv extends Em{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ov{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&qR(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Im(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Im(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=pI();return this.mutations.forEach(i=>{const s=e.get(i.key),u=s.overlayedDocument;let l=this.applyToLocalView(u,s.mutatedFields);l=t.has(i.key)?null:l;const f=vI(u,l);null!==f&&r.set(i.key,f),u.isValidDocument()||u.convertToNoDocument(Lt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),dn())}isEqual(e){return this.batchId===e.batchId&&Cs(this.mutations,e.mutations,(t,r)=>EI(t,r))&&Cs(this.baseMutations,e.baseMutations,(t,r)=>EI(t,r))}}class av{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){jt(e.mutations.length===r.length);let i=sb;const s=e.mutations;for(let u=0;u<s.length;u++)i=i.insert(s[u].key,r[u].version);return new av(e,t,r,i)}}class cb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ZR{constructor(e,t){this.count=e,this.unchangedNames=t}}var li,Mn;function Ei(n){switch(n){default:return Ct();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function CI(n){if(void 0===n)return Xr("GRPC error has no .code"),pe.UNKNOWN;switch(n){case li.OK:return pe.OK;case li.CANCELLED:return pe.CANCELLED;case li.UNKNOWN:return pe.UNKNOWN;case li.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case li.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case li.INTERNAL:return pe.INTERNAL;case li.UNAVAILABLE:return pe.UNAVAILABLE;case li.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case li.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case li.NOT_FOUND:return pe.NOT_FOUND;case li.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case li.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case li.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case li.ABORTED:return pe.ABORTED;case li.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case li.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case li.DATA_LOSS:return pe.DATA_LOSS;default:return Ct()}}(Mn=li||(li={}))[Mn.OK=0]="OK",Mn[Mn.CANCELLED=1]="CANCELLED",Mn[Mn.UNKNOWN=2]="UNKNOWN",Mn[Mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mn[Mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mn[Mn.NOT_FOUND=5]="NOT_FOUND",Mn[Mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mn[Mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mn[Mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mn[Mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mn[Mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mn[Mn.ABORTED=10]="ABORTED",Mn[Mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mn[Mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mn[Mn.INTERNAL=13]="INTERNAL",Mn[Mn.UNAVAILABLE=14]="UNAVAILABLE",Mn[Mn.DATA_LOSS=15]="DATA_LOSS";class AI{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return uv}static getOrCreateInstance(){return null===uv&&(uv=new AI),uv}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let uv=null;const QR=new Zf([4294967295,4294967295],0);function DI(n){const e=function bI(){return new TextEncoder}().encode(n),t=new Rc;return t.update(e),new Uint8Array(t.digest())}function SI(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Zf([t,r],0),new Zf([i,s],0)]}class $l{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new wm(`Invalid padding: ${t}`);if(r<0)throw new wm(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new wm(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new wm(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Zf.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(Zf.fromNumber(r)));return 1===i.compare(QR)&&(i=new Zf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=DI(e),[r,i]=SI(t);for(let s=0;s<this.hashCount;s++){const u=this.Et(r,i,s);if(!this.At(u))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),u=new $l(s,i,t);return r.forEach(l=>u.insert(l)),u}insert(e){if(0===this.It)return;const t=DI(e),[r,i]=SI(t);for(let s=0;s<this.hashCount;s++){const u=this.Et(r,i,s);this.Rt(u)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class wm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Tm{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,lp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Tm(Lt.min(),i,new ar(nn),Vs(),dn())}}class lp{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new lp(r,t,dn(),dn(),dn())}}class cv{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class xI{constructor(e,t){this.targetId=e,this.Vt=t}}class YR{constructor(e,t,r=vi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class RI{constructor(){this.St=0,this.Dt=lb(),this.Ct=vi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=dn(),t=dn(),r=dn();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ct()}}),new lp(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=lb()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class PI{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Vs(),this.zt=ja(),this.Wt=new ar(nn)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:Ct()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const u=s.target;if(Pu(u))if(0===i){const l=new ft(u.path);this.Yt(r,l,ur.newNoDocument(l,Lt.min()))}else jt(1===i);else{const l=this.ie(r);if(l!==i){const f=this.re(e,l);0!==f&&(this.ee(r),this.Wt=this.Wt.insert(r,2===f?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=AI.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(y,I,w){var x,M,B,Z,J,me;const Oe={localCacheCount:I,existenceFilterCount:w.count},Ie=w.unchangedNames;return Ie&&(Oe.bloomFilter={applied:0===y,hashCount:null!==(x=Ie?.hashCount)&&void 0!==x?x:0,bitmapLength:null!==(Z=null===(B=null===(M=Ie?.bits)||void 0===M?void 0:M.bitmap)||void 0===B?void 0:B.length)&&void 0!==Z?Z:0,padding:null!==(me=null===(J=Ie?.bits)||void 0===J?void 0:J.padding)&&void 0!==me?me:0}),Oe}(f,l,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:u=0},hashCount:l=0}=r;let f,y;try{f=xu(s).toUint8Array()}catch(I){if(I instanceof QA)return Fs("Decoding the base64 bloom filter in existence filter failed ("+I.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw I}try{y=new $l(f,u,l)}catch(I){return Fs(I instanceof wm?"BloomFilter error: ":"Applying bloom filter failed: ",I),1}return 0===y.It?1:i!==t-this.oe(e.targetId,y)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const u=this.Gt.ue(),l=`projects/${u.projectId}/databases/${u.database}/documents/${s.path.canonicalString()}`;t.vt(l)||(this.Yt(e,s,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((s,u)=>{const l=this.se(u);if(l){if(s.current&&Pu(l.target)){const f=new ft(l.target.path);null!==this.jt.get(f)||this.ae(u,f)||this.Yt(u,f,ur.newNoDocument(f,e))}s.Mt&&(t.set(u,s.Ot()),s.Ft())}});let r=dn();this.zt.forEach((s,u)=>{let l=!0;u.forEachWhile(f=>{const y=this.se(f);return!y||"TargetPurposeLimboResolution"===y.purpose||(l=!1,!1)}),l&&(r=r.add(s))}),this.jt.forEach((s,u)=>u.setReadTime(e));const i=new Tm(e,t,this.Wt,this.jt,r);return this.jt=Vs(),this.zt=ja(),this.Wt=new ar(nn),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new RI,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new In(nn),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ze("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new RI),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function ja(){return new ar(ft.comparator)}function lb(){return new ar(ft.comparator)}const JR=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Vu=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),$a=(()=>({and:"AND",or:"OR"}))();class Ha{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function lv(n,e){return n.useProto3Json||jy(e)?e:{value:e}}function yh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function db(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function XR(n,e){return yh(n,e.toTimestamp())}function di(n){return jt(!!n),Lt.fromTimestamp(function(e){const t=kl(e);return new xr(t.seconds,t.nanos)}(n))}function MI(n,e){return(t=n,new An(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function dv(n){const e=An.fromString(n);return jt(Eb(e)),e}function Vc(n,e){return MI(n.databaseId,e.path)}function Lu(n,e){const t=dv(e);if(t.get(1)!==n.databaseId.projectId)throw new je(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new je(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ft(NI(t))}function hv(n,e){return MI(n.databaseId,e)}function dp(n){return new An(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function NI(n){return jt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Cm(n,e,t){return{name:Vc(n,e),fields:t.value.mapValue.fields}}function OI(n,e){return{documents:[hv(n,e.path)]}}function fv(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=hv(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=hv(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(f){if(0!==f.length)return vb(Yn.create(f,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(f){if(0!==f.length)return f.map(y=>{return{field:Hl((I=y).field),direction:_b(I.dir)};var I})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const u=lv(n,e.limit);var l,f;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt={before:!(f=e.endAt).inclusive,values:f.position}),t}function FI(n){let e=function hb(n){const e=dv(n);return 4===e.length?An.emptyPath():NI(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){jt(1===r);const I=t.from[0];I.allDescendants?i=I.collectionId:e=e.child(I.collectionId)}let s=[];t.where&&(s=function(I){const w=VI(I);return w instanceof Yn&&oI(w)?w.getFilters():[w]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(I=>{return new Ru(fp((w=I).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction));var w}));let l=null;t.limit&&(l=function(I){let w;return w="object"==typeof I?I.value:I,jy(w)?null:w}(t.limit));let f=null;var I;t.startAt&&(f=new As((I=t.startAt).values||[],!!I.before));let y=null;return t.endAt&&(y=function(I){return new As(I.values||[],!I.before)}(t.endAt)),function Jy(n,e,t,r,i,s,u,l){return new kc(n,e,t,r,i,s,u,l)}(e,i,u,s,l,"F",f,y)}function VI(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=fp(e.unaryFilter.field);return wn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=fp(e.unaryFilter.field);return wn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=fp(e.unaryFilter.field);return wn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=fp(e.unaryFilter.field);return wn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Ct()}}(n):void 0!==n.fieldFilter?wn.create(fp((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ct()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Yn.create(e.compositeFilter.filters.map(t=>VI(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Ct()}}(e.compositeFilter.op))}(n):Ct();var e}function _b(n){return JR[n]}function yb(n){return Vu[n]}function eP(n){return $a[n]}function Hl(n){return{fieldPath:n.canonicalString()}}function fp(n){return Rr.fromServerFormat(n.fieldPath)}function vb(n){return n instanceof wn?function(e){if("=="===e.op){if(pm(e.value))return{unaryFilter:{field:Hl(e.field),op:"IS_NAN"}};if(YA(e.value))return{unaryFilter:{field:Hl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(pm(e.value))return{unaryFilter:{field:Hl(e.field),op:"IS_NOT_NAN"}};if(YA(e.value))return{unaryFilter:{field:Hl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hl(e.field),op:yb(e.op),value:e.value}}}(n):n instanceof Yn?function(e){const t=e.getFilters().map(r=>vb(r));return 1===t.length?t[0]:{compositeFilter:{op:eP(e.op),filters:t}}}(n):Ct()}function tP(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Eb(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Lc{constructor(e,t,r,i,s=Lt.min(),u=Lt.min(),l=vi.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=l,this.expectedCount=f}withSequenceNumber(e){return new Lc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Lc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Lc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Lc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ib{constructor(e){this.fe=e}}function LI(n){const e=FI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Fc(e,e.limit,"L"):e}class Gl{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(ei(e.integerValue));else if("doubleValue"in e){const r=ei(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),$y(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(xu(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?FR(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Ct()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),ft.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}Gl.Ve=new Gl;class _v{constructor(){this.rn=new gp}addToCollectionParentIndex(e,t){return this.rn.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(ko.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(ko.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class gp{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new In(An.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new In(An.comparator)).toArray()}}class hs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new hs(e,hs.DEFAULT_COLLECTION_PERCENTILE,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}hs.DEFAULT_COLLECTION_PERCENTILE=10,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hs.DEFAULT=new hs(41943040,hs.DEFAULT_COLLECTION_PERCENTILE,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hs.DISABLED=new hs(-1,0,0);class Uu{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Uu(0)}static Mn(){return new Uu(-1)}}class Vb{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Rm{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Im(r.mutation,i,Oo.empty(),xr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,dn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=dn()){const i=Ba();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let u=ap();return s.forEach((l,f)=>{u=u.insert(l,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Ba();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,dn()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((u,l)=>{t.set(u,l)})})}computeViews(e,t,r,i){let s=Vs();const u=up(),l=up();return t.forEach((f,y)=>{const I=r.get(y.key);i.has(y.key)&&(void 0===I||I.mutation instanceof Fu)?s=s.insert(y.key,y):void 0!==I?(u.set(y.key,I.mutation.getFieldMask()),Im(I.mutation,y,I.mutation.getFieldMask(),xr.now())):u.set(y.key,Oo.empty())}),this.recalculateAndSaveOverlays(e,s).next(f=>(f.forEach((y,I)=>u.set(y,I)),t.forEach((y,I)=>{var w;return l.set(y,new Vb(I,null!==(w=u.get(y))&&void 0!==w?w:null))}),l))}recalculateAndSaveOverlays(e,t){const r=up();let i=new ar((u,l)=>u-l),s=dn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const l of u)l.keys().forEach(f=>{const y=t.get(f);if(null===y)return;let I=r.get(f)||Oo.empty();I=l.applyToLocalView(y,I),r.set(f,I);const w=(i.get(l.batchId)||dn()).add(f);i=i.insert(l.batchId,w)})}).next(()=>{const u=[],l=i.getReverseIterator();for(;l.hasNext();){const f=l.getNext(),y=f.key,I=f.value,w=pI();I.forEach(x=>{if(!s.has(x)){const M=vI(t.get(x),r.get(x));null!==M&&w.set(x,M),s=s.add(x)}}),u.push(this.documentOverlayCache.saveOverlays(e,y,w))}return le.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return ft.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Oc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const u=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):le.resolve(Ba());let l=-1,f=s;return u.next(y=>le.forEach(y,(I,w)=>(l<w.largestBatchId&&(l=w.largestBatchId),s.get(I)?le.resolve():this.remoteDocumentCache.getEntry(e,I).next(x=>{f=f.insert(I,x)}))).next(()=>this.populateOverlays(e,y,s)).next(()=>this.computeViews(e,f,y,dn())).next(I=>({batchId:l,changes:fI(I)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ft(t)).next(r=>{let i=ap();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=ap();return this.indexManager.getCollectionParents(e,i).next(u=>le.forEach(u,l=>{const f=(y=t,I=l.child(i),new kc(I,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,I;return this.getDocumentsMatchingCollectionQuery(e,f,r).next(y=>{y.forEach((I,w)=>{s=s.insert(I,w)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(s=>{i.forEach((l,f)=>{const y=f.getKey();null===s.get(y)&&(s=s.insert(y,ur.newInvalidDocument(y)))});let u=ap();return s.forEach((l,f)=>{const y=i.get(l);void 0!==y&&Im(y.mutation,f,Oo.empty(),xr.now()),ku(t,f)&&(u=u.insert(l,f))}),u})}}class cP{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return le.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:di(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:LI(r.bundledQuery),readTime:di(r.readTime)}),le.resolve();var r}}class lP{constructor(){this.overlays=new ar(ft.comparator),this.ls=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ba();return le.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.we(e,t,s)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const i=Ba(),s=t.length+1,u=new ft(t.child("")),l=this.overlays.getIteratorFrom(u);for(;l.hasNext();){const f=l.getNext().value,y=f.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&f.largestBatchId>r&&i.set(f.getKey(),f)}return le.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new ar((y,I)=>y-I);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let I=s.get(y.largestBatchId);null===I&&(I=Ba(),s=s.insert(y.largestBatchId,I)),I.set(y.getKey(),y)}}const l=Ba(),f=s.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((y,I)=>l.set(y,I)),!(l.size()>=i)););return le.resolve(l)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new cb(t,r));let s=this.ls.get(t);void 0===s&&(s=dn(),this.ls.set(t,s)),this.ls.set(t,s.add(r.key))}}class wv{constructor(){this.fs=new In(ti.ds),this.ws=new In(ti._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new ti(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new ti(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new ft(new An([])),r=new ti(t,e),i=new ti(t,e+1),s=[];return this.ws.forEachInRange([r,i],u=>{this.ys(u),s.push(u.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new ft(new An([])),r=new ti(t,e),i=new ti(t,e+1);let s=dn();return this.ws.forEachInRange([r,i],u=>{s=s.add(u.key)}),s}containsKey(e){const t=new ti(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ti{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return ft.comparator(e.key,t.key)||nn(e.As,t.As)}static _s(e,t){return nn(e.As,t.As)||ft.comparator(e.key,t.key)}}class dP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new In(ti.ds)}checkEmpty(e){return le.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.vs;this.vs++;const u=new ov(s,t,r,i);this.mutationQueue.push(u);for(const l of i)this.Rs=this.Rs.add(new ti(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return le.resolve(u)}lookupMutationBatch(e,t){return le.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),s=i<0?0:i;return le.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ti(t,0),i=new ti(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],u=>{const l=this.Ps(u.As);s.push(l)}),le.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(nn);return t.forEach(i=>{const s=new ti(i,0),u=new ti(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,u],l=>{r=r.add(l.As)})}),le.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ft.isDocumentKey(s)||(s=s.child(""));const u=new ti(new ft(s),0);let l=new In(nn);return this.Rs.forEachWhile(f=>{const y=f.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(l=l.add(f.As)),!0)},u),le.resolve(this.Vs(l))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){jt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return le.forEach(t.mutations,i=>{const s=new ti(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new ti(t,0),i=this.Rs.firstAfterOrEqual(r);return le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return le.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class hP{constructor(e){this.Ds=e,this.docs=new ar(ft.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,u=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():ur.newInvalidDocument(t))}getEntries(e,t){let r=Vs();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ur.newInvalidDocument(i))}),le.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Vs();const u=t.path,l=new ft(u.child("")),f=this.docs.getIteratorFrom(l);for(;f.hasNext();){const{key:y,value:{document:I}}=f.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||$E(BA(I),r)<=0||(i.has(I.key)||ku(t,I))&&(s=s.insert(I.key,I.mutableCopy()))}return le.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ct()}Cs(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new fP(this)}getSize(e){return le.resolve(this.size)}}class fP extends class JI{constructor(){this.changes=new io(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ur.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class pP{constructor(e){this.persistence=e,this.xs=new io(t=>dh(t),Vl),this.lastRemoteSnapshotVersion=Lt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new wv,this.targetCount=0,this.Ms=Uu.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),le.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Uu(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Fn(t),le.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.xs.forEach((u,l)=>{l.sequenceNumber<=t&&null===r.get(l.targetId)&&(this.xs.delete(u),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),le.waitFor(s).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(u=>{s.push(i.markPotentiallyOrphaned(e,u))}),le.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.ks.containsKey(t))}}class ew{constructor(e,t){this.$s={},this.overlays={},this.Os=new ia(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new pP(this),this.indexManager=new _v,this.remoteDocumentCache=new hP(r=>this.referenceDelegate.Ls(r)),this.serializer=new Ib(t),this.qs=new cP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new dP(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Ze("MemoryPersistence","Starting transaction:",e);const i=new Lb(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,t){return le.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class Lb extends class HE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}{constructor(e){super(),this.currentSequenceNumber=e}}class Tv{constructor(e){this.persistence=e,this.Qs=new wv,this.js=null}static zs(e){return new Tv(e)}get Ws(){if(this.js)return this.js;throw Ct()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),le.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Ws,r=>{const i=ft.fromPath(r);return this.Hs(e,i).next(s=>{s||t.removeEntry(i,Lt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return le.or([()=>le.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class nw{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=dn(),i=dn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new nw(e,t.fromCache,r,i)}}class Sv{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(s=>s||this.Gi(e,t,i,r)).next(s=>s||this.Qi(e,t))}Ki(e,t){if(Ua(t))return le.resolve(null);let r=pr(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Fc(t,null,"F"),r=pr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const u=dn(...s);return this.Ui.getDocuments(e,u).next(l=>this.indexManager.getMinOffset(e,r).next(f=>{const y=this.ji(t,l);return this.zi(t,y,u,f.readTime)?this.Ki(e,Fc(t,null,"F")):this.Wi(e,y,t,f)}))})))}Gi(e,t,r,i){return Ua(t)||i.isEqual(Lt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(s=>{const u=this.ji(t,s);return this.zi(t,u,r,i)?this.Qi(e,t):(OE()<=or.in.DEBUG&&Ze("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ll(t)),this.Wi(e,u,t,function AR(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Lt.fromTimestamp(1e9===r?new xr(t+1,0):new xr(t,r));return new ko(i,ft.empty(),e)}(i,-1)))})}ji(e,t){let r=new In(gh(e));return t.forEach((i,s)=>{ku(e,s)&&(r=r.add(s))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,t){return OE()<=or.in.DEBUG&&Ze("QueryEngine","Using full collection scan to execute query:",Ll(t)),this.Ui.getDocumentsMatchingQuery(e,t,ko.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(u=>{s=s.insert(u.key,u)}),s))}}class gP{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new ar(nn),this.Yi=new io(s=>dh(s),Vl),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Rm(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function iw(n,e){return(mR=mR||(0,H.Z)(function*(t,r){const i=mt(t);return yield i.persistence.runTransaction("Handle user change","readonly",s=>{let u;return i.mutationQueue.getAllMutationBatches(s).next(l=>(u=l,i.tr(r),i.mutationQueue.getAllMutationBatches(s))).next(l=>{const f=[],y=[];let I=dn();for(const w of u){f.push(w.batchId);for(const x of w.mutations)I=I.add(x.key)}for(const w of l){y.push(w.batchId);for(const x of w.mutations)I=I.add(x.key)}return i.localDocuments.getDocuments(s,I).next(w=>({er:w,removedBatchIds:f,addedBatchIds:y}))})})})).apply(this,arguments)}function mP(n,e){const t=mt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Zi.newChangeBuffer({trackRemovals:!0});return function(u,l,f,y){const I=f.batch,w=I.keys();let x=le.resolve();return w.forEach(M=>{x=x.next(()=>y.getEntry(l,M)).next(B=>{const Z=f.docVersions.get(M);jt(null!==Z),B.version.compareTo(Z)<0&&(I.applyToRemoteDocument(B,f),B.isValidDocument()&&(B.setReadTime(f.commitVersion),y.addEntry(B)))})}),x.next(()=>u.mutationQueue.removeMutationBatch(l,I))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let l=dn();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(l=l.add(u.batch.mutations[f].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Bb(n){const e=mt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function _P(n,e){const t=mt(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const u=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const l=[];e.targetChanges.forEach((I,w)=>{const x=i.get(w);if(!x)return;l.push(t.Bs.removeMatchingKeys(s,I.removedDocuments,w).next(()=>t.Bs.addMatchingKeys(s,I.addedDocuments,w)));let M=x.withSequenceNumber(s.currentSequenceNumber);var B,Z,J;null!==e.targetMismatches.get(w)?M=M.withResumeToken(vi.EMPTY_BYTE_STRING,Lt.min()).withLastLimboFreeSnapshotVersion(Lt.min()):I.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(I.resumeToken,r)),i=i.insert(w,M),Z=M,J=I,(0===(B=x).resumeToken.approximateByteSize()||Z.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0)&&l.push(t.Bs.updateTargetData(s,M))});let f=Vs(),y=dn();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(s,I))}),l.push(function xv(n,e,t){let r=dn(),i=dn();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let u=Vs();return t.forEach((l,f)=>{const y=s.get(l);f.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(l)),f.isNoDocument()&&f.version.isEqual(Lt.min())?(e.removeEntry(l,f.readTime),u=u.insert(l,f)):!y.isValidDocument()||f.version.compareTo(y.version)>0||0===f.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(f),u=u.insert(l,f)):Ze("LocalStore","Ignoring outdated watch update for ",l,". Current version:",y.version," Watch version:",f.version)}),{nr:u,sr:i}})}(s,u,e.documentUpdates).next(I=>{f=I.nr,y=I.sr})),!r.isEqual(Lt.min())){const I=t.Bs.getLastRemoteSnapshotVersion(s).next(w=>t.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(I)}return le.waitFor(l).next(()=>u.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,f,y)).next(()=>f)}).then(s=>(t.Ji=i,s))}function yP(n,e){const t=mt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Dh(n,e){const t=mt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(s=>s?(i=s,le.resolve(i)):t.Bs.allocateTargetId(r).next(u=>(i=new Lc(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Tp(n,e,t){return(_R=_R||(0,H.Z)(function*(r,i,s){const u=mt(r),l=u.Ji.get(i),f=s?"readwrite":"readwrite-primary";try{s||(yield u.persistence.runTransaction("Release target",f,y=>u.persistence.referenceDelegate.removeTarget(y,l)))}catch(y){if(!Su(y))throw y;Ze("LocalStore",`Failed to update sequence numbers for target ${i}: ${y}`)}u.Ji=u.Ji.remove(i),u.Yi.delete(l.target)})).apply(this,arguments)}function Rv(n,e,t){const r=mt(n);let i=Lt.min(),s=dn();return r.persistence.runTransaction("Execute query","readonly",u=>function(l,f,y){const I=mt(l),w=I.Yi.get(y);return void 0!==w?le.resolve(I.Ji.get(w)):I.Bs.getTargetData(f,y)}(r,u,pr(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(u,l.targetId).next(f=>{s=f})}).next(()=>r.Hi.getDocumentsMatchingQuery(u,e,t?i:Lt.min(),t?s:dn())).next(l=>(function Hb(n,e,t){let r=n.Xi.get(e)||Lt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Xi.set(e,r)}(r,function ph(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),l),{documents:l,ir:s})))}class aw{constructor(){this.activeTargetIds=function gI(){return ob}()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Nv{constructor(){this.Hr=new aw,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new aw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class cw{Yr(e){}shutdown(){}}class lw{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Cp=null;function dw(){return null===Cp?Cp=268435456+Math.round(2147483648*Math.random()):Cp++,"0x"+Cp.toString(16)}const IP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hw{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const bs="WebChannelConnection";class zb extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,s){const u=dw(),l=this.To(e,t);Ze("RestConnection",`Sending RPC '${e}' ${u}:`,l,r);const f={};return this.Eo(f,i,s),this.Ao(e,l,f,r).then(y=>(Ze("RestConnection",`Received RPC '${e}' ${u}: `,y),y),y=>{throw Fs("RestConnection",`RPC '${e}' ${u} failed with error: `,y,"url: ",l,"request:",r),y})}vo(e,t,r,i,s,u){return this.Io(e,t,r,i,s)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ih,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,t){return`${this.mo}/v1/${t}:${IP[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const s=dw();return new Promise((u,l)=>{const f=new Kf;f.setWithCredentials(!0),f.listenOnce(fR.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case IE.NO_ERROR:const I=f.getResponseJson();Ze(bs,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(I)),u(I);break;case IE.TIMEOUT:Ze(bs,`RPC '${e}' ${s} timed out`),l(new je(pe.DEADLINE_EXCEEDED,"Request time out"));break;case IE.HTTP_ERROR:const w=f.getStatus();if(Ze(bs,`RPC '${e}' ${s} failed with status:`,w,"response text:",f.getResponseText()),w>0){let x=f.getResponseJson();Array.isArray(x)&&(x=x[0]);const M=x?.error;if(M&&M.status&&M.message){const B=function(Z){const J=Z.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(J)>=0?J:pe.UNKNOWN}(M.status);l(new je(B,M.message))}else l(new je(pe.UNKNOWN,"Server responded with status "+f.getStatus()))}else l(new je(pe.UNAVAILABLE,"Connection failed."));break;default:Ct()}}finally{Ze(bs,`RPC '${e}' ${s} completed.`)}});const y=JSON.stringify(i);Ze(bs,`RPC '${e}' ${s} sending request:`,i),f.send(t,"POST",y,r,15)})}Ro(e,t,r){const i=dw(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=rm(),l=hR(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;void 0!==y&&(f.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(f.xmlHttpFactory=new gR({})),this.Eo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const I=s.join("");Ze(bs,`Creating RPC '${e}' stream ${i}: ${I}`,f);const w=u.createWebChannel(I,f);let x=!1,M=!1;const B=new hw({ro:J=>{M?Ze(bs,`Not sending because RPC '${e}' stream ${i} is closed:`,J):(x||(Ze(bs,`Opening RPC '${e}' stream ${i} transport.`),w.open(),x=!0),Ze(bs,`RPC '${e}' stream ${i} sending:`,J),w.send(J))},oo:()=>w.close()}),Z=(J,me,Oe)=>{J.listen(me,Ie=>{try{Oe(Ie)}catch($e){setTimeout(()=>{throw $e},0)}})};return Z(w,Vy.EventType.OPEN,()=>{M||Ze(bs,`RPC '${e}' stream ${i} transport opened.`)}),Z(w,Vy.EventType.CLOSE,()=>{M||(M=!0,Ze(bs,`RPC '${e}' stream ${i} transport closed`),B.wo())}),Z(w,Vy.EventType.ERROR,J=>{M||(M=!0,Fs(bs,`RPC '${e}' stream ${i} transport errored:`,J),B.wo(new je(pe.UNAVAILABLE,"The operation could not be completed")))}),Z(w,Vy.EventType.MESSAGE,J=>{var me;if(!M){const Oe=J.data[0];jt(!!Oe);const Ie=Oe,$e=Ie.error||(null===(me=Ie[0])||void 0===me?void 0:me.error);if($e){Ze(bs,`RPC '${e}' stream ${i} received error:`,$e);const Je=$e.status;let yt=function(fi){const Ho=li[fi];if(void 0!==Ho)return CI(Ho)}(Je),Dn=$e.message;void 0===yt&&(yt=pe.INTERNAL,Dn="Unknown error status: "+Je+" with message "+$e.message),M=!0,B.wo(new je(yt,Dn)),w.close()}else Ze(bs,`RPC '${e}' stream ${i} received:`,Oe),B._o(Oe)}}),Z(l,pR.STAT_EVENT,J=>{J.stat===fA.PROXY?Ze(bs,`RPC '${e}' stream ${i} detected buffering proxy`):J.stat===fA.NOPROXY&&Ze(bs,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{B.fo()},0),B}}function km(){return typeof document<"u"?document:null}function Om(n){return new Ha(n,!0)}class qb{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Ze("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class fw{constructor(e,t,r,i,s,u,l,f){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=l,this.listener=f,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new qb(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,H.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,H.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,H.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(Xr(t.toString()),Xr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new je(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,H.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ze("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pw extends fw{constructor(e,t,r,i,s,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function gb(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(f=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===f?1:"REMOVE"===f?2:"CURRENT"===f?3:"RESET"===f?4:Ct(),i=e.targetChange.targetIds||[],s=function(f,y){return f.useProto3Json?(jt(void 0===y||"string"==typeof y),vi.fromBase64String(y||"")):(jt(void 0===y||y instanceof Uint8Array),vi.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,l=u&&function(f){const y=void 0===f.code?pe.UNKNOWN:CI(f.code);return new je(y,f.message||"")}(u);t=new YR(r,i,s,l||null)}else if("documentChange"in e){const r=e.documentChange,i=Lu(n,r.document.name),s=di(r.document.updateTime),u=r.document.createTime?di(r.document.createTime):Lt.min(),l=new Yi({mapValue:{fields:r.document.fields}}),f=ur.newFoundDocument(i,s,u,l);t=new cv(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=Lu(n,r.document),s=r.readTime?di(r.readTime):Lt.min(),u=ur.newNoDocument(i,s);t=new cv([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Lu(n,r.document);t=new cv([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ct();{const r=e.filter,{count:i=0,unchangedNames:s}=r,u=new ZR(i,s);t=new xI(r.targetId,u)}}var f;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Lt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Lt.min():s.readTime?di(s.readTime):Lt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=dp(this.serializer),t.addTarget=function(i,s){let u;const l=s.target;if(u=Pu(l)?{documents:OI(i,l)}:{query:fv(i,l)},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){u.resumeToken=db(i,s.resumeToken);const f=lv(i,s.expectedCount);null!==f&&(u.expectedCount=f)}else if(s.snapshotVersion.compareTo(Lt.min())>0){u.readTime=yh(i,s.snapshotVersion.toTimestamp());const f=lv(i,s.expectedCount);null!==f&&(u.expectedCount=f)}return u}(this.serializer,e);const r=function mb(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ct()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=dp(this.serializer),t.removeTarget=e,this.Wo(t)}}class wP extends fw{constructor(e,t,r,i,s,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(jt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function kI(n,e){return n&&n.length>0?(jt(void 0!==e),n.map(t=>function(r,i){let s=di(r.updateTime?r.updateTime:i);return s.isEqual(Lt.min())&&(s=di(i)),new zR(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=di(e.commitTime);return this.listener.cu(r,t)}return jt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=dp(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>function vh(n,e){let t;if(e instanceof jl)t={update:Cm(n,e.key,e.value)};else if(e instanceof _h)t={delete:Vc(n,e.key)};else if(e instanceof Fu)t={update:Cm(n,e.key,e.data),updateMask:tP(e.fieldMask)};else{if(!(e instanceof sv))return Ct();t={verify:Vc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const u=s.transform;if(u instanceof cp)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Ou)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ul)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Bl)return{fieldPath:s.field.canonicalString(),increment:u.gt};throw Ct()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:XR(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Ct()),t;var i}(this.serializer,r))};this.Wo(t)}}class gw extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new je(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new je(pe.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.vo(e,t,r,s,u,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new je(pe.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class Wb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Xr(t),this.mu=!1):Ze("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class mw{constructor(e,t,r,i,s){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(l=>{r.enqueueAndForget((0,H.Z)(function*(){var f;Uc(u)&&(Ze("RemoteStore","Restarting streams for network reachability change."),yield function(y){return(f=f||(0,H.Z)(function*(I){const w=mt(I);w.vu.add(4),yield xh(w),w.bu.set("Unknown"),w.vu.delete(4),yield Ap(w)})).apply(this,arguments)}(u))}))}),this.bu=new Wb(r,i)}}function Ap(n){return(vR=vR||(0,H.Z)(function*(e){if(Uc(e))for(const t of e.Ru)yield t(!0)})).apply(this,arguments)}function xh(n){return(CE=CE||(0,H.Z)(function*(e){for(const t of e.Ru)yield t(!1)})).apply(this,arguments)}function Fm(n,e){const t=mt(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),vw(t)?yw(t):Sp(t).Ko()&&_w(t,e))}function bp(n,e){const t=mt(n),r=Sp(t);t.Au.delete(e),r.Ko()&&Kb(t,e),0===t.Au.size&&(r.Ko()?r.jo():Uc(t)&&t.bu.set("Unknown"))}function _w(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Lt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Sp(n).su(e)}function Kb(n,e){n.Vu.qt(e),Sp(n).iu(e)}function yw(n){n.Vu=new PI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Sp(n).start(),n.bu.gu()}function vw(n){return Uc(n)&&!Sp(n).Uo()&&n.Au.size>0}function Uc(n){return 0===mt(n).vu.size}function CP(n){n.Vu=void 0}function Zb(n){return(gA=gA||(0,H.Z)(function*(e){e.Au.forEach((t,r)=>{_w(e,t)})})).apply(this,arguments)}function AP(n,e){return(AE=AE||(0,H.Z)(function*(t,r){CP(t),vw(t)?(t.bu.Iu(r),yw(t)):t.bu.set("Unknown")})).apply(this,arguments)}function bP(n,e,t){return(mA=mA||(0,H.Z)(function*(r,i,s){if(r.bu.set("Online"),i instanceof YR&&2===i.state&&i.cause)try{var u;yield function(l,f){return(u=u||(0,H.Z)(function*(y,I){const w=I.cause;for(const x of I.targetIds)y.Au.has(x)&&(yield y.remoteSyncer.rejectListen(x,w),y.Au.delete(x),y.Vu.removeTarget(x))})).apply(this,arguments)}(r,i)}catch(l){Ze("RemoteStore","Failed to remove targets %s: %s ",i.targetIds.join(","),l),yield Ew(r,l)}else if(i instanceof cv?r.Vu.Ht(i):i instanceof xI?r.Vu.ne(i):r.Vu.Xt(i),!s.isEqual(Lt.min()))try{const l=yield Bb(r.localStore);s.compareTo(l)>=0&&(yield function(f,y){const I=f.Vu.ce(y);return I.targetChanges.forEach((w,x)=>{if(w.resumeToken.approximateByteSize()>0){const M=f.Au.get(x);M&&f.Au.set(x,M.withResumeToken(w.resumeToken,y))}}),I.targetMismatches.forEach((w,x)=>{const M=f.Au.get(w);if(!M)return;f.Au.set(w,M.withResumeToken(vi.EMPTY_BYTE_STRING,M.snapshotVersion)),Kb(f,w);const B=new Lc(M.target,w,x,M.sequenceNumber);_w(f,B)}),f.remoteSyncer.applyRemoteEvent(I)}(r,s))}catch(l){Ze("RemoteStore","Failed to raise snapshot:",l),yield Ew(r,l)}})).apply(this,arguments)}function Ew(n,e,t){return(_A=_A||(0,H.Z)(function*(r,i,s){if(!Su(i))throw i;r.vu.add(1),yield xh(r),r.bu.set("Offline"),s||(s=()=>Bb(r.localStore)),r.asyncQueue.enqueueRetryable((0,H.Z)(function*(){Ze("RemoteStore","Retrying IndexedDB access"),yield s(),r.vu.delete(1),yield Ap(r)}))})).apply(this,arguments)}function DP(n,e){return e().catch(t=>Ew(n,t,e))}function Dp(n){return(na=na||(0,H.Z)(function*(e){const t=mt(e),r=aa(t);let i=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;SP(t);)try{const s=yield yP(t.localStore,i);if(null===s){0===t.Eu.length&&r.jo();break}i=s.batchId,xP(t,s)}catch(s){yield Ew(t,s)}Qb(t)&&Yb(t)})).apply(this,arguments)}function SP(n){return Uc(n)&&n.Eu.length<10}function xP(n,e){n.Eu.push(e);const t=aa(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function Qb(n){return Uc(n)&&!aa(n).Uo()&&n.Eu.length>0}function Yb(n){aa(n).start()}function RP(n){return(yA=yA||(0,H.Z)(function*(e){aa(e).hu()})).apply(this,arguments)}function PP(n){return(bE=bE||(0,H.Z)(function*(e){const t=aa(e);for(const r of e.Eu)t.uu(r.mutations)})).apply(this,arguments)}function MP(n,e,t){return(vA=vA||(0,H.Z)(function*(r,i,s){const u=r.Eu.shift(),l=av.from(u,i,s);yield DP(r,()=>r.remoteSyncer.applySuccessfulWrite(l)),yield Dp(r)})).apply(this,arguments)}function NP(n,e){return(EA=EA||(0,H.Z)(function*(t,r){var i;r&&aa(t).ou&&(yield function(s,u){return(i=i||(0,H.Z)(function*(l,f){if(Ei(y=f.code)&&y!==pe.ABORTED){const I=l.Eu.shift();aa(l).Qo(),yield DP(l,()=>l.remoteSyncer.rejectFailedWrite(I.batchId,f)),yield Dp(l)}var y})).apply(this,arguments)}(t,r)),Qb(t)&&Yb(t)})).apply(this,arguments)}function Jb(n,e){return(IA=IA||(0,H.Z)(function*(t,r){const i=mt(t);i.asyncQueue.verifyOperationInProgress(),Ze("RemoteStore","RemoteStore received new credentials");const s=Uc(i);i.vu.add(3),yield xh(i),s&&i.bu.set("Unknown"),yield i.remoteSyncer.handleCredentialChange(r),i.vu.delete(3),yield Ap(i)})).apply(this,arguments)}function Sp(n){var e;return n.Su||(n.Su=function(t,r,i){const s=mt(t);return s.fu(),new pw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{uo:Zb.bind(null,n),ao:AP.bind(null,n),nu:bP.bind(null,n)}),n.Ru.push(function(t){return(e=e||(0,H.Z)(function*(r){r?(n.Su.Qo(),vw(n)?yw(n):n.bu.set("Unknown")):(yield n.Su.stop(),CP(n))})).apply(this,arguments)})),n.Su}function aa(n){var e;return n.Du||(n.Du=function(t,r,i){const s=mt(t);return s.fu(),new wP(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{uo:RP.bind(null,n),ao:NP.bind(null,n),au:PP.bind(null,n),cu:MP.bind(null,n)}),n.Ru.push(function(t){return(e=e||(0,H.Z)(function*(r){r?(n.Du.Qo(),yield Dp(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ze("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))})).apply(this,arguments)})),n.Du}class kv{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,s){const u=Date.now()+r,l=new kv(e,t,u,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new je(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rh(n,e){if(Xr("AsyncQueue",`${e}: ${n}`),Su(n))return new je(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class Ph{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ft.comparator(t.key,r.key):(t,r)=>ft.comparator(t.key,r.key),this.keyedMap=ap(),this.sortedSet=new ar(this.comparator)}static emptySet(e){return new Ph(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ph)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ph;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class ww{constructor(){this.Cu=new ar(ft.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Ct():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Mh{constructor(e,t,r,i,s,u,l,f,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=l,this.excludesMetadataChanges=f,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,s){const u=[];return t.forEach(l=>{u.push({type:0,doc:l})}),new Mh(e,t,Ph.emptySet(t),u,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class kP{constructor(){this.Nu=void 0,this.listeners=[]}}class OP{constructor(){this.queries=new io(e=>fh(e),Nu),this.onlineState="Unknown",this.ku=new Set}}function Xb(n,e){return(DE=DE||(0,H.Z)(function*(t,r){const i=mt(t),s=r.query;let u=!1,l=i.queries.get(s);if(l||(u=!0,l=new kP),u)try{l.Nu=yield i.onListen(s)}catch(f){const y=Rh(f,`Initialization of query '${Ll(r.query)}' failed`);return void r.onError(y)}i.queries.set(s,l),l.listeners.push(r),r.Mu(i.onlineState),l.Nu&&r.$u(l.Nu)&&Cw(i)})).apply(this,arguments)}function Tw(n,e){return(TA=TA||(0,H.Z)(function*(t,r){const i=mt(t),s=r.query;let u=!1;const l=i.queries.get(s);if(l){const f=l.listeners.indexOf(r);f>=0&&(l.listeners.splice(f,1),u=0===l.listeners.length)}if(u)return i.queries.delete(s),i.onUnlisten(s)})).apply(this,arguments)}function FP(n,e){const t=mt(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const l of u.listeners)l.$u(i)&&(r=!0);u.Nu=i}}r&&Cw(t)}function VP(n,e,t){const r=mt(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function Cw(n){n.ku.forEach(e=>{e.next()})}class Aw{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Mh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Mh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class tD{constructor(e){this.key=e}}class Ov{constructor(e){this.key=e}}class xp{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=dn(),this.mutatedKeys=dn(),this.tc=gh(e),this.ec=new Ph(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new ww,i=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,u=i,l=!1;const f="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((I,w)=>{const x=i.get(I),M=ku(this.query,w)?w:null,B=!!x&&this.mutatedKeys.has(x.key),Z=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let J=!1;x&&M?x.data.isEqual(M.data)?B!==Z&&(r.track({type:3,doc:M}),J=!0):this.rc(x,M)||(r.track({type:2,doc:M}),J=!0,(f&&this.tc(M,f)>0||y&&this.tc(M,y)<0)&&(l=!0)):!x&&M?(r.track({type:0,doc:M}),J=!0):x&&!M&&(r.track({type:1,doc:x}),J=!0,(f||y)&&(l=!0)),J&&(M?(u=u.add(M),s=Z?s.add(I):s.delete(I)):(u=u.delete(I),s=s.delete(I)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const I="F"===this.query.limitType?u.last():u.first();u=u.delete(I.key),s=s.delete(I.key),r.track({type:1,doc:I})}return{ec:u,ic:r,zi:l,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((y,I)=>function(w,x){const M=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ct()}};return M(w)-M(x)}(y.type,I.type)||this.tc(y.doc,I.doc)),this.oc(r);const u=t?this.uc():[],l=0===this.Zu.size&&this.current?1:0,f=l!==this.Xu;return this.Xu=l,0!==s.length||f?{snapshot:new Mh(this.query,e.ec,i,s,e.mutatedKeys,0===l,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:u}:{cc:u}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new ww,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=dn(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new Ov(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new tD(r))}),t}hc(e){this.Yu=e.ir,this.Zu=dn();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Mh.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class LP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class UP{constructor(e){this.key=e,this.fc=!1}}class BP{constructor(e,t,r,i,s,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.dc={},this.wc=new io(l=>fh(l),Nu),this._c=new Map,this.mc=new Set,this.gc=new ar(ft.comparator),this.yc=new Map,this.Ic=new wv,this.Tc={},this.Ec=new Map,this.Ac=Uu.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function Fv(n,e){return(CA=CA||(0,H.Z)(function*(t,r){const i=Fw(t);let s,u;const l=i.wc.get(r);if(l)s=l.targetId,i.sharedClientState.addLocalQueryTarget(s),u=l.view.lc();else{const f=yield Dh(i.localStore,pr(r)),y=i.sharedClientState.addLocalQueryTarget(f.targetId);s=f.targetId,u=yield Rp(i,r,s,"current"===y,f.resumeToken),i.isPrimaryClient&&Fm(i.remoteStore,f)}return u})).apply(this,arguments)}function Rp(n,e,t,r,i){return(AA=AA||(0,H.Z)(function*(s,u,l,f,y){s.Rc=(J,me,Oe)=>{var Ie;return function($e,Je,yt,Dn){return(Ie=Ie||(0,H.Z)(function*(fi,Ho,zc,rR){let L_=Ho.view.sc(zc);L_.zi&&(L_=yield Rv(fi.localStore,Ho.query,!1).then(({documents:sR})=>Ho.view.sc(sR,L_)));const aE=rR&&rR.targetChanges.get(Ho.targetId),iR=Ho.view.applyChanges(L_,fi.isPrimaryClient,aE);return Um(fi,Ho.targetId,iR.cc),iR.snapshot})).apply(this,arguments)}(s,J,me,Oe)};const I=yield Rv(s.localStore,u,!0),w=new xp(u,I.ir),x=w.sc(I.documents),M=lp.createSynthesizedTargetChangeForCurrentChange(l,f&&"Offline"!==s.onlineState,y),B=w.applyChanges(x,s.isPrimaryClient,M);Um(s,l,B.cc);const Z=new LP(u,l,w);return s.wc.set(u,Z),s._c.has(l)?s._c.get(l).push(u):s._c.set(l,[u]),B.snapshot})).apply(this,arguments)}function jP(n,e){return(on=on||(0,H.Z)(function*(t,r){const i=mt(t),s=i.wc.get(r),u=i._c.get(s.targetId);if(u.length>1)return i._c.set(s.targetId,u.filter(l=>!Nu(l,r))),void i.wc.delete(r);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Tp(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),bp(i.remoteStore,s.targetId),Wl(i,s.targetId)}).catch(ah))):(Wl(i,s.targetId),yield Tp(i.localStore,s.targetId,!0))})).apply(this,arguments)}function Dw(n,e){return(xE=xE||(0,H.Z)(function*(t,r){const i=mt(t);try{const s=yield _P(i.localStore,r);r.targetChanges.forEach((u,l)=>{const f=i.yc.get(l);f&&(jt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?f.fc=!0:u.modifiedDocuments.size>0?jt(f.fc):u.removedDocuments.size>0&&(jt(f.fc),f.fc=!1))}),yield Bc(i,s,r)}catch(s){yield ah(s)}})).apply(this,arguments)}function Sw(n,e,t){const r=mt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((s,u)=>{const l=u.view.Mu(e);l.snapshot&&i.push(l.snapshot)}),function(s,u){const l=mt(s);l.onlineState=u;let f=!1;l.queries.forEach((y,I)=>{for(const w of I.listeners)w.Mu(u)&&(f=!0)}),f&&Cw(l)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function xw(n,e,t){return(RE=RE||(0,H.Z)(function*(r,i,s){const u=mt(r);u.sharedClientState.updateQueryState(i,"rejected",s);const l=u.yc.get(i),f=l&&l.key;if(f){let y=new ar(ft.comparator);y=y.insert(f,ur.newNoDocument(f,Lt.min()));const I=dn().add(f),w=new Tm(Lt.min(),new Map,new ar(nn),y,I);yield Dw(u,w),u.gc=u.gc.remove(f),u.yc.delete(i),Mw(u)}else yield Tp(u.localStore,i,!1).then(()=>Wl(u,i,s)).catch(ah)})).apply(this,arguments)}function nD(n,e){return(bA=bA||(0,H.Z)(function*(t,r){const i=mt(t),s=r.batch.batchId;try{const u=yield mP(i.localStore,r);Lm(i,s,null),rD(i,s),i.sharedClientState.updateMutationState(s,"acknowledged"),yield Bc(i,u)}catch(u){yield ah(u)}})).apply(this,arguments)}function HP(n,e,t){return(DA=DA||(0,H.Z)(function*(r,i,s){const u=mt(r);try{const l=yield function(f,y){const I=mt(f);return I.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let x;return I.mutationQueue.lookupMutationBatch(w,y).next(M=>(jt(null!==M),x=M.keys(),I.mutationQueue.removeMutationBatch(w,M))).next(()=>I.mutationQueue.performConsistencyCheck(w)).next(()=>I.documentOverlayCache.removeOverlaysForBatchId(w,x,y)).next(()=>I.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,x)).next(()=>I.localDocuments.getDocuments(w,x))})}(u.localStore,i);Lm(u,i,s),rD(u,i),u.sharedClientState.updateMutationState(i,"rejected",s),yield Bc(u,l)}catch(l){yield ah(l)}})).apply(this,arguments)}function rD(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function Lm(n,e,t){const r=mt(n);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Wl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||Rw(n,r)})}function Rw(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(bp(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),Mw(n))}function Um(n,e,t){for(const r of t)r instanceof tD?(n.Ic.addReference(r.key,e),Pw(n,r)):r instanceof Ov?(Ze("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||Rw(n,r.key)):Ct()}function Pw(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Ze("SyncEngine","New document in limbo: "+t),n.mc.add(r),Mw(n))}function Mw(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new ft(An.fromString(e)),r=n.Ac.next();n.yc.set(r,new UP(t)),n.gc=n.gc.insert(t,r),Fm(n.remoteStore,new Lc(pr(sp(t.path)),r,"TargetPurposeLimboResolution",ia.ct))}}function Bc(n,e,t){return(SA=SA||(0,H.Z)(function*(r,i,s){var u;const l=mt(r),f=[],y=[],I=[];l.wc.isEmpty()||(l.wc.forEach((w,x)=>{I.push(l.Rc(x,i,s).then(M=>{if((M||s)&&l.isPrimaryClient&&l.sharedClientState.updateQueryState(x.targetId,M?.fromCache?"not-current":"current"),M){f.push(M);const B=nw.Li(x.targetId,M);y.push(B)}}))}),yield Promise.all(I),l.dc.nu(f),yield function(w,x){return(u=u||(0,H.Z)(function*(M,B){const Z=mt(M);try{yield Z.persistence.runTransaction("notifyLocalViewChanges","readwrite",J=>le.forEach(B,me=>le.forEach(me.Fi,Oe=>Z.persistence.referenceDelegate.addReference(J,me.targetId,Oe)).next(()=>le.forEach(me.Bi,Oe=>Z.persistence.referenceDelegate.removeReference(J,me.targetId,Oe)))))}catch(J){if(!Su(J))throw J;Ze("LocalStore","Failed to update sequence numbers: "+J)}for(const J of B){const me=J.targetId;if(!J.fromCache){const Oe=Z.Ji.get(me),$e=Oe.withLastLimboFreeSnapshotVersion(Oe.snapshotVersion);Z.Ji=Z.Ji.insert(me,$e)}}})).apply(this,arguments)}(l.localStore,y))})).apply(this,arguments)}function zP(n,e){return(ME=ME||(0,H.Z)(function*(t,r){const i=mt(t);if(!i.currentUser.isEqual(r)){Ze("SyncEngine","User change. New user:",r.toKey());const s=yield iw(i.localStore,r);i.currentUser=r,(u=i).Ec.forEach(f=>{f.forEach(y=>{y.reject(new je(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.Ec.clear(),i.sharedClientState.handleUserChange(r,s.removedBatchIds,s.addedBatchIds),yield Bc(i,s.er)}var u})).apply(this,arguments)}function qP(n,e){const t=mt(n),r=t.yc.get(e);if(r&&r.fc)return dn().add(r.key);{let i=dn();const s=t._c.get(e);if(!s)return i;for(const u of s){const l=t.wc.get(u);i=i.unionWith(l.view.nc)}return i}}function Fw(n){const e=mt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Dw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xw.bind(null,e),e.dc.nu=FP.bind(null,e.eventManager),e.dc.Pc=VP.bind(null,e.eventManager),e}function Vv(n){const e=mt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HP.bind(null,e),e}class Bi{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,H.Z)(function*(){t.serializer=Om(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function rw(n,e,t,r){return new gP(n,e,t,r)}(this.persistence,new Sv,e.initialUser,this.serializer)}createPersistence(e){return new ew(Tv.zs,this.serializer)}createSharedClientState(e){return new Nv}terminate(){var e=this;return(0,H.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Bm{initialize(e,t){var r=this;return(0,H.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Sw(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=zP.bind(null,r.syncEngine),yield function Iw(n,e){return(wA=wA||(0,H.Z)(function*(t,r){const i=mt(t);r?(i.vu.delete(2),yield Ap(i)):r||(i.vu.add(2),yield xh(i),i.bu.set("Unknown"))})).apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new OP}createDatastore(e){const t=Om(e.databaseInfo.databaseId),r=new zb(e.databaseInfo);return new gw(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=l=>Sw(this.syncEngine,l,0),u=lw.D()?new lw:new cw,new mw(t,r,i,s,u);var t,r,i,s,u}createSyncEngine(e,t){return function(r,i,s,u,l,f,y){const I=new BP(r,i,s,u,l,f);return y&&(I.vc=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e;return function(t){return(e=e||(0,H.Z)(function*(r){const i=mt(r);Ze("RemoteStore","RemoteStore shutting down."),i.vu.add(5),yield xh(i),i.Pu.shutdown(),i.bu.set("Unknown")})).apply(this,arguments)}(this.remoteStore)}}class jm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Xr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Lw{constructor(e,t,r,i){var u,s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Qi.UNAUTHENTICATED,this.clientId=UE.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(l){return(u=u||(0,H.Z)(function*(f){Ze("FirestoreClient","Received user=",f.uid),yield s.authCredentialListener(f),s.user=f})).apply(this,arguments)}),this.appCheckCredentials.start(r,l=>(Ze("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,H.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new je(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,H.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Rh(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Lv(n,e){return(Ly=Ly||(0,H.Z)(function*(t,r){var i;t.asyncQueue.verifyOperationInProgress(),Ze("FirestoreClient","Initializing OfflineComponentProvider");const s=yield t.getConfiguration();yield r.initialize(s);let u=s.initialUser;t.setCredentialChangeListener(function(l){return(i=i||(0,H.Z)(function*(f){u.isEqual(f)||(yield iw(r.localStore,f),u=f)})).apply(this,arguments)}),r.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=r})).apply(this,arguments)}function Uv(n,e){return(Uy=Uy||(0,H.Z)(function*(t,r){t.asyncQueue.verifyOperationInProgress();const i=yield Uw(t);Ze("FirestoreClient","Initializing OnlineComponentProvider");const s=yield t.getConfiguration();yield r.initialize(i,s),t.setCredentialChangeListener(u=>Jb(r.remoteStore,u)),t.setAppCheckTokenChangeListener((u,l)=>Jb(r.remoteStore,l)),t._onlineComponents=r})).apply(this,arguments)}function lD(n){return"FirebaseError"===n.name?n.code===pe.FAILED_PRECONDITION||n.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function Uw(n){return(MA=MA||(0,H.Z)(function*(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ze("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Lv(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!lD(r))throw r;Fs("Error using user provided cache. Falling back to memory cache: "+r),yield Lv(e,new Bi)}}else Ze("FirestoreClient","Using default OfflineComponentProvider"),yield Lv(e,new Bi);return e._offlineComponents})).apply(this,arguments)}function Bv(n){return(IR=IR||(0,H.Z)(function*(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ze("FirestoreClient","Using user provided OnlineComponentProvider"),yield Uv(e,e._uninitializedComponentsProvider._online)):(Ze("FirestoreClient","Using default OnlineComponentProvider"),yield Uv(e,new Bm))),e._onlineComponents})).apply(this,arguments)}function Hm(n){return Uw(n).then(e=>e.localStore)}function Gm(n){return(wR=wR||(0,H.Z)(function*(e){const t=yield Bv(e),r=t.eventManager;return r.onListen=Fv.bind(null,t.syncEngine),r.onUnlisten=jP.bind(null,t.syncEngine),r})).apply(this,arguments)}function Nh(n,e,t={}){const r=new yi;return n.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return function(i,s,u,l,f){const y=new jm({next:w=>{s.enqueueAndForget(()=>Tw(i,I));const x=w.docs.has(u);!x&&w.fromCache?f.reject(new je(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&w.fromCache&&l&&"server"===l.source?f.reject(new je(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(w)},error:w=>f.reject(w)}),I=new Aw(sp(u.path),y,{includeMetadataChanges:!0,Ku:!0});return Xb(i,I)}(yield Gm(n),n.asyncQueue,e,t,r)})),r.promise}function jw(n,e,t={}){const r=new yi;return n.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return function(i,s,u,l,f){const y=new jm({next:w=>{s.enqueueAndForget(()=>Tw(i,I)),w.fromCache&&"server"===l.source?f.reject(new je(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(w)},error:w=>f.reject(w)}),I=new Aw(u,y,{includeMetadataChanges:!0,Ku:!0});return Xb(i,I)}(yield Gm(n),n.asyncQueue,e,t,r)})),r.promise}function fD(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const pD=new Map;function Hw(n,e,t){if(!t)throw new je(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function zw(n){if(!ft.isDocumentKey(n))throw new je(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gD(n){if(ft.isDocumentKey(n))throw new je(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function zm(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Ct()}function Tn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new je(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=zm(n);throw new je(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function mD(n,e){if(e<=0)throw new je(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class _D{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new je(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new je(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function Gw(n,e,t,r){if(!0===e&&!0===r)throw new je(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=fD(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new je(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new je(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new je(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Np{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _D({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new je(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new je(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _D(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new kA;switch(t.type){case"firstParty":return new LE(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new je(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=pD.get(e);t&&(Ze("ComponentProvider","Removing Datastore"),pD.delete(e),t.terminate())}(this),Promise.resolve()}}class gr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new za(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gr(this.firestore,e,this._key)}}class Ji{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ji(this.firestore,e,this._query)}}class za extends Ji{constructor(e,t,r){super(e,t,sp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gr(this.firestore,null,new ft(e))}withConverter(e){return new za(this.firestore,e,this._path)}}function Hv(n,e,...t){if(n=(0,Et.m9)(n),1===arguments.length&&(e=UE.A()),Hw("doc","path",e),n instanceof Np){const r=An.fromString(e,...t);return zw(r),new gr(n,null,new ft(r))}{if(!(n instanceof gr||n instanceof za))throw new je(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(An.fromString(e,...t));return zw(r),new gr(n.firestore,n instanceof za?n.converter:null,new ft(r))}}function n1(n,e){return n=(0,Et.m9)(n),e=(0,Et.m9)(e),(n instanceof gr||n instanceof za)&&(e instanceof gr||e instanceof za)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Gv(n,e){return n=(0,Et.m9)(n),e=(0,Et.m9)(e),n instanceof Ji&&e instanceof Ji&&n.firestore===e.firestore&&Nu(n._query,e._query)&&n.converter===e.converter}class AO{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new qb(this,"async_queue_retry"),this.Xc=()=>{const t=km();t&&Ze("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=km();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=km();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new yi;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,H.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Su(t))throw t;Ze("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Xr("INTERNAL UNHANDLED ERROR: ",function(s){let u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),u}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=kv.createAndSchedule(this,e,t,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&Ct()}verifyOperationInProgress(){}sa(){var e=this;return(0,H.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function vD(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Pr extends Np{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new AO,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||qm(this),this._firestoreClient.terminate()}}function Ii(n){return n._firestoreClient||qm(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function qm(n){var e,t,r;const i=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new kR(n._databaseId,l,n._persistenceKey,(y=i).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,fD(y.experimentalLongPollingOptions),y.useFetchStreams));var l,y;n._firestoreClient=new Lw(n._authCredentials,n._appCheckCredentials,n._queue,s),(null===(t=i.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class Bu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bu(vi.fromBase64String(e))}catch(t){throw new je(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Bu(vi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ua{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new je(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class kp{constructor(e){this._methodName=e}}class Kw{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new je(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new je(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return nn(this._lat,e._lat)||nn(this._long,e._long)}}const PO=/^__.*__$/;class a1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Fu(e,this.data,this.fieldMask,t,this.fieldTransforms):new jl(e,this.data,t,this.fieldTransforms)}}class CD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Fu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function AD(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ct()}}class Zw{constructor(e,t,r,i,s,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=u||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Zw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Zv(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(AD(this.ca)&&PO.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class u1{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Om(e)}ya(e,t,r,i=!1){return new Zw({ca:e,methodName:t,ga:r,path:Rr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kl(n){const e=n._freezeSettings(),t=Om(n._databaseId);return new u1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Km(n,e,t,r,i,s={}){const u=n.ya(s.merge||s.mergeFields?2:0,e,t,i);Kv("Data must be an object, but it was:",u,r);const l=Wv(r,u);let f,y;if(s.merge)f=new Oo(u.fieldMask),y=u.fieldTransforms;else if(s.mergeFields){const I=[];for(const w of s.mergeFields){const x=Qm(e,w,t);if(!u.contains(x))throw new je(pe.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);eT(I,x)||I.push(x)}f=new Oo(I),y=u.fieldTransforms.filter(w=>f.covers(w.field))}else f=null,y=u.fieldTransforms;return new a1(new Yi(l),f,y)}class qv extends kp{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qv}}function bD(n,e,t,r=!1){return kh(t,n.ya(r?4:3,e))}function kh(n,e){if(Xw(n=(0,Et.m9)(n)))return Kv("Unsupported field value:",e,n),Wv(n,e);if(n instanceof kp)return function(t,r){if(!AD(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const u of t){let l=kh(u,r.wa(s));null==l&&(l={nullValue:"NULL_VALUE"}),i.push(l),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Et.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ev(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=xr.fromDate(t);return{timestampValue:yh(r.serializer,i)}}if(t instanceof xr){const i=new xr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:yh(r.serializer,i)}}if(t instanceof Kw)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Bu)return{bytesValue:db(r.serializer,t._byteString)};if(t instanceof gr){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:MI(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${zm(t)}`)}(n,e)}function Wv(n,e){const t={};return ZA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pc(n,(r,i)=>{const s=kh(i,e.ha(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function Xw(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof xr||n instanceof Kw||n instanceof Bu||n instanceof gr||n instanceof kp)}function Kv(n,e,t){if(!Xw(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=zm(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function Qm(n,e,t){if((e=(0,Et.m9)(e))instanceof ua)return e._internalPath;if("string"==typeof e)return Ym(n,e);throw Zv("Field path arguments must be of type string or ",n,!1,void 0,t)}const DD=new RegExp("[~\\*/\\[\\]]");function Ym(n,e,t){if(e.search(DD)>=0)throw Zv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ua(...e.split("."))._internalPath}catch{throw Zv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Zv(n,e,t,r,i){const s=r&&!r.isEmpty(),u=void 0!==i;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let f="";return(s||u)&&(f+=" (found",s&&(f+=` in field ${r}`),u&&(f+=` in document ${i}`),f+=")"),new je(pe.INVALID_ARGUMENT,l+n+f)}function eT(n,e){return n.some(t=>t.isEqual(e))}class Jm{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new gr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new tT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(qa("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class tT extends Jm{data(){return super.data()}}function qa(n,e){return"string"==typeof e?Ym(n,e):e instanceof ua?e._internalPath:e._delegate._internalPath}function nT(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new je(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xm{}class Fo extends Xm{}function Zl(n,e,...t){let r=[];e instanceof Xm&&r.push(e),r=r.concat(t),function(i){const s=i.filter(l=>l instanceof Op).length,u=i.filter(l=>l instanceof Qv).length;if(s>1||s>0&&u>0)throw new je(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Qv extends Fo{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Qv(e,t,r)}_apply(e){const t=this._parse(e);return oT(e._query,t),new Ji(e.firestore,e.converter,_m(e._query,t))}_parse(e){const t=Kl(e.firestore);return function(i,s,u,l,f,y,I){let w;if(f.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new je(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){r_(I,y);const x=[];for(const M of I)x.push(n_(l,i,M));w={arrayValue:{values:x}}}else w=n_(l,i,I)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||r_(I,y),w=bD(u,"where",I,"in"===y||"not-in"===y);return wn.create(f,y,w)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Op extends Xm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Op(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Yn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let s=r;const u=i.getFlattenedFilters();for(const l of u)oT(s,l),s=_m(s,l)}(e._query,t),new Ji(e.firestore,e.converter,_m(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Yv extends Fo{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Yv(e,t)}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new je(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new je(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new Ru(i,s);return function(l,f){if(null===hh(l)){const y=Ui(l);null!==y&&MD(0,y,f.field)}}(r,u),u}(e._query,this._field,this._direction);return new Ji(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new kc(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class e_ extends Fo{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new e_(e,t,r)}_apply(e){return new Ji(e.firestore,e.converter,Fc(e._query,this._limit,this._limitType))}}class rT extends Fo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new rT(e,t,r)}_apply(e){const t=sT(e,this.type,this._docOrFields,this._inclusive);return new Ji(e.firestore,e.converter,(i=t,new kc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class t_ extends Fo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new t_(e,t,r)}_apply(e){const t=sT(e,this.type,this._docOrFields,this._inclusive);return new Ji(e.firestore,e.converter,(i=t,new kc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function sT(n,e,t,r){if(t[0]=(0,Et.m9)(t[0]),t[0]instanceof Jm)return function(i,s,u,l,f){if(!l)throw new je(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const y=[];for(const I of Mu(i))if(I.field.isKeyField())y.push(ch(s,l.key));else{const w=l.data.field(I.field);if(Ky(w))throw new je(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+I.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===w){const x=I.field.canonicalString();throw new je(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}y.push(w)}return new As(y,f)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Kl(n.firestore);return function(s,u,l,f,y,I){const w=s.explicitOrderBy;if(y.length>w.length)throw new je(pe.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let M=0;M<y.length;M++){const B=y[M];if(w[M].field.isKeyField()){if("string"!=typeof B)throw new je(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof B}`);if(!Oc(s)&&-1!==B.indexOf("/"))throw new je(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${B}' contains a slash.`);const Z=s.path.child(An.fromString(B));if(!ft.isDocumentKey(Z))throw new je(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${Z}' is not because it contains an odd number of segments.`);const J=new ft(Z);x.push(ch(u,J))}else{const Z=bD(l,f,B);x.push(Z)}}return new As(x,I)}(n._query,n.firestore._databaseId,i,e,t,r)}}function n_(n,e,t){if("string"==typeof(t=(0,Et.m9)(t))){if(""===t)throw new je(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Oc(e)&&-1!==t.indexOf("/"))throw new je(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(An.fromString(t));if(!ft.isDocumentKey(r))throw new je(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ch(n,new ft(r))}if(t instanceof gr)return ch(n,t._key);throw new je(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zm(t)}.`)}function r_(n,e){if(!Array.isArray(n)||0===n.length)throw new je(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oT(n,e){if(e.isInequality()){const r=Ui(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new je(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=hh(n);null!==s&&MD(0,i,s)}const t=function(r,i){for(const s of r)for(const u of s.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new je(pe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function MD(n,e,t){if(!t.isEqual(e))throw new je(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Jv{convertValue(e,t="none"){switch(ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ei(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ct()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Pc(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new Kw(ei(e.latitude),ei(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=cm(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(lm(e));default:return null}}convertTimestamp(e){const t=kl(e);return new xr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=An.fromString(e);jt(Eb(r));const i=new Mc(r.get(1),r.get(3)),s=new ft(r.popFirst(5));return i.isEqual(t)||Xr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Xv(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Oh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ql extends Jm{constructor(e,t,r,i,s,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new e0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(qa("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class e0 extends Ql{data(e={}){return super.data(e)}}class Fh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Oh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new e0(this._firestore,this._userDataWriter,r.key,r,new Oh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new je(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new e0(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Oh(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const l=new e0(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Oh(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,y=-1;return 0!==u.type&&(f=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),1!==u.type&&(s=s.add(u.doc),y=s.indexOf(u.doc.key)),{type:VO(u.type),doc:l,oldIndex:f,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function VO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ct()}}function f1(n,e){return n instanceof Ql&&e instanceof Ql?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Fh&&e instanceof Fh&&n._firestore===e._firestore&&Gv(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Wa extends Jv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gr(this.firestore,null,t)}}function t0(n,e,t){n=Tn(n,gr);const r=Tn(n.firestore,Pr),i=Xv(n.converter,e,t);return i_(r,[Km(Kl(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Ar.none())])}function n0(n,e,t,...r){n=Tn(n,gr);const i=Tn(n.firestore,Pr),s=Kl(i);let u;return u="string"==typeof(e=(0,Et.m9)(e))||e instanceof ua?function Zm(n,e,t,r,i,s){const u=n.ya(1,e,t),l=[Qm(e,r,t)],f=[i];if(s.length%2!=0)throw new je(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<s.length;x+=2)l.push(Qm(e,s[x])),f.push(s[x+1]);const y=[],I=Yi.empty();for(let x=l.length-1;x>=0;--x)if(!eT(y,l[x])){const M=l[x];let B=f[x];B=(0,Et.m9)(B);const Z=u.da(M);if(B instanceof qv)y.push(M);else{const J=kh(B,Z);null!=J&&(y.push(M),I.set(M,J))}}const w=new Oo(y);return new CD(I,w,u.fieldTransforms)}(s,"updateDoc",n._key,e,t,r):function Jw(n,e,t,r){const i=n.ya(1,e,t);Kv("Data must be an object, but it was:",i,r);const s=[],u=Yi.empty();Pc(r,(f,y)=>{const I=Ym(e,f,t);y=(0,Et.m9)(y);const w=i.da(I);if(y instanceof qv)s.push(I);else{const x=kh(y,w);null!=x&&(s.push(I),u.set(I,x))}});const l=new Oo(s);return new CD(u,l,i.fieldTransforms)}(s,"updateDoc",n._key,e),i_(i,[u.toMutation(n._key,Ar.exists(!0))])}function r0(n,...e){var t,r,i;n=(0,Et.m9)(n);let s={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||vD(e[u])||(s=e[u],u++);const l={includeMetadataChanges:s.includeMetadataChanges};if(vD(e[u])){const w=e[u];e[u]=null===(t=w.next)||void 0===t?void 0:t.bind(w),e[u+1]=null===(r=w.error)||void 0===r?void 0:r.bind(w),e[u+2]=null===(i=w.complete)||void 0===i?void 0:i.bind(w)}let f,y,I;if(n instanceof gr)y=Tn(n.firestore,Pr),I=sp(n._key.path),f={next:w=>{e[u]&&e[u](FD(y,n,w))},error:e[u+1],complete:e[u+2]};else{const w=Tn(n,Ji);y=Tn(w.firestore,Pr),I=w._query;const x=new Wa(y);f={next:M=>{e[u]&&e[u](new Fh(y,x,w,M))},error:e[u+1],complete:e[u+2]},nT(n._query)}return function(w,x,M,B){const Z=new jm(B),J=new Aw(x,Z,M);return w.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return Xb(yield Gm(w),J)})),()=>{Z.Dc(),w.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return Tw(yield Gm(w),J)}))}}(Ii(y),I,l,f)}function i_(n,e){return function(t,r){const i=new yi;return t.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return function $P(n,e,t){return(SE=SE||(0,H.Z)(function*(r,i,s){const u=Vv(r);try{const l=yield function(f,y){const I=mt(f),w=xr.now(),x=y.reduce((Z,J)=>Z.add(J.key),dn());let M,B;return I.persistence.runTransaction("Locally write mutations","readwrite",Z=>{let J=Vs(),me=dn();return I.Zi.getEntries(Z,x).next(Oe=>{J=Oe,J.forEach((Ie,$e)=>{$e.isValidDocument()||(me=me.add(Ie))})}).next(()=>I.localDocuments.getOverlayedDocuments(Z,J)).next(Oe=>{M=Oe;const Ie=[];for(const $e of y){const Je=WR($e,M.get($e.key).overlayedDocument);null!=Je&&Ie.push(new Fu($e.key,Je,sI(Je.value.mapValue),Ar.exists(!0)))}return I.mutationQueue.addMutationBatch(Z,w,Ie,y)}).next(Oe=>{B=Oe;const Ie=Oe.applyToLocalDocumentSet(M,me);return I.documentOverlayCache.saveOverlays(Z,Oe.batchId,Ie)})}).then(()=>({batchId:B.batchId,changes:fI(M)}))}(u.localStore,i);u.sharedClientState.addPendingMutation(l.batchId),function(f,y,I){let w=f.Tc[f.currentUser.toKey()];w||(w=new ar(nn)),w=w.insert(y,I),f.Tc[f.currentUser.toKey()]=w}(u,l.batchId,s),yield Bc(u,l.changes),yield Dp(u.remoteStore)}catch(l){const f=Rh(l,"Failed to persist write");s.reject(f)}})).apply(this,arguments)}(yield function Mp(n){return Bv(n).then(e=>e.syncEngine)}(t),r,i)})),i.promise}(Ii(n),e)}function FD(n,e,t){const r=t.docs.get(e._key),i=new Wa(n);return new Ql(n,i,e._key,r,new Oh(t.hasPendingWrites,t.fromCache),e.converter)}function M1(){if(typeof Uint8Array>"u")throw new je("unimplemented","Uint8Arrays are not available in this environment.")}function N1(){if(!function eI(){return typeof atob<"u"}())throw new je("unimplemented","Blobs are unavailable in Firestore in this environment.")}class o0{constructor(e){this._delegate=e}static fromBase64String(e){return N1(),new o0(Bu.fromBase64String(e))}static fromUint8Array(e){return M1(),new o0(Bu.fromUint8Array(e))}toBase64(){return N1(),this._delegate.toBase64()}toUint8Array(){return M1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function BD(n){return function zO(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class a extends Jv{constructor(e){super(),this.firestore=e}convertBytes(e){return new o0(new Bu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return v.forKey(t,this.firestore,null)}}class _{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new e0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new L(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=_.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new _(e,new a(e),t),i.set(t,s)),s}}_.INSTANCES=new WeakMap;class v{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new a(e)}static forPath(e,t,r){if(e.length%2!=0)throw new je("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new v(t,new gr(t._delegate,r,new ft(e)))}static forKey(e,t,r){return new v(t,new gr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ye(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ye(this.firestore,function qw(n,e,...t){if(n=(0,Et.m9)(n),Hw("collection","path",e),n instanceof Np){const r=An.fromString(e,...t);return gD(r),new za(n,null,r)}{if(!(n instanceof gr||n instanceof za))throw new je(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(An.fromString(e,...t));return gD(r),new za(n.firestore,null,r)}}(this._delegate,e))}catch(t){throw T(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Et.m9)(e))instanceof gr&&n1(this._delegate,e)}set(e,t){t=function lT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new je("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}("DocumentReference.set",t);try{return t?t0(this._delegate,e,t):t0(this._delegate,e)}catch(r){throw T(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?n0(this._delegate,e):n0(this._delegate,e,t,...r)}catch(i){throw T(i,"updateDoc()","DocumentReference.update()")}}delete(){return function _1(n){return i_(Tn(n.firestore,Pr),[new _h(n._key,Ar.none())])}(this._delegate)}onSnapshot(...e){const t=A(e),r=R(e,i=>new k(this.firestore,new Ql(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return r0(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function g1(n){n=Tn(n,gr);const e=Tn(n.firestore,Pr),t=Ii(e),r=new Wa(e);return function hD(n,e){const t=new yi;return n.asyncQueue.enqueueAndForget((0,H.Z)(function*(){var r;return function(i,s,u){return(r=r||(0,H.Z)(function*(l,f,y){try{const I=yield function(w,x){const M=mt(w);return M.persistence.runTransaction("read document","readonly",B=>M.localDocuments.getDocument(B,x))}(l,f);I.isFoundDocument()?y.resolve(I):I.isNoDocument()?y.resolve(null):y.reject(new je(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(I){const w=Rh(I,`Failed to get document '${f} from cache`);y.reject(w)}})).apply(this,arguments)}(yield Hm(n),e,t)})),t.promise}(t,n._key).then(i=>new Ql(e,r,n._key,i,new Oh(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function m1(n){n=Tn(n,gr);const e=Tn(n.firestore,Pr);return Nh(Ii(e),n._key,{source:"server"}).then(t=>FD(e,n,t))}(this._delegate):function p1(n){n=Tn(n,gr);const e=Tn(n.firestore,Pr);return Nh(Ii(e),n._key).then(t=>FD(e,n,t))}(this._delegate),t.then(r=>new k(this.firestore,new Ql(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new v(this.firestore,this._delegate.withConverter(e?_.getInstance(this.firestore,e):null))}}function T(n,e,t){return n.message=n.message.replace(e,t),n}function A(n){for(const e of n)if("object"==typeof e&&!BD(e))return e;return{}}function R(n,e){var t,r;let i;return i=BD(n[0])?n[0]:BD(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class k{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new v(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return f1(this._delegate,e._delegate)}}class L extends k{data(e){const t=this._delegate.data(e);return function CR(n,e){n||Ct()}(void 0!==t),t}}class K{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new a(e)}where(e,t,r){try{return new K(this.firestore,Zl(this._delegate,function l1(n,e,t){const r=e,i=qa("where",n);return Qv._create(i,r,t)}(e,t,r)))}catch(i){throw T(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new K(this.firestore,Zl(this._delegate,function kO(n,e="asc"){const t=e,r=qa("orderBy",n);return Yv._create(r,t)}(e,t)))}catch(r){throw T(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new K(this.firestore,Zl(this._delegate,function d1(n){return mD("limit",n),e_._create("limit",n,"F")}(e)))}catch(t){throw T(t,"limit()","Query.limit()")}}limitToLast(e){try{return new K(this.firestore,Zl(this._delegate,function SD(n){return mD("limitToLast",n),e_._create("limitToLast",n,"L")}(e)))}catch(t){throw T(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new K(this.firestore,Zl(this._delegate,function iT(...n){return rT._create("startAt",n,!0)}(...e)))}catch(t){throw T(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new K(this.firestore,Zl(this._delegate,function xD(...n){return rT._create("startAfter",n,!1)}(...e)))}catch(t){throw T(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new K(this.firestore,Zl(this._delegate,function RD(...n){return t_._create("endBefore",n,!1)}(...e)))}catch(t){throw T(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new K(this.firestore,Zl(this._delegate,function PD(...n){return t_._create("endAt",n,!0)}(...e)))}catch(t){throw T(t,"endAt()","Query.endAt()")}}isEqual(e){return Gv(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Vh(n){n=Tn(n,Ji);const e=Tn(n.firestore,Pr),t=Ii(e),r=new Wa(e);return function XP(n,e){const t=new yi;return n.asyncQueue.enqueueAndForget((0,H.Z)(function*(){var r;return function(i,s,u){return(r=r||(0,H.Z)(function*(l,f,y){try{const I=yield Rv(l,f,!0),w=new xp(f,I.ir),x=w.sc(I.documents),M=w.applyChanges(x,!1);y.resolve(M.snapshot)}catch(I){const w=Rh(I,`Failed to execute query '${f} against cache`);y.reject(w)}})).apply(this,arguments)}(yield Hm(n),e,t)})),t.promise}(t,n._query).then(i=>new Fh(e,r,n,i))}(this._delegate):"server"===e?.source?function OD(n){n=Tn(n,Ji);const e=Tn(n.firestore,Pr),t=Ii(e),r=new Wa(e);return jw(t,n._query,{source:"server"}).then(i=>new Fh(e,r,n,i))}(this._delegate):function kD(n){n=Tn(n,Ji);const e=Tn(n.firestore,Pr),t=Ii(e),r=new Wa(e);return nT(n._query),jw(t,n._query).then(i=>new Fh(e,r,n,i))}(this._delegate),t.then(r=>new Pe(this.firestore,new Fh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=A(e),r=R(e,i=>new Pe(this.firestore,new Fh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return r0(this._delegate,t,r)}withConverter(e){return new K(this.firestore,this._delegate.withConverter(e?_.getInstance(this.firestore,e):null))}}class se{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new L(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Pe{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new K(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new L(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new se(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new L(this._firestore,r))})}isEqual(e){return f1(this._delegate,e._delegate)}}class Ye extends K{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new v(this.firestore,e):null}doc(e){try{return new v(this.firestore,void 0===e?Hv(this._delegate):Hv(this._delegate,e))}catch(t){throw T(t,"doc()","CollectionReference.doc()")}}add(e){return function uT(n,e){const t=Tn(n.firestore,Pr),r=Hv(n),i=Xv(n.converter,e);return i_(t,[Km(Kl(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Ar.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new v(this.firestore,t))}isEqual(e){return n1(this._delegate,e._delegate)}withConverter(e){return new Ye(this.firestore,this._delegate.withConverter(e?_.getInstance(this.firestore,e):null))}}var Un=U(7579),Lh=U(6451),Fp=U(5363),Vp=U(8421);function wi(n,e){return(0,wr.e)((t,r)=>{let i=null,s=0,u=!1;const l=()=>u&&!i&&r.complete();t.subscribe((0,Xt.x)(r,f=>{i?.unsubscribe();let y=0;const I=s++;(0,Vp.Xf)(n(f,I)).subscribe(i=(0,Xt.x)(r,w=>r.next(e?e(f,w,I,y++):w),()=>{i=null,l()}))},()=>{u=!0,l()}))})}var dT=U(6063);class hT extends Un.x{constructor(e=1/0,t=1/0,r=dT.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:u}=this;t||(r.push(e),!i&&r.push(s.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let u=0;u<s.length&&!e.closed;u+=r?1:2)e.next(s[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const u=t.now();let l=0;for(let f=1;f<r.length&&r[f]<=u;f+=2)l=f;l&&r.splice(0,l+1)}}}var fT=U(3099);function a0(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,fT.B)({connector:()=>new hT(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const Lp=(0,U(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var s_=U(515);function gT(n){return n<=0?()=>s_.E:(0,wr.e)((e,t)=>{let r=0;e.subscribe((0,Xt.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function jD(n){return(0,wr.e)((e,t)=>{let r=!1;e.subscribe((0,Xt.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function WO(n=y$){return(0,wr.e)((e,t)=>{let r=!1;e.subscribe((0,Xt.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function y$(){return new Lp}function Uh(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Fi((i,s)=>n(i,s,r)):gl.y,gT(1),t?jD(e):WO(()=>new Lp))}var k1=U(576);function KO(n,e){return(0,k1.m)(e)?wi(()=>n,e):wi(()=>n)}var O1=U(9468);U(8140);var QO,YO,tF,nF,rF,Ti=U(9681);const V1=new Map,oF={activated:!1,tokenObservers:[]},T$={initialized:!1,enabled:!1};function Ci(n){return V1.get(n)||Object.assign({},oF)}function HD(){return T$}class x${constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,H.Z)(function*(){t.stop();try{t.pending=new Et.BH,yield function R$(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Et.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ls=new Et.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function U1(n){if(!Ci(n).activated)throw Ls.create("use-before-activation",{appName:n.name})}function qD(n,e){return(QO=QO||(0,H.Z)(function*({url:t,body:r},i){const s={"Content-Type":"application/json"},u=i.getImmediate({optional:!0});if(u){const M=yield u.getHeartbeatsHeader();M&&(s["X-Firebase-Client"]=M)}const l={method:"POST",body:JSON.stringify(r),headers:s};let f,y;try{f=yield fetch(t,l)}catch(M){throw Ls.create("fetch-network-error",{originalErrorMessage:M?.message})}if(200!==f.status)throw Ls.create("fetch-status-error",{httpStatus:f.status});try{y=yield f.json()}catch(M){throw Ls.create("fetch-parse-error",{originalErrorMessage:M?.message})}const I=y.ttl.match(/^([\d.]+)(s)$/);if(!I||!I[2]||isNaN(Number(I[1])))throw Ls.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const w=1e3*Number(I[1]),x=Date.now();return{token:y.token,expireTimeMillis:x+w,issuedAtTimeMillis:x}})).apply(this,arguments)}function uF(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const mT="firebase-app-check-store";let WD=null;function lF(){return WD||(WD=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ls.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(mT,{keyPath:"compositeKey"})}}catch(t){e(Ls.create("storage-open",{originalErrorMessage:t?.message}))}}),WD)}const _T=new or.Yd("@firebase/app-check");function j1(n,e){return(0,Et.hl)()?function V$(n,e){return function dF(n,e){return(YO=YO||(0,H.Z)(function*(t,r){const s=(yield lF()).transaction(mT,"readwrite"),l=s.objectStore(mT).put({compositeKey:t,value:r});return new Promise((f,y)=>{l.onsuccess=I=>{f()},s.onerror=I=>{var w;y(Ls.create("storage-set",{originalErrorMessage:null===(w=I.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}(function fF(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{_T.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function $1(){return HD().enabled}function H1(){return(tF=tF||(0,H.Z)(function*(){const n=HD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const H$={error:"UNKNOWN_ERROR"};function G$(n){return Et.US.encodeString(JSON.stringify(n),!1)}function KD(n){return(nF=nF||(0,H.Z)(function*(e,t=!1){const r=e.app;U1(r);const i=Ci(r);let u,s=i.token;if(s&&!u0(s)&&(i.token=void 0,s=void 0),!s){const y=yield i.cachedTokenPromise;y&&(u0(y)?s=y:yield j1(r,void 0))}if(!t&&s&&u0(s))return{token:s.token};let f,l=!1;if($1()){i.exchangeTokenPromise||(i.exchangeTokenPromise=qD(uF(r,yield H1()),e.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),l=!0);const y=yield i.exchangeTokenPromise;return yield j1(r,y),i.token=y,{token:y.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),l=!0),s=yield Ci(r).exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?_T.warn(y.message):_T.error(y),u=y}return s?u?f=u0(s)?{token:s.token,internalError:u}:_F(u):(f={token:s.token},i.token=s,yield j1(r,s)):f=_F(u),l&&mF(r,f),f})).apply(this,arguments)}function z1(n,e){const t=Ci(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function gF(n){const{app:e}=n,t=Ci(e);let r=t.tokenRefresher;r||(r=function z$(n){const{app:e}=n;return new x$((0,H.Z)(function*(){let r;if(r=Ci(e).token?yield KD(n,!0):yield KD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Ci(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function mF(n,e){const t=Ci(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function u0(n){return n.expireTimeMillis-Date.now()>0}function _F(n){return{token:G$(H$),error:n}}class q${constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ci(this.app);for(const t of e)z1(this.app,t.next);return Promise.resolve()}}const AF="app-check-internal";!function o9(){(0,Ti._registerComponent)(new xa.wA("app-check",n=>function W$(n,e){return new q$(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(AF).initialize()})),(0,Ti._registerComponent)(new xa.wA(AF,n=>function K$(n){return{getToken:e=>KD(n,e),getLimitedUseToken:()=>function pF(n){return(rF=rF||(0,H.Z)(function*(e){const t=e.app;U1(t);const{provider:r}=Ci(t);if($1()){const i=yield H1(),{token:s}=yield qD(uF(t,i),e.heartbeatServiceProvider);return{token:s}}{const{token:i}=yield r.getToken();return{token:i}}})).apply(this,arguments)}(n),addTokenListener:e=>function G1(n,e,t,r){const{app:i}=n,s=Ci(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&u0(s.token)){const l=s.token;Promise.resolve().then(()=>{t({token:l.token}),gF(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>gF(n))}(n,"INTERNAL",e),removeTokenListener:e=>z1(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ti.registerVersion)("@firebase/app-check","0.8.0")}();class W1{constructor(){return(0,Wn.vb)("app-check")}}typeof window<"u"&&window;var d9=U(1274);const DF=new p.OlP("angularfire2.auth.use-emulator"),SF=new p.OlP("angularfire2.auth.settings"),xF=new p.OlP("angularfire2.auth.tenant-id"),RF=new p.OlP("angularfire2.auth.langugage-code"),PF=new p.OlP("angularfire2.auth.use-device-language"),MF=new p.OlP("angularfire.auth.persistence"),NF=(n,e,t,r,i,s,u,l)=>(0,mi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const f=e.runOutsideAngular(()=>n.auth());if(t&&f.useEmulator(...t),r&&(f.tenantId=r),f.languageCode=i,s&&f.useDeviceLanguage(),u)for(const[y,I]of Object.entries(u))f.settings[y]=I;return l&&f.setPersistence(l),f},[t,r,i,s,u,l]);let kF=(()=>{class n{constructor(t,r,i,s,u,l,f,y,I,w,x,M){const B=new Un.x,Z=Ft(void 0).pipe((0,Fp.Q)(u.outsideAngular),wi(()=>s.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,8463)))),(0,Zt.U)(()=>(0,mi.on)(t,s,r)),(0,Zt.U)(J=>NF(J,s,l,y,I,w,f,x)),a0({bufferSize:1,refCount:!1}));if(Ks(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ft(null);else{Z.pipe(Uh()).subscribe();const me=Z.pipe(wi($e=>$e.getRedirectResult().then(Je=>Je,()=>null)),Wn.iC,a0({bufferSize:1,refCount:!1})),Oe=Z.pipe(wi($e=>new ai.y(Je=>({unsubscribe:s.runOutsideAngular(()=>$e.onAuthStateChanged(yt=>Je.next(yt),yt=>Je.error(yt),()=>Je.complete()))})))),Ie=Z.pipe(wi($e=>new ai.y(Je=>({unsubscribe:s.runOutsideAngular(()=>$e.onIdTokenChanged(yt=>Je.next(yt),yt=>Je.error(yt),()=>Je.complete()))}))));this.authState=me.pipe(KO(Oe),(0,O1.R)(u.outsideAngular),(0,Fp.Q)(u.insideAngular)),this.user=me.pipe(KO(Ie),(0,O1.R)(u.outsideAngular),(0,Fp.Q)(u.insideAngular)),this.idToken=this.user.pipe(wi($e=>$e?(0,Gn.D)($e.getIdToken()):Ft(null))),this.idTokenResult=this.user.pipe(wi($e=>$e?(0,Gn.D)($e.getIdTokenResult()):Ft(null))),this.credential=(0,Lh.T)(me,B,this.authState.pipe(Fi($e=>!$e))).pipe((0,Zt.U)($e=>$e?.user?$e:null),(0,O1.R)(u.outsideAngular),(0,Fp.Q)(u.insideAngular))}return(0,mi.pX)(this,Z,s,{spy:{apply:(J,me,Oe)=>{(J.startsWith("signIn")||J.startsWith("createUser"))&&Oe.then(Ie=>B.next(Ie))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(mi.Dh),p.LFG(mi.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Wn.HU),p.LFG(DF,8),p.LFG(SF,8),p.LFG(xF,8),p.LFG(RF,8),p.LFG(PF,8),p.LFG(MF,8),p.LFG(W1,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function OF(n,e){return function f9(n,e=Sg.z){return new ai.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function Z1(n,e){return OF(n,e).pipe((0,Zt.U)(t=>({payload:t,type:"query"})))}function QD(n,e){return Z1(n,e).pipe(pc(void 0),mu(),(0,Zt.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,l)=>{const f=i.find(I=>I.doc.ref.isEqual(u.ref)),y=t?.payload.docs.find(I=>I.ref.isEqual(u.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(u.metadata)||!f&&y&&JSON.stringify(y.metadata)===JSON.stringify(u.metadata)||s.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:u}})}),s}))}function FF(n,e,t){return QD(n,t).pipe(vs((r,i)=>function g9(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function m9(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Q1(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Q1(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Q1(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),function gc(n,e=gl.y){return n=n??Sa,(0,wr.e)((t,r)=>{let i,s=!0;t.subscribe((0,Xt.x)(r,u=>{const l=e(u);(s||!n(i,l))&&(s=!1,i=l,r.next(u))}))})}(),(0,Zt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Q1(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function VF(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class LF{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=QD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Zt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(pc(void 0),mu(),Fi(([r,i])=>i.length>0||!r),(0,Zt.U)(([r,i])=>i),Wn.iC)}auditTrail(e){return this.stateChanges(e).pipe(vs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=VF(e);return FF(this.query,t,this.afs.schedulers.outsideAngular).pipe(Wn.iC)}valueChanges(e={}){return Z1(this.query,this.afs.schedulers.outsideAngular).pipe((0,Zt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Wn.iC)}get(e){return(0,Gn.D)(this.query.get(e)).pipe(Wn.iC)}add(e){return this.ref.add(e)}doc(e){return new UF(this.ref.doc(e),this.afs)}}class UF{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=$F(r,t);return new LF(i,s,this.afs)}snapshotChanges(){return function p9(n,e){return OF(n,e).pipe(pc(void 0),mu(),(0,Zt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Wn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Zt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Gn.D)(this.ref.get(e)).pipe(Wn.iC)}}class _9{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?QD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Zt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Fi(t=>t.length>0),Wn.iC):QD(this.query,this.afs.schedulers.outsideAngular).pipe(Wn.iC)}auditTrail(e){return this.stateChanges(e).pipe(vs((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=VF(e);return FF(this.query,t,this.afs.schedulers.outsideAngular).pipe(Wn.iC)}valueChanges(e={}){return Z1(this.query,this.afs.schedulers.outsideAngular).pipe((0,Zt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Wn.iC)}get(e){return(0,Gn.D)(this.query.get(e)).pipe(Wn.iC)}}const BF=new p.OlP("angularfire2.enableFirestorePersistence"),jF=new p.OlP("angularfire2.firestore.persistenceSettings"),y9=new p.OlP("angularfire2.firestore.settings"),v9=new p.OlP("angularfire2.firestore.use-emulator");function $F(n,e=(t=>t)){return{query:e(n),ref:n}}let Y1=(()=>{class n{constructor(t,r,i,s,u,l,f,y,I,w,x,M,B,Z,J,me,Oe){this.schedulers=f;const Ie=(0,mi.on)(t,l,r),$e=I;w&&NF(Ie,l,x,B,Z,J,M,me),[this.firestore,this.persistenceEnabled$]=(0,mi.cc)(`${Ie.name}.firestore`,"AngularFirestore",Ie.name,()=>{const Je=l.runOutsideAngular(()=>Ie.firestore());if(s&&Je.settings(s),$e&&Je.useEmulator(...$e),i&&!Ks(u)){const yt=()=>{try{return(0,Gn.D)(Je.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(Dn){return typeof console<"u"&&console.warn(Dn),Ft(!1)}};return[Je,l.runOutsideAngular(yt)]}return[Je,Ft(!1)]},[s,$e,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:u}=$F(i,r),l=this.schedulers.ngZone.run(()=>s);return new LF(l,u,this)}collectionGroup(t,r){const i=r||(u=>u),s=this.firestore.collectionGroup(t);return new _9(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new UF(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(mi.Dh),p.LFG(mi.xv,8),p.LFG(BF,8),p.LFG(y9,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Wn.HU),p.LFG(jF,8),p.LFG(v9,8),p.LFG(kF,8),p.LFG(DF,8),p.LFG(SF,8),p.LFG(xF,8),p.LFG(RF,8),p.LFG(PF,8),p.LFG(MF,8),p.LFG(W1,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),E9=(()=>{class n{constructor(){d9.Z.registerVersion("angularfire",Wn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:BF,useValue:!0},{provide:jF,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[Y1]}),n})();class jc extends Un.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:I9}=Array,{getPrototypeOf:w9,prototype:T9,keys:C9}=Object;function HF(n){if(1===n.length){const e=n[0];if(I9(e))return{args:e,keys:null};if(function A9(n){return n&&"object"==typeof n&&w9(n)===T9}(e)){const t=C9(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:b9}=Array;function GF(n){return(0,Zt.U)(e=>function D9(n,e){return b9(e)?n(...e):n(e)}(n,e))}function zF(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var S9=U(9672);function qF(...n){const e=(0,Ao.yG)(n),t=(0,Ao.jO)(n),{args:r,keys:i}=HF(n);if(0===r.length)return(0,Gn.D)([],e);const s=new ai.y(function x9(n,e,t=gl.y){return r=>{WF(e,()=>{const{length:i}=n,s=new Array(i);let u=i,l=i;for(let f=0;f<i;f++)WF(e,()=>{const y=(0,Gn.D)(n[f],e);let I=!1;y.subscribe((0,Xt.x)(r,w=>{s[f]=w,I||(I=!0,l--),l||r.next(t(s.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>zF(i,u):gl.y));return t?s.pipe(GF(t)):s}function WF(n,e,t){n?(0,S9.f)(t,n,e):e()}function KF(n){return new ai.y(e=>{(0,Vp.Xf)(n()).subscribe(e)})}var R9=U(9635);function yT(n,e){const t=(0,k1.m)(n)?n:()=>n,r=i=>i.error(t());return new ai.y(e?i=>e.schedule(r,0,i):r)}var ZF=U(727);function J1(){return(0,wr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Xt.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class QF extends ai.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,wr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ZF.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Xt.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ZF.w0.EMPTY)}return e}refCount(){return J1()(this)}}var Vo=U(5577);function Up(n,e){return(0,k1.m)(e)?(0,Vo.z)(n,e,1):(0,Vo.z)(n,1)}var so=U(8505);function Bp(n){return(0,wr.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,Xt.x)(t,void 0,void 0,u=>{s=(0,Vp.Xf)(n(u,Bp(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function X1(n){return n<=0?()=>s_.E:(0,wr.e)((e,t)=>{let r=[];e.subscribe((0,Xt.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function YF(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Fi((i,s)=>n(i,s,r)):gl.y,X1(1),t?jD(e):WO(()=>new Lp))}function eM(n){return(0,wr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Cn="primary",vT=Symbol("RouteTitle");class N9{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function c0(n){return new N9(n)}function k9(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const u=r[s],l=n[s];if(u.startsWith(":"))i[u.substring(1)]=l;else if(u!==l.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Yl(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!JF(n[i],e[i]))return!1;return!0}function JF(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function XF(n){return Array.prototype.concat.apply([],n)}function eV(n){return n.length>0?n[n.length-1]:null}function Us(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function jp(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,Gn.D)(Promise.resolve(n)):Ft(n)}const V9={exact:function rV(n,e,t){if(!a_(n.segments,e.segments)||!YD(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!rV(n.children[r],e.children[r],t))return!1;return!0},subset:iV},tV={exact:function L9(n,e){return Yl(n,e)},subset:function U9(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>JF(n[t],e[t]))},ignored:()=>!0};function nV(n,e,t){return V9[t.paths](n.root,e.root,t.matrixParams)&&tV[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function iV(n,e,t){return sV(n,e,e.segments,t)}function sV(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!a_(i,t)||e.hasChildren()||!YD(i,t,r))}if(n.segments.length===t.length){if(!a_(n.segments,t)||!YD(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!iV(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(a_(n.segments,i)&&YD(n.segments,i,r)&&n.children[Cn])&&sV(n.children[Cn],e,s,r)}}function YD(n,e,t){return e.every((r,i)=>tV[t](n[i].parameters,r.parameters))}class o_{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=c0(this.queryParams)),this._queryParamMap}toString(){return $9.serialize(this)}}class bn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Us(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return JD(this)}}class ET{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=c0(this.parameters)),this._parameterMap}toString(){return cV(this)}}function a_(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let oV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return new nM},providedIn:"root"}),n})();class nM{parse(e){const t=new Y9(e);return new o_(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${IT(e.root,!0)}`,r=function z9(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${XD(t)}=${XD(i)}`).join("&"):`${XD(t)}=${XD(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function H9(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const $9=new nM;function JD(n){return n.segments.map(e=>cV(e)).join("/")}function IT(n,e){if(!n.hasChildren())return JD(n);if(e){const t=n.children[Cn]?IT(n.children[Cn],!1):"",r=[];return Us(n.children,(i,s)=>{s!==Cn&&r.push(`${s}:${IT(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function j9(n,e){let t=[];return Us(n.children,(r,i)=>{i===Cn&&(t=t.concat(e(r,i)))}),Us(n.children,(r,i)=>{i!==Cn&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Cn?[IT(n.children[Cn],!1)]:[`${i}:${IT(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Cn]?`${JD(n)}/${t[0]}`:`${JD(n)}/(${t.join("//")})`}}function aV(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function XD(n){return aV(n).replace(/%3B/gi,";")}function rM(n){return aV(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function eS(n){return decodeURIComponent(n)}function uV(n){return eS(n.replace(/\+/g,"%20"))}function cV(n){return`${rM(n.path)}${function G9(n){return Object.keys(n).map(e=>`;${rM(e)}=${rM(n[e])}`).join("")}(n.parameters)}`}const q9=/^[^\/()?;=#]+/;function tS(n){const e=n.match(q9);return e?e[0]:""}const W9=/^[^=?&#]+/,Z9=/^[^&#]+/;class Y9{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new bn([],{}):new bn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Cn]=new bn(e,t)),r}parseSegment(){const e=tS(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new p.vHH(4009,!1);return this.capture(e),new ET(eS(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=tS(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=tS(this.remaining);i&&(r=i,this.capture(r))}e[eS(t)]=eS(r)}parseQueryParam(e){const t=function K9(n){const e=n.match(W9);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function Q9(n){const e=n.match(Z9);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=uV(t),s=uV(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=tS(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new p.vHH(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Cn);const u=this.parseChildren();t[s]=1===Object.keys(u).length?u[Cn]:new bn([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new p.vHH(4011,!1)}}function iM(n){return n.segments.length>0?new bn([],{[Cn]:n}):n}function nS(n){const e={};for(const r of Object.keys(n.children)){const s=nS(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function J9(n){if(1===n.numberOfChildren&&n.children[Cn]){const e=n.children[Cn];return new bn(n.segments.concat(e.segments),e.children)}return n}(new bn(n.segments,e))}function u_(n){return n instanceof o_}function tH(n,e,t,r,i){if(0===t.length)return l0(e.root,e.root,e.root,r,i);const s=function hV(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new dV(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,u)=>{if("object"==typeof s&&null!=s){if(s.outlets){const l={};return Us(s.outlets,(f,y)=>{l[y]="string"==typeof f?f.split("/"):f}),[...i,{outlets:l}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===u?(s.split("/").forEach((l,f)=>{0==f&&"."===l||(0==f&&""===l?t=!0:".."===l?e++:""!=l&&i.push(l))}),i):[...i,s]},[]);return new dV(t,e,r)}(t);return s.toRoot()?l0(e.root,e.root,new bn([],{}),r,i):function u(f){const y=function rH(n,e,t,r){if(n.isAbsolute)return new d0(e.root,!0,0);if(-1===r)return new d0(t,t===e.root,0);return function fV(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new p.vHH(4005,!1);i=r.segments.length}return new d0(r,!1,i-s)}(t,r+(wT(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,f),I=y.processChildren?CT(y.segmentGroup,y.index,s.commands):oM(y.segmentGroup,y.index,s.commands);return l0(e.root,y.segmentGroup,I,r,i)}(n.snapshot?._lastPathIndex)}function wT(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function TT(n){return"object"==typeof n&&null!=n&&n.outlets}function l0(n,e,t,r,i){let u,s={};r&&Us(r,(f,y)=>{s[y]=Array.isArray(f)?f.map(I=>`${I}`):`${f}`}),u=n===e?t:lV(n,e,t);const l=iM(nS(u));return new o_(l,s,i)}function lV(n,e,t){const r={};return Us(n.children,(i,s)=>{r[s]=i===e?t:lV(i,e,t)}),new bn(n.segments,r)}class dV{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&wT(r[0]))throw new p.vHH(4003,!1);const i=r.find(TT);if(i&&i!==eV(r))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class d0{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function oM(n,e,t){if(n||(n=new bn([],{})),0===n.segments.length&&n.hasChildren())return CT(n,e,t);const r=function sH(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const u=n.segments[i],l=t[r];if(TT(l))break;const f=`${l}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===f)break;if(f&&y&&"object"==typeof y&&void 0===y.outlets){if(!gV(f,y,u))return s;r+=2}else{if(!gV(f,{},u))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new bn(n.segments.slice(0,r.pathIndex),{});return s.children[Cn]=new bn(n.segments.slice(r.pathIndex),n.children),CT(s,0,i)}return r.match&&0===i.length?new bn(n.segments,{}):r.match&&!n.hasChildren()?aM(n,e,t):r.match?CT(n,0,i):aM(n,e,t)}function CT(n,e,t){if(0===t.length)return new bn(n.segments,{});{const r=function iH(n){return TT(n[0])?n[0].outlets:{[Cn]:n}}(t),i={};return Us(r,(s,u)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[u]=oM(n.children[u],e,s))}),Us(n.children,(s,u)=>{void 0===r[u]&&(i[u]=s)}),new bn(n.segments,i)}}function aM(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(TT(s)){const f=oH(s.outlets);return new bn(r,f)}if(0===i&&wT(t[0])){r.push(new ET(n.segments[e].path,pV(t[0]))),i++;continue}const u=TT(s)?s.outlets[Cn]:`${s}`,l=i<t.length-1?t[i+1]:null;u&&l&&wT(l)?(r.push(new ET(u,pV(l))),i+=2):(r.push(new ET(u,{})),i++)}return new bn(r,{})}function oH(n){const e={};return Us(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=aM(new bn([],{}),0,t))}),e}function pV(n){const e={};return Us(n,(t,r)=>e[r]=`${t}`),e}function gV(n,e,t){return n==t.path&&Yl(e,t.parameters)}class Bh{constructor(e,t){this.id=e,this.url=t}}class uM extends Bh{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class c_ extends Bh{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class rS extends Bh{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class mV extends Bh{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class aH extends Bh{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uH extends Bh{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cH extends Bh{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class lH extends Bh{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dH extends Bh{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hH{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class fH{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class pH{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gH{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mH{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _H{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _V{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class yV{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=cM(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=cM(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=lM(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return lM(e,this._root).map(t=>t.value)}}function cM(n,e){if(n===e.value)return e;for(const t of e.children){const r=cM(n,t);if(r)return r}return null}function lM(n,e){if(n===e.value)return[e];for(const t of e.children){const r=lM(n,t);if(r.length)return r.unshift(e),r}return[]}class jh{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function h0(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class vV extends yV{constructor(e,t){super(e),this.snapshot=t,dM(this,e)}toString(){return this.snapshot.toString()}}function EV(n,e){const t=function vH(n,e){const u=new iS([],{},{},"",{},Cn,e,null,n.root,-1,{});return new wV("",new jh(u,[]))}(n,e),r=new jc([new ET("",{})]),i=new jc({}),s=new jc({}),u=new jc({}),l=new jc(""),f=new l_(r,i,u,l,s,Cn,e,t.root);return f.snapshot=t.root,new vV(new jh(f,[]),t)}class l_{constructor(e,t,r,i,s,u,l,f){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=l,this.title=this.data?.pipe((0,Zt.U)(y=>y[vT]))??Ft(void 0),this._futureSnapshot=f}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Zt.U)(e=>c0(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Zt.U)(e=>c0(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function IV(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function EH(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class iS{constructor(e,t,r,i,s,u,l,f,y,I,w,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=l,this.title=this.data?.[vT],this.routeConfig=f,this._urlSegment=y,this._lastPathIndex=I,this._correctedLastPathIndex=x??I,this._resolve=w}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=c0(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=c0(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class wV extends yV{constructor(e,t){super(t),this.url=e,dM(this,t)}toString(){return TV(this._root)}}function dM(n,e){e.value._routerState=n,e.children.forEach(t=>dM(n,t))}function TV(n){const e=n.children.length>0?` { ${n.children.map(TV).join(", ")} } `:"";return`${n.value}${e}`}function hM(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Yl(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Yl(e.params,t.params)||n.params.next(t.params),function O9(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Yl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Yl(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function fM(n,e){const t=Yl(n.params,e.params)&&function B9(n,e){return a_(n,e)&&n.every((t,r)=>Yl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||fM(n.parent,e.parent))}function AT(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function wH(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return AT(n,r,i);return AT(n,r)})}(n,e,t);return new jh(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const u=s.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(l=>AT(n,l)),u}}const r=function TH(n){return new l_(new jc(n.url),new jc(n.params),new jc(n.queryParams),new jc(n.fragment),new jc(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>AT(n,s));return new jh(r,i)}}const pM="ngNavigationCancelingError";function CV(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=u_(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=AV(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function AV(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[pM]=!0,r.cancellationCode=e,t&&(r.url=t),r}function bV(n){return DV(n)&&u_(n.url)}function DV(n){return n&&n[pM]}class CH{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new bT,this.attachRef=null}}let bT=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new CH,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const sS=!1;let gM=(()=>{class n{constructor(t,r,i,s,u){this.parentContexts=t,this.location=r,this.changeDetector=s,this.environmentInjector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=i||Cn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,sS);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,sS);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,sS);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new p.vHH(4013,sS);this._activatedRoute=t;const i=this.location,u=t._futureSnapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,f=new AH(t,l,i.injector);if(r&&function bH(n){return!!n.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(u);this.activated=i.createComponent(y,i.length,f)}else this.activated=i.createComponent(u,{index:i.length,injector:f,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(bT),p.Y36(p.s_b),p.$8M("name"),p.Y36(p.sBO),p.Y36(p.lqb))},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class AH{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===l_?this.route:e===bT?this.childContexts:this.parent.get(e,t)}}let mM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},dependencies:[gM],encapsulation:2}),n})();function SV(n,e){return n.providers&&!n._injector&&(n._injector=(0,p.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function yM(n){const e=n.children&&n.children.map(yM),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Cn&&(t.component=mM),t}function $u(n){return n.outlet||Cn}function xV(n,e){const t=n.filter(r=>$u(r)===e);return t.push(...n.filter(r=>$u(r)!==e)),t}function DT(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class PH{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),hM(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=h0(t);e.children.forEach(s=>{const u=s.value.outlet;this.deactivateRoutes(s,i[u],r),delete i[u]}),Us(i,(s,u)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=h0(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);if(r&&r.outlet){const u=r.outlet.detach(),l=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:l})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=h0(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=h0(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new _H(s.value.snapshot))}),e.children.length&&this.forwardEvent(new gH(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(hM(i),i===s)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const l=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(l.contexts),u.attachRef=l.componentRef,u.route=l.route.value,u.outlet&&u.outlet.attach(l.componentRef,l.route.value),hM(l.route.value),this.activateChildRoutes(e,null,u.children)}else{const l=DT(i.snapshot),f=l?.get(p._Vd)??null;u.attachRef=null,u.route=i,u.resolver=f,u.injector=l,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class RV{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class oS{constructor(e,t){this.component=e,this.route=t}}function MH(n,e,t){const r=n._root;return ST(r,e?e._root:null,t,[r.value])}function f0(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,p.Z0I)(n)?e.get(n):n:r}function ST(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=h0(e);return n.children.forEach(u=>{(function kH(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,u=e?e.value:null,l=t?t.getContext(n.value.outlet):null;if(u&&s.routeConfig===u.routeConfig){const f=function OH(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!a_(n.url,e.url);case"pathParamsOrQueryParamsChange":return!a_(n.url,e.url)||!Yl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fM(n,e)||!Yl(n.queryParams,e.queryParams);default:return!fM(n,e)}}(u,s,s.routeConfig.runGuardsAndResolvers);f?i.canActivateChecks.push(new RV(r)):(s.data=u.data,s._resolvedData=u._resolvedData),ST(n,e,s.component?l?l.children:null:t,r,i),f&&l&&l.outlet&&l.outlet.isActivated&&i.canDeactivateChecks.push(new oS(l.outlet.component,u))}else u&&xT(e,l,i),i.canActivateChecks.push(new RV(r)),ST(n,null,s.component?l?l.children:null:t,r,i)})(u,s[u.value.outlet],t,r.concat([u.value]),i),delete s[u.value.outlet]}),Us(s,(u,l)=>xT(u,t.getContext(l),i)),i}function xT(n,e,t){const r=h0(n),i=n.value;Us(r,(s,u)=>{xT(s,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new oS(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function RT(n){return"function"==typeof n}function vM(n){return n instanceof Lp||"EmptyError"===n?.name}const aS=Symbol("INITIAL_VALUE");function p0(){return wi(n=>qF(n.map(e=>e.pipe(gT(1),pc(aS)))).pipe((0,Zt.U)(e=>{for(const t of e)if(!0!==t){if(t===aS)return aS;if(!1===t||t instanceof o_)return t}return!0}),Fi(e=>e!==aS),gT(1)))}function PV(n){return(0,R9.z)((0,so.b)(e=>{if(u_(e))throw CV(0,e)}),(0,Zt.U)(e=>!0===e))}const EM={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function MV(n,e,t,r,i){const s=IM(n,e,t);return s.matched?function JH(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Ft(i.map(u=>{const l=f0(u,n);return jp(function jH(n){return n&&RT(n.canMatch)}(l)?l.canMatch(e,t):n.runInContext(()=>l(e,t)))})).pipe(p0(),PV()):Ft(!0)}(r=SV(e,r),e,t).pipe((0,Zt.U)(u=>!0===u?s:{...EM})):Ft(s)}function IM(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...EM}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||k9)(t,n,e);if(!i)return{...EM};const s={};Us(i.posParams,(l,f)=>{s[f]=l.path});const u=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function uS(n,e,t,r,i="corrected"){if(t.length>0&&function tG(n,e,t){return t.some(r=>cS(n,e,r)&&$u(r)!==Cn)}(n,t,r)){const u=new bn(e,function eG(n,e,t,r){const i={};i[Cn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&$u(s)!==Cn){const u=new bn([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[$u(s)]=u}return i}(n,e,r,new bn(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function nG(n,e,t){return t.some(r=>cS(n,e,r))}(n,t,r)){const u=new bn(n.segments,function XH(n,e,t,r,i,s){const u={};for(const l of r)if(cS(n,t,l)&&!i[$u(l)]){const f=new bn([],{});f._sourceSegment=n,f._segmentIndexShift="legacy"===s?n.segments.length:e.length,u[$u(l)]=f}return{...i,...u}}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const s=new bn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function cS(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function NV(n,e,t,r){return!!($u(n)===r||r!==Cn&&cS(e,t,n))&&("**"===n.path||IM(e,n,t).matched)}function kV(n,e,t){return 0===e.length&&!n.children[t]}const lS=!1;class dS{constructor(e){this.segmentGroup=e||null}}class OV{constructor(e){this.urlTree=e}}function PT(n){return yT(new dS(n))}function FV(n){return yT(new OV(n))}class oG{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=uS(this.urlTree.root,[],[],this.config).segmentGroup,t=new bn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Cn).pipe((0,Zt.U)(s=>this.createUrlTree(nS(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Bp(s=>{if(s instanceof OV)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof dS?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Cn).pipe((0,Zt.U)(i=>this.createUrlTree(nS(i),e.queryParams,e.fragment))).pipe(Bp(i=>{throw i instanceof dS?this.noMatchError(i):i}))}noMatchError(e){return new p.vHH(4002,lS)}createUrlTree(e,t,r){const i=iM(e);return new o_(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Zt.U)(s=>new bn([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,Gn.D)(i).pipe(Up(s=>{const u=r.children[s],l=xV(t,s);return this.expandSegmentGroup(e,l,u,s).pipe((0,Zt.U)(f=>({segment:f,outlet:s})))}),vs((s,u)=>(s[u.outlet]=u.segment,s),{}),YF())}expandSegment(e,t,r,i,s,u){return(0,Gn.D)(r).pipe(Up(l=>this.expandSegmentAgainstRoute(e,t,r,l,i,s,u).pipe(Bp(y=>{if(y instanceof dS)return Ft(null);throw y}))),Uh(l=>!!l),Bp((l,f)=>{if(vM(l))return kV(t,i,s)?Ft(new bn([],{})):PT(t);throw l}))}expandSegmentAgainstRoute(e,t,r,i,s,u,l){return NV(i,t,s,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,u):l&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u):PT(t):PT(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?FV(s):this.lineralizeSegments(r,s).pipe((0,Vo.z)(u=>{const l=new bn(u,{});return this.expandSegment(e,l,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){const{matched:l,consumedSegments:f,remainingSegments:y,positionalParamSegments:I}=IM(t,i,s);if(!l)return PT(t);const w=this.applyRedirectCommands(f,i.redirectTo,I);return i.redirectTo.startsWith("/")?FV(w):this.lineralizeSegments(i,w).pipe((0,Vo.z)(x=>this.expandSegment(e,t,r,x.concat(y),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=SV(r,e),r.loadChildren?(r._loadedRoutes?Ft({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Zt.U)(l=>(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,new bn(i,{})))):Ft(new bn(i,{}))):MV(t,r,i,e).pipe(wi(({matched:u,consumedSegments:l,remainingSegments:f})=>u?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Vo.z)(I=>{const w=I.injector??e,x=I.routes,{segmentGroup:M,slicedSegments:B}=uS(t,l,f,x),Z=new bn(M.segments,M.children);if(0===B.length&&Z.hasChildren())return this.expandChildren(w,x,Z).pipe((0,Zt.U)(Ie=>new bn(l,Ie)));if(0===x.length&&0===B.length)return Ft(new bn(l,{}));const J=$u(r)===s;return this.expandSegment(w,Z,x,B,J?Cn:s,!0).pipe((0,Zt.U)(Oe=>new bn(l.concat(Oe.segments),Oe.children)))})):PT(t)))}getChildConfig(e,t,r){return t.children?Ft({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ft({routes:t._loadedRoutes,injector:t._loadedInjector}):function YH(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Ft(!0):Ft(i.map(u=>{const l=f0(u,n);return jp(function VH(n){return n&&RT(n.canLoad)}(l)?l.canLoad(e,t):n.runInContext(()=>l(e,t)))})).pipe(p0(),PV())}(e,t,r).pipe((0,Vo.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,so.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function iG(n){return yT(AV(lS,3))}())):Ft({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ft(r);if(i.numberOfChildren>1||!i.children[Cn])return yT(new p.vHH(4e3,lS));i=i.children[Cn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new o_(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Us(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const l=i.substring(1);r[s]=t[l]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let u={};return Us(t.children,(l,f)=>{u[f]=this.createSegmentGroup(e,l,r,i)}),new bn(s,u)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new p.vHH(4001,lS);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class uG{}class dG{constructor(e,t,r,i,s,u,l,f){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=l,this.urlSerializer=f}recognize(){const e=uS(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Cn).pipe((0,Zt.U)(t=>{if(null===t)return null;const r=new iS([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Cn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new jh(r,t),s=new wV(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=IV(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Gn.D)(Object.keys(r.children)).pipe(Up(i=>{const s=r.children[i],u=xV(t,i);return this.processSegmentGroup(e,u,s,i)}),vs((i,s)=>i&&s?(i.push(...s),i):null),function P9(n,e=!1){return(0,wr.e)((t,r)=>{let i=0;t.subscribe((0,Xt.x)(r,s=>{const u=n(s,i++);(u||e)&&r.next(s),!u&&r.complete()}))})}(i=>null!==i),jD(null),YF(),(0,Zt.U)(i=>{if(null===i)return null;const s=VV(i);return function hG(n){n.sort((e,t)=>e.value.outlet===Cn?-1:t.value.outlet===Cn?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return(0,Gn.D)(t).pipe(Up(u=>this.processSegmentAgainstRoute(u._injector??e,u,r,i,s)),Uh(u=>!!u),Bp(u=>{if(vM(u))return kV(r,i,s)?Ft([]):Ft(null);throw u}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!NV(t,r,i,s))return Ft(null);let u;if("**"===t.path){const l=i.length>0?eV(i).parameters:{},f=UV(r)+i.length;u=Ft({snapshot:new iS(i,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,jV(t),$u(t),t.component??t._loadedComponent??null,t,LV(r),f,$V(t),f),consumedSegments:[],remainingSegments:[]})}else u=MV(r,t,i,e).pipe((0,Zt.U)(({matched:l,consumedSegments:f,remainingSegments:y,parameters:I})=>{if(!l)return null;const w=UV(r)+f.length;return{snapshot:new iS(f,I,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,jV(t),$u(t),t.component??t._loadedComponent??null,t,LV(r),w,$V(t),w),consumedSegments:f,remainingSegments:y}}));return u.pipe(wi(l=>{if(null===l)return Ft(null);const{snapshot:f,consumedSegments:y,remainingSegments:I}=l;e=t._injector??e;const w=t._loadedInjector??e,x=function fG(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:M,slicedSegments:B}=uS(r,y,I,x.filter(J=>void 0===J.redirectTo),this.relativeLinkResolution);if(0===B.length&&M.hasChildren())return this.processChildren(w,x,M).pipe((0,Zt.U)(J=>null===J?null:[new jh(f,J)]));if(0===x.length&&0===B.length)return Ft([new jh(f,[])]);const Z=$u(t)===s;return this.processSegment(w,x,M,B,Z?Cn:s).pipe((0,Zt.U)(J=>null===J?null:[new jh(f,J)]))}))}}function pG(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function VV(n){const e=[],t=new Set;for(const r of n){if(!pG(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=VV(r.children);e.push(new jh(r.value,i))}return e.filter(r=>!t.has(r))}function LV(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function UV(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function jV(n){return n.data||{}}function $V(n){return n.resolve||{}}function HV(n){return"string"==typeof n.title||null===n.title}function wM(n){return wi(e=>{const t=n(e);return t?(0,Gn.D)(t).pipe((0,Zt.U)(()=>e)):Ft(e)})}let GV=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Cn);return r}getResolvedTitleForRoute(t){return t.data[vT]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(zV)},providedIn:"root"}),n})(),zV=(()=>{class n extends GV{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Md))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class wG{}class CG extends class TG{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const fS=new p.OlP("",{providedIn:"root",factory:()=>({})}),TM=new p.OlP("ROUTES");let CM=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ft(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=jp(t.loadComponent()).pipe((0,so.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),eM(()=>{this.componentLoaders.delete(t)})),i=new QF(r,()=>new Un.x).pipe(J1());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ft({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Zt.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(r);let f,y,I=!1;Array.isArray(l)?y=l:(f=l.create(t).injector,y=XF(f.get(TM,[],p.XFs.Self|p.XFs.Optional)));return{routes:y.map(yM),injector:f}}),eM(()=>{this.childrenLoaders.delete(r)})),u=new QF(s,()=>new Un.x).pipe(J1());return this.childrenLoaders.set(r,u),u}loadModuleFactoryOrRoutes(t){return jp(t()).pipe((0,Vo.z)(r=>r instanceof p.YKP||Array.isArray(r)?Ft(r):(0,Gn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3),p.LFG(p.Sil))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class bG{}class DG{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function SG(n){throw n}function xG(n,e,t){return e.parse("/")}const RG={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},PG={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function WV(){const n=(0,p.f3M)(oV),e=(0,p.f3M)(bT),t=(0,p.f3M)(Qe),r=(0,p.f3M)(p.zs3),i=(0,p.f3M)(p.Sil),s=(0,p.f3M)(TM,{optional:!0})??[],u=(0,p.f3M)(fS,{optional:!0})??{},l=(0,p.f3M)(zV),f=(0,p.f3M)(GV,{optional:!0}),y=(0,p.f3M)(bG,{optional:!0}),I=(0,p.f3M)(wG,{optional:!0}),w=new Bs(null,n,e,t,r,i,XF(s));return y&&(w.urlHandlingStrategy=y),I&&(w.routeReuseStrategy=I),w.titleStrategy=f??l,function MG(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,w),w}let Bs=(()=>{class n{constructor(t,r,i,s,u,l,f){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=f,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Un.x,this.errorHandler=SG,this.malformedUriErrorHandler=xG,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Ft(void 0),this.urlHandlingStrategy=new DG,this.routeReuseStrategy=new CG,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=u.get(CM),this.configLoader.onLoadEndListener=x=>this.triggerEvent(new fH(x)),this.configLoader.onLoadStartListener=x=>this.triggerEvent(new hH(x)),this.ngModule=u.get(p.h0i),this.console=u.get(p.c2e);const w=u.get(p.R0b);this.isNgZoneEnabled=w instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(f),this.currentUrlTree=function F9(){return new o_(new bn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=EV(this.currentUrlTree,this.rootComponentType),this.transitions=new jc({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Fi(i=>0!==i.id),(0,Zt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),wi(i=>{let s=!1,u=!1;return Ft(i).pipe((0,so.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),wi(l=>{const f=this.browserUrlTree.toString(),y=!this.navigated||l.extractedUrl.toString()!==f||f!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return KV(l.source)&&(this.browserUrlTree=l.extractedUrl),Ft(l).pipe(wi(w=>{const x=this.transitions.getValue();return r.next(new uM(w.id,this.serializeUrl(w.extractedUrl),w.source,w.restoredState)),x!==this.transitions.getValue()?s_.E:Promise.resolve(w)}),function aG(n,e,t,r){return wi(i=>function sG(n,e,t,r,i){return new oG(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Zt.U)(s=>({...i,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,so.b)(w=>{this.currentNavigation={...this.currentNavigation,finalUrl:w.urlAfterRedirects},i.urlAfterRedirects=w.urlAfterRedirects}),function mG(n,e,t,r,i,s){return(0,Vo.z)(u=>function lG(n,e,t,r,i,s,u="emptyOnly",l="legacy"){return new dG(n,e,t,r,i,u,l,s).recognize().pipe(wi(f=>null===f?function cG(n){return new ai.y(e=>e.error(n))}(new uG):Ft(f)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,i,s).pipe((0,Zt.U)(l=>({...u,targetSnapshot:l}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,so.b)(w=>{if(i.targetSnapshot=w.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!w.extras.skipLocationChange){const M=this.urlHandlingStrategy.merge(w.urlAfterRedirects,w.rawUrl);this.setBrowserUrl(M,w)}this.browserUrlTree=w.urlAfterRedirects}const x=new aH(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);r.next(x)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:M,source:B,restoredState:Z,extras:J}=l,me=new uM(x,this.serializeUrl(M),B,Z);r.next(me);const Oe=EV(M,this.rootComponentType).snapshot;return Ft(i={...l,targetSnapshot:Oe,urlAfterRedirects:M,extras:{...J,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=l.rawUrl,l.resolve(null),s_.E}),(0,so.b)(l=>{const f=new uH(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(f)}),(0,Zt.U)(l=>i={...l,guards:MH(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function HH(n,e){return(0,Vo.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:u}}=t;return 0===u.length&&0===s.length?Ft({...t,guardsResult:!0}):function GH(n,e,t,r){return(0,Gn.D)(n).pipe((0,Vo.z)(i=>function QH(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Ft(s.map(l=>{const f=DT(e)??i,y=f0(l,f);return jp(function BH(n){return n&&RT(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):f.runInContext(()=>y(n,e,t,r))).pipe(Uh())})).pipe(p0()):Ft(!0)}(i.component,i.route,t,e,r)),Uh(i=>!0!==i,!0))}(u,r,i,n).pipe((0,Vo.z)(l=>l&&function FH(n){return"boolean"==typeof n}(l)?function zH(n,e,t,r){return(0,Gn.D)(e).pipe(Up(i=>to(function WH(n,e){return null!==n&&e&&e(new pH(n)),Ft(!0)}(i.route.parent,r),function qH(n,e){return null!==n&&e&&e(new mH(n)),Ft(!0)}(i.route,r),function ZH(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(u=>function NH(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>KF(()=>Ft(u.guards.map(f=>{const y=DT(u.node)??t,I=f0(f,y);return jp(function UH(n){return n&&RT(n.canActivateChild)}(I)?I.canActivateChild(r,n):y.runInContext(()=>I(r,n))).pipe(Uh())})).pipe(p0())));return Ft(s).pipe(p0())}(n,i.path,t),function KH(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ft(!0);const i=r.map(s=>KF(()=>{const u=DT(e)??t,l=f0(s,u);return jp(function LH(n){return n&&RT(n.canActivate)}(l)?l.canActivate(e,n):u.runInContext(()=>l(e,n))).pipe(Uh())}));return Ft(i).pipe(p0())}(n,i.route,t))),Uh(i=>!0!==i,!0))}(r,s,n,e):Ft(l)),(0,Zt.U)(l=>({...t,guardsResult:l})))})}(this.ngModule.injector,l=>this.triggerEvent(l)),(0,so.b)(l=>{if(i.guardsResult=l.guardsResult,u_(l.guardsResult))throw CV(0,l.guardsResult);const f=new cH(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.triggerEvent(f)}),Fi(l=>!!l.guardsResult||(this.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),wM(l=>{if(l.guards.canActivateChecks.length)return Ft(l).pipe((0,so.b)(f=>{const y=new lH(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(y)}),wi(f=>{let y=!1;return Ft(f).pipe(function _G(n,e){return(0,Vo.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ft(t);let s=0;return(0,Gn.D)(i).pipe(Up(u=>function yG(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!HV(i)&&(s[vT]=i.title),function vG(n,e,t,r){const i=function EG(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Ft({});const s={};return(0,Gn.D)(i).pipe((0,Vo.z)(u=>function IG(n,e,t,r){const i=DT(e)??r,s=f0(n,i);return jp(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[u],e,t,r).pipe(Uh(),(0,so.b)(l=>{s[u]=l}))),X1(1),function M9(n){return(0,Zt.U)(()=>n)}(s),Bp(u=>vM(u)?s_.E:yT(u)))}(s,n,e,r).pipe((0,Zt.U)(u=>(n._resolvedData=u,n.data=IV(n,t).resolve,i&&HV(i)&&(n.data[vT]=i.title),null)))}(u.route,r,n,e)),(0,so.b)(()=>s++),X1(1),(0,Vo.z)(u=>s===i.length?Ft(t):s_.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,so.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),(0,so.b)(f=>{const y=new dH(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(y)}))}),wM(l=>{const f=y=>{const I=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&I.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,so.b)(w=>{y.component=w}),(0,Zt.U)(()=>{})));for(const w of y.children)I.push(...f(w));return I};return qF(f(l.targetSnapshot.root)).pipe(jD(),gT(1))}),wM(()=>this.afterPreactivation()),(0,Zt.U)(l=>{const f=function IH(n,e,t){const r=AT(n,e._root,t?t._root:void 0);return new vV(r,e)}(this.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return i={...l,targetRouterState:f}}),(0,so.b)(l=>{this.currentUrlTree=l.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),this.routerState=l.targetRouterState,"deferred"===this.urlUpdateStrategy&&(l.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,l),this.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,Zt.U)(r=>(new PH(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,l=>this.triggerEvent(l)),(0,so.b)({next(){s=!0},complete(){s=!0}}),eM(()=>{s||u||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Bp(l=>{if(u=!0,DV(l)){bV(l)||(this.navigated=!0,this.restoreHistory(i,!0));const f=new rS(i.id,this.serializeUrl(i.extractedUrl),l.message,l.cancellationCode);if(r.next(f),bV(l)){const y=this.urlHandlingStrategy.merge(l.url,this.rawUrlTree),I={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||KV(i.source)};this.scheduleNavigation(y,"imperative",null,I,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const f=new mV(i.id,this.serializeUrl(i.extractedUrl),l,i.targetSnapshot??void 0);r.next(f);try{i.resolve(this.errorHandler(l))}catch(y){i.reject(y)}}return s_.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const l={...s};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(i.state=l)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(yM),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:u,queryParamsHandling:l,preserveFragment:f}=r,y=i||this.routerState.root,I=f?this.currentUrlTree.fragment:u;let w=null;switch(l){case"merge":w={...this.currentUrlTree.queryParams,...s};break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=s||null}return null!==w&&(w=this.removeEmptyProps(w)),tH(y,this.currentUrlTree,t,w,I??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=u_(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function NG(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new p.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...RG}:!1===r?{...PG}:r,u_(t))return nV(this.currentUrlTree,t,i);const s=this.parseUrl(t);return nV(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new c_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,u){if(this.disposed)return Promise.resolve(!1);let l,f,y;u?(l=u.resolve,f=u.reject,y=u.promise):y=new Promise((x,M)=>{l=x,f=M});const I=++this.navigationId;let w;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),w=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):w=0,this.setTransition({id:I,targetPageId:w,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:l,reject:f,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(x=>Promise.reject(x))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const s=new rS(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:function(){return WV()},providedIn:"root"}),n})();function KV(n){return"imperative"!==n}let gS=(()=>{class n{constructor(t,r,i,s,u){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=u,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Un.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,p.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,p.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,p.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Bs),p.Y36(l_),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&p.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[p.TTD]}),n})(),mS=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Un.x,this.subscription=t.events.subscribe(s=>{s instanceof c_&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,p.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,p.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,p.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,s,u){return!!(0!==t||r||i||s||u||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Bs),p.Y36(l_),p.Y36(be))},n.\u0275dir=p.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&p.NdJ("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&p.uIk("target",r.target)("href",r.href,p.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[p.TTD]}),n})();class ZV{}let FG=(()=>{class n{constructor(t,r,i,s,u){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(Fi(t=>t instanceof c_),Up(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,p.MMx)(s.providers,t,`Route: ${s.path}`));const u=s._injector??t,l=s._loadedInjector??u;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(u,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(l,s.children??s._loadedRoutes))}return(0,Gn.D)(i).pipe((0,gu.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Ft(null);const s=i.pipe((0,Vo.z)(u=>null===u?Ft(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(r.loadComponent&&!r._loadedComponent){const u=this.loader.loadComponent(r);return(0,Gn.D)([s,u]).pipe((0,gu.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Bs),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(ZV),p.LFG(CM))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const AM=new p.OlP("");let QV=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof uM?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof c_&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof _V&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new _V(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function g0(n,e){return{\u0275kind:n,\u0275providers:e}}function bM(n){return[{provide:TM,multi:!0,useValue:n}]}function JV(){const n=(0,p.f3M)(p.zs3);return e=>{const t=n.get(p.z2F);if(e!==t.components[0])return;const r=n.get(Bs),i=n.get(XV);1===n.get(DM)&&r.initialNavigation(),n.get(eL,null,p.XFs.Optional)?.setUpPreloading(),n.get(AM,null,p.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const XV=new p.OlP("",{factory:()=>new Un.x}),DM=new p.OlP("",{providedIn:"root",factory:()=>1});const eL=new p.OlP("");function BG(n){return g0(0,[{provide:eL,useExisting:FG},{provide:ZV,useExisting:n}])}const tL=new p.OlP("ROUTER_FORROOT_GUARD"),jG=[Qe,{provide:oV,useClass:nM},{provide:Bs,useFactory:WV},bT,{provide:l_,useFactory:function YV(n){return n.routerState.root},deps:[Bs]},CM];function $G(){return new p.PXZ("Router",Bs)}let nL=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[jG,[],bM(t),{provide:tL,useFactory:qG,deps:[[Bs,new p.FiY,new p.tp0]]},{provide:fS,useValue:r||{}},r?.useHash?{provide:be,useClass:kt}:{provide:be,useClass:Pt},{provide:AM,useFactory:()=>{const n=(0,p.f3M)(Bs),e=(0,p.f3M)(uf),t=(0,p.f3M)(fS);return t.scrollOffset&&e.setOffset(t.scrollOffset),new QV(n,e,t)}},r?.preloadingStrategy?BG(r.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:$G},r?.initialNavigation?WG(r):[],[{provide:rL,useFactory:JV},{provide:p.tb,multi:!0,useExisting:rL}]]}}static forChild(t){return{ngModule:n,providers:[bM(t)]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(tL,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[mM]}),n})();function qG(n){return"guarded"}function WG(n){return["disabled"===n.initialNavigation?g0(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const e=(0,p.f3M)(Bs);return()=>{e.setUpLocationChangeListener()}}},{provide:DM,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?g0(2,[{provide:DM,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:e=>{const t=e.get(Q,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(s=>{const u=e.get(Bs),l=e.get(XV);(function i(s){e.get(Bs).events.pipe(Fi(l=>l instanceof c_||l instanceof rS||l instanceof mV),(0,Zt.U)(l=>l instanceof c_||l instanceof rS&&(0===l.code||1===l.code)&&null),Fi(l=>null!==l),gT(1)).subscribe(()=>{s()})})(()=>{s(!0),r=!0}),u.afterPreactivation=()=>(s(!0),r||l.closed?Ft(void 0):l),u.initialNavigation()}))}}]).\u0275providers:[]]}const rL=new p.OlP("");let ZG=(()=>{class n{constructor(){this.title="maroc-seisme"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:22,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-danger","mb-5"],["type","button","data-toggle","collapse","data-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse","justify-content-center"],[1,"navbar-nav"],["routerLink","/villages",1,"nav-item","mx-3"],[1,"navbar-brand"],["src","https://i.ibb.co/tJdLb00/love-3782141.png","alt","Maroc Solidarit\xe9","width","50","height","50",1,"d-inline-block","align-middle"],[1,"nav-item"],["routerLink","/contact",1,"nav-link"],["role","alert",1,"alert","alert-primary","text-center"],["role","alert",1,"alert","alert-info","text-center"],[1,"note"]],template:function(t,r){1&t&&(p.TgZ(0,"nav",0)(1,"button",1),p._UZ(2,"span",2),p.qZA(),p.TgZ(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),p._UZ(7,"img",7),p.qZA()(),p.TgZ(8,"li",8)(9,"a",9),p._uU(10,"Contactez-nous"),p.qZA()()()()(),p.TgZ(11,"div",10),p._uU(12," Veuillez remplir le formulaire avec responsabilit\xe9 | \u0627\u0644\u0631\u062c\u0627\u0621 \u0645\u0644\u0621 \u0627\u0644\u0646\u0645\u0648\u0630\u062c \u0628\u0645\u0633\u0624\u0648\u0644\u064a\u0629 "),p.qZA(),p.TgZ(13,"div",11),p._uU(14," S\xe9lectionnez un village, visualisez ses besoins. Si vous faites un don, veuillez incr\xe9menter le type de don correspondant pour ce village. Vous pouvez aussi sp\xe9cifier la quantit\xe9 de dons faits. Si la route vers un village est bloqu\xe9e, veuillez le mentionner dans les commentaires. | \u062d\u062f\u062f \u0642\u0631\u064a\u0629\u060c \u0639\u0627\u064a\u0646 \u0627\u062d\u062a\u064a\u0627\u062c\u0627\u062a\u0647\u0627. \u0625\u0630\u0627 \u0642\u062f\u0645\u062a \u062a\u0628\u0631\u0639\u064b\u0627\u060c \u064a\u0631\u062c\u0649 \u0632\u064a\u0627\u062f\u0629 \u0627\u0644\u0639\u062f\u062f \u062a\u062d\u062a \u0646\u0648\u0639 \u0627\u0644\u062a\u0628\u0631\u0639 \u0627\u0644\u0645\u0639\u0646\u064a \u0644\u0647\u0630\u0647 \u0627\u0644\u0642\u0631\u064a\u0629. \u064a\u0645\u0643\u0646\u0643 \u0623\u064a\u0636\u0627 \u062a\u062d\u062f\u064a\u062f \u0627\u0644\u0643\u0645\u064a\u0629 \u0645\u0646 \u0627\u0644\u062a\u0628\u0631\u0639\u0627\u062a \u0627\u0644\u062a\u064a \u062a\u0645\u062a. \u0625\u0630\u0627 \u0643\u0627\u0646 \u0627\u0644\u0637\u0631\u064a\u0642 \u0645\u063a\u0644\u0642\u064b\u0627 \u0646\u062d\u0648 \u0642\u0631\u064a\u0629\u060c \u064a\u0631\u062c\u0649 \u0630\u0643\u0631 \u0630\u0644\u0643 \u0641\u064a \u0627\u0644\u062a\u0639\u0644\u064a\u0642\u0627\u062a. "),p.qZA(),p._UZ(15,"router-outlet")(16,"br")(17,"br"),p.TgZ(18,"p",12),p._uU(19,"\u26a0\ufe0f Note : Ces donn\xe9es ne sont pas officielles et r\xe9sultent de l'interaction des utilisateurs. Nous ne sommes pas responsables des r\xe9sultats fournis."),p.qZA(),p.TgZ(20,"p",12),p._uU(21,"\u26a0\ufe0f \u0645\u0644\u0627\u062d\u0638\u0629: \u0647\u0630\u0647 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0644\u064a\u0633\u062a \u0631\u0633\u0645\u064a\u0629 \u0648\u062a\u0646\u062a\u062c \u0639\u0646 \u062a\u0641\u0627\u0639\u0644 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646. \u0646\u062d\u0646 \u0644\u0633\u0646\u0627 \u0645\u0633\u0624\u0648\u0644\u064a\u0646 \u0639\u0646 \u0627\u0644\u0646\u062a\u0627\u0626\u062c \u0627\u0644\u0645\u0642\u062f\u0645\u0629"),p.qZA())},dependencies:[gM,gS,mS],styles:[".note[_ngcontent-%COMP%]{color:red;font-weight:700}"]}),n})(),iL=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n}),n})(),d_=(()=>{class n extends iL{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();const Jl=new p.OlP("NgValueAccessor"),JG={provide:Jl,useExisting:(0,p.Gpc)(()=>MT),multi:!0},ez=new p.OlP("CompositionEventMode");let MT=(()=>{class n extends iL{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function XG(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(ez,8))},n.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&p.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[p._Bn([JG]),p.qOj]}),n})();function $p(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function oL(n){return null!=n&&"number"==typeof n.length}const oo=new p.OlP("NgValidators"),Hp=new p.OlP("NgAsyncValidators"),nz=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class SM{static min(e){return function aL(n){return e=>{if($p(e.value)||$p(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function uL(n){return e=>{if($p(e.value)||$p(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return cL(e)}static requiredTrue(e){return function lL(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function dL(n){return $p(n.value)||nz.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function hL(n){return e=>$p(e.value)||!oL(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function fL(n){return e=>oL(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function pL(n){if(!n)return vS;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if($p(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return EL(e)}static composeAsync(e){return IL(e)}}function cL(n){return $p(n.value)?{required:!0}:null}function vS(n){return null}function gL(n){return null!=n}function mL(n){return(0,p.QGY)(n)?(0,Gn.D)(n):n}function _L(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function yL(n,e){return e.map(t=>t(n))}function vL(n){return n.map(e=>function rz(n){return!n.validate}(e)?e:t=>e.validate(t))}function EL(n){if(!n)return null;const e=n.filter(gL);return 0==e.length?null:function(t){return _L(yL(t,e))}}function xM(n){return null!=n?EL(vL(n)):null}function IL(n){if(!n)return null;const e=n.filter(gL);return 0==e.length?null:function(t){return function QG(...n){const e=(0,Ao.jO)(n),{args:t,keys:r}=HF(n),i=new ai.y(s=>{const{length:u}=t;if(!u)return void s.complete();const l=new Array(u);let f=u,y=u;for(let I=0;I<u;I++){let w=!1;(0,Vp.Xf)(t[I]).subscribe((0,Xt.x)(s,x=>{w||(w=!0,y--),l[I]=x},()=>f--,void 0,()=>{(!f||!w)&&(y||s.next(r?zF(r,l):l),s.complete())}))}});return e?i.pipe(GF(e)):i}(yL(t,e).map(mL)).pipe((0,Zt.U)(_L))}}function RM(n){return null!=n?IL(vL(n)):null}function wL(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function TL(n){return n._rawValidators}function CL(n){return n._rawAsyncValidators}function PM(n){return n?Array.isArray(n)?n:[n]:[]}function ES(n,e){return Array.isArray(n)?n.includes(e):n===e}function AL(n,e){const t=PM(e);return PM(n).forEach(i=>{ES(t,i)||t.push(i)}),t}function bL(n,e){return PM(e).filter(t=>!ES(n,t))}class DL{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=xM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=RM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Lo extends DL{get formDirective(){return null}get path(){return null}}class Gp extends DL{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class SL{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let MM=(()=>{class n extends SL{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Gp,2))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[p.qOj]}),n})(),xL=(()=>{class n extends SL{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Lo,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[p.qOj]}),n})();const NT="VALID",wS="INVALID",m0="PENDING",kT="DISABLED";function FM(n){return(TS(n)?n.validators:n)||null}function PL(n){return Array.isArray(n)?xM(n):n||null}function VM(n,e){return(TS(e)?e.asyncValidators:n)||null}function ML(n){return Array.isArray(n)?RM(n):n||null}function TS(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function NL(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new p.vHH(1e3,"");if(!r[t])throw new p.vHH(1001,"")}function kL(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new p.vHH(1002,"")})}class CS{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=PL(this._rawValidators),this._composedAsyncValidatorFn=ML(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===NT}get invalid(){return this.status===wS}get pending(){return this.status==m0}get disabled(){return this.status===kT}get enabled(){return this.status!==kT}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=PL(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=ML(e)}addValidators(e){this.setValidators(AL(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(AL(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(bL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(bL(e,this._rawAsyncValidators))}hasValidator(e){return ES(this._rawValidators,e)}hasAsyncValidator(e){return ES(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=m0,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=kT,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=NT,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===NT||this.status===m0)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?kT:NT}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=m0,this._hasOwnPendingAsyncValidator=!0;const t=mL(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?kT:this.errors?wS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(m0)?m0:this._anyControlsHaveStatus(wS)?wS:NT}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){TS(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class OT extends CS{constructor(e,t,r){super(FM(t),VM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){kL(this,0,e),Object.keys(e).forEach(r=>{NL(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class OL extends OT{}function AS(n,e){return[...e.path,n]}function FT(n,e){LM(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function dz(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&FL(n,e)})}(n,e),function fz(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function hz(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&FL(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function lz(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function bS(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),SS(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function DS(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function LM(n,e){const t=TL(n);null!==e.validator?n.setValidators(wL(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=CL(n);null!==e.asyncValidator?n.setAsyncValidators(wL(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();DS(e._rawValidators,i),DS(e._rawAsyncValidators,i)}function SS(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=TL(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=CL(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return DS(e._rawValidators,r),DS(e._rawAsyncValidators,r),t}function FL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function UM(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function BM(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===MT?t=s:function mz(n){return Object.getPrototypeOf(n.constructor)===d_}(s)?r=s:i=s}),i||r||t||null}function BL(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function jL(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const LT=class extends CS{constructor(e=null,t,r){super(FM(t),VM(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),TS(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=jL(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){BL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){BL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){jL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Iz={provide:Gp,useExisting:(0,p.Gpc)(()=>$M)},GL=(()=>Promise.resolve())();let $M=(()=>{class n extends Gp{constructor(t,r,i,s,u){super(),this._changeDetectorRef=u,this.control=new LT,this._registered=!1,this.update=new p.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=BM(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),UM(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){FT(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){GL.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,p.D6c)(r);GL.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?AS(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Lo,9),p.Y36(oo,10),p.Y36(Hp,10),p.Y36(Jl,10),p.Y36(p.sBO,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([Iz]),p.qOj,p.TTD]}),n})(),zL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),WL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();const HM=new p.OlP("NgModelWithFormControlWarning"),Dz={provide:Lo,useExisting:(0,p.Gpc)(()=>xS)};let xS=(()=>{class n extends Lo{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(SS(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return FT(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){bS(t.control||null,t,!1),function _z(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function UL(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(bS(r||null,t),(n=>n instanceof LT)(i)&&(FT(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function VL(n,e){LM(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function pz(n,e){return SS(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){LM(this.form,this),this._oldForm&&SS(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(oo,10),p.Y36(Hp,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&p.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([Dz]),p.qOj,p.TTD]}),n})();const Rz={provide:Gp,useExisting:(0,p.Gpc)(()=>qM)};let qM=(()=>{class n extends Gp{constructor(t,r,i,s,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=BM(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),UM(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return AS(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(p.Y36(Lo,13),p.Y36(oo,10),p.Y36(Hp,10),p.Y36(Jl,10),p.Y36(HM,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([Rz]),p.qOj,p.TTD]}),n})(),h_=(()=>{class n{constructor(){this._validator=vS}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):vS,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,features:[p.TTD]}),n})();const Uz={provide:oo,useExisting:(0,p.Gpc)(()=>RS),multi:!0};let RS=(()=>{class n extends h_{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=p.D6c,this.createValidator=t=>cL}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&p.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[p._Bn([Uz]),p.qOj]}),n})(),c2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[WL]}),n})(),zz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[c2]}),n})(),l2=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:HM,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[c2]}),n})();class d2 extends CS{constructor(e,t,r){super(FM(t),VM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){kL(this,0,e),e.forEach((r,i)=>{NL(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function h2(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let qz=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return h2(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new OT(i,s)}record(t,r=null){const i=this._reduceControls(t);return new OL(i,r)}control(t,r,i){let s={};return this.useNonNullable?(h2(r)?s=r:(s.validators=r,s.asyncValidators=i),new LT(t,{...s,nonNullable:!0})):new LT(t,r,i)}array(t,r,i){const s=t.map(u=>this._createControl(u));return new d2(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof LT||t instanceof CS?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:l2}),n})();class Wz{constructor(e,t){this._delegate=e,this.firebase=t,(0,Ti._addComponent)(e,new xa.wA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Ti.deleteApp)(this._delegate)))}_getService(e,t=Ti._DEFAULT_ENTRY_NAME){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&"EXPLICIT"===(null===(r=i.getComponent())||void 0===r?void 0:r.instantiationMode)&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=Ti._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,Ti._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,Ti._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const f2=new Et.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Qz=function p2(){const n=function Zz(n){const e={},t={__esModule:!0,initializeApp:function s(y,I={}){const w=Ti.initializeApp(y,I);if((0,Et.r3)(e,w.name))return e[w.name];const x=new n(w,t);return e[w.name]=x,x},app:i,registerVersion:Ti.registerVersion,setLogLevel:Ti.setLogLevel,onLog:Ti.onLog,apps:null,SDK_VERSION:Ti.SDK_VERSION,INTERNAL:{registerComponent:function l(y){const I=y.name,w=I.replace("-compat","");if(Ti._registerComponent(y)&&"PUBLIC"===y.type){const x=(M=i())=>{if("function"!=typeof M[w])throw f2.create("invalid-app-argument",{appName:I});return M[w]()};void 0!==y.serviceProps&&(0,Et.ZB)(x,y.serviceProps),t[w]=x,n.prototype[w]=function(...M){return this._getService.bind(this,I).apply(this,y.multipleInstances?M:[])}}return"PUBLIC"===y.type?t[w]:null},removeApp:function r(y){delete e[y]},useAsService:function f(y,I){return"serverAuth"===I?null:I},modularAPIs:Ti}};function i(y){if(!(0,Et.r3)(e,y=y||Ti._DEFAULT_ENTRY_NAME))throw f2.create("no-app",{appName:y});return e[y]}return t.default=t,Object.defineProperty(t,"apps",{get:function u(){return Object.keys(e).map(y=>e[y])}}),i.App=n,t}(Wz);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:p2,extendNamespace:function e(t){(0,Et.ZB)(n,t)},createSubscribe:Et.ne,ErrorFactory:Et.LL,deepExtend:Et.ZB}),n}(),g2=new or.Yd("@firebase/app-compat");if((0,Et.jU)()&&void 0!==self.firebase){g2.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const n=self.firebase.SDK_VERSION;n&&n.indexOf("LITE")>=0&&g2.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const e3=Qz;!function Xz(n){(0,Ti.registerVersion)("@firebase/app-compat","0.2.18",n)}();var wt,t3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$c={},ZM=ZM||{},cn=t3||self;function PS(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function UT(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var QM="closure_uid_"+(1e9*Math.random()>>>0),r3=0;function i3(n,e,t){return n.call.apply(n.bind,arguments)}function s3(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ao(n,e,t){return(ao=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i3:s3).apply(null,arguments)}function MS(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ds(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var u=Array(arguments.length-2),l=2;l<arguments.length;l++)u[l-2]=arguments[l];return e.prototype[i].apply(r,u)}}function zp(){this.s=this.s,this.o=this.o}zp.prototype.s=!1,zp.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function n3(n){Object.prototype.hasOwnProperty.call(n,QM)&&n[QM]||(n[QM]=++r3)}(this)},zp.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const m2=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function YM(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function _2(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(PS(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let u=0;u<s;u++)n[i+u]=r[u]}else n.push(r)}}function uo(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}uo.prototype.h=function(){this.defaultPrevented=!0};var a3=function(){if(!cn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{cn.addEventListener("test",()=>{},e),cn.removeEventListener("test",()=>{},e)}catch{}return n}();function BT(n){return/^[\s\xa0]*$/.test(n)}function NS(){var n=cn.navigator;return n&&(n=n.userAgent)?n:""}function Xl(n){return-1!=NS().indexOf(n)}function JM(n){return JM[" "](n),n}JM[" "]=function(){};var eN,c3=Xl("Opera"),_0=Xl("Trident")||Xl("MSIE"),y2=Xl("Edge"),XM=y2||_0,v2=Xl("Gecko")&&!(-1!=NS().toLowerCase().indexOf("webkit")&&!Xl("Edge"))&&!(Xl("Trident")||Xl("MSIE"))&&!Xl("Edge"),l3=-1!=NS().toLowerCase().indexOf("webkit")&&!Xl("Edge");function E2(){var n=cn.document;return n?n.documentMode:void 0}e:{var tN="",nN=function(){var n=NS();return v2?/rv:([^\);]+)(\)|;)/.exec(n):y2?/Edge\/([\d\.]+)/.exec(n):_0?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):l3?/WebKit\/(\S+)/.exec(n):c3?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(nN&&(tN=nN?nN[1]:""),_0){var rN=E2();if(null!=rN&&rN>parseFloat(tN)){eN=String(rN);break e}}eN=tN}var d3=cn.document&&_0&&(E2()||parseInt(eN,10))||void 0;function jT(n,e){if(uo.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(v2){e:{try{JM(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:h3[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&jT.$.h.call(this)}}Ds(jT,uo);var h3={2:"touch",3:"pen",4:"mouse"};jT.prototype.h=function(){jT.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var $T="closure_listenable_"+(1e6*Math.random()|0),f3=0;function p3(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++f3,this.fa=this.ia=!1}function kS(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function sN(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function w2(n){const e={};for(const t in n)e[t]=n[t];return e}const T2="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C2(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<T2.length;s++)t=T2[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function OS(n){this.src=n,this.g={},this.h=0}function oN(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=m2(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(kS(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function aN(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}OS.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var u=aN(n,e,r,i);return-1<u?(e=n[u],t||(e.ia=!1)):((e=new p3(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var uN="closure_lm_"+(1e6*Math.random()|0),cN={};function A2(n,e,t,r,i){if(r&&r.once)return D2(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)A2(n,e[s],t,r,i);return null}return t=fN(t),n&&n[$T]?n.O(e,t,UT(r)?!!r.capture:!!r,i):b2(n,e,t,!1,r,i)}function b2(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var u=UT(i)?!!i.capture:!!i,l=dN(n);if(l||(n[uN]=l=new OS(n)),(t=l.add(e,t,r,u,s)).proxy)return t;if(r=function m3(){const e=_3;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)a3||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(x2(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function D2(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)D2(n,e[s],t,r,i);return null}return t=fN(t),n&&n[$T]?n.P(e,t,UT(r)?!!r.capture:!!r,i):b2(n,e,t,!0,r,i)}function S2(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)S2(n,e[s],t,r,i);else r=UT(r)?!!r.capture:!!r,t=fN(t),n&&n[$T]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=aN(s=n.g[e],t,r,i))&&(kS(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=dN(n))&&(e=n.g[e.toString()],n=-1,e&&(n=aN(e,t,r,i)),(t=-1<n?e[n]:null)&&lN(t))}function lN(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[$T])oN(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(x2(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=dN(e))?(oN(t,n),0==t.h&&(t.src=null,e[uN]=null)):kS(n)}}}function x2(n){return n in cN?cN[n]:cN[n]="on"+n}function _3(n,e){if(n.fa)n=!0;else{e=new jT(e,this);var t=n.listener,r=n.la||n.src;n.ia&&lN(n),n=t.call(r,e)}return n}function dN(n){return(n=n[uN])instanceof OS?n:null}var hN="__closure_events_fn_"+(1e9*Math.random()>>>0);function fN(n){return"function"==typeof n?n:(n[hN]||(n[hN]=function(e){return n.handleEvent(e)}),n[hN])}function Ss(){zp.call(this),this.i=new OS(this),this.S=this,this.J=null}function js(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new uo(e,n);else if(e instanceof uo)e.target=e.target||n;else{var i=e;C2(e=new uo(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var u=e.g=t[s];i=FS(u,r,!0,e)&&i}if(i=FS(u=e.g=n,r,!0,e)&&i,i=FS(u,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=FS(u=e.g=t[s],r,!1,e)&&i}function FS(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var u=e[s];if(u&&!u.fa&&u.capture==t){var l=u.listener,f=u.la||u.src;u.ia&&oN(n.i,u),i=!1!==l.call(f,r)&&i}}return i&&!r.defaultPrevented}Ds(Ss,zp),Ss.prototype[$T]=!0,Ss.prototype.removeEventListener=function(n,e,t,r){S2(this,n,e,t,r)},Ss.prototype.N=function(){if(Ss.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)kS(t[r]);delete n.g[e],n.h--}}this.J=null},Ss.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ss.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var pN=cn.JSON.stringify;function v3(){var n=gN;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var R2=new class y3{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new I3,n=>n.reset());class I3{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function w3(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function T3(n){cn.setTimeout(()=>{throw n},0)}let HT,GT=!1,gN=new class E3{constructor(){this.h=this.g=null}add(e,t){const r=R2.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},P2=()=>{const n=cn.Promise.resolve(void 0);HT=()=>{n.then(C3)}};var C3=()=>{for(var n;n=v3();){try{n.h.call(n.g)}catch(t){T3(t)}var e=R2;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}GT=!1};function VS(n,e){Ss.call(this),this.h=n||1,this.g=e||cn,this.j=ao(this.qb,this),this.l=Date.now()}function mN(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function _N(n,e,t){if("function"==typeof n)t&&(n=ao(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ao(n.handleEvent,n)}return 2147483647<Number(e)?-1:cn.setTimeout(n,e||0)}function M2(n){n.g=_N(()=>{n.g=null,n.i&&(n.i=!1,M2(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ds(VS,Ss),(wt=VS.prototype).ga=!1,wt.T=null,wt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),js(this,"tick"),this.ga&&(mN(this),this.start()))}},wt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},wt.N=function(){VS.$.N.call(this),mN(this),delete this.g};class A3 extends zp{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:M2(this)}N(){super.N(),this.g&&(cn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zT(n){zp.call(this),this.h=n,this.g={}}Ds(zT,zp);var N2=[];function k2(n,e,t,r){Array.isArray(t)||(t&&(N2[0]=t.toString()),t=N2);for(var i=0;i<t.length;i++){var s=A2(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function O2(n){sN(n.g,function(e,t){this.g.hasOwnProperty(t)&&lN(e)},n),n.g={}}function LS(){this.g=!0}function y0(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function x3(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var u=1;u<i.length;u++)i[u]=""}}}return pN(t)}catch{return e}}(n,t)+(r?" "+r:"")})}zT.prototype.N=function(){zT.$.N.call(this),O2(this)},zT.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},LS.prototype.Ea=function(){this.g=!1},LS.prototype.info=function(){};var f_={},F2=null;function US(){return F2=F2||new Ss}function V2(n){uo.call(this,f_.Ta,n)}function qT(n){const e=US();js(e,new V2(e))}function L2(n,e){uo.call(this,f_.STAT_EVENT,n),this.stat=e}function Uo(n){const e=US();js(e,new L2(e,n))}function U2(n,e){uo.call(this,f_.Ua,n),this.size=e}function WT(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return cn.setTimeout(function(){n()},e)}f_.Ta="serverreachability",Ds(V2,uo),f_.STAT_EVENT="statevent",Ds(L2,uo),f_.Ua="timingevent",Ds(U2,uo);var BS={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},B2={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function yN(){}function $2(){}yN.prototype.h=null;var IN,KT={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function vN(){uo.call(this,"d")}function EN(){uo.call(this,"c")}function jS(){}function ZT(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new zT(this),this.P=R3,this.V=new VS(n=XM?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new H2}function H2(){this.i=null,this.g="",this.h=!1}Ds(vN,uo),Ds(EN,uo),Ds(jS,yN),jS.prototype.g=function(){return new XMLHttpRequest},jS.prototype.i=function(){return{}},IN=new jS;var R3=45e3,wN={},$S={};function TN(n,e,t){n.L=1,n.v=qS($h(e)),n.s=t,n.S=!0,G2(n,null)}function G2(n,e){n.G=Date.now(),QT(n),n.A=$h(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),eU(t.i,"t",r),n.C=0,t=n.l.J,n.h=new H2,n.g=CU(n.l,t?e:null,!n.s),0<n.O&&(n.M=new A3(ao(n.Pa,n,n.g),n.O)),k2(n.U,n.g,"readystatechange",n.nb),e=n.I?w2(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),qT(),function b3(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var u="",l=s.split("&"),f=0;f<l.length;f++){var y=l[f].split("=");if(1<y.length){var I=y[0];y=y[1];var w=I.split("_");u=2<=w.length&&"type"==w[1]?u+(I+"=")+y+"&":u+(I+"=redacted&")}}else u=null;else u=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.W,n.s)}function z2(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function q2(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=P3(n,t),i==$S){4==e&&(n.o=4,Uo(14),r=!1),y0(n.j,n.m,null,"[Incomplete Response]");break}if(i==wN){n.o=4,Uo(15),y0(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}y0(n.j,n.m,i,null),CN(n,i)}z2(n)&&i!=$S&&i!=wN&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Uo(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),PN(e),e.M=!0,Uo(11))):(y0(n.j,n.m,t,"[Invalid Chunked Response]"),p_(n),YT(n))}function P3(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?$S:(t=Number(e.substring(t,r)),isNaN(t)?wN:(r+=1)+t>e.length?$S:(e=e.slice(r,r+t),n.C=r+t,e))}function QT(n){n.Y=Date.now()+n.P,W2(n,n.P)}function W2(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=WT(ao(n.lb,n),e)}function HS(n){n.B&&(cn.clearTimeout(n.B),n.B=null)}function YT(n){0==n.l.H||n.J||EU(n.l,n)}function p_(n){HS(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,mN(n.V),O2(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function CN(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||AN(t.i,n)))if(!n.K&&AN(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;JS(t),QS(t)}RN(t),Uo(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=WT(ao(t.ib,t),6e3));if(1>=rU(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else m_(t,11)}else if((n.K||t.g==n)&&JS(t),!BT(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.V=y[0],y=y[1],2==t.H)if("c"==y[0]){t.K=y[1],t.pa=y[2];const I=y[3];null!=I&&(t.ra=I,t.l.info("VER="+t.ra));const w=y[4];null!=w&&(t.Ga=w,t.l.info("SVER="+t.Ga));const x=y[5];null!=x&&"number"==typeof x&&0<x&&(t.L=r=1.5*x,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const M=n.g;if(M){const B=M.g?M.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var s=r.i;s.g||-1==B.indexOf("spdy")&&-1==B.indexOf("quic")&&-1==B.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(bN(s,s.h),s.h=null))}if(r.F){const Z=M.g?M.g.getResponseHeader("X-HTTP-Session-Id"):null;Z&&(r.Da=Z,Hr(r.I,r.F,Z))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var u=n;if((r=t).wa=TU(r,r.J?r.pa:null,r.Y),u.K){iU(r.i,u);var l=u,f=r.L;f&&l.setTimeout(f),l.B&&(HS(l),QT(l)),r.g=u}else yU(r);0<t.j.length&&YS(t)}else"stop"!=y[0]&&"close"!=y[0]||m_(t,7);else 3==t.H&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?m_(t,7):xN(t):"noop"!=y[0]&&t.h&&t.h.Aa(y),t.A=0)}qT()}catch{}}function K2(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(PS(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function N3(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(PS(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function M3(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(PS(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(wt=ZT.prototype).setTimeout=function(n){this.P=n},wt.nb=function(n){n=n.target;const e=this.M;e&&3==ed(n)?e.l():this.Pa(n)},wt.Pa=function(n){try{if(n==this.g)e:{const I=ed(this.g);var e=this.g.Ia();if(this.g.da(),!(3>I)&&(3!=I||XM||this.g&&(this.h.h||this.g.ja()||hU(this.g)))){this.J||4!=I||7==e||qT(),HS(this);var t=this.g.da();this.ca=t;t:if(z2(this)){var r=hU(this.g);n="";var i=r.length,s=4==ed(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){p_(this),YT(this);var u="";break t}this.h.i=new cn.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==t,function D3(n,e,t,r,i,s,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+u})}(this.j,this.u,this.A,this.m,this.W,I,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var l,f=this.g;if((l=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!BT(l)){var y=l;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Uo(12),p_(this),YT(this);break e}y0(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,CN(this,t)}this.S?(q2(this,I,u),XM&&this.i&&3==I&&(k2(this.U,this.V,"tick",this.mb),this.V.start())):(y0(this.j,this.m,u,null),CN(this,u)),4==I&&p_(this),this.i&&!this.J&&(4==I?EU(this.l,this):(this.i=!1,QT(this)))}else(function Y3(n){const e={};n=(n.g&&2<=ed(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(BT(n[r]))continue;var t=w3(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function g3(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Uo(12)):(this.o=0,Uo(13)),p_(this),YT(this)}}}catch{}},wt.mb=function(){if(this.g){var n=ed(this.g),e=this.g.ja();this.C<e.length&&(HS(this),q2(this,n,e),this.i&&4!=n&&QT(this))}},wt.cancel=function(){this.J=!0,p_(this)},wt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function S3(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(qT(),Uo(17)),p_(this),this.o=2,YT(this)):W2(this,this.Y-n)};var Z2=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function g_(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof g_){this.h=n.h,GS(this,n.j),this.s=n.s,this.g=n.g,zS(this,n.m),this.l=n.l;var e=n.i,t=new eC;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Q2(this,t),this.o=n.o}else n&&(e=String(n).match(Z2))?(this.h=!1,GS(this,e[1]||"",!0),this.s=JT(e[2]||""),this.g=JT(e[3]||"",!0),zS(this,e[4]),this.l=JT(e[5]||"",!0),Q2(this,e[6]||"",!0),this.o=JT(e[7]||"")):(this.h=!1,this.i=new eC(null,this.h))}function $h(n){return new g_(n)}function GS(n,e,t){n.j=t?JT(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function zS(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Q2(n,e,t){e instanceof eC?(n.i=e,function B3(n,e){e&&!n.j&&(qp(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(J2(this,r),eU(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=XT(e,L3)),n.i=new eC(e,n.h))}function Hr(n,e,t){n.i.set(e,t)}function qS(n){return Hr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function JT(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function XT(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,O3),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function O3(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}g_.prototype.toString=function(){var n=[],e=this.j;e&&n.push(XT(e,Y2,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(XT(e,Y2,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(XT(t,"/"==t.charAt(0)?V3:F3,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",XT(t,U3)),n.join("")};var Y2=/[#\/\?@]/g,F3=/[#\?:]/g,V3=/[#\?]/g,L3=/[#\?@]/g,U3=/#/g;function eC(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function qp(n){n.g||(n.g=new Map,n.h=0,n.i&&function k3(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function J2(n,e){qp(n),e=v0(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function X2(n,e){return qp(n),e=v0(n,e),n.g.has(e)}function eU(n,e,t){J2(n,e),0<t.length&&(n.i=null,n.g.set(v0(n,e),YM(t)),n.h+=t.length)}function v0(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function tU(n){this.l=n||$3,n=cn.PerformanceNavigationTiming?0<(n=cn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(cn.g&&cn.g.Ka&&cn.g.Ka()&&cn.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(wt=eC.prototype).add=function(n,e){qp(this),this.i=null,n=v0(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},wt.forEach=function(n,e){qp(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},wt.ta=function(){qp(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},wt.Z=function(n){qp(this);let e=[];if("string"==typeof n)X2(this,n)&&(e=e.concat(this.g.get(v0(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},wt.set=function(n,e){return qp(this),this.i=null,X2(this,n=v0(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},wt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},wt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),u=this.Z(r);for(r=0;r<u.length;r++){var i=s;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var $3=10;function nU(n){return!!n.h||!!n.g&&n.g.size>=n.j}function rU(n){return n.h?1:n.g?n.g.size:0}function AN(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function bN(n,e){n.g?n.g.add(e):n.h=e}function iU(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function sU(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return YM(n.i)}function G3(){this.g=new class{stringify(n){return cn.JSON.stringify(n,void 0)}parse(n){return cn.JSON.parse(n,void 0)}}}function z3(n,e,t){const r=t||"";try{K2(n,function(i,s){let u=i;UT(i)&&(u=pN(i)),e.push(r+s+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function WS(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function tC(n){this.l=n.fc||null,this.j=n.ob||!1}function KS(n,e){Ss.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=DN,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}tU.prototype.cancel=function(){if(this.i=sU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Ds(tC,yN),tC.prototype.g=function(){return new KS(this.l,this.j)},tC.prototype.i=function(n){return function(){return n}}({}),Ds(KS,Ss);var DN=0;function oU(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function nC(n){n.readyState=4,n.l=null,n.j=null,n.A=null,rC(n)}function rC(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(wt=KS.prototype).open=function(n,e){if(this.readyState!=DN)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,rC(this)},wt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||cn).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},wt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,nC(this)),this.readyState=DN},wt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,rC(this)),this.g&&(this.readyState=3,rC(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof cn.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;oU(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},wt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?nC(this):rC(this),3==this.readyState&&oU(this)}},wt.Za=function(n){this.g&&(this.response=this.responseText=n,nC(this))},wt.Ya=function(n){this.g&&(this.response=n,nC(this))},wt.ka=function(){this.g&&nC(this)},wt.setRequestHeader=function(n,e){this.v.append(n,e)},wt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},wt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(KS.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var W3=cn.JSON.parse;function Ai(n){Ss.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=aU,this.L=this.M=!1}Ds(Ai,Ss);var aU="",K3=/^https?$/i,Z3=["POST","PUT"];function uU(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,cU(n),ZS(n)}function cU(n){n.F||(n.F=!0,js(n,"complete"),js(n,"error"))}function lU(n){if(n.h&&typeof ZM<"u"&&(!n.C[1]||4!=ed(n)||2!=n.da()))if(n.v&&4==ed(n))_N(n.La,0,n);else if(js(n,"readystatechange"),4==ed(n)){n.h=!1;try{const u=n.da();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===u){var i=String(n.I).match(Z2)[1]||null;!i&&cn.self&&cn.self.location&&(i=cn.self.location.protocol.slice(0,-1)),r=!K3.test(i?i.toLowerCase():"")}t=r}if(t)js(n,"complete"),js(n,"success");else{n.m=6;try{var s=2<ed(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",cU(n)}}finally{ZS(n)}}}function ZS(n,e){if(n.g){dU(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||js(n,"ready");try{t.onreadystatechange=r}catch{}}}function dU(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(cn.clearTimeout(n.A),n.A=null)}function ed(n){return n.g?n.g.readyState:0}function hU(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case aU:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function fU(n){let e="";return sN(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function SN(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=fU(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Hr(n,e,t))}function iC(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function pU(n){this.Ga=0,this.j=[],this.l=new LS,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=iC("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=iC("baseRetryDelayMs",5e3,n),this.hb=iC("retryDelaySeedMs",1e4,n),this.eb=iC("forwardChannelMaxRetries",2,n),this.xa=iC("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new tU(n&&n.concurrentRequestLimit),this.Ja=new G3,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function xN(n){if(gU(n),3==n.H){var e=n.W++,t=$h(n.I);if(Hr(t,"SID",n.K),Hr(t,"RID",e),Hr(t,"TYPE","terminate"),sC(n,t),(e=new ZT(n,n.l,e)).L=2,e.v=qS($h(t)),t=!1,cn.navigator&&cn.navigator.sendBeacon)try{t=cn.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&cn.Image&&((new Image).src=e.v,t=!0),t||(e.g=CU(e.l,null),e.g.ha(e.v)),e.G=Date.now(),QT(e)}wU(n)}function QS(n){n.g&&(PN(n),n.g.cancel(),n.g=null)}function gU(n){QS(n),n.u&&(cn.clearTimeout(n.u),n.u=null),JS(n),n.i.cancel(),n.m&&("number"==typeof n.m&&cn.clearTimeout(n.m),n.m=null)}function YS(n){if(!nU(n.i)&&!n.m){n.m=!0;var e=n.Na;HT||P2(),GT||(HT(),GT=!0),gN.add(e,n),n.C=0}}function mU(n,e){var t;t=e?e.m:n.W++;const r=$h(n.I);Hr(r,"SID",n.K),Hr(r,"RID",t),Hr(r,"AID",n.V),sC(n,r),n.o&&n.s&&SN(r,n.o,n.s),t=new ZT(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=_U(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),bN(n.i,t),TN(t,r,e)}function sC(n,e){n.na&&sN(n.na,function(t,r){Hr(e,r,t)}),n.h&&K2({},function(t,r){Hr(e,r,t)})}function _U(n,e,t){t=Math.min(n.j.length,t);var r=n.h?ao(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const u=["count="+t];-1==s?0<t?(s=i[0].g,u.push("ofs="+s)):s=0:u.push("ofs="+s);let l=!0;for(let f=0;f<t;f++){let y=i[f].g;const I=i[f].map;if(y-=s,0>y)s=Math.max(0,i[f].g-100),l=!1;else try{z3(I,u,"req"+y+"_")}catch{r&&r(I)}}if(l){r=u.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function yU(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;HT||P2(),GT||(HT(),GT=!0),gN.add(e,n),n.A=0}}function RN(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=WT(ao(n.Ma,n),IU(n,n.A)),n.A++,0))}function PN(n){null!=n.B&&(cn.clearTimeout(n.B),n.B=null)}function vU(n){n.g=new ZT(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=$h(n.wa);Hr(e,"RID","rpc"),Hr(e,"SID",n.K),Hr(e,"AID",n.V),Hr(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Hr(e,"TO",n.qa),Hr(e,"TYPE","xmlhttp"),sC(n,e),n.o&&n.s&&SN(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=qS($h(e)),t.s=null,t.S=!0,G2(t,n)}function JS(n){null!=n.v&&(cn.clearTimeout(n.v),n.v=null)}function EU(n,e){var t=null;if(n.g==e){JS(n),PN(n),n.g=null;var r=2}else{if(!AN(n.i,e))return;t=e.F,iU(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;js(r=US(),new U2(r,t)),YS(n)}else yU(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function J3(n,e){return!(rU(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=WT(ao(n.Na,n,e),IU(n,n.C)),n.C++,0)))}(n,e)||2==r&&RN(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:m_(n,5);break;case 4:m_(n,10);break;case 3:m_(n,6);break;default:m_(n,2)}}function IU(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function m_(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=ao(n.pb,n);t||(t=new g_("//www.google.com/images/cleardot.gif"),cn.location&&"http"==cn.location.protocol||GS(t,"https"),qS(t)),function q3(n,e){const t=new LS;if(cn.Image){const r=new Image;r.onload=MS(WS,t,r,"TestLoadImage: loaded",!0,e),r.onerror=MS(WS,t,r,"TestLoadImage: error",!1,e),r.onabort=MS(WS,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=MS(WS,t,r,"TestLoadImage: timeout",!1,e),cn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Uo(2);n.H=0,n.h&&n.h.za(e),wU(n),gU(n)}function wU(n){if(n.H=0,n.ma=[],n.h){const e=sU(n.i);(0!=e.length||0!=n.j.length)&&(_2(n.ma,e),_2(n.ma,n.j),n.i.i.length=0,YM(n.j),n.j.length=0),n.h.ya()}}function TU(n,e,t){var r=t instanceof g_?$h(t):new g_(t);if(""!=r.g)e&&(r.g=e+"."+r.g),zS(r,r.m);else{var i=cn.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new g_(null);r&&GS(s,r),e&&(s.g=e),i&&zS(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&Hr(r,t,e),Hr(r,"VER",n.ra),sC(n,r),r}function CU(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ai(t&&n.Ha&&!n.va?new tC({ob:!0}):n.va)).Oa(n.J),e}function AU(){}function XS(){if(_0&&!(10<=Number(d3)))throw Error("Environmental error: no available transport.")}function Ka(n,e){Ss.call(this),this.g=new pU(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!BT(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!BT(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new E0(this)}function bU(n){vN.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function DU(){EN.call(this),this.status=1}function E0(n){this.g=n}function Hc(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function MN(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],u=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;u=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(u<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|u>>>10))+((u=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|u>>>10))+((u=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|u>>>10))+((u=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|u>>>10))+((u=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|u>>>12))+((u=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|u>>>9))+((u=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|u>>>17))+((u=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|u>>>17))+((u=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|u>>>17))+((u=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|u>>>11))+((s=(e=t+((u=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|u>>>22))^((i=s+((u=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|u>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(u<<21&4294967295|u>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function cr(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(wt=Ai.prototype).Oa=function(n){this.M=n},wt.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():IN.g(),this.C=function j2(n){return n.h||(n.h=n.i())}(this.u?this.u:IN),this.g.onreadystatechange=ao(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void uU(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=cn.FormData&&n instanceof cn.FormData,!(0<=m2(Z3,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,u]of t)this.g.setRequestHeader(s,u);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{dU(this),0<this.B&&((this.L=function Q3(n){return _0&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ao(this.ua,this)):this.A=_N(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){uU(this,s)}},wt.ua=function(){typeof ZM<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,js(this,"timeout"),this.abort(8))},wt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,js(this,"complete"),js(this,"abort"),ZS(this))},wt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ZS(this,!0)),Ai.$.N.call(this)},wt.La=function(){this.s||(this.G||this.v||this.l?lU(this):this.kb())},wt.kb=function(){lU(this)},wt.isActive=function(){return!!this.g},wt.da=function(){try{return 2<ed(this)?this.g.status:-1}catch{return-1}},wt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},wt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),W3(e)}},wt.Ia=function(){return this.m},wt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(wt=pU.prototype).ra=8,wt.H=1,wt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new ZT(this,this.l,n);let s=this.s;if(this.U&&(s?(s=w2(s),C2(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=_U(this,i,e),Hr(t=$h(this.I),"RID",n),Hr(t,"CVER",22),this.F&&Hr(t,"X-HTTP-Session-Id",this.F),sC(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(fU(s)))+"&"+e:this.o&&SN(t,this.o,s)),bN(this.i,i),this.bb&&Hr(t,"TYPE","init"),this.P?(Hr(t,"$req",e),Hr(t,"SID","null"),i.aa=!0,TN(i,t,null)):TN(i,t,e),this.H=2}}else 3==this.H&&(n?mU(this,n):0==this.j.length||nU(this.i)||mU(this))},wt.Ma=function(){if(this.u=null,vU(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=WT(ao(this.jb,this),n)}},wt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Uo(10),QS(this),vU(this))},wt.ib=function(){null!=this.v&&(this.v=null,QS(this),RN(this),Uo(19))},wt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Uo(2)):(this.l.info("Failed to ping google.com"),Uo(1))},wt.isActive=function(){return!!this.h&&this.h.isActive(this)},(wt=AU.prototype).Ba=function(){},wt.Aa=function(){},wt.za=function(){},wt.ya=function(){},wt.isActive=function(){return!0},wt.Va=function(){},XS.prototype.g=function(n,e){return new Ka(n,e)},Ds(Ka,Ss),Ka.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Uo(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=TU(n,null,n.Y),YS(n)},Ka.prototype.close=function(){xN(this.g)},Ka.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=pN(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&YS(e)},Ka.prototype.N=function(){this.g.h=null,delete this.j,xN(this.g),delete this.g,Ka.$.N.call(this)},Ds(bU,vN),Ds(DU,EN),Ds(E0,AU),E0.prototype.Ba=function(){js(this.g,"a")},E0.prototype.Aa=function(n){js(this.g,new bU(n))},E0.prototype.za=function(n){js(this.g,new DU)},E0.prototype.ya=function(){js(this.g,"b")},Ds(Hc,function X3(){this.blockSize=-1}),Hc.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Hc.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)MN(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){MN(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){MN(this,r),i=0;break}}this.h=i,this.i+=e},Hc.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var e7={};function NN(n){return-128<=n&&128>n?function u3(n,e){var t=e7;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new cr([0|e],0>e?-1:0)}):new cr([0|n],0>n?-1:0)}function td(n){if(isNaN(n)||!isFinite(n))return I0;if(0>n)return $s(td(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=kN;return new cr(e,0)}var kN=4294967296,I0=NN(0),ON=NN(1),xU=NN(16777216);function Hh(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Hu(n){return-1==n.h}function $s(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new cr(t,~n.h).add(ON)}function ex(n,e){return n.add($s(e))}function tx(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function oC(n,e){this.g=n,this.h=e}function nx(n,e){if(Hh(e))throw Error("division by zero");if(Hh(n))return new oC(I0,I0);if(Hu(n))return e=nx($s(n),e),new oC($s(e.g),$s(e.h));if(Hu(e))return e=nx(n,$s(e)),new oC($s(e.g),e.h);if(30<n.g.length){if(Hu(n)||Hu(e))throw Error("slowDivide_ only works with positive integers.");for(var t=ON,r=e;0>=r.X(n);)t=RU(t),r=RU(r);var i=w0(t,1),s=w0(r,1);for(r=w0(r,2),t=w0(t,2);!Hh(r);){var u=s.add(r);0>=u.X(n)&&(i=i.add(t),s=u),r=w0(r,1),t=w0(t,1)}return e=ex(n,i.R(e)),new oC(i,e)}for(i=I0;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),u=(s=td(t)).R(e);Hu(u)||0<u.X(n);)u=(s=td(t-=r)).R(e);Hh(s)&&(s=ON),i=i.add(s),n=ex(n,u)}return new oC(i,n)}function RU(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new cr(t,n.h)}function w0(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new cr(i,n.h)}(wt=cr.prototype).ea=function(){if(Hu(this))return-$s(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:kN+r)*e,e*=kN}return n},wt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Hh(this))return"0";if(Hu(this))return"-"+$s(this).toString(n);for(var e=td(Math.pow(n,6)),t=this,r="";;){var i=nx(t,e).g,s=((0<(t=ex(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Hh(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},wt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},wt.X=function(n){return Hu(n=ex(this,n))?-1:Hh(n)?0:1},wt.abs=function(){return Hu(this)?$s(this):this},wt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),u=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=u>>>16,t[i]=(u&=65535)<<16|(s&=65535)}return new cr(t,-2147483648&t[t.length-1]?-1:0)},wt.R=function(n){if(Hh(this)||Hh(n))return I0;if(Hu(this))return Hu(n)?$s(this).R($s(n)):$s($s(this).R(n));if(Hu(n))return $s(this.R($s(n)));if(0>this.X(xU)&&0>n.X(xU))return td(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,u=65535&this.D(r),l=n.D(i)>>>16,f=65535&n.D(i);t[2*r+2*i]+=u*f,tx(t,2*r+2*i),t[2*r+2*i+1]+=s*f,tx(t,2*r+2*i+1),t[2*r+2*i+1]+=u*l,tx(t,2*r+2*i+1),t[2*r+2*i+2]+=s*l,tx(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new cr(t,0)},wt.gb=function(n){return nx(this,n).h},wt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new cr(t,this.h&n.h)},wt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new cr(t,this.h|n.h)},wt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new cr(t,this.h^n.h)},XS.prototype.createWebChannel=XS.prototype.g,Ka.prototype.send=Ka.prototype.u,Ka.prototype.open=Ka.prototype.m,Ka.prototype.close=Ka.prototype.close,BS.NO_ERROR=0,BS.TIMEOUT=8,BS.HTTP_ERROR=6,B2.COMPLETE="complete",$2.EventType=KT,KT.OPEN="a",KT.CLOSE="b",KT.ERROR="c",KT.MESSAGE="d",Ss.prototype.listen=Ss.prototype.O,Ai.prototype.listenOnce=Ai.prototype.P,Ai.prototype.getLastError=Ai.prototype.Sa,Ai.prototype.getLastErrorCode=Ai.prototype.Ia,Ai.prototype.getStatus=Ai.prototype.da,Ai.prototype.getResponseJson=Ai.prototype.Wa,Ai.prototype.getResponseText=Ai.prototype.ja,Ai.prototype.send=Ai.prototype.ha,Ai.prototype.setWithCredentials=Ai.prototype.Oa,Hc.prototype.digest=Hc.prototype.l,Hc.prototype.reset=Hc.prototype.reset,Hc.prototype.update=Hc.prototype.j,cr.prototype.add=cr.prototype.add,cr.prototype.multiply=cr.prototype.R,cr.prototype.modulo=cr.prototype.gb,cr.prototype.compare=cr.prototype.X,cr.prototype.toNumber=cr.prototype.ea,cr.prototype.toString=cr.prototype.toString,cr.prototype.getBits=cr.prototype.D,cr.fromNumber=td,cr.fromString=function SU(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return $s(SU(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=td(Math.pow(e,8)),r=I0,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),u=parseInt(n.substring(i,i+s),e);8>s?(s=td(Math.pow(e,s)),r=r.R(s).add(td(u))):r=(r=r.R(t)).add(td(u))}return r};var MU,NU,kU,OU,FU,LU,UU,BU,jU,$U,HU,GU,zU,qU,WU,KU,ZU,QU,YU,JU,XU,eB,tB,nB,rB,iB,sB,oB,aB,uB,cB,lB,dB,hB,fB,pB,gB,mB,_B,yB,vB,EB,IB,t7=$c.createWebChannelTransport=function(){return new XS},n7=$c.getStatEventTarget=function(){return US()},FN=$c.ErrorCode=BS,r7=$c.EventType=B2,i7=$c.Event=f_,PU=$c.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},rx=($c.FetchXmlHttpFactory=tC,$c.WebChannel=$2),s7=$c.XhrIo=Ai,o7=$c.Md5=Hc,T0=$c.Integer=cr;const wB="@firebase/firestore";class xs{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xs.UNAUTHENTICATED=new xs(null),xs.GOOGLE_CREDENTIALS=new xs("google-credentials-uid"),xs.FIRST_PARTY=new xs("first-party-uid"),xs.MOCK_USER=new xs("mock-user");let C0="10.3.1";const Wp=new or.Yd("@firebase/firestore");function A0(){return Wp.logLevel}function qe(n,...e){if(Wp.logLevel<=or.in.DEBUG){const t=e.map(VN);Wp.debug(`Firestore (${C0}): ${n}`,...t)}}function ji(n,...e){if(Wp.logLevel<=or.in.ERROR){const t=e.map(VN);Wp.error(`Firestore (${C0}): ${n}`,...t)}}function da(n,...e){if(Wp.logLevel<=or.in.WARN){const t=e.map(VN);Wp.warn(`Firestore (${C0}): ${n}`,...t)}}function VN(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Dt(n="Unexpected state"){const e=`FIRESTORE (${C0}) INTERNAL ASSERTION FAILED: `+n;throw ji(e),new Error(e)}function Gt(n,e){n||Dt()}function pt(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends Et.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class fs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class TB{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class c7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(xs.UNAUTHENTICATED))}shutdown(){}}class l7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class d7{constructor(e){this.t=e,this.currentUser=xs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let u=new fs;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new fs,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const y=u;e.enqueueRetryable((0,H.Z)(function*(){yield y.promise,yield s(r.currentUser)}))},f=y=>{qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),l()};this.t.onInit(y=>f(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?f(y):(qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new fs)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Gt("string"==typeof r.accessToken),new TB(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Gt(null===e||"string"==typeof e),new xs(e)}}class h7{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=xs.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class f7{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new h7(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(xs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class CB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class p7{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const u=s.token!==this.R;return this.R=s.token,qe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Gt("string"==typeof t.token),this.R=t.token,new CB(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function g7(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class AB{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=g7(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function un(n,e){return n<e?-1:n>e?1:0}function b0(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function bB(n){return n+"\0"}class ni{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new He(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new He(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new He(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new He(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ni.fromMillis(Date.now())}static fromDate(e){return ni.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ni(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?un(this.nanoseconds,e.nanoseconds):un(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class qt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new qt(e)}static min(){return new qt(new ni(0,0))}static max(){return new qt(new ni(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class aC{constructor(e,t,r){void 0===t?t=0:t>e.length&&Dt(),void 0===r?r=e.length-t:r>e.length-t&&Dt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===aC.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof aC?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),u=t.get(i);if(s<u)return-1;if(s>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Bn extends aC{construct(e,t,r){return new Bn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new He(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Bn(t)}static emptyPath(){return new Bn([])}}const m7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hi extends aC{construct(e,t,r){return new hi(e,t,r)}static isValidIdentifier(e){return m7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new hi(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new He(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const l=e[i];if("\\"===l){if(i+1===e.length)throw new He(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new He(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else"`"===l?(u=!u,i++):"."!==l||u?(r+=l,i++):(s(),i++)}if(s(),u)throw new He(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hi(t)}static emptyPath(){return new hi([])}}class _t{constructor(e){this.path=e}static fromPath(e){return new _t(Bn.fromString(e))}static fromName(e){return new _t(Bn.fromString(e).popFirst(5))}static empty(){return new _t(Bn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Bn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Bn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _t(new Bn(e.slice()))}}class D0{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function LN(n){return n.fields.find(e=>2===e.kind)}function __(n){return n.fields.filter(e=>2!==e.kind)}D0.UNKNOWN_ID=-1;class y_{constructor(e,t){this.fieldPath=e,this.kind=t}}class S0{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new S0(0,Za.min())}}function DB(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=qt.fromTimestamp(1e9===r?new ni(t+1,0):new ni(t,r));return new Za(i,_t.empty(),e)}function SB(n){return new Za(n.readTime,n.key,-1)}class Za{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Za(qt.min(),_t.empty(),-1)}static max(){return new Za(qt.max(),_t.empty(),-1)}}function UN(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=_t.comparator(n.documentKey,e.documentKey),0!==t?t:un(n.largestBatchId,e.largestBatchId))}const xB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Kp(n){return(MU=MU||(0,H.Z)(function*(e){if(e.code!==ge.FAILED_PRECONDITION||e.message!==xB)throw e;qe("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.reject(t)}static resolve(e){return new ce((t,r)=>{t(e)})}static reject(e){return new ce((t,r)=>{r(e)})}static waitFor(e){return new ce((t,r)=>{let i=0,s=0,u=!1;e.forEach(l=>{++i,l.next(()=>{++s,u&&s===i&&t()},f=>r(f))}),u=!0,s===i&&t()})}static or(e){let t=ce.resolve(!1);for(const r of e)t=t.next(i=>i?ce.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new ce((r,i)=>{const s=e.length,u=new Array(s);let l=0;for(let f=0;f<s;f++){const y=f;t(e[y]).next(I=>{u[y]=I,++l,l===s&&r(u)},I=>i(I))}})}static doWhile(e,t){return new ce((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class ix{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new fs,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new uC(e,t.error)):this.m.resolve()},this.transaction.onerror=r=>{const i=BN(r.target.error);this.m.reject(new uC(e,i))}}static open(e,t,r,i){try{return new ix(t,e.transaction(i,r))}catch(s){throw new uC(t,s)}}get g(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(qe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}p(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new E7(t)}}class Gc{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Gc.D((0,Et.z$)())&&ji("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return qe("SimpleDb","Removing database:",e),v_(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Et.hl)())return!1;if(Gc.v())return!0;const e=(0,Et.z$)(),t=Gc.D(e),r=0<t&&t<10,i=Gc.F(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static F(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}N(e){var t=this;return(0,H.Z)(function*(){return t.db||(qe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=u=>{r(u.target.result)},s.onblocked=()=>{i(new uC(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=u=>{const l=u.target.error;i("VersionError"===l.name?new He(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===l.name?new He(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l):new uC(e,l))},s.onupgradeneeded=u=>{qe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.S.B(u.target.result,s.transaction,u.oldVersion,t.version).next(()=>{qe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.L&&(t.db.onversionchange=r=>t.L(r)),t.db})()}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,H.Z)(function*(){const u="readonly"===t;let l=0;for(;;){++l;try{s.db=yield s.N(e);const f=ix.open(s.db,e,u?"readonly":"readwrite",r),y=i(f).next(I=>(f.p(),I)).catch(I=>(f.abort(I),ce.reject(I))).toPromise();return y.catch(()=>{}),yield f.g,y}catch(f){const y=f,I="FirebaseError"!==y.name&&l<3;if(qe("SimpleDb","Transaction failed with error:",y.message,"Retrying:",I),s.close(),!I)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class v7{constructor(e){this.q=e,this.K=!1,this.$=null}get isDone(){return this.K}get U(){return this.$}set cursor(e){this.q=e}done(){this.K=!0}W(e){this.$=e}delete(){return v_(this.q.delete())}}class uC extends He{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Zp(n){return"IndexedDbTransactionError"===n.name}class E7{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(qe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(qe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),v_(r)}add(e){return qe("SimpleDb","ADD",this.store.name,e,e),v_(this.store.add(e))}get(e){return v_(this.store.get(e)).next(t=>(void 0===t&&(t=null),qe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return qe("SimpleDb","DELETE",this.store.name,e),v_(this.store.delete(e))}count(){return qe("SimpleDb","COUNT",this.store.name),v_(this.store.count())}G(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.j(i,(u,l)=>{s.push(l)}).next(()=>s)}{const i=this.store.getAll(r.range);return new ce((s,u)=>{i.onerror=l=>{u(l.target.error)},i.onsuccess=l=>{s(l.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ce((i,s)=>{r.onerror=u=>{s(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}J(e,t){qe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.j(i,(s,u,l)=>l.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.j(i,t)}X(e){const t=this.cursor({});return new ce((r,i)=>{t.onerror=s=>{const u=BN(s.target.error);i(u)},t.onsuccess=s=>{const u=s.target.result;u?e(u.primaryKey,u.value).next(l=>{l?u.continue():r()}):r()}})}j(e,t){const r=[];return new ce((i,s)=>{e.onerror=u=>{s(u.target.error)},e.onsuccess=u=>{const l=u.target.result;if(!l)return void i();const f=new v7(l),y=t(l.primaryKey,l.value,f);if(y instanceof ce){const I=y.catch(w=>(f.done(),ce.reject(w)));r.push(I)}f.isDone?i():null===f.U?l.continue():l.continue(f.U)}}).next(()=>ce.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function v_(n){return new ce((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=BN(r.target.error);t(i)}})}let PB=!1;function BN(n){const e=Gc.D((0,Et.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new He("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return PB||(PB=!0,setTimeout(()=>{throw r},0)),r}}return n}class I7{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}te(e){var t=this;qe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,H.Z)(function*(){t.task=null;try{qe("IndexBackiller",`Documents written: ${yield t.ee.ne()}`)}catch(r){Zp(r)?qe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Kp(r)}yield t.te(6e4)}))}}class w7{constructor(e,t){this.localStore=e,this.persistence=t}ne(e=50){var t=this;return(0,H.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.re(r,e))})()}re(e,t){const r=new Set;let i=t,s=!0;return ce.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return qe("IndexBackiller",`Processing collection: ${u}`),this.ie(e,u,i).next(l=>{i-=l,r.add(u)});s=!1})).next(()=>t-i)}ie(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const u=s.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.se(i,s)).next(l=>(qe("IndexBackiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,t,l))).next(()=>u.size)}))}se(e,t){let r=e;return t.changes.forEach((i,s)=>{const u=SB(s);UN(u,r)>0&&(r=u)}),new Za(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Qa=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}return n.ae=-1,n})();function cC(n){return null==n}function lC(n){return 0===n&&1/n==-1/0}function MB(n){return"number"==typeof n&&Number.isInteger(n)&&!lC(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function co(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=NB(e)),e=T7(n.get(t),e);return NB(e)}function T7(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function NB(n){return n+"\x01\x01"}function nd(n){const e=n.length;if(Gt(e>=2),2===e)return Gt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Bn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const u=n.indexOf("\x01",s);switch((u<0||u>t)&&Dt(),n.charAt(u+1)){case"\x01":const l=n.substring(s,u);let f;0===i.length?f=l:(i+=l,f=i,i=""),r.push(f);break;case"\x10":i+=n.substring(s,u),i+="\0";break;case"\x11":i+=n.substring(s,u+1);break;default:Dt()}s=u+2}return new Bn(r)}const kB=["userId","batchId"];function sx(n,e){return[n,co(e)]}function OB(n,e,t){return[n,co(e),t]}const C7={},A7=["prefixPath","collectionGroup","readTime","documentId"],b7=["prefixPath","collectionGroup","documentId"],D7=["collectionGroup","readTime","prefixPath","documentId"],S7=["canonicalId","targetId"],x7=["targetId","path"],R7=["path","targetId"],P7=["collectionId","parent"],M7=["indexId","uid"],N7=["uid","sequenceNumber"],k7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],O7=["indexId","uid","orderedDocumentKey"],F7=["userId","collectionPath","documentId"],V7=["userId","collectionPath","largestBatchId"],L7=["userId","collectionGroup","largestBatchId"],FB=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],U7=[...FB,"documentOverlays"],VB=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],LB=VB,B7=[...LB,"indexConfiguration","indexState","indexEntries"];class jN extends RB{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function Rs(n,e){const t=pt(n);return Gc.O(t.ue,e)}function UB(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Qp(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function BB(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Mr{constructor(e,t){this.comparator=e,this.root=t||Hs.EMPTY}insert(e,t){return new Mr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Hs.BLACK,null,null))}remove(e){return new Mr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ox(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ox(this.root,e,this.comparator,!1)}getReverseIterator(){return new ox(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ox(this.root,e,this.comparator,!0)}}class ox{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hs{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Hs.RED,this.left=i??Hs.EMPTY,this.right=s??Hs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Hs(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Hs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Hs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Dt();const e=this.left.check();if(e!==this.right.check())throw Dt();return e+(this.isRed()?0:1)}}Hs.EMPTY=null,Hs.RED=!0,Hs.BLACK=!1,Hs.EMPTY=new class{constructor(){this.size=0}get key(){throw Dt()}get value(){throw Dt()}get color(){throw Dt()}get left(){throw Dt()}get right(){throw Dt()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Hs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Nr{constructor(e){this.comparator=e,this.data=new Mr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jB(this.data.getIterator())}getIteratorFrom(e){return new jB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Nr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Nr(this.comparator);return t.data=e,t}}class jB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function x0(n){return n.hasNext()?n.getNext():void 0}class ha{constructor(e){this.fields=e,e.sort(hi.comparator)}static empty(){return new ha([])}unionWith(e){let t=new Nr(hi.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ha(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return b0(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class $B extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ps{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new $B("Invalid base64 string: "+s):s}}(e);return new ps(t)}static fromUint8Array(e){const t=function(i){let s="";for(let u=0;u<i.length;++u)s+=String.fromCharCode(i[u]);return s}(e);return new ps(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return un(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ps.EMPTY_BYTE_STRING=new ps("");const $7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yp(n){if(Gt(!!n),"string"==typeof n){let e=0;const t=$7.exec(n);if(Gt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bi(n.seconds),nanos:bi(n.nanos)}}function bi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Gh(n){return"string"==typeof n?ps.fromBase64String(n):ps.fromUint8Array(n)}function ax(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ux(n){const e=n.mapValue.fields.__previous_value__;return ax(e)?ux(e):e}function dC(n){const e=Yp(n.mapValue.fields.__local_write_time__.timestampValue);return new ni(e.seconds,e.nanos)}class H7{constructor(e,t,r,i,s,u,l,f,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=l,this.longPollingOptions=f,this.useFetchStreams=y}}class Jp{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Jp("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Jp&&e.projectId===this.projectId&&e.database===this.database}}const Xp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},cx={nullValue:"NULL_VALUE"};function eg(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ax(n)?4:qB(n)?9007199254740991:10:Dt()}function rd(n,e){if(n===e)return!0;const t=eg(n);if(t!==eg(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return dC(n).isEqual(dC(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const u=Yp(i.timestampValue),l=Yp(s.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Gh(n.bytesValue).isEqual(Gh(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return bi(i.geoPointValue.latitude)===bi(s.geoPointValue.latitude)&&bi(i.geoPointValue.longitude)===bi(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return bi(i.integerValue)===bi(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const u=bi(i.doubleValue),l=bi(s.doubleValue);return u===l?lC(u)===lC(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return b0(n.arrayValue.values||[],e.arrayValue.values||[],rd);case 10:return function(i,s){const u=i.mapValue.fields||{},l=s.mapValue.fields||{};if(UB(u)!==UB(l))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(void 0===l[f]||!rd(u[f],l[f])))return!1;return!0}(n,e);default:return Dt()}var s}function hC(n,e){return void 0!==(n.values||[]).find(t=>rd(t,e))}function tg(n,e){if(n===e)return 0;const t=eg(n),r=eg(e);if(t!==r)return un(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return un(n.booleanValue,e.booleanValue);case 2:return function(s,u){const l=bi(s.integerValue||s.doubleValue),f=bi(u.integerValue||u.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(n,e);case 3:return HB(n.timestampValue,e.timestampValue);case 4:return HB(dC(n),dC(e));case 5:return un(n.stringValue,e.stringValue);case 6:return function(s,u){const l=Gh(s),f=Gh(u);return l.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const l=s.split("/"),f=u.split("/");for(let y=0;y<l.length&&y<f.length;y++){const I=un(l[y],f[y]);if(0!==I)return I}return un(l.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const l=un(bi(s.latitude),bi(u.latitude));return 0!==l?l:un(bi(s.longitude),bi(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const l=s.values||[],f=u.values||[];for(let y=0;y<l.length&&y<f.length;++y){const I=tg(l[y],f[y]);if(I)return I}return un(l.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===Xp.mapValue&&u===Xp.mapValue)return 0;if(s===Xp.mapValue)return 1;if(u===Xp.mapValue)return-1;const l=s.fields||{},f=Object.keys(l),y=u.fields||{},I=Object.keys(y);f.sort(),I.sort();for(let w=0;w<f.length&&w<I.length;++w){const x=un(f[w],I[w]);if(0!==x)return x;const M=tg(l[f[w]],y[I[w]]);if(0!==M)return M}return un(f.length,I.length)}(n.mapValue,e.mapValue);default:throw Dt()}}function HB(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return un(n,e);const t=Yp(n),r=Yp(e),i=un(t.seconds,r.seconds);return 0!==i?i:un(t.nanos,r.nanos)}function R0(n){return $N(n)}function $N(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Yp(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Gh(n.bytesValue).toBase64():"referenceValue"in n?_t.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=$N(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const u of r)s?s=!1:i+=",",i+=`${u}:${$N(t.fields[u])}`;return i+"}"}(n.mapValue):Dt()}function E_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function HN(n){return!!n&&"integerValue"in n}function fC(n){return!!n&&"arrayValue"in n}function GB(n){return!!n&&"nullValue"in n}function zB(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function dx(n){return!!n&&"mapValue"in n}function pC(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Qp(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=pC(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pC(n.arrayValue.values[t]);return e}return Object.assign({},n)}function qB(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function G7(n){return"nullValue"in n?cx:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?E_(Jp.empty(),_t.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Dt()}function z7(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?E_(Jp.empty(),_t.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Xp:Dt()}function WB(n,e){const t=tg(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function KB(n,e){const t=tg(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Gs{constructor(e){this.value=e}static empty(){return new Gs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!dx(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pC(t)}setAll(e){let t=hi.emptyPath(),r={},i=[];e.forEach((u,l)=>{if(!t.isImmediateParentOf(l)){const f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=l.popLast()}u?r[l.lastSegment()]=pC(u):i.push(l.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());dx(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return rd(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];dx(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Qp(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Gs(pC(this.value))}}function ZB(n){const e=[];return Qp(n.fields,(t,r)=>{const i=new hi([t]);if(dx(r)){const s=ZB(r.mapValue).fields;if(0===s.length)e.push(i);else for(const u of s)e.push(i.child(u))}else e.push(i)}),new ha(e)}class Gr{constructor(e,t,r,i,s,u,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=u,this.documentState=l}static newInvalidDocument(e){return new Gr(e,0,qt.min(),qt.min(),qt.min(),Gs.empty(),0)}static newFoundDocument(e,t,r,i){return new Gr(e,1,t,qt.min(),r,i,0)}static newNoDocument(e,t){return new Gr(e,2,t,qt.min(),qt.min(),Gs.empty(),0)}static newUnknownDocument(e,t){return new Gr(e,3,t,qt.min(),qt.min(),Gs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(qt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Gr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ng{constructor(e,t){this.position=e,this.inclusive=t}}function QB(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],u=n.position[i];if(r=s.field.isKeyField()?_t.comparator(_t.fromName(u.referenceValue),t.key):tg(u,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function YB(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!rd(n.position[t],e.position[t]))return!1;return!0}class P0{constructor(e,t="asc"){this.field=e,this.dir=t}}function q7(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class JB{}class Nn extends JB{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new W7(e,t,r):"array-contains"===t?new Q7(e,r):"in"===t?new ij(e,r):"not-in"===t?new Y7(e,r):"array-contains-any"===t?new J7(e,r):new Nn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new K7(e,r):new Z7(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(tg(t,this.value)):null!==t&&eg(this.value)===eg(t)&&this.matchesComparison(tg(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Dt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class lr extends JB{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new lr(e,t)}matches(e){return M0(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(t=>t.isInequality());return null!==e?e.field:null}le(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function M0(n){return"and"===n.op}function GN(n){return"or"===n.op}function zN(n){return XB(n)&&M0(n)}function XB(n){for(const e of n.filters)if(e instanceof lr)return!1;return!0}function qN(n){if(n instanceof Nn)return n.field.canonicalString()+n.op.toString()+R0(n.value);if(zN(n))return n.filters.map(e=>qN(e)).join(",");{const e=n.filters.map(t=>qN(t)).join(",");return`${n.op}(${e})`}}function ej(n,e){return n instanceof Nn?(r=n,(i=e)instanceof Nn&&r.op===i.op&&r.field.isEqual(i.field)&&rd(r.value,i.value)):n instanceof lr?function(r,i){return i instanceof lr&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,u,l)=>s&&ej(u,i.filters[l]),!0)}(n,e):void Dt();var r,i}function tj(n,e){const t=n.filters.concat(e);return lr.create(t,n.op)}function nj(n){return n instanceof Nn?`${(t=n).field.canonicalString()} ${t.op} ${R0(t.value)}`:n instanceof lr?function(t){return t.op.toString()+" {"+t.getFilters().map(nj).join(" ,")+"}"}(n):"Filter";var t}class W7 extends Nn{constructor(e,t,r){super(e,t,r),this.key=_t.fromName(r.referenceValue)}matches(e){const t=_t.comparator(e.key,this.key);return this.matchesComparison(t)}}class K7 extends Nn{constructor(e,t){super(e,"in",t),this.keys=rj(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Z7 extends Nn{constructor(e,t){super(e,"not-in",t),this.keys=rj(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function rj(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>_t.fromName(r.referenceValue))}class Q7 extends Nn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fC(t)&&hC(t.arrayValue,this.value)}}class ij extends Nn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&hC(this.value.arrayValue,t)}}class Y7 extends Nn{constructor(e,t){super(e,"not-in",t)}matches(e){if(hC(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!hC(this.value.arrayValue,t)}}class J7 extends Nn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>hC(this.value.arrayValue,r))}}class X7{constructor(e,t=null,r=[],i=[],s=null,u=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=u,this.endAt=l,this.he=null}}function WN(n,e=null,t=[],r=[],i=null,s=null,u=null){return new X7(n,e,t,r,i,s,u)}function I_(n){const e=pt(n);if(null===e.he){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>qN(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),cC(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>R0(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>R0(r)).join(",")),e.he=t}return e.he}function gC(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!q7(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ej(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!YB(n.startAt,e.startAt)&&YB(n.endAt,e.endAt)}function hx(n){return _t.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function fx(n,e){return n.filters.filter(t=>t instanceof Nn&&t.field.isEqual(e))}function sj(n,e,t){let r=cx,i=!0;for(const s of fx(n,e)){let u=cx,l=!0;switch(s.op){case"<":case"<=":u=G7(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,l=!1;break;case"!=":case"not-in":u=cx}WB({value:r,inclusive:i},{value:u,inclusive:l})<0&&(r=u,i=l)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const u=t.position[s];WB({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function oj(n,e,t){let r=Xp,i=!0;for(const s of fx(n,e)){let u=Xp,l=!0;switch(s.op){case">=":case">":u=z7(s.value),l=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,l=!1;break;case"!=":case"not-in":u=Xp}KB({value:r,inclusive:i},{value:u,inclusive:l})>0&&(r=u,i=l)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const u=t.position[s];KB({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class zh{constructor(e,t=null,r=[],i=[],s=null,u="F",l=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=u,this.startAt=l,this.endAt=f,this.Pe=null,this.Ie=null,this.de=null}}function aj(n,e,t,r,i,s,u,l){return new zh(n,e,t,r,i,s,u,l)}function N0(n){return new zh(n)}function uj(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function KN(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function px(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function ZN(n){return null!==n.collectionGroup}function k0(n){const e=pt(n);if(null===e.Pe){e.Pe=[];const t=px(e),r=KN(e);if(null!==t&&null===r)t.isKeyField()||e.Pe.push(new P0(t)),e.Pe.push(new P0(hi.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.Pe.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new P0(hi.keyField(),s))}}}return e.Pe}function Bo(n){const e=pt(n);return e.Ie||(e.Ie=function cj(n,e){if("F"===n.limitType)return WN(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new P0(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new ng(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ng(n.startAt.position,n.startAt.inclusive):null;return WN(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,k0(n))),e.Ie}function QN(n,e){e.getFirstInequalityField(),px(n);const t=n.filters.concat([e]);return new zh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function gx(n,e,t){return new zh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function mC(n,e){return gC(Bo(n),Bo(e))&&n.limitType===e.limitType}function lj(n){return`${I_(Bo(n))}|lt:${n.limitType}`}function O0(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>nj(i)).join(", ")}]`),cC(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(u=i).field.canonicalString()} (${u.dir})`;var u}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>R0(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>R0(i)).join(",")),`Target(${r})`}(Bo(n))}; limitType=${n.limitType})`}function _C(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):_t.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of k0(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(u,l,f){const y=QB(u,l,f);return u.inclusive?y<=0:y<0}(r.startAt,k0(r),i)||r.endAt&&!function(u,l,f){const y=QB(u,l,f);return u.inclusive?y>=0:y>0}(r.endAt,k0(r),i)));var r,i}function dj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function hj(n){return(e,t)=>{let r=!1;for(const i of k0(n)){const s=eq(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function eq(n,e,t){const r=n.field.isKeyField()?_t.comparator(e.key,t.key):function(s,u,l){const f=u.data.field(s),y=l.data.field(s);return null!==f&&null!==y?tg(f,y):Dt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Dt()}}class qh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Qp(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return BB(this.inner)}size(){return this.innerSize}}const tq=new Mr(_t.comparator);function fa(){return tq}const fj=new Mr(_t.comparator);function yC(...n){let e=fj;for(const t of n)e=e.insert(t.key,t);return e}function pj(n){let e=fj;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function id(){return vC()}function gj(){return vC()}function vC(){return new qh(n=>n.toString(),(n,e)=>n.isEqual(e))}const nq=new Mr(_t.comparator),rq=new Nr(_t.comparator);function yn(...n){let e=rq;for(const t of n)e=e.add(t);return e}const iq=new Nr(un);function YN(){return iq}function mj(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lC(e)?"-0":e}}function _j(n){return{integerValue:""+n}}function yj(n,e){return MB(e)?_j(e):mj(n,e)}class mx{constructor(){this._=void 0}}function sq(n,e,t){return n instanceof F0?function(i,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ax(s)&&(s=ux(s)),s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof w_?Ej(n,e):n instanceof T_?Ij(n,e):function(i,s){const u=vj(i,s),l=wj(u)+wj(i.Te);return HN(u)&&HN(i.Te)?_j(l):mj(i.serializer,l)}(n,e)}function oq(n,e,t){return n instanceof w_?Ej(n,e):n instanceof T_?Ij(n,e):t}function vj(n,e){return n instanceof V0?HN(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class F0 extends mx{}class w_ extends mx{constructor(e){super(),this.elements=e}}function Ej(n,e){const t=Tj(e);for(const r of n.elements)t.some(i=>rd(i,r))||t.push(r);return{arrayValue:{values:t}}}class T_ extends mx{constructor(e){super(),this.elements=e}}function Ij(n,e){let t=Tj(e);for(const r of n.elements)t=t.filter(i=>!rd(i,r));return{arrayValue:{values:t}}}class V0 extends mx{constructor(e,t){super(),this.serializer=e,this.Te=t}}function wj(n){return bi(n.integerValue||n.doubleValue)}function Tj(n){return fC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class EC{constructor(e,t){this.field=e,this.transform=t}}class uq{constructor(e,t){this.version=e,this.transformResults=t}}class ri{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ri}static exists(e){return new ri(void 0,e)}static updateTime(e){return new ri(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _x(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class yx{}function Cj(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new U0(n.key,ri.none()):new L0(n.key,n.data,ri.none());{const t=n.data,r=Gs.empty();let i=new Nr(hi.comparator);for(let s of e.fields)if(!i.has(s)){let u=t.field(s);null===u&&s.length>1&&(s=s.popLast(),u=t.field(s)),null===u?r.delete(s):r.set(s,u),i=i.add(s)}return new Wh(n.key,r,new ha(i.toArray()),ri.none())}}function cq(n,e,t){n instanceof L0?function(i,s,u){const l=i.value.clone(),f=Dj(i.fieldTransforms,s,u.transformResults);l.setAll(f),s.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Wh?function(i,s,u){if(!_x(i.precondition,s))return void s.convertToUnknownDocument(u.version);const l=Dj(i.fieldTransforms,s,u.transformResults),f=s.data;f.setAll(bj(i)),f.setAll(l),s.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function IC(n,e,t,r){return n instanceof L0?function(s,u,l,f){if(!_x(s.precondition,u))return l;const y=s.value.clone(),I=Sj(s.fieldTransforms,f,u);return y.setAll(I),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null}(n,e,t,r):n instanceof Wh?function(s,u,l,f){if(!_x(s.precondition,u))return l;const y=Sj(s.fieldTransforms,f,u),I=u.data;return I.setAll(bj(s)),I.setAll(y),u.convertToFoundDocument(u.version,I).setHasLocalMutations(),null===l?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(w=>w.field))}(n,e,t,r):(l=t,_x(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function lq(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=vj(r.transform,i||null);null!=s&&(null===t&&(t=Gs.empty()),t.set(r.field,s))}return t||null}function Aj(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&b0(r,i,(s,u)=>function aq(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof w_&&i instanceof w_||r instanceof T_&&i instanceof T_?b0(r.elements,i.elements,rd):r instanceof V0&&i instanceof V0?rd(r.Te,i.Te):r instanceof F0&&i instanceof F0);var r,i}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class L0 extends yx{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Wh extends yx{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function bj(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Dj(n,e,t){const r=new Map;Gt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],u=s.transform,l=e.data.field(s.field);r.set(s.field,oq(u,l,t[i]))}return r}function Sj(n,e,t){const r=new Map;for(const i of n){const s=i.transform,u=t.data.field(i.field);r.set(i.field,sq(s,u,e))}return r}class U0 extends yx{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JN extends yx{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class XN{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&cq(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=IC(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=IC(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=gj();return this.mutations.forEach(i=>{const s=e.get(i.key),u=s.overlayedDocument;let l=this.applyToLocalView(u,s.mutatedFields);l=t.has(i.key)?null:l;const f=Cj(u,l);null!==f&&r.set(i.key,f),u.isValidDocument()||u.convertToNoDocument(qt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),yn())}isEqual(e){return this.batchId===e.batchId&&b0(this.mutations,e.mutations,(t,r)=>Aj(t,r))&&b0(this.baseMutations,e.baseMutations,(t,r)=>Aj(t,r))}}class ek{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Gt(e.mutations.length===r.length);let i=nq;const s=e.mutations;for(let u=0;u<s.length;u++)i=i.insert(s[u].key,r[u].version);return new ek(e,t,r,i)}}class tk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class hq{constructor(e,t){this.count=e,this.unchangedNames=t}}var Xi,jn;function xj(n){switch(n){default:return Dt();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function Rj(n){if(void 0===n)return ji("GRPC error has no .code"),ge.UNKNOWN;switch(n){case Xi.OK:return ge.OK;case Xi.CANCELLED:return ge.CANCELLED;case Xi.UNKNOWN:return ge.UNKNOWN;case Xi.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Xi.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Xi.INTERNAL:return ge.INTERNAL;case Xi.UNAVAILABLE:return ge.UNAVAILABLE;case Xi.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Xi.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Xi.NOT_FOUND:return ge.NOT_FOUND;case Xi.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Xi.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Xi.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Xi.ABORTED:return ge.ABORTED;case Xi.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Xi.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Xi.DATA_LOSS:return ge.DATA_LOSS;default:return Dt()}}(jn=Xi||(Xi={}))[jn.OK=0]="OK",jn[jn.CANCELLED=1]="CANCELLED",jn[jn.UNKNOWN=2]="UNKNOWN",jn[jn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jn[jn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jn[jn.NOT_FOUND=5]="NOT_FOUND",jn[jn.ALREADY_EXISTS=6]="ALREADY_EXISTS",jn[jn.PERMISSION_DENIED=7]="PERMISSION_DENIED",jn[jn.UNAUTHENTICATED=16]="UNAUTHENTICATED",jn[jn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jn[jn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jn[jn.ABORTED=10]="ABORTED",jn[jn.OUT_OF_RANGE=11]="OUT_OF_RANGE",jn[jn.UNIMPLEMENTED=12]="UNIMPLEMENTED",jn[jn.INTERNAL=13]="INTERNAL",jn[jn.UNAVAILABLE=14]="UNAVAILABLE",jn[jn.DATA_LOSS=15]="DATA_LOSS";function Pj(){return new TextEncoder}const fq=new T0([4294967295,4294967295],0);function Mj(n){const e=Pj().encode(n),t=new o7;return t.update(e),new Uint8Array(t.digest())}function Nj(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new T0([t,r],0),new T0([i,s],0)]}class nk{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new wC(`Invalid padding: ${t}`);if(r<0)throw new wC(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new wC(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new wC(`Invalid padding when bitmap length is 0: ${t}`);this.Ae=8*e.length-t,this.Re=T0.fromNumber(this.Ae)}Ve(e,t,r){let i=e.add(t.multiply(T0.fromNumber(r)));return 1===i.compare(fq)&&(i=new T0([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Re).toNumber()}me(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ae)return!1;const t=Mj(e),[r,i]=Nj(t);for(let s=0;s<this.hashCount;s++){const u=this.Ve(r,i,s);if(!this.me(u))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),u=new nk(s,i,t);return r.forEach(l=>u.insert(l)),u}insert(e){if(0===this.Ae)return;const t=Mj(e),[r,i]=Nj(t);for(let s=0;s<this.hashCount;s++){const u=this.Ve(r,i,s);this.fe(u)}}fe(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class wC extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class TC{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,CC.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new TC(qt.min(),i,new Mr(un),fa(),yn())}}class CC{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new CC(r,t,yn(),yn(),yn())}}class Ex{constructor(e,t,r,i){this.ge=e,this.removedTargetIds=t,this.key=r,this.pe=i}}class kj{constructor(e,t){this.targetId=e,this.ye=t}}class Oj{constructor(e,t,r=ps.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Fj{constructor(){this.we=0,this.Se=Lj(),this.be=ps.EMPTY_BYTE_STRING,this.De=!1,this.Ce=!0}get current(){return this.De}get resumeToken(){return this.be}get ve(){return 0!==this.we}get Fe(){return this.Ce}Me(e){e.approximateByteSize()>0&&(this.Ce=!0,this.be=e)}xe(){let e=yn(),t=yn(),r=yn();return this.Se.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Dt()}}),new CC(this.be,this.De,e,t,r)}Oe(){this.Ce=!1,this.Se=Lj()}Ne(e,t){this.Ce=!0,this.Se=this.Se.insert(e,t)}Be(e){this.Ce=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.Ce=!0,this.De=!0}}class pq{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=fa(),this.Ue=Vj(),this.We=new Mr(un)}Ge(e){for(const t of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(t,e.pe):this.je(t,e.key,e.pe);for(const t of e.removedTargetIds)this.je(t,e.key,e.pe)}He(e){this.forEachTarget(e,t=>{const r=this.Je(t);switch(e.state){case 0:this.Ye(t)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.ve||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.ve||this.removeTarget(t);break;case 3:this.Ye(t)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(t)&&(this.Ze(t),r.Me(e.resumeToken));break;default:Dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ke.forEach((r,i)=>{this.Ye(i)&&t(i)})}Xe(e){const t=e.targetId,r=e.ye.count,i=this.et(t);if(i){const s=i.target;if(hx(s))if(0===r){const u=new _t(s.path);this.je(t,u,Gr.newNoDocument(u,qt.min()))}else Gt(1===r);else{const u=this.tt(t);if(u!==r){const l=this.nt(e),f=l?this.rt(l,e,u):1;0!==f&&(this.Ze(t),this.We=this.We.insert(t,2===f?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}nt(e){const t=e.ye.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let u,l;try{u=Gh(r).toUint8Array()}catch(f){if(f instanceof $B)return da("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{l=new nk(u,i,s)}catch(f){return da(f instanceof wC?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return 0===l.Ae?null:l}rt(e,t,r){return t.ye.count===r-this.ot(e,t.targetId)?0:2}ot(e,t){const r=this.Qe.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const u=this.Qe.st(),l=`projects/${u.projectId}/databases/${u.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.je(t,s,null),i++)}),i}_t(e){const t=new Map;this.Ke.forEach((s,u)=>{const l=this.et(u);if(l){if(s.current&&hx(l.target)){const f=new _t(l.target.path);null!==this.$e.get(f)||this.ut(u,f)||this.je(u,f,Gr.newNoDocument(f,e))}s.Fe&&(t.set(u,s.xe()),s.Oe())}});let r=yn();this.Ue.forEach((s,u)=>{let l=!0;u.forEachWhile(f=>{const y=this.et(f);return!y||"TargetPurposeLimboResolution"===y.purpose||(l=!1,!1)}),l&&(r=r.add(s))}),this.$e.forEach((s,u)=>u.setReadTime(e));const i=new TC(e,t,this.We,this.$e,r);return this.$e=fa(),this.Ue=Vj(),this.We=new Mr(un),i}ze(e,t){if(!this.Ye(e))return;const r=this.ut(e,t.key)?2:0;this.Je(e).Ne(t.key,r),this.$e=this.$e.insert(t.key,t),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}je(e,t,r){if(!this.Ye(e))return;const i=this.Je(e);this.ut(e,t)?i.Ne(t,1):i.Be(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),r&&(this.$e=this.$e.insert(t,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const t=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let t=this.Ke.get(e);return t||(t=new Fj,this.Ke.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Nr(un),this.Ue=this.Ue.insert(e,t)),t}Ye(e){const t=null!==this.et(e);return t||qe("WatchChangeAggregator","Detected inactive target",e),t}et(e){const t=this.Ke.get(e);return t&&t.ve?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new Fj),this.Qe.getRemoteKeysForTarget(e).forEach(t=>{this.je(e,t,null)})}ut(e,t){return this.Qe.getRemoteKeysForTarget(e).has(t)}}function Vj(){return new Mr(_t.comparator)}function Lj(){return new Mr(_t.comparator)}const gq={asc:"ASCENDING",desc:"DESCENDING"},mq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_q={and:"AND",or:"OR"};class yq{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function rk(n,e){return n.useProto3Json||cC(e)?e:{value:e}}function B0(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Uj(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function vq(n,e){return B0(n,e.toTimestamp())}function $i(n){return Gt(!!n),qt.fromTimestamp(function(t){const r=Yp(t);return new ni(r.seconds,r.nanos)}(n))}function ik(n,e){return(r=n,new Bn(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function Bj(n){const e=Bn.fromString(n);return Gt(Zj(e)),e}function AC(n,e){return ik(n.databaseId,e.path)}function sd(n,e){const t=Bj(e);if(t.get(1)!==n.databaseId.projectId)throw new He(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new He(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _t($j(t))}function sk(n,e){return ik(n.databaseId,e)}function jj(n){const e=Bj(n);return 4===e.length?Bn.emptyPath():$j(e)}function bC(n){return new Bn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $j(n){return Gt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Hj(n,e,t){return{name:AC(n,e),fields:t.value.mapValue.fields}}function Gj(n,e,t){const r=sd(n,e.name),i=$i(e.updateTime),s=e.createTime?$i(e.createTime):qt.min(),u=new Gs({mapValue:{fields:e.fields}}),l=Gr.newFoundDocument(r,i,s,u);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function Eq(n,e){return"found"in e?function(r,i){Gt(!!i.found);const s=sd(r,i.found.name),u=$i(i.found.updateTime),l=i.found.createTime?$i(i.found.createTime):qt.min(),f=new Gs({mapValue:{fields:i.found.fields}});return Gr.newFoundDocument(s,u,l,f)}(n,e):"missing"in e?function(r,i){Gt(!!i.missing),Gt(!!i.readTime);const s=sd(r,i.missing),u=$i(i.readTime);return Gr.newNoDocument(s,u)}(n,e):Dt()}function DC(n,e){let t;if(e instanceof L0)t={update:Hj(n,e.key,e.value)};else if(e instanceof U0)t={delete:AC(n,e.key)};else if(e instanceof Wh)t={update:Hj(n,e.key,e.data),updateMask:Dq(e.fieldMask)};else{if(!(e instanceof JN))return Dt();t={verify:AC(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const l=u.transform;if(l instanceof F0)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof w_)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof T_)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof V0)return{fieldPath:u.field.canonicalString(),increment:l.Te};throw Dt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:vq(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Dt()),t;var s}function ok(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?ri.updateTime($i(s.updateTime)):void 0!==s.exists?ri.exists(s.exists):ri.none():ri.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,l){let f=null;"setToServerValue"in l?(Gt("REQUEST_TIME"===l.setToServerValue),f=new F0):"appendMissingElements"in l?f=new w_(l.appendMissingElements.values||[]):"removeAllFromArray"in l?f=new T_(l.removeAllFromArray.values||[]):"increment"in l?f=new V0(u,l.increment):Dt();const y=hi.fromServerFormat(l.fieldPath);return new EC(y,f)}(n,i)):[];var s;if(e.update){const i=sd(n,e.update.name),s=new Gs({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new ha((e.updateMask.fieldPaths||[]).map(I=>hi.fromServerFormat(I)));return new Wh(i,s,u,t,r)}return new L0(i,s,t,r)}if(e.delete){const i=sd(n,e.delete);return new U0(i,t)}if(e.verify){const i=sd(n,e.verify);return new JN(i,t)}return Dt()}function zj(n,e){return{documents:[sk(n,e.path)]}}function ak(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=sk(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=sk(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(f){if(0!==f.length)return Kj(lr.create(f,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(f){if(0!==f.length)return f.map(y=>{return{field:rg((w=y).field),direction:Cq(w.dir)};var w})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const u=rk(n,e.limit);return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),t;var f}function qj(n){let e=jj(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Gt(1===r);const I=t.from[0];I.allDescendants?i=I.collectionId:e=e.child(I.collectionId)}let s=[];t.where&&(s=function(w){const x=Wj(w);return x instanceof lr&&zN(x)?x.getFilters():[x]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(x=>{return new P0(j0((B=x).field),function(J){switch(J){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(B.direction));var B}));let l=null;t.limit&&(l=function(w){let x;return x="object"==typeof w?w.value:w,cC(x)?null:x}(t.limit));let f=null;var w;t.startAt&&(f=new ng((w=t.startAt).values||[],!!w.before));let y=null;return t.endAt&&(y=function(w){return new ng(w.values||[],!w.before)}(t.endAt)),aj(e,i,u,s,l,"F",f,y)}function Wj(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=j0(t.unaryFilter.field);return Nn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=j0(t.unaryFilter.field);return Nn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=j0(t.unaryFilter.field);return Nn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=j0(t.unaryFilter.field);return Nn.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Dt()}}(n):void 0!==n.fieldFilter?Nn.create(j0((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Dt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return lr.create(t.compositeFilter.filters.map(r=>Wj(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Dt()}}(t.compositeFilter.op))}(n):Dt();var t}function Cq(n){return gq[n]}function Aq(n){return mq[n]}function bq(n){return _q[n]}function rg(n){return{fieldPath:n.canonicalString()}}function j0(n){return hi.fromServerFormat(n.fieldPath)}function Kj(n){return n instanceof Nn?function(t){if("=="===t.op){if(zB(t.value))return{unaryFilter:{field:rg(t.field),op:"IS_NAN"}};if(GB(t.value))return{unaryFilter:{field:rg(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(zB(t.value))return{unaryFilter:{field:rg(t.field),op:"IS_NOT_NAN"}};if(GB(t.value))return{unaryFilter:{field:rg(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rg(t.field),op:Aq(t.op),value:t.value}}}(n):n instanceof lr?function(t){const r=t.getFilters().map(i=>Kj(i));return 1===r.length?r[0]:{compositeFilter:{op:bq(t.op),filters:r}}}(n):Dt()}function Dq(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Zj(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Kh{constructor(e,t,r,i,s=qt.min(),u=qt.min(),l=ps.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=l,this.expectedCount=f}withSequenceNumber(e){return new Kh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Kh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Qj{constructor(e){this.ht=e}}function Yj(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ix(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:AC(s=n.ht,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:B0(s,u.version.toTimestamp()),createTime:B0(s,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:C_(e.version)};else{if(!e.isUnknownDocument())return Dt();r.unknownDocument={path:t.path.toArray(),version:C_(e.version)}}var s,u;return r}function Ix(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function C_(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function A_(n){const e=new ni(n.seconds,n.nanoseconds);return qt.fromTimestamp(e)}function b_(n,e){const t=(e.baseMutations||[]).map(s=>ok(n.ht,s));for(let s=0;s<e.mutations.length-1;++s){const u=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(u.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>ok(n.ht,s)),i=ni.fromMillis(e.localWriteTimeMs);return new XN(e.batchId,i,t,r)}function SC(n){const e=A_(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?A_(n.lastLimboFreeSnapshotVersion):qt.min();let r;return r=void 0!==n.query.documents?(Gt(1===(s=n.query).documents.length),Bo(N0(jj(s.documents[0])))):function(s){return Bo(qj(s))}(n.query),new Kh(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ps.fromBase64String(n.resumeToken));var s}function Jj(n,e){const t=C_(e.snapshotVersion),r=C_(e.lastLimboFreeSnapshotVersion);let i;i=hx(e.target)?zj(n.ht,e.target):ak(n.ht,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:I_(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function uk(n){const e=qj({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?gx(e,e.limit,"L"):e}function ck(n,e){return new tk(e.largestBatchId,ok(n.ht,e.overlayMutation))}function Xj(n,e){const t=e.path.lastSegment();return[n,co(e.path.popLast()),t]}function e4(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:C_(r.readTime),documentKey:co(r.documentKey.path),largestBatchId:r.largestBatchId}}class xq{getBundleMetadata(e,t){return t4(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:A_(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return t4(e).put({bundleId:(i=t).id,createTime:C_($i(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return n4(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:uk(s.bundledQuery),readTime:A_(s.readTime)};var s})}saveNamedQuery(e,t){return n4(e).put({name:(i=t).name,readTime:C_($i(i.readTime)),bundledQuery:i.bundledQuery});var i}}function t4(n){return Rs(n,"bundles")}function n4(n){return Rs(n,"namedQueries")}class wx{constructor(e,t){this.serializer=e,this.userId=t}static Pt(e,t){return new wx(e,t.uid||"")}getOverlay(e,t){return xC(e).get(Xj(this.userId,t)).next(r=>r?ck(this.serializer,r):null)}getOverlays(e,t){const r=id();return ce.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,u)=>{const l=new tk(t,u);i.push(this.It(e,l))}),ce.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(co(u.getCollectionPath())));const s=[];return i.forEach(u=>{const l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);s.push(xC(e).J("collectionPathOverlayIndex",l))}),ce.waitFor(s)}getOverlaysForCollection(e,t,r){const i=id(),s=co(t),u=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return xC(e).G("collectionPathOverlayIndex",u).next(l=>{for(const f of l){const y=ck(this.serializer,f);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=id();let u;const l=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return xC(e).Z({index:"collectionGroupOverlayIndex",range:l},(f,y,I)=>{const w=ck(this.serializer,y);s.size()<i||w.largestBatchId===u?(s.set(w.getKey(),w),u=w.largestBatchId):I.done()}).next(()=>s)}It(e,t){return xC(e).put(function(i,s,u){const[l,f,y]=Xj(s,u.mutation.key);return{userId:s,collectionPath:f,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:DC(i.ht,u.mutation)}}(this.serializer,this.userId,t))}}function xC(n){return Rs(n,"documentOverlays")}class D_{constructor(){}dt(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.At(t,5);else if("booleanValue"in e)this.At(t,10),t.Rt(e.booleanValue?1:0);else if("integerValue"in e)this.At(t,15),t.Rt(bi(e.integerValue));else if("doubleValue"in e){const r=bi(e.doubleValue);isNaN(r)?this.At(t,13):(this.At(t,15),lC(r)?t.Rt(0):t.Rt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.At(t,20),"string"==typeof r?t.Vt(r):(t.Vt(`${r.seconds||""}`),t.Rt(r.nanos||0))}else if("stringValue"in e)this.ft(e.stringValue,t),this.gt(t);else if("bytesValue"in e)this.At(t,30),t.yt(Gh(e.bytesValue)),this.gt(t);else if("referenceValue"in e)this.wt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.At(t,45),t.Rt(r.latitude||0),t.Rt(r.longitude||0)}else"mapValue"in e?qB(e)?this.At(t,Number.MAX_SAFE_INTEGER):(this.St(e.mapValue,t),this.gt(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.gt(t)):Dt()}ft(e,t){this.At(t,25),this.Dt(e,t)}Dt(e,t){t.Vt(e)}St(e,t){const r=e.fields||{};this.At(t,55);for(const i of Object.keys(r))this.ft(i,t),this.Tt(r[i],t)}bt(e,t){const r=e.values||[];this.At(t,50);for(const i of r)this.Tt(i,t)}wt(e,t){this.At(t,37),_t.fromName(e).path.forEach(r=>{this.At(t,60),this.Dt(r,t)})}At(e,t){e.Rt(t)}gt(e){e.Rt(2)}}function Rq(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function r4(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const u=Rq(255&r[s]);if(i+=u,8!==u)break}return i}(n);return Math.ceil(e/8)}D_.Ct=new D_;class Pq{constructor(){this.buffer=new Uint8Array(1024),this.position=0}vt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=r4(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=r4(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Mq{constructor(e){this.jt=e}yt(e){this.jt.vt(e)}Vt(e){this.jt.Bt(e)}Rt(e){this.jt.kt(e)}Et(){this.jt.$t()}}class Nq{constructor(e){this.jt=e}yt(e){this.jt.xt(e)}Vt(e){this.jt.Lt(e)}Rt(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class RC{constructor(){this.jt=new Pq,this.Ht=new Mq(this.jt),this.Jt=new Nq(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class S_{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new S_(this.indexId,this.documentKey,this.arrayValue,r)}}function ig(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=i4(n.arrayValue,e.arrayValue),0!==t?t:(t=i4(n.directionalValue,e.directionalValue),0!==t?t:_t.comparator(n.documentKey,e.documentKey)))}function i4(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class s4{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Xt=e.orderBy,this.en=[];for(const t of e.filters){const r=t;r.isInequality()?this.tn=r:this.en.push(r)}}nn(e){Gt(e.collectionGroup===this.collectionId);const t=LN(e);if(void 0!==t&&!this.rn(t))return!1;const r=__(e);let i=new Set,s=0,u=0;for(;s<r.length&&this.rn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(void 0!==this.tn){if(!i.has(this.tn.field.canonicalString())){const l=r[s];if(!this.sn(this.tn,l)||!this.on(this.Xt[u++],l))return!1}++s}for(;s<r.length;++s){const l=r[s];if(u>=this.Xt.length||!this.on(this.Xt[u++],l))return!1}return!0}_n(){let e=new Nr(hi.comparator);const t=[];for(const r of this.en)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new y_(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new y_(r.field,0))}for(const r of this.Xt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new y_(r.field,"asc"===r.dir?0:1)));return new D0(D0.UNKNOWN_ID,this.collectionId,t,S0.empty())}rn(e){for(const t of this.en)if(this.sn(t,e))return!0;return!1}sn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}on(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function o4(n){var e,t;if(Gt(n instanceof Nn||n instanceof lr),n instanceof Nn){if(n instanceof ij){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Nn.create(n.field,"==",s)))||[];return lr.create(i,"or")}return n}const r=n.filters.map(i=>o4(i));return lr.create(r,n.op)}function kq(n){if(0===n.getFilters().length)return[];const e=hk(o4(n));return Gt(a4(e)),lk(e)||dk(e)?[e]:e.getFilters()}function lk(n){return n instanceof Nn}function dk(n){return n instanceof lr&&zN(n)}function a4(n){return lk(n)||dk(n)||function(t){if(t instanceof lr&&GN(t)){for(const r of t.getFilters())if(!lk(r)&&!dk(r))return!1;return!0}return!1}(n)}function hk(n){if(Gt(n instanceof Nn||n instanceof lr),n instanceof Nn)return n;if(1===n.filters.length)return hk(n.filters[0]);const e=n.filters.map(r=>hk(r));let t=lr.create(e,n.op);return t=Tx(t),a4(t)?t:(Gt(t instanceof lr),Gt(M0(t)),Gt(t.filters.length>1),t.filters.reduce((r,i)=>fk(r,i)))}function fk(n,e){let t;return Gt(n instanceof Nn||n instanceof lr),Gt(e instanceof Nn||e instanceof lr),t=n instanceof Nn?e instanceof Nn?lr.create([n,e],"and"):u4(n,e):e instanceof Nn?u4(e,n):function(i,s){if(Gt(i.filters.length>0&&s.filters.length>0),M0(i)&&M0(s))return tj(i,s.getFilters());const u=GN(i)?i:s,l=GN(i)?s:i,f=u.filters.map(y=>fk(y,l));return lr.create(f,"or")}(n,e),Tx(t)}function u4(n,e){if(M0(e))return tj(e,n.getFilters());{const t=e.filters.map(r=>fk(n,r));return lr.create(t,"or")}}function Tx(n){if(Gt(n instanceof Nn||n instanceof lr),n instanceof Nn)return n;const e=n.getFilters();if(1===e.length)return Tx(e[0]);if(XB(n))return n;const t=e.map(i=>Tx(i)),r=[];return t.forEach(i=>{i instanceof Nn?r.push(i):i instanceof lr&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:lr.create(r,n.op)}class Oq{constructor(){this.an=new pk}addToCollectionParentIndex(e,t){return this.an.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.an.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(Za.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(Za.min())}updateCollectionGroup(e,t,r){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class pk{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Nr(Bn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Nr(Bn.comparator)).toArray()}}const Cx=new Uint8Array(0);class Fq{constructor(e,t){this.user=e,this.databaseId=t,this.un=new pk,this.cn=new qh(r=>I_(r),(r,i)=>gC(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.un.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.un.add(t)});const s={collectionId:r,parent:co(i)};return c4(e).put(s)}return ce.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[bB(t),""],!1,!0);return c4(e).G(i).next(s=>{for(const u of s){if(u.collectionId!==t)break;r.push(nd(u.parent))}return r})}addFieldIndex(e,t){const r=PC(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var l;delete i.indexId;const s=r.add(i);if(t.indexState){const u=H0(e);return s.next(l=>{u.put(e4(l,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=PC(e),i=H0(e),s=$0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=PC(e),r=$0(e),i=H0(e);return t.J().next(()=>r.J()).next(()=>i.J())}createTargetIndexes(e,t){return ce.forEach(this.ln(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new s4(r);return this.addFieldIndex(e,s._n())}}))}getDocumentsMatchingTarget(e,t){const r=$0(e);let i=!0;const s=new Map;return ce.forEach(this.ln(t),u=>this.hn(e,u).next(l=>{i&&(i=!!l),s.set(u,l)})).next(()=>{if(i){let u=yn();const l=[];return ce.forEach(s,(f,y)=>{var Ie;qe("IndexedDbIndexManager",`Using index ${Ie=f,`id=${Ie.indexId}|cg=${Ie.collectionGroup}|f=${Ie.fields.map($e=>`${$e.fieldPath}:${$e.kind}`).join(",")}`} to execute ${I_(t)}`);const I=function(Ie,$e){const Je=LN($e);if(void 0===Je)return null;for(const yt of fx(Ie,Je.fieldPath))switch(yt.op){case"array-contains-any":return yt.value.arrayValue.values||[];case"array-contains":return[yt.value]}return null}(y,f),w=function(Ie,$e){const Je=new Map;for(const yt of __($e))for(const Dn of fx(Ie,yt.fieldPath))switch(Dn.op){case"==":case"in":Je.set(yt.fieldPath.canonicalString(),Dn.value);break;case"not-in":case"!=":return Je.set(yt.fieldPath.canonicalString(),Dn.value),Array.from(Je.values())}return null}(y,f),x=function(Ie,$e){const Je=[];let yt=!0;for(const Dn of __($e)){const fi=0===Dn.kind?sj(Ie,Dn.fieldPath,Ie.startAt):oj(Ie,Dn.fieldPath,Ie.startAt);Je.push(fi.value),yt&&(yt=fi.inclusive)}return new ng(Je,yt)}(y,f),M=function(Ie,$e){const Je=[];let yt=!0;for(const Dn of __($e)){const fi=0===Dn.kind?oj(Ie,Dn.fieldPath,Ie.endAt):sj(Ie,Dn.fieldPath,Ie.endAt);Je.push(fi.value),yt&&(yt=fi.inclusive)}return new ng(Je,yt)}(y,f),B=this.Pn(f,y,x),Z=this.Pn(f,y,M),J=this.In(f,y,w),me=this.dn(f.indexId,I,B,x.inclusive,Z,M.inclusive,J);return ce.forEach(me,Oe=>r.H(Oe,t.limit).next(Ie=>{Ie.forEach($e=>{const Je=_t.fromSegments($e.documentKey);u.has(Je)||(u=u.add(Je),l.push(Je))})}))}).next(()=>l)}return ce.resolve(null)})}ln(e){let t=this.cn.get(e);return t||(t=0===e.filters.length?[e]:kq(lr.create(e.filters,"and")).map(r=>WN(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.cn.set(e,t),t)}dn(e,t,r,i,s,u,l){const f=(null!=t?t.length:1)*Math.max(r.length,s.length),y=f/(null!=t?t.length:1),I=[];for(let w=0;w<f;++w){const x=t?this.Tn(t[w/y]):Cx,M=this.En(e,x,r[w%y],i),B=this.An(e,x,s[w%y],u),Z=l.map(J=>this.En(e,x,J,!0));I.push(...this.createRange(M,B,Z))}return I}En(e,t,r,i){const s=new S_(e,_t.empty(),t,r);return i?s:s.Zt()}An(e,t,r,i){const s=new S_(e,_t.empty(),t,r);return i?s.Zt():s}hn(e,t){const r=new s4(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let u=null;for(const l of s)r.nn(l)&&(!u||l.fields.length>u.fields.length)&&(u=l);return u})}getIndexType(e,t){let r=2;const i=this.ln(t);return ce.forEach(i,s=>this.hn(e,s).next(u=>{u?0!==r&&u.fields.length<function(f){let y=new Nr(hi.comparator),I=!1;for(const w of f.filters)for(const x of w.getFlattenedFilters())x.field.isKeyField()||("array-contains"===x.op||"array-contains-any"===x.op?I=!0:y=y.add(x.field));for(const w of f.orderBy)w.field.isKeyField()||(y=y.add(w.field));return y.size+(I?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Rn(e,t){const r=new RC;for(const i of __(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const u=r.Yt(i.kind);D_.Ct.dt(s,u)}return r.zt()}Tn(e){const t=new RC;return D_.Ct.dt(e,t.Yt(0)),t.zt()}Vn(e,t){const r=new RC;return D_.Ct.dt(E_(this.databaseId,t),r.Yt(function(s){const u=__(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.zt()}In(e,t,r){if(null===r)return[];let i=[];i.push(new RC);let s=0;for(const u of __(e)){const l=r[s++];for(const f of i)if(this.mn(t,u.fieldPath)&&fC(l))i=this.fn(i,u,l);else{const y=f.Yt(u.kind);D_.Ct.dt(l,y)}}return this.gn(i)}Pn(e,t,r){return this.In(e,t,r.position)}gn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}fn(e,t,r){const i=[...e],s=[];for(const u of r.arrayValue.values||[])for(const l of i){const f=new RC;f.seed(l.zt()),D_.Ct.dt(u,f.Yt(t.kind)),s.push(f)}return s}mn(e,t){return!!e.filters.find(r=>r instanceof Nn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=PC(e),i=H0(e);return(t?r.G("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.G()).next(s=>{const u=[];return ce.forEach(s,l=>i.get([l.indexId,this.uid]).next(f=>{u.push(function(I,w){const x=w?new S0(w.sequenceNumber,new Za(A_(w.readTime),new _t(nd(w.documentKey)),w.largestBatchId)):S0.empty(),M=I.fields.map(([B,Z])=>new y_(hi.fromServerFormat(B),Z));return new D0(I.indexId,I.collectionGroup,M,x)}(l,f))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:un(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=PC(e),s=H0(e);return this.pn(e).next(u=>i.G("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(l=>ce.forEach(l,f=>s.put(e4(f.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return ce.forEach(t,(i,s)=>{const u=r.get(i.collectionGroup);return(u?ce.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(l=>(r.set(i.collectionGroup,l),ce.forEach(l,f=>this.yn(e,i,f).next(y=>{const I=this.wn(s,f);return y.isEqual(I)?ce.resolve():this.Sn(e,s,f,y,I)}))))})}bn(e,t,r,i){return $0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Vn(r,t.key),documentKey:t.key.path.toArray()})}Dn(e,t,r,i){return $0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Vn(r,t.key),t.key.path.toArray()])}yn(e,t,r){const i=$0(e);let s=new Nr(ig);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Vn(r,t)])},(u,l)=>{s=s.add(new S_(r.indexId,t,l.arrayValue,l.directionalValue))}).next(()=>s)}wn(e,t){let r=new Nr(ig);const i=this.Rn(t,e);if(null==i)return r;const s=LN(t);if(null!=s){const u=e.data.field(s.fieldPath);if(fC(u))for(const l of u.arrayValue.values||[])r=r.add(new S_(t.indexId,e.key,this.Tn(l),i))}else r=r.add(new S_(t.indexId,e.key,Cx,i));return r}Sn(e,t,r,i,s){qe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(f,y,I,w,x){const M=f.getIterator(),B=y.getIterator();let Z=x0(M),J=x0(B);for(;Z||J;){let me=!1,Oe=!1;if(Z&&J){const Ie=I(Z,J);Ie<0?Oe=!0:Ie>0&&(me=!0)}else null!=Z?Oe=!0:me=!0;me?(w(J),J=x0(B)):Oe?(x(Z),Z=x0(M)):(Z=x0(M),J=x0(B))}}(i,s,ig,l=>{u.push(this.bn(e,t,r,l))},l=>{u.push(this.Dn(e,t,r,l))}),ce.waitFor(u)}pn(e){let t=1;return H0(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,l)=>ig(u,l)).filter((u,l,f)=>!l||0!==ig(u,f[l-1]));const i=[];i.push(e);for(const u of r){const l=ig(u,e),f=ig(u,t);if(0===l)i[0]=e.Zt();else if(l>0&&f<0)i.push(u),i.push(u.Zt());else if(f>0)break}i.push(t);const s=[];for(let u=0;u<i.length;u+=2){if(this.Cn(i[u],i[u+1]))return[];s.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,Cx,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,Cx,[]]))}return s}Cn(e,t){return ig(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(l4)}getMinOffset(e,t){return ce.mapArray(this.ln(t),r=>this.hn(e,r).next(i=>i||Dt())).next(l4)}}function c4(n){return Rs(n,"collectionParents")}function $0(n){return Rs(n,"indexEntries")}function PC(n){return Rs(n,"indexConfiguration")}function H0(n){return Rs(n,"indexState")}function l4(n){Gt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;UN(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Za(e.readTime,e.documentKey,t)}const d4={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class lo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new lo(e,lo.DEFAULT_COLLECTION_PERCENTILE,lo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function h4(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],u=IDBKeyRange.only(t.batchId);let l=0;const f=r.Z({range:u},(I,w,x)=>(l++,x.delete()));s.push(f.next(()=>{Gt(1===l)}));const y=[];for(const I of t.mutations){const w=OB(e,I.key.path,t.batchId);s.push(i.delete(w)),y.push(I.key)}return ce.waitFor(s).next(()=>y)}function Ax(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Dt();e=n.noDocument}return JSON.stringify(e).length}lo.DEFAULT_COLLECTION_PERCENTILE=10,lo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lo.DEFAULT=new lo(41943040,lo.DEFAULT_COLLECTION_PERCENTILE,lo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lo.DISABLED=new lo(-1,0,0);class bx{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.vn={}}static Pt(e,t,r,i){Gt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new bx(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return sg(e).Z({index:"userMutationsIndex",range:r},(i,s,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=G0(e),u=sg(e);return u.add({}).next(l=>{Gt("number"==typeof l);const f=new XN(l,t,r,i),y=function(M,B,Z){const J=Z.baseMutations.map(Oe=>DC(M.ht,Oe)),me=Z.mutations.map(Oe=>DC(M.ht,Oe));return{userId:B,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:J,mutations:me}}(this.serializer,this.userId,f),I=[];let w=new Nr((x,M)=>un(x.canonicalString(),M.canonicalString()));for(const x of i){const M=OB(this.userId,x.key.path,l);w=w.add(x.key.path.popLast()),I.push(u.put(y)),I.push(s.put(M,C7))}return w.forEach(x=>{I.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.vn[l]=f.keys()}),ce.waitFor(I).next(()=>f)})}lookupMutationBatch(e,t){return sg(e).get(t).next(r=>r?(Gt(r.userId===this.userId),b_(this.serializer,r)):null)}Fn(e,t){return this.vn[t]?ce.resolve(this.vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return sg(e).Z({index:"userMutationsIndex",range:i},(u,l,f)=>{l.userId===this.userId&&(Gt(l.batchId>=r),s=b_(this.serializer,l)),f.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return sg(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,s,u)=>{r=s.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return sg(e).G("userMutationsIndex",t).next(r=>r.map(i=>b_(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=sx(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return G0(e).Z({range:i},(u,l,f)=>{const[y,I,w]=u,x=nd(I);if(y===this.userId&&t.path.isEqual(x))return sg(e).get(w).next(M=>{if(!M)throw Dt();Gt(M.userId===this.userId),s.push(b_(this.serializer,M))});f.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nr(un);const i=[];return t.forEach(s=>{const u=sx(this.userId,s.path),l=IDBKeyRange.lowerBound(u),f=G0(e).Z({range:l},(y,I,w)=>{const[x,M,B]=y,Z=nd(M);x===this.userId&&s.path.isEqual(Z)?r=r.add(B):w.done()});i.push(f)}),ce.waitFor(i).next(()=>this.Mn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=sx(this.userId,r),u=IDBKeyRange.lowerBound(s);let l=new Nr(un);return G0(e).Z({range:u},(f,y,I)=>{const[w,x,M]=f,B=nd(x);w===this.userId&&r.isPrefixOf(B)?B.length===i&&(l=l.add(M)):I.done()}).next(()=>this.Mn(e,l))}Mn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(sg(e).get(s).next(u=>{if(null===u)throw Dt();Gt(u.userId===this.userId),r.push(b_(this.serializer,u))}))}),ce.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return h4(e.ue,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.xn(t.batchId)}),ce.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}xn(e){delete this.vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ce.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return G0(e).Z({range:r},(s,u,l)=>{if(s[0]===this.userId){const f=nd(s[1]);i.push(f)}else l.done()}).next(()=>{Gt(0===i.length)})})}containsKey(e,t){return f4(e,this.userId,t)}On(e){return p4(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function f4(n,e,t){const r=sx(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let u=!1;return G0(n).Z({range:s,Y:!0},(l,f,y)=>{const[I,w,x]=l;I===e&&w===i&&(u=!0),y.done()}).next(()=>u)}function sg(n){return Rs(n,"mutations")}function G0(n){return Rs(n,"documentMutations")}function p4(n){return Rs(n,"mutationQueues")}class x_{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Bn(){return new x_(0)}static Ln(){return new x_(-1)}}class Vq{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.kn(e).next(t=>{const r=new x_(t.highestTargetId);return t.highestTargetId=r.next(),this.qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.kn(e).next(t=>qt.fromTimestamp(new ni(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.kn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.kn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.qn(e,i)))}addTargetData(e,t){return this.Qn(e,t).next(()=>this.kn(e).next(r=>(r.targetCount+=1,this.Kn(t,r),this.qn(e,r))))}updateTargetData(e,t){return this.Qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>z0(e).delete(t.targetId)).next(()=>this.kn(e)).next(r=>(Gt(r.targetCount>0),r.targetCount-=1,this.qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return z0(e).Z((u,l)=>{const f=SC(l);f.sequenceNumber<=t&&null===r.get(f.targetId)&&(i++,s.push(this.removeTargetData(e,f)))}).next(()=>ce.waitFor(s)).next(()=>i)}forEachTarget(e,t){return z0(e).Z((r,i)=>{const s=SC(i);t(s)})}kn(e){return g4(e).get("targetGlobalKey").next(t=>(Gt(null!==t),t))}qn(e,t){return g4(e).put("targetGlobalKey",t)}Qn(e,t){return z0(e).put(Jj(this.serializer,t))}Kn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.kn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=I_(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return z0(e).Z({range:i,index:"queryTargetsIndex"},(u,l,f)=>{const y=SC(l);gC(t,y.target)&&(s=y,f.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=og(e);return t.forEach(u=>{const l=co(u.path);i.push(s.put({targetId:r,path:l})),i.push(this.referenceDelegate.addReference(e,r,u))}),ce.waitFor(i)}removeMatchingKeys(e,t,r){const i=og(e);return ce.forEach(t,s=>{const u=co(s.path);return ce.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=og(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=og(e);let s=yn();return i.Z({range:r,Y:!0},(u,l,f)=>{const y=nd(u[1]),I=new _t(y);s=s.add(I)}).next(()=>s)}containsKey(e,t){const r=co(t.path),i=IDBKeyRange.bound([r],[bB(r)],!1,!0);let s=0;return og(e).Z({index:"documentTargetsIndex",Y:!0,range:i},([u,l],f,y)=>{0!==u&&(s++,y.done())}).next(()=>s>0)}lt(e,t){return z0(e).get(t).next(r=>r?SC(r):null)}}function z0(n){return Rs(n,"targets")}function g4(n){return Rs(n,"targetGlobal")}function og(n){return Rs(n,"targetDocuments")}function m4([n,e],[t,r]){const i=un(n,t);return 0===i?un(e,r):i}class Lq{constructor(e){this.$n=e,this.buffer=new Nr(m4),this.Un=0}Wn(){return++this.Un}Gn(e){const t=[e,this.Wn()];if(this.buffer.size<this.$n)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();m4(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _4{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.zn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.jn(6e4)}stop(){this.zn&&(this.zn.cancel(),this.zn=null)}get started(){return null!==this.zn}jn(e){var t=this;qe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.zn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,H.Z)(function*(){t.zn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Zp(r)?qe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Kp(r)}yield t.jn(3e5)}))}}class Uq{constructor(e,t){this.Hn=e,this.params=t}calculateTargetCount(e,t){return this.Hn.Jn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ce.resolve(Qa.ae);const r=new Lq(t);return this.Hn.forEachTarget(e,i=>r.Gn(i.sequenceNumber)).next(()=>this.Hn.Yn(e,i=>r.Gn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Hn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Hn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(d4)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),d4):this.Zn(e,t))}getCacheSize(e){return this.Hn.getCacheSize(e)}Zn(e,t){let r,i,s,u,l,f,y;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),i=this.params.maximumSequenceNumbersToCollect):i=w,u=Date.now(),this.nthSequenceNumber(e,i))).next(w=>(r=w,l=Date.now(),this.removeTargets(e,r,t))).next(w=>(s=w,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(w=>(y=Date.now(),A0()<=or.in.DEBUG&&qe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-I}ms\n\tDetermined least recently used ${i} in `+(l-u)+`ms\n\tRemoved ${s} targets in `+(f-l)+`ms\n\tRemoved ${w} documents in `+(y-f)+`ms\nTotal Duration: ${y-I}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:w})))}}class Bq{constructor(e,t){this.db=e,this.garbageCollector=function y4(n,e){return new Uq(n,e)}(this,t)}Jn(e){const t=this.Xn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Xn(e){let t=0;return this.Yn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Yn(e,t){return this.er(e,(r,i)=>t(i))}addReference(e,t,r){return Dx(e,r)}removeReference(e,t,r){return Dx(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Dx(e,t)}tr(e,t){return function(i,s){let u=!1;return p4(i).X(l=>f4(i,l,s).next(f=>(f&&(u=!0),ce.resolve(!f)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.er(e,(u,l)=>{if(l<=t){const f=this.tr(e,u).next(y=>{if(!y)return s++,r.getEntry(e,u).next(()=>(r.removeEntry(u,qt.min()),og(e).delete([0,co(u.path)])))});i.push(f)}}).next(()=>ce.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Dx(e,t)}er(e,t){const r=og(e);let i,s=Qa.ae;return r.Z({index:"documentTargetsIndex"},([u,l],{path:f,sequenceNumber:y})=>{0===u?(s!==Qa.ae&&t(new _t(nd(i)),s),s=y,i=f):s=Qa.ae}).next(()=>{s!==Qa.ae&&t(new _t(nd(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Dx(n,e){return og(n).put((i=n.currentSequenceNumber,{targetId:0,path:co(e.path),sequenceNumber:i}));var i}class v4{constructor(){this.changes=new qh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ce.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jq{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return R_(e).put(r)}removeEntry(e,t,r){return R_(e).delete(function(s,u){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Ix(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.nr(e,r)))}getEntry(e,t){let r=Gr.newInvalidDocument(t);return R_(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(MC(t))},(i,s)=>{r=this.rr(t,s)}).next(()=>r)}ir(e,t){let r={size:0,document:Gr.newInvalidDocument(t)};return R_(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(MC(t))},(i,s)=>{r={document:this.rr(t,s),size:Ax(s)}}).next(()=>r)}getEntries(e,t){let r=fa();return this.sr(e,t,(i,s)=>{const u=this.rr(i,s);r=r.insert(i,u)}).next(()=>r)}_r(e,t){let r=fa(),i=new Mr(_t.comparator);return this.sr(e,t,(s,u)=>{const l=this.rr(s,u);r=r.insert(s,l),i=i.insert(s,Ax(u))}).next(()=>({documents:r,ar:i}))}sr(e,t,r){if(t.isEmpty())return ce.resolve();let i=new Nr(T4);t.forEach(f=>i=i.add(f));const s=IDBKeyRange.bound(MC(i.first()),MC(i.last())),u=i.getIterator();let l=u.getNext();return R_(e).Z({index:"documentKeyIndex",range:s},(f,y,I)=>{const w=_t.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;l&&T4(l,w)<0;)r(l,null),l=u.getNext();l&&l.isEqual(w)&&(r(l,y),l=u.hasNext()?u.getNext():null),l?I.W(MC(l)):I.done()}).next(()=>{for(;l;)r(l,null),l=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),Ix(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return R_(e).G(IDBKeyRange.bound(l,f,!0)).next(y=>{s?.incrementDocumentReadCount(y.length);let I=fa();for(const w of y){const x=this.rr(_t.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);x.isFoundDocument()&&(_C(t,x)||i.has(x.key))&&(I=I.insert(x.key,x))}return I})}getAllFromCollectionGroup(e,t,r,i){let s=fa();const u=w4(t,r),l=w4(t,Za.max());return R_(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,l,!0)},(f,y,I)=>{const w=this.rr(_t.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(w.key,w),s.size===i&&I.done()}).next(()=>s)}newChangeBuffer(e){return new $q(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return I4(e).get("remoteDocumentGlobalKey").next(t=>(Gt(!!t),t))}nr(e,t){return I4(e).put("remoteDocumentGlobalKey",t)}rr(e,t){if(t){const r=function Sq(n,e){let t;if(e.document)t=Gj(n.ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=_t.fromSegments(e.noDocument.path),i=A_(e.noDocument.readTime);t=Gr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Dt();{const r=_t.fromSegments(e.unknownDocument.path),i=A_(e.unknownDocument.version);t=Gr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new ni(i[0],i[1]);return qt.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(qt.min()))return r}return Gr.newInvalidDocument(e)}}function E4(n){return new jq(n)}class $q extends v4{constructor(e,t){super(),this.ur=e,this.trackRemovals=t,this.cr=new qh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Nr((s,u)=>un(s.canonicalString(),u.canonicalString()));return this.changes.forEach((s,u)=>{const l=this.cr.get(s);if(t.push(this.ur.removeEntry(e,s,l.readTime)),u.isValidDocument()){const f=Yj(this.ur.serializer,u);i=i.add(s.path.popLast()),r+=Ax(f)-l.size,t.push(this.ur.addEntry(e,s,f))}else if(r-=l.size,this.trackRemovals){const f=Yj(this.ur.serializer,u.convertToNoDocument(qt.min()));t.push(this.ur.addEntry(e,s,f))}}),i.forEach(s=>{t.push(this.ur.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.ur.updateMetadata(e,r)),ce.waitFor(t)}getFromCache(e,t){return this.ur.ir(e,t).next(r=>(this.cr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ur._r(e,t).next(({documents:r,ar:i})=>(i.forEach((s,u)=>{this.cr.set(s,{size:u,readTime:r.get(s).readTime})}),r))}}function I4(n){return Rs(n,"remoteDocumentGlobal")}function R_(n){return Rs(n,"remoteDocumentsV14")}function MC(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function w4(n,e){const t=e.documentKey.path.toArray();return[n,Ix(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function T4(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=un(t[s],r[s]),i)return i;return i=un(t.length,r.length),i||(i=un(t[t.length-2],r[r.length-2]),i||un(t[t.length-1],r[r.length-1]))}class Hq{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class C4{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&IC(r.mutation,i,ha.empty(),ni.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,yn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=yn()){const i=id();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let u=yC();return s.forEach((l,f)=>{u=u.insert(l,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=id();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,yn()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((u,l)=>{t.set(u,l)})})}computeViews(e,t,r,i){let s=fa();const u=vC(),l=vC();return t.forEach((f,y)=>{const I=r.get(y.key);i.has(y.key)&&(void 0===I||I.mutation instanceof Wh)?s=s.insert(y.key,y):void 0!==I?(u.set(y.key,I.mutation.getFieldMask()),IC(I.mutation,y,I.mutation.getFieldMask(),ni.now())):u.set(y.key,ha.empty())}),this.recalculateAndSaveOverlays(e,s).next(f=>(f.forEach((y,I)=>u.set(y,I)),t.forEach((y,I)=>{var w;return l.set(y,new Hq(I,null!==(w=u.get(y))&&void 0!==w?w:null))}),l))}recalculateAndSaveOverlays(e,t){const r=vC();let i=new Mr((u,l)=>u-l),s=yn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const l of u)l.keys().forEach(f=>{const y=t.get(f);if(null===y)return;let I=r.get(f)||ha.empty();I=l.applyToLocalView(y,I),r.set(f,I);const w=(i.get(l.batchId)||yn()).add(f);i=i.insert(l.batchId,w)})}).next(()=>{const u=[],l=i.getReverseIterator();for(;l.hasNext();){const f=l.getNext(),y=f.key,I=f.value,w=gj();I.forEach(x=>{if(!s.has(x)){const M=Cj(t.get(x),r.get(x));null!==M&&w.set(x,M),s=s.add(x)}}),u.push(this.documentOverlayCache.saveOverlays(e,y,w))}return ce.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return _t.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):ZN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var u}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const u=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):ce.resolve(id());let l=-1,f=s;return u.next(y=>ce.forEach(y,(I,w)=>(l<w.largestBatchId&&(l=w.largestBatchId),s.get(I)?ce.resolve():this.remoteDocumentCache.getEntry(e,I).next(x=>{f=f.insert(I,x)}))).next(()=>this.populateOverlays(e,y,s)).next(()=>this.computeViews(e,f,y,yn())).next(I=>({batchId:l,changes:pj(I)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _t(t)).next(r=>{let i=yC();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let u=yC();return this.indexManager.getCollectionParents(e,s).next(l=>ce.forEach(l,f=>{const y=(w=t,x=f.child(s),new zh(x,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,x;return this.getDocumentsMatchingCollectionQuery(e,y,r,i).next(I=>{I.forEach((w,x)=>{u=u.insert(w,x)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(s=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(u=>{s.forEach((f,y)=>{const I=y.getKey();null===u.get(I)&&(u=u.insert(I,Gr.newInvalidDocument(I)))});let l=yC();return u.forEach((f,y)=>{const I=s.get(f);void 0!==I&&IC(I.mutation,y,ha.empty(),ni.now()),_C(t,y)&&(l=l.insert(f,y))}),l})}}class Gq{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,t){return ce.resolve(this.lr.get(t))}saveBundleMetadata(e,t){return this.lr.set(t.id,{id:(i=t).id,version:i.version,createTime:$i(i.createTime)}),ce.resolve();var i}getNamedQuery(e,t){return ce.resolve(this.hr.get(t))}saveNamedQuery(e,t){return this.hr.set(t.name,{name:(i=t).name,query:uk(i.bundledQuery),readTime:$i(i.readTime)}),ce.resolve();var i}}class zq{constructor(){this.overlays=new Mr(_t.comparator),this.Pr=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const r=id();return ce.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.It(e,t,s)}),ce.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Pr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Pr.delete(r)),ce.resolve()}getOverlaysForCollection(e,t,r){const i=id(),s=t.length+1,u=new _t(t.child("")),l=this.overlays.getIteratorFrom(u);for(;l.hasNext();){const f=l.getNext().value,y=f.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&f.largestBatchId>r&&i.set(f.getKey(),f)}return ce.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Mr((y,I)=>y-I);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let I=s.get(y.largestBatchId);null===I&&(I=id(),s=s.insert(y.largestBatchId,I)),I.set(y.getKey(),y)}}const l=id(),f=s.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((y,I)=>l.set(y,I)),!(l.size()>=i)););return ce.resolve(l)}It(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.Pr.get(i.largestBatchId).delete(r.key);this.Pr.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new tk(t,r));let s=this.Pr.get(t);void 0===s&&(s=yn(),this.Pr.set(t,s)),this.Pr.set(t,s.add(r.key))}}class gk{constructor(){this.Ir=new Nr(Ps.dr),this.Tr=new Nr(Ps.Er)}isEmpty(){return this.Ir.isEmpty()}addReference(e,t){const r=new Ps(e,t);this.Ir=this.Ir.add(r),this.Tr=this.Tr.add(r)}Ar(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Rr(new Ps(e,t))}Vr(e,t){e.forEach(r=>this.removeReference(r,t))}mr(e){const t=new _t(new Bn([])),r=new Ps(t,e),i=new Ps(t,e+1),s=[];return this.Tr.forEachInRange([r,i],u=>{this.Rr(u),s.push(u.key)}),s}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Tr=this.Tr.delete(e)}pr(e){const t=new _t(new Bn([])),r=new Ps(t,e),i=new Ps(t,e+1);let s=yn();return this.Tr.forEachInRange([r,i],u=>{s=s.add(u.key)}),s}containsKey(e){const t=new Ps(e,0),r=this.Ir.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ps{constructor(e,t){this.key=e,this.yr=t}static dr(e,t){return _t.comparator(e.key,t.key)||un(e.yr,t.yr)}static Er(e,t){return un(e.yr,t.yr)||_t.comparator(e.key,t.key)}}class qq{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.wr=1,this.Sr=new Nr(Ps.dr)}checkEmpty(e){return ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.wr;this.wr++;const u=new XN(s,t,r,i);this.mutationQueue.push(u);for(const l of i)this.Sr=this.Sr.add(new Ps(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ce.resolve(u)}lookupMutationBatch(e,t){return ce.resolve(this.br(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Dr(t+1),s=i<0?0:i;return ce.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.mutationQueue.length?-1:this.wr-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ps(t,0),i=new Ps(t,Number.POSITIVE_INFINITY),s=[];return this.Sr.forEachInRange([r,i],u=>{const l=this.br(u.yr);s.push(l)}),ce.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nr(un);return t.forEach(i=>{const s=new Ps(i,0),u=new Ps(i,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([s,u],l=>{r=r.add(l.yr)})}),ce.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;_t.isDocumentKey(s)||(s=s.child(""));const u=new Ps(new _t(s),0);let l=new Nr(un);return this.Sr.forEachWhile(f=>{const y=f.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(l=l.add(f.yr)),!0)},u),ce.resolve(this.Cr(l))}Cr(e){const t=[];return e.forEach(r=>{const i=this.br(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Gt(0===this.vr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Sr;return ce.forEach(t.mutations,i=>{const s=new Ps(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Sr=r})}xn(e){}containsKey(e,t){const r=new Ps(t,0),i=this.Sr.firstAfterOrEqual(r);return ce.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ce.resolve()}vr(e,t){return this.Dr(e)}Dr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}br(e){const t=this.Dr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Wq{constructor(e){this.Fr=e,this.docs=new Mr(_t.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,u=this.Fr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ce.resolve(r?r.document.mutableCopy():Gr.newInvalidDocument(t))}getEntries(e,t){let r=fa();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Gr.newInvalidDocument(i))}),ce.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=fa();const u=t.path,l=new _t(u.child("")),f=this.docs.getIteratorFrom(l);for(;f.hasNext();){const{key:y,value:{document:I}}=f.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||UN(SB(I),r)<=0||(i.has(I.key)||_C(t,I))&&(s=s.insert(I.key,I.mutableCopy()))}return ce.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Dt()}Mr(e,t){return ce.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Kq(this)}getSize(e){return ce.resolve(this.size)}}class Kq extends v4{constructor(e){super(),this.ur=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ur.addEntry(e,i)):this.ur.removeEntry(r)}),ce.waitFor(t)}getFromCache(e,t){return this.ur.getEntry(e,t)}getAllFromCache(e,t){return this.ur.getEntries(e,t)}}class Zq{constructor(e){this.persistence=e,this.Or=new qh(t=>I_(t),gC),this.lastRemoteSnapshotVersion=qt.min(),this.highestTargetId=0,this.Nr=0,this.Br=new gk,this.targetCount=0,this.Lr=x_.Bn()}forEachTarget(e,t){return this.Or.forEach((r,i)=>t(i)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Nr&&(this.Nr=t),ce.resolve()}Qn(e){this.Or.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new x_(t),this.highestTargetId=t),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,t){return this.Qn(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.Qn(t),ce.resolve()}removeTargetData(e,t){return this.Or.delete(t.target),this.Br.mr(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Or.forEach((u,l)=>{l.sequenceNumber<=t&&null===r.get(l.targetId)&&(this.Or.delete(u),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),ce.waitFor(s).next(()=>i)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const r=this.Or.get(t)||null;return ce.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Ar(t,r),ce.resolve()}removeMatchingKeys(e,t,r){this.Br.Vr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(u=>{s.push(i.markPotentiallyOrphaned(e,u))}),ce.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.mr(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.pr(t);return ce.resolve(r)}containsKey(e,t){return ce.resolve(this.Br.containsKey(t))}}class mk{constructor(e,t){this.kr={},this.overlays={},this.qr=new Qa(0),this.Qr=!1,this.Qr=!0,this.referenceDelegate=e(this),this.Kr=new Zq(this),this.indexManager=new Oq,this.remoteDocumentCache=new Wq(r=>this.referenceDelegate.$r(r)),this.serializer=new Qj(t),this.Ur=new Gq(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zq,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.kr[e.toKey()];return r||(r=new qq(t,this.referenceDelegate),this.kr[e.toKey()]=r),r}getTargetCache(){return this.Kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ur}runTransaction(e,t,r){qe("MemoryPersistence","Starting transaction:",e);const i=new Qq(this.qr.next());return this.referenceDelegate.Wr(),r(i).next(s=>this.referenceDelegate.Gr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}zr(e,t){return ce.or(Object.values(this.kr).map(r=>()=>r.containsKey(e,t)))}}class Qq extends RB{constructor(e){super(),this.currentSequenceNumber=e}}class Sx{constructor(e){this.persistence=e,this.jr=new gk,this.Hr=null}static Jr(e){return new Sx(e)}get Yr(){if(this.Hr)return this.Hr;throw Dt()}addReference(e,t,r){return this.jr.addReference(r,t),this.Yr.delete(r.toString()),ce.resolve()}removeReference(e,t,r){return this.jr.removeReference(r,t),this.Yr.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.Yr.add(t.toString()),ce.resolve()}removeTarget(e,t){this.jr.mr(t.targetId).forEach(i=>this.Yr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Yr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Wr(){this.Hr=new Set}Gr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Yr,r=>{const i=_t.fromPath(r);return this.Zr(e,i).next(s=>{s||t.removeEntry(i,qt.min())})}).next(()=>(this.Hr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zr(e,t).next(r=>{r?this.Yr.delete(t.toString()):this.Yr.add(t.toString())})}$r(e){return 0}Zr(e,t){return ce.or([()=>ce.resolve(this.jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zr(e,t)])}}class Yq{constructor(e){this.serializer=e}B(e,t,r,i){const s=new ix("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kB,{unique:!0}),f.createObjectStore("documentMutations"),A4(e),function(f){f.createObjectStore("remoteDocuments")}(e));let u=ce.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),A4(e)),u=u.next(()=>function(f){const y=f.store("targetGlobal"),I={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:qt.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",I)}(s))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(f,y){return y.store("mutations").G().next(I=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kB,{unique:!0});const w=y.store("mutations"),x=I.map(M=>w.put(M));return ce.waitFor(x)})}(e,s))),u=u.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.ei(s))),r<6&&i>=6&&(u=u.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.ti(s)))),r<7&&i>=7&&(u=u.next(()=>this.ni(s))),r<8&&i>=8&&(u=u.next(()=>this.ri(e,s))),r<9&&i>=9&&(u=u.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.ii(s))),r<11&&i>=11&&(u=u.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(f){const y=f.createObjectStore("documentOverlays",{keyPath:F7});y.createIndex("collectionPathOverlayIndex",V7,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",L7,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(f){const y=f.createObjectStore("remoteDocumentsV14",{keyPath:A7});y.createIndex("documentKeyIndex",b7),y.createIndex("collectionGroupIndex",D7)}(e)).next(()=>this.si(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.oi(e,s))),r<15&&i>=15&&(u=u.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:M7}).createIndex("sequenceNumberIndex",N7,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:k7}).createIndex("documentKeyIndex",O7,{unique:!1})}(e))),u}ti(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=Ax(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ei(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.G().next(i=>ce.forEach(i,s=>{const u=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.G("userMutationsIndex",u).next(l=>ce.forEach(l,f=>{Gt(f.userId===s.userId);const y=b_(this.serializer,f);return h4(e,s.userId,y).next(()=>{})}))}))}ni(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Z((u,l)=>{const f=new Bn(u),y=[0,co(f)];s.push(t.get(y).next(I=>I?ce.resolve():t.put({targetId:0,path:co(f),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ce.waitFor(s))})}ri(e,t){e.createObjectStore("collectionParents",{keyPath:P7});const r=t.store("collectionParents"),i=new pk,s=u=>{if(i.add(u)){const l=u.lastSegment(),f=u.popLast();return r.put({collectionId:l,parent:co(f)})}};return t.store("remoteDocuments").Z({Y:!0},(u,l)=>{const f=new Bn(u);return s(f.popLast())}).next(()=>t.store("documentMutations").Z({Y:!0},([u,l,f],y)=>{const I=nd(l);return s(I.popLast())}))}ii(e){const t=e.store("targets");return t.Z((r,i)=>{const s=SC(i),u=Jj(this.serializer,s);return t.put(u)})}si(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((s,u)=>{const l=t.store("remoteDocumentsV14"),f=(w=u,w.document?new _t(Bn.fromString(w.document.name).popFirst(5)):w.noDocument?_t.fromSegments(w.noDocument.path):w.unknownDocument?_t.fromSegments(w.unknownDocument.path):Dt()).path.toArray(),y={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};var w;i.push(l.put(y))}).next(()=>ce.waitFor(i))}oi(e,t){const r=t.store("mutations"),i=E4(this.serializer),s=new mk(Sx.Jr,this.serializer.ht);return r.G().next(u=>{const l=new Map;return u.forEach(f=>{var y;let I=null!==(y=l.get(f.userId))&&void 0!==y?y:yn();b_(this.serializer,f).keys().forEach(w=>I=I.add(w)),l.set(f.userId,I)}),ce.forEach(l,(f,y)=>{const I=new xs(y),w=wx.Pt(this.serializer,I),x=s.getIndexManager(I),M=bx.Pt(I,this.serializer,x,s.referenceDelegate);return new C4(i,M,w,x).recalculateAndSaveOverlaysForDocumentKeys(new jN(t,Qa.ae),f).next()})})}}function A4(n){n.createObjectStore("targetDocuments",{keyPath:x7}).createIndex("documentTargetsIndex",R7,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",S7,{unique:!0}),n.createObjectStore("targetGlobal")}const _k="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class yk{constructor(e,t,r,i,s,u,l,f,y,I,w=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this._i=s,this.window=u,this.document=l,this.ai=y,this.ui=I,this.ci=w,this.qr=null,this.Qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.li=null,this.inForeground=!1,this.hi=null,this.Pi=null,this.Ii=Number.NEGATIVE_INFINITY,this.di=x=>Promise.resolve(),!yk.C())throw new He(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Bq(this,i),this.Ti=t+"main",this.serializer=new Qj(f),this.Ei=new Gc(this.Ti,this.ci,new Yq(this.serializer)),this.Kr=new Vq(this.referenceDelegate,this.serializer),this.remoteDocumentCache=E4(this.serializer),this.Ur=new xq,this.window&&this.window.localStorage?this.Ai=this.window.localStorage:(this.Ai=null,!1===I&&ji("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ri().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new He(ge.FAILED_PRECONDITION,_k);return this.Vi(),this.mi(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Kr.getHighestSequenceNumber(e))}).then(e=>{this.qr=new Qa(e,this.ai)}).then(()=>{this.Qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}gi(e){var r,t=this;return this.di=function(i){return(r=r||(0,H.Z)(function*(s){if(t.started)return e(s)})).apply(this,arguments)},e(this.isPrimary)}setDatabaseDeletedListener(e){var t;this.Ei.k(function(r){return(t=t||(0,H.Z)(function*(i){null===i.newVersion&&(yield e())})).apply(this,arguments)})}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this._i.enqueueAndForget((0,H.Z)(function*(){t.started&&(yield t.Ri())})))}Ri(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Rx(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.pi(e).next(t=>{t||(this.isPrimary=!1,this._i.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.yi(e)).next(t=>this.isPrimary&&!t?this.wi(e).next(()=>!1):!!t&&this.Si(e).next(()=>!0))).catch(e=>{if(Zp(e))return qe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return qe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this._i.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}pi(e){return NC(e).get("owner").next(t=>ce.resolve(this.bi(t)))}Di(e){return Rx(e).delete(this.clientId)}Ci(){var e=this;return(0,H.Z)(function*(){if(e.isPrimary&&!e.vi(e.Ii,18e5)){e.Ii=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Rs(r,"clientMetadata");return i.G().next(s=>{const u=e.Fi(s,18e5),l=s.filter(f=>-1===u.indexOf(f));return ce.forEach(l,f=>i.delete(f.clientId)).next(()=>l)})}).catch(()=>[]);if(e.Ai)for(const r of t)e.Ai.removeItem(e.Mi(r.clientId))}})()}fi(){this.Pi=this._i.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ri().then(()=>this.Ci()).then(()=>this.fi()))}bi(e){return!!e&&e.ownerId===this.clientId}yi(e){return this.ui?ce.resolve(!0):NC(e).get("owner").next(t=>{if(null!==t&&this.vi(t.leaseTimestampMs,5e3)&&!this.xi(t.ownerId)){if(this.bi(t)&&this.networkEnabled)return!0;if(!this.bi(t)){if(!t.allowTabSynchronization)throw new He(ge.FAILED_PRECONDITION,_k);return!1}}return!(!this.networkEnabled||!this.inForeground)||Rx(e).G().next(r=>void 0===this.Fi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,l=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&l)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&qe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,H.Z)(function*(){e.Qr=!1,e.Oi(),e.Pi&&(e.Pi.cancel(),e.Pi=null),e.Ni(),e.Bi(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new jN(t,Qa.ae);return e.wi(r).next(()=>e.Di(r))}),e.Ei.close(),e.Li()})()}Fi(e,t){return e.filter(r=>this.vi(r.updateTimeMs,t)&&!this.xi(r.clientId))}ki(){return this.runTransaction("getActiveClients","readonly",e=>Rx(e).G().next(t=>this.Fi(t,18e5).map(r=>r.clientId)))}get started(){return this.Qr}getMutationQueue(e,t){return bx.Pt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Fq(e,this.serializer.ht.databaseId)}getDocumentOverlayCache(e){return wx.Pt(this.serializer,e)}getBundleCache(){return this.Ur}runTransaction(e,t,r){qe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(f=this.ci)?B7:14===f?LB:13===f?VB:12===f?U7:11===f?FB:void Dt();var f;let u;return this.Ei.runTransaction(e,i,s,l=>(u=new jN(l,this.qr?this.qr.next():Qa.ae),"readwrite-primary"===t?this.pi(u).next(f=>!!f||this.yi(u)).next(f=>{if(!f)throw ji(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this._i.enqueueRetryable(()=>this.di(!1)),new He(ge.FAILED_PRECONDITION,xB);return r(u)}).next(f=>this.Si(u).next(()=>f)):this.qi(u).next(()=>r(u)))).then(l=>(u.raiseOnCommittedEvent(),l))}qi(e){return NC(e).get("owner").next(t=>{if(null!==t&&this.vi(t.leaseTimestampMs,5e3)&&!this.xi(t.ownerId)&&!this.bi(t)&&!(this.ui||this.allowTabSynchronization&&t.allowTabSynchronization))throw new He(ge.FAILED_PRECONDITION,_k)})}Si(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return NC(e).put("owner",t)}static C(){return Gc.C()}wi(e){const t=NC(e);return t.get("owner").next(r=>this.bi(r)?(qe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ce.resolve())}vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(ji(`Detected an update time that is in the future: ${e} > ${r}`),1))}Vi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.hi=()=>{this._i.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ri()))},this.document.addEventListener("visibilitychange",this.hi),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.hi&&(this.document.removeEventListener("visibilitychange",this.hi),this.hi=null)}mi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.li=()=>{this.Oi();const t=/(?:Version|Mobile)\/1[456]/;(0,Et.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this._i.enterRestrictedMode(!0),this._i.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.li))}Bi(){this.li&&(this.window.removeEventListener("pagehide",this.li),this.li=null)}xi(e){var t;try{const r=null!==(null===(t=this.Ai)||void 0===t?void 0:t.getItem(this.Mi(e)));return qe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ji("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Oi(){if(this.Ai)try{this.Ai.setItem(this.Mi(this.clientId),String(Date.now()))}catch(e){ji("Failed to set zombie client id.",e)}}Li(){if(this.Ai)try{this.Ai.removeItem(this.Mi(this.clientId))}catch{}}Mi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function NC(n){return Rs(n,"owner")}function Rx(n){return Rs(n,"clientMetadata")}function vk(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Ek{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Qi=r,this.Ki=i}static $i(e,t){let r=yn(),i=yn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Ek(e,t.fromCache,r,i)}}class Jq{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class b4{constructor(){this.Ui=!1,this.Wi=!1,this.Gi=100,this.zi=2}initialize(e,t){this.ji=e,this.indexManager=t,this.Ui=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Hi(e,t).next(u=>{s.result=u}).next(()=>{if(!s.result)return this.Ji(e,t,i,r).next(u=>{s.result=u})}).next(()=>{if(s.result)return;const u=new Jq;return this.Yi(e,t,u).next(l=>{if(s.result=l,this.Wi)return this.Zi(e,t,u,l.size)})}).next(()=>s.result)}Zi(e,t,r,i){return r.documentReadCount<this.Gi?(A0()<=or.in.DEBUG&&qe("QueryEngine","SDK will not create cache indexes for query:",O0(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Gi,"documents"),ce.resolve()):(A0()<=or.in.DEBUG&&qe("QueryEngine","Query:",O0(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.zi*i?(A0()<=or.in.DEBUG&&qe("QueryEngine","The SDK decides to create cache indexes for query:",O0(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bo(t))):ce.resolve())}Hi(e,t){if(uj(t))return ce.resolve(null);let r=Bo(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=gx(t,null,"F"),r=Bo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const u=yn(...s);return this.ji.getDocuments(e,u).next(l=>this.indexManager.getMinOffset(e,r).next(f=>{const y=this.Xi(t,l);return this.es(t,y,u,f.readTime)?this.Hi(e,gx(t,null,"F")):this.ts(e,y,t,f)}))})))}Ji(e,t,r,i){return uj(t)||i.isEqual(qt.min())?ce.resolve(null):this.ji.getDocuments(e,r).next(s=>{const u=this.Xi(t,s);return this.es(t,u,r,i)?ce.resolve(null):(A0()<=or.in.DEBUG&&qe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),O0(t)),this.ts(e,u,t,DB(i,-1)).next(l=>l))})}Xi(e,t){let r=new Nr(hj(e));return t.forEach((i,s)=>{_C(e,s)&&(r=r.add(s))}),r}es(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Yi(e,t,r){return A0()<=or.in.DEBUG&&qe("QueryEngine","Using full collection scan to execute query:",O0(t)),this.ji.getDocumentsMatchingQuery(e,t,Za.min(),r)}ts(e,t,r,i){return this.ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(u=>{s=s.insert(u.key,u)}),s))}}class Xq{constructor(e,t,r,i){this.persistence=e,this.ns=t,this.serializer=i,this.rs=new Mr(un),this.ss=new qh(s=>I_(s),gC),this.os=new Map,this._s=e.getRemoteDocumentCache(),this.Kr=e.getTargetCache(),this.Ur=e.getBundleCache(),this.us(r)}us(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new C4(this._s,this.mutationQueue,this.documentOverlayCache,this.indexManager),this._s.setIndexManager(this.indexManager),this.ns.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.rs))}}function D4(n,e,t,r){return new Xq(n,e,t,r)}function S4(n,e){return(NU=NU||(0,H.Z)(function*(t,r){const i=pt(t);return yield i.persistence.runTransaction("Handle user change","readonly",s=>{let u;return i.mutationQueue.getAllMutationBatches(s).next(l=>(u=l,i.us(r),i.mutationQueue.getAllMutationBatches(s))).next(l=>{const f=[],y=[];let I=yn();for(const w of u){f.push(w.batchId);for(const x of w.mutations)I=I.add(x.key)}for(const w of l){y.push(w.batchId);for(const x of w.mutations)I=I.add(x.key)}return i.localDocuments.getDocuments(s,I).next(w=>({cs:w,removedBatchIds:f,addedBatchIds:y}))})})})).apply(this,arguments)}function e5(n,e){const t=pt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t._s.newChangeBuffer({trackRemovals:!0});return function(l,f,y,I){const w=y.batch,x=w.keys();let M=ce.resolve();return x.forEach(B=>{M=M.next(()=>I.getEntry(f,B)).next(Z=>{const J=y.docVersions.get(B);Gt(null!==J),Z.version.compareTo(J)<0&&(w.applyToRemoteDocument(Z,y),Z.isValidDocument()&&(Z.setReadTime(y.commitVersion),I.addEntry(Z)))})}),M.next(()=>l.mutationQueue.removeMutationBatch(f,w))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let f=yn();for(let y=0;y<l.mutationResults.length;++y)l.mutationResults[y].transformResults.length>0&&(f=f.add(l.batch.mutations[y].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function x4(n){const e=pt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Kr.getLastRemoteSnapshotVersion(t))}function t5(n,e){const t=pt(n),r=e.snapshotVersion;let i=t.rs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const u=t._s.newChangeBuffer({trackRemovals:!0});i=t.rs;const l=[];e.targetChanges.forEach((I,w)=>{const x=i.get(w);if(!x)return;l.push(t.Kr.removeMatchingKeys(s,I.removedDocuments,w).next(()=>t.Kr.addMatchingKeys(s,I.addedDocuments,w)));let M=x.withSequenceNumber(s.currentSequenceNumber);var Z,J,me;null!==e.targetMismatches.get(w)?M=M.withResumeToken(ps.EMPTY_BYTE_STRING,qt.min()).withLastLimboFreeSnapshotVersion(qt.min()):I.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(I.resumeToken,r)),i=i.insert(w,M),J=M,me=I,(0===(Z=x).resumeToken.approximateByteSize()||J.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||me.addedDocuments.size+me.modifiedDocuments.size+me.removedDocuments.size>0)&&l.push(t.Kr.updateTargetData(s,M))});let f=fa(),y=yn();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(s,I))}),l.push(R4(s,u,e.documentUpdates).next(I=>{f=I.ls,y=I.hs})),!r.isEqual(qt.min())){const I=t.Kr.getLastRemoteSnapshotVersion(s).next(w=>t.Kr.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(I)}return ce.waitFor(l).next(()=>u.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,f,y)).next(()=>f)}).then(s=>(t.rs=i,s))}function R4(n,e,t){let r=yn(),i=yn();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let u=fa();return t.forEach((l,f)=>{const y=s.get(l);f.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(l)),f.isNoDocument()&&f.version.isEqual(qt.min())?(e.removeEntry(l,f.readTime),u=u.insert(l,f)):!y.isValidDocument()||f.version.compareTo(y.version)>0||0===f.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(f),u=u.insert(l,f)):qe("LocalStore","Ignoring outdated watch update for ",l,". Current version:",y.version," Watch version:",f.version)}),{ls:u,hs:i}})}function n5(n,e){const t=pt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function q0(n,e){const t=pt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Kr.getTargetData(r,e).next(s=>s?(i=s,ce.resolve(i)):t.Kr.allocateTargetId(r).next(u=>(i=new Kh(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Kr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.rs.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.rs=t.rs.insert(r.targetId,r),t.ss.set(e,r.targetId)),r})}function W0(n,e,t){return(kU=kU||(0,H.Z)(function*(r,i,s){const u=pt(r),l=u.rs.get(i),f=s?"readwrite":"readwrite-primary";try{s||(yield u.persistence.runTransaction("Release target",f,y=>u.persistence.referenceDelegate.removeTarget(y,l)))}catch(y){if(!Zp(y))throw y;qe("LocalStore",`Failed to update sequence numbers for target ${i}: ${y}`)}u.rs=u.rs.remove(i),u.ss.delete(l.target)})).apply(this,arguments)}function Px(n,e,t){const r=pt(n);let i=qt.min(),s=yn();return r.persistence.runTransaction("Execute query","readwrite",u=>function(f,y,I){const w=pt(f),x=w.ss.get(I);return void 0!==x?ce.resolve(w.rs.get(x)):w.Kr.getTargetData(y,I)}(r,u,Bo(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Kr.getMatchingKeysForTargetId(u,l.targetId).next(f=>{s=f})}).next(()=>r.ns.getDocumentsMatchingQuery(u,e,t?i:qt.min(),t?s:yn())).next(l=>(N4(r,dj(e),l),{documents:l,Ps:s})))}function P4(n,e){const t=pt(n),r=pt(t.Kr),i=t.rs.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.lt(s,e).next(u=>u?u.target:null))}function M4(n,e){const t=pt(n),r=t.os.get(e)||qt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t._s.getAllFromCollectionGroup(i,e,DB(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(N4(t,e,i),i))}function N4(n,e,t){let r=n.os.get(e)||qt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.os.set(e,r)}function i5(n,e){return(FU=FU||(0,H.Z)(function*(t,r,i=yn()){const s=yield q0(t,Bo(uk(r.bundledQuery))),u=pt(t);return u.persistence.runTransaction("Save named query","readwrite",l=>{const f=$i(r.readTime);if(s.snapshotVersion.compareTo(f)>=0)return u.Ur.saveNamedQuery(l,r);const y=s.withResumeToken(ps.EMPTY_BYTE_STRING,f);return u.rs=u.rs.insert(y.targetId,y),u.Kr.updateTargetData(l,y).next(()=>u.Kr.removeMatchingKeysForTargetId(l,s.targetId)).next(()=>u.Kr.addMatchingKeys(l,i,s.targetId)).next(()=>u.Ur.saveNamedQuery(l,r))})})).apply(this,arguments)}function k4(n,e){return`firestore_clients_${n}_${e}`}function O4(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Ik(n,e){return`firestore_targets_${n}_${e}`}class Mx{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){const i=JSON.parse(r);let s,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(s=new He(i.error.code,i.error.message))),u?new Mx(e,t,i.state,s):(ji("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}As(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kC{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new He(r.error.code,r.error.message))),s?new kC(e,r.state,i):(ji("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}As(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Nx{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=YN();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=MB(r.activeTargetIds[u]),s=s.add(r.activeTargetIds[u]);return i?new Nx(e,s):(ji("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class wk{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new wk(t.clientId,t.onlineState):(ji("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Tk{constructor(){this.activeTargetIds=YN()}Rs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}As(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ck{constructor(e,t,r,i,s){this.window=e,this._i=t,this.persistenceKey=r,this.fs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.gs=this.ps.bind(this),this.ys=new Mr(un),this.started=!1,this.ws=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ss=k4(this.persistenceKey,this.fs),this.bs=`firestore_sequence_number_${this.persistenceKey}`,this.ys=this.ys.insert(this.fs,new Tk),this.Ds=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.Cs=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.vs=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.Fs=`firestore_online_state_${this.persistenceKey}`,this.Ms=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.gs)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,H.Z)(function*(){const t=yield e.syncEngine.ki();for(const i of t){if(i===e.fs)continue;const s=e.getItem(k4(e.persistenceKey,i));if(s){const u=Nx.Es(i,s);u&&(e.ys=e.ys.insert(u.clientId,u))}}e.xs();const r=e.storage.getItem(e.Fs);if(r){const i=e.Os(r);i&&e.Ns(i)}for(const i of e.ws)e.ps(i);e.ws=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Bs(this.ys)}isActiveQueryTarget(e){let t=!1;return this.ys.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.ks(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Ik(this.persistenceKey,e));if(r){const i=kC.Es(e,r);i&&(t=i.state)}}return this.qs.Rs(e),this.xs(),t}removeLocalQueryTarget(e){this.qs.Vs(e),this.xs()}isLocalQueryTarget(e){return this.qs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ik(this.persistenceKey,e))}updateQueryState(e,t,r){this.Qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.ks(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Ks(e)}notifyBundleLoaded(e){this.$s(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.gs),this.removeItem(this.Ss),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return qe("SharedClientState","READ",e,t),t}setItem(e,t){qe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){qe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ps(e){var t=this;const r=e;if(r.storageArea===this.storage){if(qe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ss)return void ji("Received WebStorage notification for local change. Another client might have garbage-collected our state");this._i.enqueueRetryable((0,H.Z)(function*(){if(t.started){if(null!==r.key)if(t.Ds.test(r.key)){if(null==r.newValue){const i=t.Us(r.key);return t.Ws(i,null)}{const i=t.Gs(r.key,r.newValue);if(i)return t.Ws(i.clientId,i)}}else if(t.Cs.test(r.key)){if(null!==r.newValue){const i=t.zs(r.key,r.newValue);if(i)return t.js(i)}}else if(t.vs.test(r.key)){if(null!==r.newValue){const i=t.Hs(r.key,r.newValue);if(i)return t.Js(i)}}else if(r.key===t.Fs){if(null!==r.newValue){const i=t.Os(r.newValue);if(i)return t.Ns(i)}}else if(r.key===t.bs){const i=function(u){let l=Qa.ae;if(null!=u)try{const f=JSON.parse(u);Gt("number"==typeof f),l=f}catch(f){ji("SharedClientState","Failed to read sequence number from WebStorage",f)}return l}(r.newValue);i!==Qa.ae&&t.sequenceNumberHandler(i)}else if(r.key===t.Ms){const i=t.Ys(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Zs(s)))}}else t.ws.push(r)}))}}get qs(){return this.ys.get(this.fs)}xs(){this.setItem(this.Ss,this.qs.As())}Ls(e,t,r){const i=new Mx(this.currentUser,e,t,r),s=O4(this.persistenceKey,this.currentUser,e);this.setItem(s,i.As())}ks(e){const t=O4(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ks(e){this.storage.setItem(this.Fs,JSON.stringify({clientId:this.fs,onlineState:e}))}Qs(e,t,r){const i=Ik(this.persistenceKey,e),s=new kC(e,t,r);this.setItem(i,s.As())}$s(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Ms,t)}Us(e){const t=this.Ds.exec(e);return t?t[1]:null}Gs(e,t){const r=this.Us(e);return Nx.Es(r,t)}zs(e,t){const r=this.Cs.exec(e),i=Number(r[1]);return Mx.Es(new xs(void 0!==r[2]?r[2]:null),i,t)}Hs(e,t){const r=this.vs.exec(e),i=Number(r[1]);return kC.Es(i,t)}Os(e){return wk.Es(e)}Ys(e){return JSON.parse(e)}js(e){var t=this;return(0,H.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Xs(e.batchId,e.state,e.error);qe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Js(e){return this.syncEngine.eo(e.targetId,e.state,e.error)}Ws(e,t){const r=t?this.ys.insert(e,t):this.ys.remove(e),i=this.Bs(this.ys),s=this.Bs(r),u=[],l=[];return s.forEach(f=>{i.has(f)||u.push(f)}),i.forEach(f=>{s.has(f)||l.push(f)}),this.syncEngine.no(u,l).then(()=>{this.ys=r})}Ns(e){this.ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Bs(e){let t=YN();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class F4{constructor(){this.ro=new Tk,this.io={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.ro.Rs(e),this.io[e]||"not-current"}updateQueryState(e,t,r){this.io[e]=t}removeLocalQueryTarget(e){this.ro.Vs(e)}isLocalQueryTarget(e){return this.ro.activeTargetIds.has(e)}clearQueryState(e){delete this.io[e]}getAllActiveQueryTargets(){return this.ro.activeTargetIds}isActiveQueryTarget(e){return this.ro.activeTargetIds.has(e)}start(){return this.ro=new Tk,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class s5{so(e){}shutdown(){}}class V4{constructor(){this.oo=()=>this._o(),this.ao=()=>this.uo(),this.co=[],this.lo()}so(e){this.co.push(e)}shutdown(){window.removeEventListener("online",this.oo),window.removeEventListener("offline",this.ao)}lo(){window.addEventListener("online",this.oo),window.addEventListener("offline",this.ao)}_o(){qe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.co)e(0)}uo(){qe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.co)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let kx=null;function Ak(){return null===kx?kx=268435456+Math.round(2147483648*Math.random()):kx++,"0x"+kx.toString(16)}const o5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class a5{constructor(e){this.ho=e.ho,this.Po=e.Po}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.Po()}send(e){this.ho(e)}Vo(){this.To()}mo(e){this.Ao(e)}fo(e){this.Ro(e)}}const ho="WebChannelConnection";class u5 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=r+"://"+t.host,this.yo=`projects/${i}/databases/${s}`,this.wo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get So(){return!1}bo(t,r,i,s,u){const l=Ak(),f=this.Do(t,r);qe("RestConnection",`Sending RPC '${t}' ${l}:`,f,i);const y={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Co(y,s,u),this.vo(t,f,y,i).then(I=>(qe("RestConnection",`Received RPC '${t}' ${l}: `,I),I),I=>{throw da("RestConnection",`RPC '${t}' ${l} failed with error: `,I,"url: ",f,"request:",i),I})}Fo(t,r,i,s,u,l){return this.bo(t,r,i,s,u)}Co(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+C0,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,u)=>t[u]=s),i&&i.headers.forEach((s,u)=>t[u]=s)}Do(t,r){return`${this.po}/v1/${r}:${o5[t]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,i){const s=Ak();return new Promise((u,l)=>{const f=new s7;f.setWithCredentials(!0),f.listenOnce(r7.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case FN.NO_ERROR:const I=f.getResponseJson();qe(ho,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(I)),u(I);break;case FN.TIMEOUT:qe(ho,`RPC '${e}' ${s} timed out`),l(new He(ge.DEADLINE_EXCEEDED,"Request time out"));break;case FN.HTTP_ERROR:const w=f.getStatus();if(qe(ho,`RPC '${e}' ${s} failed with status:`,w,"response text:",f.getResponseText()),w>0){let x=f.getResponseJson();Array.isArray(x)&&(x=x[0]);const M=x?.error;if(M&&M.status&&M.message){const B=function(J){const me=J.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(me)>=0?me:ge.UNKNOWN}(M.status);l(new He(B,M.message))}else l(new He(ge.UNKNOWN,"Server responded with status "+f.getStatus()))}else l(new He(ge.UNAVAILABLE,"Connection failed."));break;default:Dt()}}finally{qe(ho,`RPC '${e}' ${s} completed.`)}});const y=JSON.stringify(i);qe(ho,`RPC '${e}' ${s} sending request:`,i),f.send(t,"POST",y,r,15)})}Mo(e,t,r){const i=Ak(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=t7(),l=n7(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;void 0!==y&&(f.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Co(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const I=s.join("");qe(ho,`Creating RPC '${e}' stream ${i}: ${I}`,f);const w=u.createWebChannel(I,f);let x=!1,M=!1;const B=new a5({ho:J=>{M?qe(ho,`Not sending because RPC '${e}' stream ${i} is closed:`,J):(x||(qe(ho,`Opening RPC '${e}' stream ${i} transport.`),w.open(),x=!0),qe(ho,`RPC '${e}' stream ${i} sending:`,J),w.send(J))},Po:()=>w.close()}),Z=(J,me,Oe)=>{J.listen(me,Ie=>{try{Oe(Ie)}catch($e){setTimeout(()=>{throw $e},0)}})};return Z(w,rx.EventType.OPEN,()=>{M||qe(ho,`RPC '${e}' stream ${i} transport opened.`)}),Z(w,rx.EventType.CLOSE,()=>{M||(M=!0,qe(ho,`RPC '${e}' stream ${i} transport closed`),B.mo())}),Z(w,rx.EventType.ERROR,J=>{M||(M=!0,da(ho,`RPC '${e}' stream ${i} transport errored:`,J),B.mo(new He(ge.UNAVAILABLE,"The operation could not be completed")))}),Z(w,rx.EventType.MESSAGE,J=>{var me;if(!M){const Oe=J.data[0];Gt(!!Oe);const Ie=Oe,$e=Ie.error||(null===(me=Ie[0])||void 0===me?void 0:me.error);if($e){qe(ho,`RPC '${e}' stream ${i} received error:`,$e);const Je=$e.status;let yt=function(Ho){const zc=Xi[Ho];if(void 0!==zc)return Rj(zc)}(Je),Dn=$e.message;void 0===yt&&(yt=ge.INTERNAL,Dn="Unknown error status: "+Je+" with message "+$e.message),M=!0,B.mo(new He(yt,Dn)),w.close()}else qe(ho,`RPC '${e}' stream ${i} received:`,Oe),B.fo(Oe)}}),Z(l,i7.STAT_EVENT,J=>{J.stat===PU.PROXY?qe(ho,`RPC '${e}' stream ${i} detected buffering proxy`):J.stat===PU.NOPROXY&&qe(ho,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{B.Vo()},0),B}}function L4(){return typeof window<"u"?window:null}function Ox(){return typeof document<"u"?document:null}function OC(n){return new yq(n,!0)}class bk{constructor(e,t,r=1e3,i=1.5,s=6e4){this._i=e,this.timerId=t,this.xo=r,this.Oo=i,this.No=s,this.Bo=0,this.Lo=null,this.ko=Date.now(),this.reset()}reset(){this.Bo=0}qo(){this.Bo=this.No}Qo(e){this.cancel();const t=Math.floor(this.Bo+this.Ko()),r=Math.max(0,Date.now()-this.ko),i=Math.max(0,t-r);i>0&&qe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Bo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Lo=this._i.enqueueAfterDelay(this.timerId,i,()=>(this.ko=Date.now(),e())),this.Bo*=this.Oo,this.Bo<this.xo&&(this.Bo=this.xo),this.Bo>this.No&&(this.Bo=this.No)}$o(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Ko(){return(Math.random()-.5)*this.Bo}}class U4{constructor(e,t,r,i,s,u,l,f){this._i=e,this.Uo=r,this.Wo=i,this.connection=s,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=l,this.listener=f,this.state=0,this.Go=0,this.zo=null,this.jo=null,this.stream=null,this.Ho=new bk(e,t)}Jo(){return 1===this.state||5===this.state||this.Yo()}Yo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Zo()}stop(){var e=this;return(0,H.Z)(function*(){e.Jo()&&(yield e.close(0))})()}Xo(){this.state=0,this.Ho.reset()}e_(){this.Yo()&&null===this.zo&&(this.zo=this._i.enqueueAfterDelay(this.Uo,6e4,()=>this.t_()))}n_(e){this.r_(),this.stream.send(e)}t_(){var e=this;return(0,H.Z)(function*(){if(e.Yo())return e.close(0)})()}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}close(e,t){var r=this;return(0,H.Z)(function*(){r.r_(),r.i_(),r.Ho.cancel(),r.Go++,4!==e?r.Ho.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(ji(t.toString()),ji("Using maximum backoff delay to prevent overloading the backend."),r.Ho.qo()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.s_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Eo(t)})()}s_(){}auth(){this.state=1;const e=this.o_(this.Go),t=this.Go;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Go===t&&this.__(r,i)},r=>{e(()=>{const i=new He(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.a_(i)})})}__(e,t){const r=this.o_(this.Go);this.stream=this.u_(e,t),this.stream.Io(()=>{r(()=>(this.state=2,this.jo=this._i.enqueueAfterDelay(this.Wo,1e4,()=>(this.Yo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(i=>{r(()=>this.a_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Zo(){var e=this;this.state=5,this.Ho.Qo((0,H.Z)(function*(){e.state=0,e.start()}))}a_(e){return qe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}o_(e){return t=>{this._i.enqueueAndForget(()=>this.Go===e?t():(qe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class c5 extends U4{constructor(e,t,r,i,s,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=s}u_(e,t){return this.connection.Mo("Listen",e,t)}onMessage(e){this.Ho.reset();const t=function Iq(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:Dt(),i=e.targetChange.targetIds||[],s=function(y,I){return y.useProto3Json?(Gt(void 0===I||"string"==typeof I),ps.fromBase64String(I||"")):(Gt(void 0===I||I instanceof Uint8Array),ps.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,l=u&&function(y){const I=void 0===y.code?ge.UNKNOWN:Rj(y.code);return new He(I,y.message||"")}(u);t=new Oj(r,i,s,l||null)}else if("documentChange"in e){const r=e.documentChange,i=sd(n,r.document.name),s=$i(r.document.updateTime),u=r.document.createTime?$i(r.document.createTime):qt.min(),l=new Gs({mapValue:{fields:r.document.fields}}),f=Gr.newFoundDocument(i,s,u,l);t=new Ex(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=sd(n,r.document),s=r.readTime?$i(r.readTime):qt.min(),u=Gr.newNoDocument(i,s);t=new Ex([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=sd(n,r.document);t=new Ex([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Dt();{const r=e.filter,{count:i=0,unchangedNames:s}=r,u=new hq(i,s);t=new kj(r.targetId,u)}}var y;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return qt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?qt.min():u.readTime?$i(u.readTime):qt.min()}(e);return this.listener.c_(t,r)}l_(e){const t={};t.database=bC(this.serializer),t.addTarget=function(s,u){let l;const f=u.target;if(l=hx(f)?{documents:zj(s,f)}:{query:ak(s,f)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=Uj(s,u.resumeToken);const y=rk(s,u.expectedCount);null!==y&&(l.expectedCount=y)}else if(u.snapshotVersion.compareTo(qt.min())>0){l.readTime=B0(s,u.snapshotVersion.toTimestamp());const y=rk(s,u.expectedCount);null!==y&&(l.expectedCount=y)}return l}(this.serializer,e);const r=function Tq(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Dt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.n_(t)}h_(e){const t={};t.database=bC(this.serializer),t.removeTarget=e,this.n_(t)}}class l5 extends U4{constructor(e,t,r,i,s,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.serializer=s,this.P_=!1}get I_(){return this.P_}start(){this.P_=!1,this.lastStreamToken=void 0,super.start()}s_(){this.P_&&this.d_([])}u_(e,t){return this.connection.Mo("Write",e,t)}onMessage(e){if(Gt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.P_){this.Ho.reset();const t=function wq(n,e){return n&&n.length>0?(Gt(void 0!==e),n.map(t=>function(i,s){let u=$i(i.updateTime?i.updateTime:s);return u.isEqual(qt.min())&&(u=$i(s)),new uq(u,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=$i(e.commitTime);return this.listener.T_(r,t)}return Gt(!e.writeResults||0===e.writeResults.length),this.P_=!0,this.listener.E_()}A_(){const e={};e.database=bC(this.serializer),this.n_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>DC(this.serializer,r))};this.n_(t)}}class d5 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.R_=!1}V_(){if(this.R_)throw new He(ge.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,r){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.bo(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new He(ge.UNKNOWN,i.toString())})}Fo(e,t,r,i){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.Fo(e,t,r,s,u,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new He(ge.UNKNOWN,s.toString())})}terminate(){this.R_=!0}}class f5{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.f_=0,this.g_=null,this.p_=!0}y_(){0===this.f_&&(this.w_("Unknown"),this.g_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.g_=null,this.S_("Backend didn't respond within 10 seconds."),this.w_("Offline"),Promise.resolve())))}b_(e){"Online"===this.state?this.w_("Unknown"):(this.f_++,this.f_>=1&&(this.D_(),this.S_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.w_("Offline")))}set(e){this.D_(),this.f_=0,"Online"===e&&(this.p_=!1),this.w_(e)}w_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}S_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.p_?(ji(t),this.p_=!1):qe("OnlineStateTracker",t)}D_(){null!==this.g_&&(this.g_.cancel(),this.g_=null)}}class p5{constructor(e,t,r,i,s){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.C_=[],this.v_=new Map,this.F_=new Set,this.M_=[],this.x_=s,this.x_.so(l=>{r.enqueueAndForget((0,H.Z)(function*(){var f;ag(u)&&(qe("RemoteStore","Restarting streams for network reachability change."),yield function(I){return(f=f||(0,H.Z)(function*(w){const x=pt(w);x.F_.add(4),yield K0(x),x.O_.set("Unknown"),x.F_.delete(4),yield FC(x)})).apply(this,arguments)}(u))}))}),this.O_=new f5(r,i)}}function FC(n){return(LU=LU||(0,H.Z)(function*(e){if(ag(e))for(const t of e.M_)yield t(!0)})).apply(this,arguments)}function K0(n){return(UU=UU||(0,H.Z)(function*(e){for(const t of e.M_)yield t(!1)})).apply(this,arguments)}function Fx(n,e){const t=pt(n);t.v_.has(e.targetId)||(t.v_.set(e.targetId,e),xk(t)?Sk(t):Q0(t).Yo()&&Dk(t,e))}function VC(n,e){const t=pt(n),r=Q0(t);t.v_.delete(e),r.Yo()&&B4(t,e),0===t.v_.size&&(r.Yo()?r.e_():ag(t)&&t.O_.set("Unknown"))}function Dk(n,e){if(n.N_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Q0(n).l_(e)}function B4(n,e){n.N_.Le(e),Q0(n).h_(e)}function Sk(n){n.N_=new pq({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.v_.get(e)||null,st:()=>n.datastore.serializer.databaseId}),Q0(n).start(),n.O_.y_()}function xk(n){return ag(n)&&!Q0(n).Jo()&&n.v_.size>0}function ag(n){return 0===pt(n).F_.size}function j4(n){n.N_=void 0}function g5(n){return(BU=BU||(0,H.Z)(function*(e){e.v_.forEach((t,r)=>{Dk(e,t)})})).apply(this,arguments)}function m5(n,e){return(jU=jU||(0,H.Z)(function*(t,r){j4(t),xk(t)?(t.O_.b_(r),Sk(t)):t.O_.set("Unknown")})).apply(this,arguments)}function _5(n,e,t){return($U=$U||(0,H.Z)(function*(r,i,s){if(r.O_.set("Online"),i instanceof Oj&&2===i.state&&i.cause)try{var u;yield function(f,y){return(u=u||(0,H.Z)(function*(I,w){const x=w.cause;for(const M of w.targetIds)I.v_.has(M)&&(yield I.remoteSyncer.rejectListen(M,x),I.v_.delete(M),I.N_.removeTarget(M))})).apply(this,arguments)}(r,i)}catch(l){qe("RemoteStore","Failed to remove targets %s: %s ",i.targetIds.join(","),l),yield Vx(r,l)}else if(i instanceof Ex?r.N_.Ge(i):i instanceof kj?r.N_.Xe(i):r.N_.He(i),!s.isEqual(qt.min()))try{const l=yield x4(r.localStore);s.compareTo(l)>=0&&(yield function(y,I){const w=y.N_._t(I);return w.targetChanges.forEach((x,M)=>{if(x.resumeToken.approximateByteSize()>0){const B=y.v_.get(M);B&&y.v_.set(M,B.withResumeToken(x.resumeToken,I))}}),w.targetMismatches.forEach((x,M)=>{const B=y.v_.get(x);if(!B)return;y.v_.set(x,B.withResumeToken(ps.EMPTY_BYTE_STRING,B.snapshotVersion)),B4(y,x);const Z=new Kh(B.target,x,M,B.sequenceNumber);Dk(y,Z)}),y.remoteSyncer.applyRemoteEvent(w)}(r,s))}catch(l){qe("RemoteStore","Failed to raise snapshot:",l),yield Vx(r,l)}})).apply(this,arguments)}function Vx(n,e,t){return(HU=HU||(0,H.Z)(function*(r,i,s){if(!Zp(i))throw i;r.F_.add(1),yield K0(r),r.O_.set("Offline"),s||(s=()=>x4(r.localStore)),r.asyncQueue.enqueueRetryable((0,H.Z)(function*(){qe("RemoteStore","Retrying IndexedDB access"),yield s(),r.F_.delete(1),yield FC(r)}))})).apply(this,arguments)}function $4(n,e){return e().catch(t=>Vx(n,t,e))}function Z0(n){return(GU=GU||(0,H.Z)(function*(e){const t=pt(e),r=ug(t);let i=t.C_.length>0?t.C_[t.C_.length-1].batchId:-1;for(;y5(t);)try{const s=yield n5(t.localStore,i);if(null===s){0===t.C_.length&&r.e_();break}i=s.batchId,v5(t,s)}catch(s){yield Vx(t,s)}H4(t)&&G4(t)})).apply(this,arguments)}function y5(n){return ag(n)&&n.C_.length<10}function v5(n,e){n.C_.push(e);const t=ug(n);t.Yo()&&t.I_&&t.d_(e.mutations)}function H4(n){return ag(n)&&!ug(n).Jo()&&n.C_.length>0}function G4(n){ug(n).start()}function E5(n){return(zU=zU||(0,H.Z)(function*(e){ug(e).A_()})).apply(this,arguments)}function I5(n){return(qU=qU||(0,H.Z)(function*(e){const t=ug(e);for(const r of e.C_)t.d_(r.mutations)})).apply(this,arguments)}function w5(n,e,t){return(WU=WU||(0,H.Z)(function*(r,i,s){const u=r.C_.shift(),l=ek.from(u,i,s);yield $4(r,()=>r.remoteSyncer.applySuccessfulWrite(l)),yield Z0(r)})).apply(this,arguments)}function T5(n,e){return(KU=KU||(0,H.Z)(function*(t,r){var i;r&&ug(t).I_&&(yield function(u,l){return(i=i||(0,H.Z)(function*(f,y){if(xj(w=y.code)&&w!==ge.ABORTED){const I=f.C_.shift();ug(f).Xo(),yield $4(f,()=>f.remoteSyncer.rejectFailedWrite(I.batchId,y)),yield Z0(f)}var w})).apply(this,arguments)}(t,r)),H4(t)&&G4(t)})).apply(this,arguments)}function z4(n,e){return(ZU=ZU||(0,H.Z)(function*(t,r){const i=pt(t);i.asyncQueue.verifyOperationInProgress(),qe("RemoteStore","RemoteStore received new credentials");const s=ag(i);i.F_.add(3),yield K0(i),s&&i.O_.set("Unknown"),yield i.remoteSyncer.handleCredentialChange(r),i.F_.delete(3),yield FC(i)})).apply(this,arguments)}function Rk(n,e){return(QU=QU||(0,H.Z)(function*(t,r){const i=pt(t);r?(i.F_.delete(2),yield FC(i)):r||(i.F_.add(2),yield K0(i),i.O_.set("Unknown"))})).apply(this,arguments)}function Q0(n){var e;return n.B_||(n.B_=function(r,i,s){const u=pt(r);return u.V_(),new c5(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,s)}(n.datastore,n.asyncQueue,{Io:g5.bind(null,n),Eo:m5.bind(null,n),c_:_5.bind(null,n)}),n.M_.push(function(t){return(e=e||(0,H.Z)(function*(r){r?(n.B_.Xo(),xk(n)?Sk(n):n.O_.set("Unknown")):(yield n.B_.stop(),j4(n))})).apply(this,arguments)})),n.B_}function ug(n){var e;return n.L_||(n.L_=function(r,i,s){const u=pt(r);return u.V_(),new l5(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,s)}(n.datastore,n.asyncQueue,{Io:E5.bind(null,n),Eo:T5.bind(null,n),E_:I5.bind(null,n),T_:w5.bind(null,n)}),n.M_.push(function(t){return(e=e||(0,H.Z)(function*(r){r?(n.L_.Xo(),yield Z0(n)):(yield n.L_.stop(),n.C_.length>0&&(qe("RemoteStore",`Stopping write stream with ${n.C_.length} pending writes`),n.C_=[]))})).apply(this,arguments)})),n.L_}class Pk{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const u=Date.now()+r,l=new Pk(e,t,u,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new He(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Y0(n,e){if(ji("AsyncQueue",`${e}: ${n}`),Zp(n))return new He(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class J0{constructor(e){this.comparator=e?(t,r)=>e(t,r)||_t.comparator(t.key,r.key):(t,r)=>_t.comparator(t.key,r.key),this.keyedMap=yC(),this.sortedSet=new Mr(this.comparator)}static emptySet(e){return new J0(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof J0)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new J0;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class q4{constructor(){this.k_=new Mr(_t.comparator)}track(e){const t=e.doc.key,r=this.k_.get(t);r?0!==e.type&&3===r.type?this.k_=this.k_.insert(t,e):3===e.type&&1!==r.type?this.k_=this.k_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.k_=this.k_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.k_=this.k_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.k_=this.k_.remove(t):1===e.type&&2===r.type?this.k_=this.k_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.k_=this.k_.insert(t,{type:2,doc:e.doc}):Dt():this.k_=this.k_.insert(t,e)}q_(){const e=[];return this.k_.inorderTraversal((t,r)=>{e.push(r)}),e}}class X0{constructor(e,t,r,i,s,u,l,f,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=l,this.excludesMetadataChanges=f,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,s){const u=[];return t.forEach(l=>{u.push({type:0,doc:l})}),new X0(e,t,J0.emptySet(t),u,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mC(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class C5{constructor(){this.Q_=void 0,this.listeners=[]}}class A5{constructor(){this.queries=new qh(e=>lj(e),mC),this.onlineState="Unknown",this.K_=new Set}}function Mk(n,e){return(YU=YU||(0,H.Z)(function*(t,r){const i=pt(t),s=r.query;let u=!1,l=i.queries.get(s);if(l||(u=!0,l=new C5),u)try{l.Q_=yield i.onListen(s)}catch(f){const y=Y0(f,`Initialization of query '${O0(r.query)}' failed`);return void r.onError(y)}i.queries.set(s,l),l.listeners.push(r),r.U_(i.onlineState),l.Q_&&r.W_(l.Q_)&&kk(i)})).apply(this,arguments)}function Nk(n,e){return(JU=JU||(0,H.Z)(function*(t,r){const i=pt(t),s=r.query;let u=!1;const l=i.queries.get(s);if(l){const f=l.listeners.indexOf(r);f>=0&&(l.listeners.splice(f,1),u=0===l.listeners.length)}if(u)return i.queries.delete(s),i.onUnlisten(s)})).apply(this,arguments)}function b5(n,e){const t=pt(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const l of u.listeners)l.W_(i)&&(r=!0);u.Q_=i}}r&&kk(t)}function D5(n,e,t){const r=pt(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function kk(n){n.K_.forEach(e=>{e.next()})}class Ok{constructor(e,t,r){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new X0(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){return!e.fromCache||(!this.options.Z_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Y_(e){e=X0.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class S5{constructor(e,t){this.X_=e,this.byteLength=t}ea(){return"metadata"in this.X_}}class W4{constructor(e){this.serializer=e}Is(e){return sd(this.serializer,e)}ds(e){return e.metadata.exists?Gj(this.serializer,e.document,!1):Gr.newNoDocument(this.Is(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return $i(e)}}class x5{constructor(e,t,r){this.ta=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=K4(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;const r=Bn.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ra(e){const t=new Map,r=new W4(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Is(i.metadata.name);for(const u of i.metadata.queries){const l=(t.get(u)||yn()).add(s);t.set(u,l)}}return t}complete(){var e=this;return(0,H.Z)(function*(){const t=yield function r5(n,e,t,r){return(OU=OU||(0,H.Z)(function*(i,s,u,l){const f=pt(i);let y=yn(),I=fa();for(const M of u){const B=s.Is(M.metadata.name);M.document&&(y=y.add(B));const Z=s.ds(M);Z.setReadTime(s.Ts(M.metadata.readTime)),I=I.insert(B,Z)}const w=f._s.newChangeBuffer({trackRemovals:!0}),x=yield q0(f,(B=l,Bo(N0(Bn.fromString(`__bundle__/docs/${B}`)))));var B;return f.persistence.runTransaction("Apply bundle documents","readwrite",M=>R4(M,w,I).next(B=>(w.apply(M),B)).next(B=>f.Kr.removeMatchingKeysForTargetId(M,x.targetId).next(()=>f.Kr.addMatchingKeys(M,y,x.targetId)).next(()=>f.localDocuments.getLocalViewOfDocuments(M,B.ls,B.hs)).next(()=>B.ls)))})).apply(this,arguments)}(e.localStore,new W4(e.serializer),e.documents,e.ta.id),r=e.ra(e.documents);for(const i of e.queries)yield i5(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ia:e.collectionGroups,sa:t}})()}}function K4(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Z4{constructor(e){this.key=e}}class Q4{constructor(e){this.key=e}}class Y4{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=yn(),this.mutatedKeys=yn(),this.ua=hj(e),this.ca=new J0(this.ua)}get la(){return this.oa}ha(e,t){const r=t?t.Pa:new q4,i=t?t.ca:this.ca;let s=t?t.mutatedKeys:this.mutatedKeys,u=i,l=!1;const f="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((I,w)=>{const x=i.get(I),M=_C(this.query,w)?w:null,B=!!x&&this.mutatedKeys.has(x.key),Z=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let J=!1;x&&M?x.data.isEqual(M.data)?B!==Z&&(r.track({type:3,doc:M}),J=!0):this.Ia(x,M)||(r.track({type:2,doc:M}),J=!0,(f&&this.ua(M,f)>0||y&&this.ua(M,y)<0)&&(l=!0)):!x&&M?(r.track({type:0,doc:M}),J=!0):x&&!M&&(r.track({type:1,doc:x}),J=!0,(f||y)&&(l=!0)),J&&(M?(u=u.add(M),s=Z?s.add(I):s.delete(I)):(u=u.delete(I),s=s.delete(I)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const I="F"===this.query.limitType?u.last():u.first();u=u.delete(I.key),s=s.delete(I.key),r.track({type:1,doc:I})}return{ca:u,Pa:r,es:l,mutatedKeys:s}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.q_();s.sort((y,I)=>function(x,M){const B=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dt()}};return B(x)-B(M)}(y.type,I.type)||this.ua(y.doc,I.doc)),this.da(r);const u=t?this.Ta():[],l=0===this.aa.size&&this.current?1:0,f=l!==this._a;return this._a=l,0!==s.length||f?{snapshot:new X0(this.query,e.ca,i,s,e.mutatedKeys,0===l,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ea:u}:{Ea:u}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new q4,mutatedKeys:this.mutatedKeys,es:!1},!1)):{Ea:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}da(e){e&&(e.addedDocuments.forEach(t=>this.oa=this.oa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.oa=this.oa.delete(t)),this.current=e.current)}Ta(){if(!this.current)return[];const e=this.aa;this.aa=yn(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const t=[];return e.forEach(r=>{this.aa.has(r)||t.push(new Q4(r))}),this.aa.forEach(r=>{e.has(r)||t.push(new Z4(r))}),t}Ra(e){this.oa=e.Ps,this.aa=yn();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return X0.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class R5{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class P5{constructor(e){this.key=e,this.ma=!1}}class M5{constructor(e,t,r,i,s,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.fa={},this.ga=new qh(l=>lj(l),mC),this.pa=new Map,this.ya=new Set,this.wa=new Mr(_t.comparator),this.Sa=new Map,this.ba=new gk,this.Da={},this.Ca=new Map,this.va=x_.Ln(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function N5(n,e){return(XU=XU||(0,H.Z)(function*(t,r){const i=jk(t);let s,u;const l=i.ga.get(r);if(l)s=l.targetId,i.sharedClientState.addLocalQueryTarget(s),u=l.view.Va();else{const f=yield q0(i.localStore,Bo(r)),y=i.sharedClientState.addLocalQueryTarget(f.targetId);s=f.targetId,u=yield Fk(i,r,s,"current"===y,f.resumeToken),i.isPrimaryClient&&Fx(i.remoteStore,f)}return u})).apply(this,arguments)}function Fk(n,e,t,r,i){return(eB=eB||(0,H.Z)(function*(s,u,l,f,y){s.Ma=(J,me,Oe)=>{var Ie;return function(Je,yt,Dn,fi){return(Ie=Ie||(0,H.Z)(function*(Ho,zc,rR,L_){let aE=zc.view.ha(rR);aE.es&&(aE=yield Px(Ho.localStore,zc.query,!1).then(({documents:YK})=>zc.view.ha(YK,aE)));const iR=L_&&L_.targetChanges.get(zc.targetId),sR=zc.view.applyChanges(aE,Ho.isPrimaryClient,iR);return Uk(Ho,zc.targetId,sR.Ea),sR.snapshot})).apply(this,arguments)}(s,J,me,Oe)};const I=yield Px(s.localStore,u,!0),w=new Y4(u,I.Ps),x=w.ha(I.documents),M=CC.createSynthesizedTargetChangeForCurrentChange(l,f&&"Offline"!==s.onlineState,y),B=w.applyChanges(x,s.isPrimaryClient,M);Uk(s,l,B.Ea);const Z=new R5(u,l,w);return s.ga.set(u,Z),s.pa.has(l)?s.pa.get(l).push(u):s.pa.set(l,[u]),B.snapshot})).apply(this,arguments)}function k5(n,e){return(tB=tB||(0,H.Z)(function*(t,r){const i=pt(t),s=i.ga.get(r),u=i.pa.get(s.targetId);if(u.length>1)return i.pa.set(s.targetId,u.filter(l=>!mC(l,r))),void i.ga.delete(r);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||(yield W0(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),VC(i.remoteStore,s.targetId),eE(i,s.targetId)}).catch(Kp))):(eE(i,s.targetId),yield W0(i.localStore,s.targetId,!0))})).apply(this,arguments)}function J4(n,e){return(rB=rB||(0,H.Z)(function*(t,r){const i=pt(t);try{const s=yield t5(i.localStore,r);r.targetChanges.forEach((u,l)=>{const f=i.Sa.get(l);f&&(Gt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?f.ma=!0:u.modifiedDocuments.size>0?Gt(f.ma):u.removedDocuments.size>0&&(Gt(f.ma),f.ma=!1))}),yield Zh(i,s,r)}catch(s){yield Kp(s)}})).apply(this,arguments)}function X4(n,e,t){const r=pt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ga.forEach((s,u)=>{const l=u.view.U_(e);l.snapshot&&i.push(l.snapshot)}),function(u,l){const f=pt(u);f.onlineState=l;let y=!1;f.queries.forEach((I,w)=>{for(const x of w.listeners)x.U_(l)&&(y=!0)}),y&&kk(f)}(r.eventManager,e),i.length&&r.fa.c_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function F5(n,e,t){return(iB=iB||(0,H.Z)(function*(r,i,s){const u=pt(r);u.sharedClientState.updateQueryState(i,"rejected",s);const l=u.Sa.get(i),f=l&&l.key;if(f){let y=new Mr(_t.comparator);y=y.insert(f,Gr.newNoDocument(f,qt.min()));const I=yn().add(f),w=new TC(qt.min(),new Map,new Mr(un),y,I);yield J4(u,w),u.wa=u.wa.remove(f),u.Sa.delete(i),Bk(u)}else yield W0(u.localStore,i,!1).then(()=>eE(u,i,s)).catch(Kp)})).apply(this,arguments)}function V5(n,e){return(sB=sB||(0,H.Z)(function*(t,r){const i=pt(t),s=r.batch.batchId;try{const u=yield e5(i.localStore,r);Lk(i,s,null),Vk(i,s),i.sharedClientState.updateMutationState(s,"acknowledged"),yield Zh(i,u)}catch(u){yield Kp(u)}})).apply(this,arguments)}function L5(n,e,t){return(oB=oB||(0,H.Z)(function*(r,i,s){const u=pt(r);try{const l=yield function(y,I){const w=pt(y);return w.persistence.runTransaction("Reject batch","readwrite-primary",x=>{let M;return w.mutationQueue.lookupMutationBatch(x,I).next(B=>(Gt(null!==B),M=B.keys(),w.mutationQueue.removeMutationBatch(x,B))).next(()=>w.mutationQueue.performConsistencyCheck(x)).next(()=>w.documentOverlayCache.removeOverlaysForBatchId(x,M,I)).next(()=>w.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,M)).next(()=>w.localDocuments.getDocuments(x,M))})}(u.localStore,i);Lk(u,i,s),Vk(u,i),u.sharedClientState.updateMutationState(i,"rejected",s),yield Zh(u,l)}catch(l){yield Kp(l)}})).apply(this,arguments)}function Vk(n,e){(n.Ca.get(e)||[]).forEach(t=>{t.resolve()}),n.Ca.delete(e)}function Lk(n,e,t){const r=pt(n);let i=r.Da[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function eE(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.pa.get(e))n.ga.delete(r),t&&n.fa.xa(r,t);n.pa.delete(e),n.isPrimaryClient&&n.ba.mr(e).forEach(r=>{n.ba.containsKey(r)||e6(n,r)})}function e6(n,e){n.ya.delete(e.path.canonicalString());const t=n.wa.get(e);null!==t&&(VC(n.remoteStore,t),n.wa=n.wa.remove(e),n.Sa.delete(t),Bk(n))}function Uk(n,e,t){for(const r of t)r instanceof Z4?(n.ba.addReference(r.key,e),B5(n,r)):r instanceof Q4?(qe("SyncEngine","Document no longer in limbo: "+r.key),n.ba.removeReference(r.key,e),n.ba.containsKey(r.key)||e6(n,r.key)):Dt()}function B5(n,e){const t=e.key,r=t.path.canonicalString();n.wa.get(t)||n.ya.has(r)||(qe("SyncEngine","New document in limbo: "+t),n.ya.add(r),Bk(n))}function Bk(n){for(;n.ya.size>0&&n.wa.size<n.maxConcurrentLimboResolutions;){const e=n.ya.values().next().value;n.ya.delete(e);const t=new _t(Bn.fromString(e)),r=n.va.next();n.Sa.set(r,new P5(t)),n.wa=n.wa.insert(t,r),Fx(n.remoteStore,new Kh(Bo(N0(t.path)),r,"TargetPurposeLimboResolution",Qa.ae))}}function Zh(n,e,t){return(uB=uB||(0,H.Z)(function*(r,i,s){var u;const l=pt(r),f=[],y=[],I=[];l.ga.isEmpty()||(l.ga.forEach((w,x)=>{I.push(l.Ma(x,i,s).then(M=>{if((M||s)&&l.isPrimaryClient&&l.sharedClientState.updateQueryState(x.targetId,M?.fromCache?"not-current":"current"),M){f.push(M);const B=Ek.$i(x.targetId,M);y.push(B)}}))}),yield Promise.all(I),l.fa.c_(f),yield function(x,M){return(u=u||(0,H.Z)(function*(B,Z){const J=pt(B);try{yield J.persistence.runTransaction("notifyLocalViewChanges","readwrite",me=>ce.forEach(Z,Oe=>ce.forEach(Oe.Qi,Ie=>J.persistence.referenceDelegate.addReference(me,Oe.targetId,Ie)).next(()=>ce.forEach(Oe.Ki,Ie=>J.persistence.referenceDelegate.removeReference(me,Oe.targetId,Ie)))))}catch(me){if(!Zp(me))throw me;qe("LocalStore","Failed to update sequence numbers: "+me)}for(const me of Z){const Oe=me.targetId;if(!me.fromCache){const Ie=J.rs.get(Oe),Je=Ie.withLastLimboFreeSnapshotVersion(Ie.snapshotVersion);J.rs=J.rs.insert(Oe,Je)}}})).apply(this,arguments)}(l.localStore,y))})).apply(this,arguments)}function j5(n,e){return(cB=cB||(0,H.Z)(function*(t,r){const i=pt(t);if(!i.currentUser.isEqual(r)){qe("SyncEngine","User change. New user:",r.toKey());const s=yield S4(i.localStore,r);i.currentUser=r,(l=i).Ca.forEach(y=>{y.forEach(I=>{I.reject(new He(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),l.Ca.clear(),i.sharedClientState.handleUserChange(r,s.removedBatchIds,s.addedBatchIds),yield Zh(i,s.cs)}var l})).apply(this,arguments)}function $5(n,e){const t=pt(n),r=t.Sa.get(e);if(r&&r.ma)return yn().add(r.key);{let i=yn();const s=t.pa.get(e);if(!s)return i;for(const u of s){const l=t.ga.get(u);i=i.unionWith(l.view.la)}return i}}function H5(n,e){return(lB=lB||(0,H.Z)(function*(t,r){const i=pt(t),s=yield Px(i.localStore,r.query,!0),u=r.view.Ra(s);return i.isPrimaryClient&&Uk(i,r.targetId,u.Ea),u})).apply(this,arguments)}function G5(n,e){return(dB=dB||(0,H.Z)(function*(t,r){const i=pt(t);return M4(i.localStore,r).then(s=>Zh(i,s))})).apply(this,arguments)}function z5(n,e,t,r){return(hB=hB||(0,H.Z)(function*(i,s,u,l){const f=pt(i),y=yield function(w,x){const M=pt(w),B=pt(M.mutationQueue);return M.persistence.runTransaction("Lookup mutation documents","readonly",Z=>B.Fn(Z,x).next(J=>J?M.localDocuments.getDocuments(Z,J):ce.resolve(null)))}(f.localStore,s);var x;null!==y?("pending"===u?yield Z0(f.remoteStore):"acknowledged"===u||"rejected"===u?(Lk(f,s,l||null),Vk(f,s),x=s,pt(pt(f.localStore).mutationQueue).xn(x)):Dt(),yield Zh(f,y)):qe("SyncEngine","Cannot apply mutation batch with id: "+s)})).apply(this,arguments)}function q5(n,e){return(fB=fB||(0,H.Z)(function*(t,r){const i=pt(t);if(jk(i),$k(i),!0===r&&!0!==i.Fa){const s=i.sharedClientState.getAllActiveQueryTargets(),u=yield t6(i,s.toArray());i.Fa=!0,yield Rk(i.remoteStore,!0);for(const l of u)Fx(i.remoteStore,l)}else if(!1===r&&!1!==i.Fa){const s=[];let u=Promise.resolve();i.pa.forEach((l,f)=>{i.sharedClientState.isLocalQueryTarget(f)?s.push(f):u=u.then(()=>(eE(i,f),W0(i.localStore,f,!0))),VC(i.remoteStore,f)}),yield u,yield t6(i,s),function(f){const y=pt(f);y.Sa.forEach((I,w)=>{VC(y.remoteStore,w)}),y.ba.gr(),y.Sa=new Map,y.wa=new Mr(_t.comparator)}(i),i.Fa=!1,yield Rk(i.remoteStore,!1)}})).apply(this,arguments)}function t6(n,e,t){return(pB=pB||(0,H.Z)(function*(r,i,s){const u=pt(r),l=[],f=[];for(const y of i){let I;const w=u.pa.get(y);if(w&&0!==w.length){I=yield q0(u.localStore,Bo(w[0]));for(const x of w){const M=u.ga.get(x),B=yield H5(u,M);B.snapshot&&f.push(B.snapshot)}}else{const x=yield P4(u.localStore,y);I=yield q0(u.localStore,x),yield Fk(u,n6(x),y,!1,I.resumeToken)}l.push(I)}return u.fa.c_(f),l})).apply(this,arguments)}function n6(n){return aj(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function W5(n){return t=pt(n).localStore,pt(pt(t).persistence).ki();var t}function K5(n,e,t,r){return(gB=gB||(0,H.Z)(function*(i,s,u,l){const f=pt(i);if(f.Fa)return void qe("SyncEngine","Ignoring unexpected query state notification.");const y=f.pa.get(s);if(y&&y.length>0)switch(u){case"current":case"not-current":{const I=yield M4(f.localStore,dj(y[0])),w=TC.createSynthesizedRemoteEventForCurrentChange(s,"current"===u,ps.EMPTY_BYTE_STRING);yield Zh(f,I,w);break}case"rejected":yield W0(f.localStore,s,!0),eE(f,s,l);break;default:Dt()}})).apply(this,arguments)}function Z5(n,e,t){return(mB=mB||(0,H.Z)(function*(r,i,s){const u=jk(r);if(u.Fa){for(const l of i){if(u.pa.has(l)){qe("SyncEngine","Adding an already active target "+l);continue}const f=yield P4(u.localStore,l),y=yield q0(u.localStore,f);yield Fk(u,n6(f),y.targetId,!1,y.resumeToken),Fx(u.remoteStore,y)}for(const l of s)u.pa.has(l)&&(yield W0(u.localStore,l,!1).then(()=>{VC(u.remoteStore,l),eE(u,l)}).catch(Kp))}})).apply(this,arguments)}function jk(n){const e=pt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=J4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=F5.bind(null,e),e.fa.c_=b5.bind(null,e.eventManager),e.fa.xa=D5.bind(null,e.eventManager),e}function $k(n){const e=pt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=V5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=L5.bind(null,e),e}class LC{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,H.Z)(function*(){t.serializer=OC(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return D4(this.persistence,new b4,e.initialUser,this.serializer)}createPersistence(e){return new mk(Sx.Jr,this.serializer)}createSharedClientState(e){return new F4}terminate(){var e=this;return(0,H.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Hk extends LC{constructor(e,t,r){super(),this.Na=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,H.Z)(function*(){yield t().call(r,e),yield r.Na.initialize(r,e),yield $k(r.Na.syncEngine),yield Z0(r.Na.remoteStore),yield r.persistence.gi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return D4(this.persistence,new b4,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new _4(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new w7(t,this.persistence);return new I7(e.asyncQueue,r)}createPersistence(e){const t=vk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?lo.withCacheSize(this.cacheSizeBytes):lo.DEFAULT;return new yk(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,L4(),Ox(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new F4}}class r6 extends Hk{constructor(e,t){super(e,t,!1),this.Na=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,H.Z)(function*(){var i;yield t().call(r,e);const s=r.Na.syncEngine;r.sharedClientState instanceof Ck&&(r.sharedClientState.syncEngine={Xs:z5.bind(null,s),eo:K5.bind(null,s),no:Z5.bind(null,s),ki:W5.bind(null,s),Zs:G5.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.gi(function(u){return(i=i||(0,H.Z)(function*(l){yield q5(r.Na.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())})).apply(this,arguments)})})()}createSharedClientState(e){const t=L4();if(!Ck.C(t))throw new He(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=vk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ck(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class tE{initialize(e,t){var r=this;return(0,H.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>X4(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=j5.bind(null,r.syncEngine),yield Rk(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new A5}createDatastore(e){const t=OC(e.databaseInfo.databaseId),r=new u5(e.databaseInfo);return new d5(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,u=t=>X4(this.syncEngine,t,0),l=V4.C()?new V4:new s5,new p5(r,i,s,u,l);var r,i,s,u,l}createSyncEngine(e,t){return function(i,s,u,l,f,y,I){const w=new M5(i,s,u,l,f,y);return I&&(w.Fa=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e;return function(r){return(e=e||(0,H.Z)(function*(i){const s=pt(i);qe("RemoteStore","RemoteStore shutting down."),s.F_.add(5),yield K0(s),s.x_.shutdown(),s.O_.set("Unknown")})).apply(this,arguments)}(this.remoteStore)}}function i6(n,e=10240){let t=0;return{read:()=>(0,H.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,H.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Lx{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):ji("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class J5{constructor(e,t){this.ka=e,this.serializer=t,this.metadata=new fs,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then(r=>{r&&r.ea()?this.metadata.resolve(r.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.X_)}`))},r=>this.metadata.reject(r))}close(){return this.ka.cancel()}getMetadata(){var e=this;return(0,H.Z)(function*(){return e.metadata.promise})()}Oa(){var e=this;return(0,H.Z)(function*(){return yield e.getMetadata(),e.Qa()})()}Qa(){var e=this;return(0,H.Z)(function*(){const t=yield e.Ka();if(null===t)return null;const r=e.qa.decode(t),i=Number(r);isNaN(i)&&e.$a(`length string (${r}) is not valid number`);const s=yield e.Ua(i);return new S5(JSON.parse(s),t.length+i)})()}Wa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ka(){var e=this;return(0,H.Z)(function*(){for(;e.Wa()<0&&!(yield e.Ga()););if(0===e.buffer.length)return null;const t=e.Wa();t<0&&e.$a("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ua(e){var t=this;return(0,H.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ga())&&t.$a("Reached the end of bundle when more is expected.");const r=t.qa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ga(){var e=this;return(0,H.Z)(function*(){const t=yield e.ka.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class X5{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,H.Z)(function*(){var r;if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new He(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield function(u,l){return(r=r||(0,H.Z)(function*(f,y){const I=pt(f),w=bC(I.serializer)+"/documents",x={documents:y.map(J=>AC(I.serializer,J))},M=yield I.Fo("BatchGetDocuments",w,x,y.length),B=new Map;M.forEach(J=>{const me=Eq(I.serializer,J);B.set(me.key.toString(),me)});const Z=[];return y.forEach(J=>{const me=B.get(J.toString());Gt(!!me),Z.push(me)}),Z})).apply(this,arguments)}(t.datastore,e);return i.forEach(s=>t.recordVersion(s)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new U0(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,H.Z)(function*(){var t;if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const r=e.readVersions;e.mutations.forEach(i=>{r.delete(i.key.toString())}),r.forEach((i,s)=>{const u=_t.fromPath(s);e.mutations.push(new JN(u,e.precondition(u)))}),yield function(s,u){return(t=t||(0,H.Z)(function*(l,f){const y=pt(l),I=bC(y.serializer)+"/documents",w={writes:f.map(x=>DC(y.serializer,x))};yield y.bo("Commit",I,w)})).apply(this,arguments)}(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Dt();t=qt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new He(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(qt.min())?ri.exists(!1):ri.updateTime(t):ri.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(qt.min()))throw new He(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ri.updateTime(t)}return ri.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class eW{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.za=r.maxAttempts,this.Ho=new bk(this.asyncQueue,"transaction_retry")}run(){this.za-=1,this.ja()}ja(){var e=this;this.Ho.Qo((0,H.Z)(function*(){const t=new X5(e.datastore),r=e.Ha(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Ja(s)}))}).catch(i=>{e.Ja(i)})}))}Ha(e){try{const t=this.updateFunction(e);return!cC(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ja(e){this.za>0&&this.Ya(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.ja(),Promise.resolve()))):this.deferred.reject(e)}Ya(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!xj(t)}return!1}}class tW{constructor(e,t,r,i){var u,s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=xs.UNAUTHENTICATED,this.clientId=AB.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(l){return(u=u||(0,H.Z)(function*(f){qe("FirestoreClient","Received user=",f.uid),yield s.authCredentialListener(f),s.user=f})).apply(this,arguments)}),this.appCheckCredentials.start(r,l=>(qe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,H.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new He(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,H.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Y0(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Ux(n,e){return(_B=_B||(0,H.Z)(function*(t,r){var i;t.asyncQueue.verifyOperationInProgress(),qe("FirestoreClient","Initializing OfflineComponentProvider");const s=yield t.getConfiguration();yield r.initialize(s);let u=s.initialUser;t.setCredentialChangeListener(function(l){return(i=i||(0,H.Z)(function*(f){u.isEqual(f)||(yield S4(r.localStore,f),u=f)})).apply(this,arguments)}),r.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=r})).apply(this,arguments)}function Gk(n,e){return(yB=yB||(0,H.Z)(function*(t,r){t.asyncQueue.verifyOperationInProgress();const i=yield zk(t);qe("FirestoreClient","Initializing OnlineComponentProvider");const s=yield t.getConfiguration();yield r.initialize(i,s),t.setCredentialChangeListener(u=>z4(r.remoteStore,u)),t.setAppCheckTokenChangeListener((u,l)=>z4(r.remoteStore,l)),t._onlineComponents=r})).apply(this,arguments)}function s6(n){return"FirebaseError"===n.name?n.code===ge.FAILED_PRECONDITION||n.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function zk(n){return(vB=vB||(0,H.Z)(function*(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){qe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ux(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!s6(r))throw r;da("Error using user provided cache. Falling back to memory cache: "+r),yield Ux(e,new LC)}}else qe("FirestoreClient","Using default OfflineComponentProvider"),yield Ux(e,new LC);return e._offlineComponents})).apply(this,arguments)}function Bx(n){return(EB=EB||(0,H.Z)(function*(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(qe("FirestoreClient","Using user provided OnlineComponentProvider"),yield Gk(e,e._uninitializedComponentsProvider._online)):(qe("FirestoreClient","Using default OnlineComponentProvider"),yield Gk(e,new tE))),e._onlineComponents})).apply(this,arguments)}function o6(n){return zk(n).then(e=>e.persistence)}function nE(n){return zk(n).then(e=>e.localStore)}function a6(n){return Bx(n).then(e=>e.remoteStore)}function qk(n){return Bx(n).then(e=>e.syncEngine)}function rE(n){return(IB=IB||(0,H.Z)(function*(e){const t=yield Bx(e),r=t.eventManager;return r.onListen=N5.bind(null,t.syncEngine),r.onUnlisten=k5.bind(null,t.syncEngine),r})).apply(this,arguments)}function c6(n,e,t={}){const r=new fs;return n.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return function(s,u,l,f,y){const I=new Lx({next:x=>{u.enqueueAndForget(()=>Nk(s,w));const M=x.docs.has(l);!M&&x.fromCache?y.reject(new He(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&x.fromCache&&f&&"server"===f.source?y.reject(new He(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(x)},error:x=>y.reject(x)}),w=new Ok(N0(l.path),I,{includeMetadataChanges:!0,Z_:!0});return Mk(s,w)}(yield rE(n),n.asyncQueue,e,t,r)})),r.promise}function l6(n,e,t={}){const r=new fs;return n.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return function(s,u,l,f,y){const I=new Lx({next:x=>{u.enqueueAndForget(()=>Nk(s,w)),x.fromCache&&"server"===f.source?y.reject(new He(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(x)},error:x=>y.reject(x)}),w=new Ok(l,I,{includeMetadataChanges:!0,Z_:!0});return Mk(s,w)}(yield rE(n),n.asyncQueue,e,t,r)})),r.promise}function d6(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const h6=new Map;function Wk(n,e,t){if(!t)throw new He(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function f6(n,e,t,r){if(!0===e&&!0===r)throw new He(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function p6(n){if(!_t.isDocumentKey(n))throw new He(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function g6(n){if(_t.isDocumentKey(n))throw new He(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jx(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Dt()}function Pn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new He(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jx(n);throw new He(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function m6(n,e){if(e<=0)throw new He(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class _6{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new He(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new He(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}f6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=d6(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new He(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new He(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new He(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class UC{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _6({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new He(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new He(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _6(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new c7;switch(r.type){case"firstParty":return new f7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new He(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=h6.get(t);r&&(qe("ComponentProvider","Removing Datastore"),h6.delete(t),r.terminate())}(this),Promise.resolve()}}class zs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zs(this.firestore,e,this._query)}}class zr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new od(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zr(this.firestore,e,this._key)}}class od extends zs{constructor(e,t,r){super(e,t,N0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zr(this.firestore,null,new _t(e))}withConverter(e){return new od(this.firestore,e,this._path)}}function v6(n,e,...t){if(n=(0,Et.m9)(n),Wk("collection","path",e),n instanceof UC){const r=Bn.fromString(e,...t);return g6(r),new od(n,null,r)}{if(!(n instanceof zr||n instanceof od))throw new He(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Bn.fromString(e,...t));return g6(r),new od(n.firestore,null,r)}}function $x(n,e,...t){if(n=(0,Et.m9)(n),1===arguments.length&&(e=AB.V()),Wk("doc","path",e),n instanceof UC){const r=Bn.fromString(e,...t);return p6(r),new zr(n,null,new _t(r))}{if(!(n instanceof zr||n instanceof od))throw new He(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Bn.fromString(e,...t));return p6(r),new zr(n.firestore,n instanceof od?n.converter:null,new _t(r))}}function E6(n,e){return n=(0,Et.m9)(n),e=(0,Et.m9)(e),(n instanceof zr||n instanceof od)&&(e instanceof zr||e instanceof od)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Kk(n,e){return n=(0,Et.m9)(n),e=(0,Et.m9)(e),n instanceof zs&&e instanceof zs&&n.firestore===e.firestore&&mC(n._query,e._query)&&n.converter===e.converter}class fW{constructor(){this.Za=Promise.resolve(),this.Xa=[],this.eu=!1,this.tu=[],this.nu=null,this.ru=!1,this.iu=!1,this.su=[],this.Ho=new bk(this,"async_queue_retry"),this.ou=()=>{const t=Ox();t&&qe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Ho.$o()};const e=Ox();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.ou)}get isShuttingDown(){return this.eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this._u(),this.au(e)}enterRestrictedMode(e){if(!this.eu){this.eu=!0,this.iu=e||!1;const t=Ox();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ou)}}enqueue(e){if(this._u(),this.eu)return new Promise(()=>{});const t=new fs;return this.au(()=>this.eu&&this.iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xa.push(e),this.uu()))}uu(){var e=this;return(0,H.Z)(function*(){if(0!==e.Xa.length){try{yield e.Xa[0](),e.Xa.shift(),e.Ho.reset()}catch(t){if(!Zp(t))throw t;qe("AsyncQueue","Operation failed with retryable error: "+t)}e.Xa.length>0&&e.Ho.Qo(()=>e.uu())}})()}au(e){const t=this.Za.then(()=>(this.ru=!0,e().catch(r=>{throw this.nu=r,this.ru=!1,ji("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.ru=!1,r))));return this.Za=t,t}enqueueAfterDelay(e,t,r){this._u(),this.su.indexOf(e)>-1&&(t=0);const i=Pk.createAndSchedule(this,e,t,r,s=>this.cu(s));return this.tu.push(i),i}_u(){this.nu&&Dt()}verifyOperationInProgress(){}lu(){var e=this;return(0,H.Z)(function*(){let t;do{t=e.Za,yield t}while(t!==e.Za)})()}hu(e){for(const t of this.tu)if(t.timerId===e)return!0;return!1}Pu(e){return this.lu().then(()=>{this.tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.lu()})}Iu(e){this.su.push(e)}cu(e){const t=this.tu.indexOf(e);this.tu.splice(t,1)}}function Zk(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class pW{constructor(){this._progressObserver={},this._taskCompletionResolver=new fs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class kr extends UC{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new fW,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||I6(this),this._firestoreClient.terminate()}}function Di(n){return n._firestoreClient||I6(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function I6(n){var e,t,r;const i=n._freezeSettings(),s=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new H7(n._databaseId,f,n._persistenceKey,(I=i).host,I.ssl,I.experimentalForceLongPolling,I.experimentalAutoDetectLongPolling,d6(I.experimentalLongPollingOptions),I.useFetchStreams));var f,I;n._firestoreClient=new tW(n._authCredentials,n._appCheckCredentials,n._queue,s),(null===(t=i.localCache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function w6(n,e,t){const r=new fs;return n.asyncQueue.enqueue((0,H.Z)(function*(){try{yield Ux(n,t),yield Gk(n,e),r.resolve()}catch(i){const s=i;if(!s6(s))throw s;da("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function T6(n){if(n._initialized||n._terminated)throw new He(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ad{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ad(ps.fromBase64String(e))}catch(t){throw new He(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ad(ps.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Qh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new He(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class P_{constructor(e){this._methodName=e}}class Hx{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new He(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new He(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return un(this._lat,e._lat)||un(this._long,e._long)}}const AW=/^__.*__$/;class bW{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Wh(e,this.data,this.fieldMask,t,this.fieldTransforms):new L0(e,this.data,t,this.fieldTransforms)}}class C6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Wh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function A6(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dt()}}class Gx{constructor(e,t,r,i,s,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.du(),this.fieldTransforms=s||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Tu(){return this.settings.Tu}Eu(e){return new Gx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Au(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Eu({path:r,Ru:!1});return i.Vu(e),i}mu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Eu({path:r,Ru:!1});return i.du(),i}fu(e){return this.Eu({path:void 0,Ru:!0})}gu(e){return Wx(e,this.settings.methodName,this.settings.pu||!1,this.path,this.settings.yu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}du(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vu(this.path.get(e))}Vu(e){if(0===e.length)throw this.gu("Document fields must not be empty");if(A6(this.Tu)&&AW.test(e))throw this.gu('Document fields cannot begin and end with "__"')}}class DW{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||OC(e)}wu(e,t,r,i=!1){return new Gx({Tu:e,methodName:t,yu:r,path:hi.emptyPath(),Ru:!1,pu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function M_(n){const e=n._freezeSettings(),t=OC(n._databaseId);return new DW(n._databaseId,!!e.ignoreUndefinedProperties,t)}function zx(n,e,t,r,i,s={}){const u=n.wu(s.merge||s.mergeFields?2:0,e,t,i);Xk("Data must be an object, but it was:",u,r);const l=S6(r,u);let f,y;if(s.merge)f=new ha(u.fieldMask),y=u.fieldTransforms;else if(s.mergeFields){const I=[];for(const w of s.mergeFields){const x=$C(e,w,t);if(!u.contains(x))throw new He(ge.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);R6(I,x)||I.push(x)}f=new ha(I),y=u.fieldTransforms.filter(w=>f.covers(w.field))}else f=null,y=u.fieldTransforms;return new bW(new Gs(l),f,y)}class jC extends P_{_toFieldTransform(e){if(2!==e.Tu)throw e.gu(1===e.Tu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jC}}function b6(n,e,t){return new Gx({Tu:3,yu:e.settings.yu,methodName:n._methodName,Ru:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Qk extends P_{_toFieldTransform(e){return new EC(e.path,new F0)}isEqual(e){return e instanceof Qk}}class SW extends P_{constructor(e,t){super(e),this.Su=t}_toFieldTransform(e){const t=b6(this,e,!0),r=this.Su.map(s=>N_(s,t)),i=new w_(r);return new EC(e.path,i)}isEqual(e){return this===e}}class xW extends P_{constructor(e,t){super(e),this.Su=t}_toFieldTransform(e){const t=b6(this,e,!0),r=this.Su.map(s=>N_(s,t)),i=new T_(r);return new EC(e.path,i)}isEqual(e){return this===e}}class RW extends P_{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=new V0(e.serializer,yj(e.serializer,this.bu));return new EC(e.path,t)}isEqual(e){return this===e}}function Yk(n,e,t,r){const i=n.wu(1,e,t);Xk("Data must be an object, but it was:",i,r);const s=[],u=Gs.empty();Qp(r,(f,y)=>{const I=qx(e,f,t);y=(0,Et.m9)(y);const w=i.mu(I);if(y instanceof jC)s.push(I);else{const x=N_(y,w);null!=x&&(s.push(I),u.set(I,x))}});const l=new ha(s);return new C6(u,l,i.fieldTransforms)}function Jk(n,e,t,r,i,s){const u=n.wu(1,e,t),l=[$C(e,r,t)],f=[i];if(s.length%2!=0)throw new He(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<s.length;x+=2)l.push($C(e,s[x])),f.push(s[x+1]);const y=[],I=Gs.empty();for(let x=l.length-1;x>=0;--x)if(!R6(y,l[x])){const M=l[x];let B=f[x];B=(0,Et.m9)(B);const Z=u.mu(M);if(B instanceof jC)y.push(M);else{const J=N_(B,Z);null!=J&&(y.push(M),I.set(M,J))}}const w=new ha(y);return new C6(I,w,u.fieldTransforms)}function D6(n,e,t,r=!1){return N_(t,n.wu(r?4:3,e))}function N_(n,e){if(x6(n=(0,Et.m9)(n)))return Xk("Unsupported field value:",e,n),S6(n,e);if(n instanceof P_)return function(r,i){if(!A6(i.Tu))throw i.gu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Ru&&4!==e.Tu)throw e.gu("Nested arrays are not supported");return function(r,i){const s=[];let u=0;for(const l of r){let f=N_(l,i.fu(u));null==f&&(f={nullValue:"NULL_VALUE"}),s.push(f),u++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,Et.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return yj(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=ni.fromDate(r);return{timestampValue:B0(i.serializer,s)}}if(r instanceof ni){const s=new ni(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:B0(i.serializer,s)}}if(r instanceof Hx)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ad)return{bytesValue:Uj(i.serializer,r._byteString)};if(r instanceof zr){const s=i.databaseId,u=r.firestore._databaseId;if(!u.isEqual(s))throw i.gu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ik(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.gu(`Unsupported field value: ${jx(r)}`)}(n,e)}function S6(n,e){const t={};return BB(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qp(n,(r,i)=>{const s=N_(i,e.Au(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function x6(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ni||n instanceof Hx||n instanceof ad||n instanceof zr||n instanceof P_)}function Xk(n,e,t){if(!x6(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=jx(t);throw e.gu("an object"===r?n+" a custom object":n+" "+r)}var i}function $C(n,e,t){if((e=(0,Et.m9)(e))instanceof Qh)return e._internalPath;if("string"==typeof e)return qx(n,e);throw Wx("Field path arguments must be of type string or ",n,!1,void 0,t)}const PW=new RegExp("[~\\*/\\[\\]]");function qx(n,e,t){if(e.search(PW)>=0)throw Wx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Qh(...e.split("."))._internalPath}catch{throw Wx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Wx(n,e,t,r,i){const s=r&&!r.isEmpty(),u=void 0!==i;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let f="";return(s||u)&&(f+=" (found",s&&(f+=` in field ${r}`),u&&(f+=` in document ${i}`),f+=")"),new He(ge.INVALID_ARGUMENT,l+n+f)}function R6(n,e){return n.some(t=>t.isEqual(e))}class HC{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new zr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new MW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Kx("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class MW extends HC{data(){return super.data()}}function Kx(n,e){return"string"==typeof e?qx(n,e):e instanceof Qh?e._internalPath:e._delegate._internalPath}function P6(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new He(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eO{}class GC extends eO{}function cg(n,e,...t){let r=[];e instanceof eO&&r.push(e),r=r.concat(t),function(s){const u=s.filter(f=>f instanceof iE).length,l=s.filter(f=>f instanceof zC).length;if(u>1||u>0&&l>0)throw new He(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class zC extends GC{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new zC(e,t,r)}_apply(e){const t=this._parse(e);return O6(e._query,t),new zs(e.firestore,e.converter,QN(e._query,t))}_parse(e){const t=M_(e.firestore);return function(s,u,l,f,y,I,w){let x;if(y.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new He(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){k6(w,I);const M=[];for(const B of w)M.push(N6(f,s,B));x={arrayValue:{values:M}}}else x=N6(f,s,w)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||k6(w,I),x=D6(l,"where",w,"in"===I||"not-in"===I);return Nn.create(y,I,x)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class iE extends eO{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new iE(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:lr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let u=i;const l=s.getFlattenedFilters();for(const f of l)O6(u,f),u=QN(u,f)}(e._query,t),new zs(e.firestore,e.converter,QN(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class tO extends GC{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new tO(e,t)}_apply(e){const t=function(i,s,u){if(null!==i.startAt)throw new He(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new He(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new P0(s,u);return function(y,I){if(null===KN(y)){const w=px(y);null!==w&&F6(0,w,I.field)}}(i,l),l}(e._query,this._field,this._direction);return new zs(e.firestore,e.converter,function(i,s){const u=i.explicitOrderBy.concat([s]);return new zh(i.path,i.collectionGroup,u,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class Zx extends GC{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Zx(e,t,r)}_apply(e){return new zs(e.firestore,e.converter,gx(e._query,this._limit,this._limitType))}}class Qx extends GC{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Qx(e,t,r)}_apply(e){const t=M6(e,this.type,this._docOrFields,this._inclusive);return new zs(e.firestore,e.converter,(s=t,new zh((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class Yx extends GC{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Yx(e,t,r)}_apply(e){const t=M6(e,this.type,this._docOrFields,this._inclusive);return new zs(e.firestore,e.converter,(s=t,new zh((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function M6(n,e,t,r){if(t[0]=(0,Et.m9)(t[0]),t[0]instanceof HC)return function(s,u,l,f,y){if(!f)throw new He(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const I=[];for(const w of k0(s))if(w.field.isKeyField())I.push(E_(u,f.key));else{const x=f.data.field(w.field);if(ax(x))throw new He(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const M=w.field.canonicalString();throw new He(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}I.push(x)}return new ng(I,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=M_(n.firestore);return function(u,l,f,y,I,w){const x=u.explicitOrderBy;if(I.length>x.length)throw new He(ge.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let B=0;B<I.length;B++){const Z=I[B];if(x[B].field.isKeyField()){if("string"!=typeof Z)throw new He(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof Z}`);if(!ZN(u)&&-1!==Z.indexOf("/"))throw new He(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${Z}' contains a slash.`);const J=u.path.child(Bn.fromString(Z));if(!_t.isDocumentKey(J))throw new He(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${J}' is not because it contains an odd number of segments.`);const me=new _t(J);M.push(E_(l,me))}else{const J=D6(f,y,Z);M.push(J)}}return new ng(M,w)}(n._query,n.firestore._databaseId,i,e,t,r)}}function N6(n,e,t){if("string"==typeof(t=(0,Et.m9)(t))){if(""===t)throw new He(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZN(e)&&-1!==t.indexOf("/"))throw new He(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Bn.fromString(t));if(!_t.isDocumentKey(r))throw new He(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return E_(n,new _t(r))}if(t instanceof zr)return E_(n,t._key);throw new He(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jx(t)}.`)}function k6(n,e){if(!Array.isArray(n)||0===n.length)throw new He(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function O6(n,e){if(e.isInequality()){const r=px(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new He(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=KN(n);null!==s&&F6(0,i,s)}const t=function(i,s){for(const u of i)for(const l of u.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new He(ge.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function F6(n,e,t){if(!t.isEqual(e))throw new He(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class nO{convertValue(e,t="none"){switch(eg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Gh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Dt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Qp(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new Hx(bi(e.latitude),bi(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ux(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(dC(e));default:return null}}convertTimestamp(e){const t=Yp(e);return new ni(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Bn.fromString(e);Gt(Zj(r));const i=new Jp(r.get(1),r.get(3)),s=new _t(r.popFirst(5));return i.isEqual(t)||ji(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Jx(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class jW extends nO{constructor(e){super(),this.firestore=e}convertBytes(e){return new ad(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zr(this.firestore,null,t)}}class k_{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yh extends HC{constructor(e,t,r,i,s,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new qC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Kx("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class qC extends Yh{data(e={}){return super.data(e)}}class lg{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new k_(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new qC(this._firestore,this._userDataWriter,r.key,r,new k_(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new He(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let u=0;return i._snapshot.docChanges.map(l=>({type:"added",doc:new qC(i._firestore,i._userDataWriter,l.doc.key,l.doc,new k_(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:u++}))}{let u=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||3!==l.type).map(l=>{const f=new qC(i._firestore,i._userDataWriter,l.doc.key,l.doc,new k_(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let y=-1,I=-1;return 0!==l.type&&(y=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),I=u.indexOf(l.doc.key)),{type:HW(l.type),doc:f,oldIndex:y,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function HW(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dt()}}function L6(n,e){return n instanceof Yh&&e instanceof Yh?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof lg&&e instanceof lg&&n._firestore===e._firestore&&Kk(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class dg extends nO{constructor(e){super(),this.firestore=e}convertBytes(e){return new ad(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zr(this.firestore,null,t)}}function U6(n,e,t){n=Pn(n,zr);const r=Pn(n.firestore,kr),i=Jx(n.converter,e,t);return sE(r,[zx(M_(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ri.none())])}function B6(n,e,t,...r){n=Pn(n,zr);const i=Pn(n.firestore,kr),s=M_(i);let u;return u="string"==typeof(e=(0,Et.m9)(e))||e instanceof Qh?Jk(s,"updateDoc",n._key,e,t,r):Yk(s,"updateDoc",n._key,e),sE(i,[u.toMutation(n._key,ri.exists(!0))])}function j6(n,...e){var t,r,i;n=(0,Et.m9)(n);let s={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||Zk(e[u])||(s=e[u],u++);const l={includeMetadataChanges:s.includeMetadataChanges};if(Zk(e[u])){const w=e[u];e[u]=null===(t=w.next)||void 0===t?void 0:t.bind(w),e[u+1]=null===(r=w.error)||void 0===r?void 0:r.bind(w),e[u+2]=null===(i=w.complete)||void 0===i?void 0:i.bind(w)}let f,y,I;if(n instanceof zr)y=Pn(n.firestore,kr),I=N0(n._key.path),f={next:w=>{e[u]&&e[u](rO(y,n,w))},error:e[u+1],complete:e[u+2]};else{const w=Pn(n,zs);y=Pn(w.firestore,kr),I=w._query;const x=new dg(y);f={next:M=>{e[u]&&e[u](new lg(y,x,w,M))},error:e[u+1],complete:e[u+2]},P6(n._query)}return function(x,M,B,Z){const J=new Lx(Z),me=new Ok(M,J,B);return x.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return Mk(yield rE(x),me)})),()=>{J.La(),x.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return Nk(yield rE(x),me)}))}}(Di(y),I,l,f)}function sE(n,e){return function(r,i){const s=new fs;return r.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return function O5(n,e,t){return(nB=nB||(0,H.Z)(function*(r,i,s){const u=$k(r);try{const l=yield function(y,I){const w=pt(y),x=ni.now(),M=I.reduce((J,me)=>J.add(me.key),yn());let B,Z;return w.persistence.runTransaction("Locally write mutations","readwrite",J=>{let me=fa(),Oe=yn();return w._s.getEntries(J,M).next(Ie=>{me=Ie,me.forEach(($e,Je)=>{Je.isValidDocument()||(Oe=Oe.add($e))})}).next(()=>w.localDocuments.getOverlayedDocuments(J,me)).next(Ie=>{B=Ie;const $e=[];for(const Je of I){const yt=lq(Je,B.get(Je.key).overlayedDocument);null!=yt&&$e.push(new Wh(Je.key,yt,ZB(yt.value.mapValue),ri.exists(!0)))}return w.mutationQueue.addMutationBatch(J,x,$e,I)}).next(Ie=>{Z=Ie;const $e=Ie.applyToLocalDocumentSet(B,Oe);return w.documentOverlayCache.saveOverlays(J,Ie.batchId,$e)})}).then(()=>({batchId:Z.batchId,changes:pj(B)}))}(u.localStore,i);u.sharedClientState.addPendingMutation(l.batchId),function(y,I,w){let x=y.Da[y.currentUser.toKey()];x||(x=new Mr(un)),x=x.insert(I,w),y.Da[y.currentUser.toKey()]=x}(u,l.batchId,s),yield Zh(u,l.changes),yield Z0(u.remoteStore)}catch(l){const f=Y0(l,"Failed to persist write");s.reject(f)}})).apply(this,arguments)}(yield qk(r),i,s)})),s.promise}(Di(n),e)}function rO(n,e,t){const r=t.docs.get(e._key),i=new dg(n);return new Yh(n,i,e._key,r,new k_(t.hasPendingWrites,t.fromCache),e.converter)}const aK={maxAttempts:5};class $6{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=M_(e)}set(e,t,r){this._verifyNotCommitted();const i=hg(e,this._firestore),s=Jx(i.converter,t,r),u=zx(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,ri.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=hg(e,this._firestore);let u;return u="string"==typeof(t=(0,Et.m9)(t))||t instanceof Qh?Jk(this._dataReader,"WriteBatch.update",s._key,t,r,i):Yk(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(u.toMutation(s._key,ri.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=hg(e,this._firestore);return this._mutations=this._mutations.concat(new U0(t._key,ri.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new He(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hg(n,e){if((n=(0,Et.m9)(n)).firestore!==e)throw new He(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class uK extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=M_(t)}get(t){const r=hg(t,this._firestore),i=new jW(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return Dt();const u=s[0];if(u.isFoundDocument())return new HC(this._firestore,i,u.key,u,r.converter);if(u.isNoDocument())return new HC(this._firestore,i,r._key,null,r.converter);throw Dt()})}set(t,r,i){const s=hg(t,this._firestore),u=Jx(s.converter,r,i),l=zx(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,i);return this._transaction.set(s._key,l),this}update(t,r,i,...s){const u=hg(t,this._firestore);let l;return l="string"==typeof(r=(0,Et.m9)(r))||r instanceof Qh?Jk(this._dataReader,"Transaction.update",u._key,r,i,s):Yk(this._dataReader,"Transaction.update",u._key,r),this._transaction.update(u._key,l),this}delete(t){const r=hg(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=hg(e,this._firestore),r=new dg(this._firestore);return super.get(e).then(i=>new Yh(this._firestore,r,t._key,i._document,new k_(!1,!1),t.converter))}}function sO(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new He("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function q6(){if(typeof Uint8Array>"u")throw new He("unimplemented","Uint8Arrays are not available in this environment.")}function W6(){if(!function j7(){return typeof atob<"u"}())throw new He("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){C0=Ti.SDK_VERSION,(0,Ti._registerComponent)(new xa.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const u=r.getProvider("app").getImmediate(),l=new kr(new d7(r.getProvider("auth-internal")),new p7(r.getProvider("app-check-internal")),function(y,I){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new He(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jp(y.options.projectId,I)}(u,i),u);return s=Object.assign({useFetchStreams:t},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),(0,Ti.registerVersion)(wB,"4.1.3",e),(0,Ti.registerVersion)(wB,"4.1.3","esm2017")}();class WC{constructor(e){this._delegate=e}static fromBase64String(e){return W6(),new WC(ad.fromBase64String(e))}static fromUint8Array(e){return q6(),new WC(ad.fromUint8Array(e))}toBase64(){return W6(),this._delegate.toBase64()}toUint8Array(){return q6(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function oO(n){return function yK(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class vK{enableIndexedDbPersistence(e,t){return function mW(n,e){T6(n=Pn(n,kr));const t=Di(n);if(t._uninitializedComponentsProvider)throw new He(ge.FAILED_PRECONDITION,"SDK cache is already specified.");da("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new tE;return w6(t,i,new Hk(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function _W(n){T6(n=Pn(n,kr));const e=Di(n);if(e._uninitializedComponentsProvider)throw new He(ge.FAILED_PRECONDITION,"SDK cache is already specified.");da("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new tE;return w6(e,r,new r6(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function yW(n){if(n._initialized&&!n._terminated)throw new He(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new fs;return n._queue.enqueueAndForgetEvenWhileRestricted((0,H.Z)(function*(){try{var t;yield function(i){return(t=t||(0,H.Z)(function*(s){if(!Gc.C())return Promise.resolve();const u=s+"main";yield Gc.delete(u)})).apply(this,arguments)}(vk(n._databaseId,n._persistenceKey)),e.resolve()}catch(r){e.reject(r)}})),e.promise}(e._delegate)}}class K6{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Jp||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&da("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function y6(n,e,t,r={}){var i;const s=(n=Pn(n,UC))._getSettings(),u=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==u&&da("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:u,ssl:!1})),r.mockUserToken){let l,f;if("string"==typeof r.mockUserToken)l=r.mockUserToken,f=xs.MOCK_USER;else{l=(0,Et.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new He(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new xs(y)}n._authCredentials=new l7(new TB(l,f))}}(this._delegate,e,t,r)}enableNetwork(){return function EW(n){return function nW(n){return n.asyncQueue.enqueue((0,H.Z)(function*(){const e=yield o6(n),t=yield a6(n);return e.setNetworkEnabled(!0),function(i){const s=pt(i);return s.F_.delete(0),FC(s)}(t)}))}(Di(n=Pn(n,kr)))}(this._delegate)}disableNetwork(){return function IW(n){return function rW(n){return n.asyncQueue.enqueue((0,H.Z)(function*(){var e;const t=yield o6(n),r=yield a6(n);return t.setNetworkEnabled(!1),function(s){return(e=e||(0,H.Z)(function*(u){const l=pt(u);l.F_.add(0),yield K0(l),l.O_.set("Offline")})).apply(this,arguments)}(r)}))}(Di(n=Pn(n,kr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,f6("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function vW(n){return function(t){const r=new fs;return t.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return function U5(n,e){return(aB=aB||(0,H.Z)(function*(t,r){const i=pt(t);ag(i.remoteStore)||qe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(f){const y=pt(f);return y.persistence.runTransaction("Get highest unacknowledged batch id","readonly",I=>y.mutationQueue.getHighestUnacknowledgedBatchId(I))}(i.localStore);if(-1===s)return void r.resolve();const u=i.Ca.get(s)||[];u.push(r),i.Ca.set(s,u)}catch(s){const u=Y0(s,"Initialization of waitForPendingWrites() operation failed");r.reject(u)}})).apply(this,arguments)}(yield qk(t),r)})),r.promise}(Di(n=Pn(n,kr)))}(this._delegate)}onSnapshotsInSync(e){return function JW(n,e){return function oW(n,e){const t=new Lx(e);return n.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return i=yield rE(n),s=t,pt(i).K_.add(s),void s.next();var i,s})),()=>{t.La(),n.asyncQueue.enqueueAndForget((0,H.Z)(function*(){return i=yield rE(n),s=t,void pt(i).K_.delete(s);var i,s}))}}(Di(n=Pn(n,kr)),Zk(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new He("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new oE(this,v6(this._delegate,e))}catch(t){throw jo(t,"collection()","Firestore.collection()")}}doc(e){try{return new Gu(this,$x(this._delegate,e))}catch(t){throw jo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new $o(this,function hW(n,e){if(n=Pn(n,UC),Wk("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new He(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zs(n,null,(r=e,new zh(Bn.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw jo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function cK(n,e,t){n=Pn(n,kr);const r=Object.assign(Object.assign({},aK),t);return function(s){if(s.maxAttempts<1)throw new He(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,u,l){const f=new fs;return s.asyncQueue.enqueueAndForget((0,H.Z)(function*(){const y=yield function u6(n){return Bx(n).then(e=>e.datastore)}(s);new eW(s.asyncQueue,y,l,u,f).run()})),f.promise}(Di(n),i=>e(new uK(n,i)),r)}(this._delegate,t=>e(new Z6(this,t)))}batch(){return Di(this._delegate),new Q6(new $6(this._delegate,e=>sE(this._delegate,e)))}loadBundle(e){return function wW(n,e){const t=Di(n=Pn(n,kr)),r=new pW;return function aW(n,e,t,r){const i=function(u,l){let f;return f="string"==typeof u?Pj().encode(u):u,I=function(I,w){if(I instanceof Uint8Array)return i6(I,w);if(I instanceof ArrayBuffer)return i6(new Uint8Array(I),w);if(I instanceof ReadableStream)return I.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new J5(I,l);var I}(t,OC(e));n.asyncQueue.enqueueAndForget((0,H.Z)(function*(){!function Q5(n,e,t){var r;const i=pt(n);(function(u,l,f){return(r=r||(0,H.Z)(function*(y,I,w){try{const x=yield I.getMetadata();if(yield function(me,Oe){const Ie=pt(me),$e=$i(Oe.createTime);return Ie.persistence.runTransaction("hasNewerBundle","readonly",Je=>Ie.Ur.getBundleMetadata(Je,Oe.id)).then(Je=>!!Je&&Je.createTime.compareTo($e)>=0)}(y.localStore,x))return yield I.close(),w._completeWith({taskState:"Success",documentsLoaded:(me=x).totalDocuments,bytesLoaded:me.totalBytes,totalDocuments:me.totalDocuments,totalBytes:me.totalBytes}),Promise.resolve(new Set);w._updateProgress(K4(x));const M=new x5(x,y.localStore,I.serializer);let B=yield I.Oa();for(;B;){const J=yield M.na(B);J&&w._updateProgress(J),B=yield I.Oa()}const Z=yield M.complete();return yield Zh(y,Z.sa,void 0),yield function(me,Oe){const Ie=pt(me);return Ie.persistence.runTransaction("Save bundle","readwrite",$e=>Ie.Ur.saveBundleMetadata($e,Oe))}(y.localStore,x),w._completeWith(Z.progress),Promise.resolve(Z.ia)}catch(x){return da("SyncEngine",`Loading bundle failed with ${x}`),w._failWith(x),Promise.resolve(new Set)}var me})).apply(this,arguments)})(i,e,t).then(s=>{i.sharedClientState.notifyBundleLoaded(s)})}(yield qk(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function TW(n,e){return function uW(n,e){return n.asyncQueue.enqueue((0,H.Z)(function*(){return function(r,i){const s=pt(r);return s.persistence.runTransaction("Get named query","readonly",u=>s.Ur.getNamedQuery(u,i))}(yield nE(n),e)}))}(Di(n=Pn(n,kr)),e).then(t=>t?new zs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new $o(this,t):null)}}class eR extends nO{constructor(e){super(),this.firestore=e}convertBytes(e){return new WC(new ad(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Gu.forKey(t,this.firestore,null)}}class Z6{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new eR(e)}get(e){const t=F_(e);return this._delegate.get(t).then(r=>new KC(this._firestore,new Yh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=F_(e);return r?(sO("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=F_(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=F_(e);return this._delegate.delete(t),this}}class Q6{constructor(e){this._delegate=e}set(e,t,r){const i=F_(e);return r?(sO("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=F_(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=F_(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class O_{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new qC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ZC(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=O_.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new O_(e,new eR(e),t),i.set(t,s)),s}}O_.INSTANCES=new WeakMap;class Gu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new eR(e)}static forPath(e,t,r){if(e.length%2!=0)throw new He("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Gu(t,new zr(t._delegate,r,new _t(e)))}static forKey(e,t,r){return new Gu(t,new zr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new oE(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new oE(this.firestore,v6(this._delegate,e))}catch(t){throw jo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Et.m9)(e))instanceof zr&&E6(this._delegate,e)}set(e,t){t=sO("DocumentReference.set",t);try{return t?U6(this._delegate,e,t):U6(this._delegate,e)}catch(r){throw jo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?B6(this._delegate,e):B6(this._delegate,e,t,...r)}catch(i){throw jo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function QW(n){return sE(Pn(n.firestore,kr),[new U0(n._key,ri.none())])}(this._delegate)}onSnapshot(...e){const t=Y6(e),r=J6(e,i=>new KC(this.firestore,new Yh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return j6(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function zW(n){n=Pn(n,zr);const e=Pn(n.firestore,kr),t=Di(e),r=new dg(e);return function iW(n,e){const t=new fs;return n.asyncQueue.enqueueAndForget((0,H.Z)(function*(){var r;return function(s,u,l){return(r=r||(0,H.Z)(function*(f,y,I){try{const w=yield function(M,B){const Z=pt(M);return Z.persistence.runTransaction("read document","readonly",J=>Z.localDocuments.getDocument(J,B))}(f,y);w.isFoundDocument()?I.resolve(w):w.isNoDocument()?I.resolve(null):I.reject(new He(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(w){const x=Y0(w,`Failed to get document '${y} from cache`);I.reject(x)}})).apply(this,arguments)}(yield nE(n),e,t)})),t.promise}(t,n._key).then(i=>new Yh(e,r,n._key,i,new k_(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function qW(n){n=Pn(n,zr);const e=Pn(n.firestore,kr);return c6(Di(e),n._key,{source:"server"}).then(t=>rO(e,n,t))}(this._delegate):function GW(n){n=Pn(n,zr);const e=Pn(n.firestore,kr);return c6(Di(e),n._key).then(t=>rO(e,n,t))}(this._delegate),t.then(r=>new KC(this.firestore,new Yh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Gu(this.firestore,this._delegate.withConverter(e?O_.getInstance(this.firestore,e):null))}}function jo(n,e,t){return n.message=n.message.replace(e,t),n}function Y6(n){for(const e of n)if("object"==typeof e&&!oO(e))return e;return{}}function J6(n,e){var t,r;let i;return i=oO(n[0])?n[0]:oO(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class KC{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Gu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return L6(this._delegate,e._delegate)}}class ZC extends KC{data(e){const t=this._delegate.data(e);return function u7(n,e){n||Dt()}(void 0!==t),t}}class $o{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new eR(e)}where(e,t,r){try{return new $o(this.firestore,cg(this._delegate,function NW(n,e,t){const r=e,i=Kx("where",n);return zC._create(i,r,t)}(e,t,r)))}catch(i){throw jo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new $o(this.firestore,cg(this._delegate,function kW(n,e="asc"){const t=e,r=Kx("orderBy",n);return tO._create(r,t)}(e,t)))}catch(r){throw jo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new $o(this.firestore,cg(this._delegate,function OW(n){return m6("limit",n),Zx._create("limit",n,"F")}(e)))}catch(t){throw jo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new $o(this.firestore,cg(this._delegate,function FW(n){return m6("limitToLast",n),Zx._create("limitToLast",n,"L")}(e)))}catch(t){throw jo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new $o(this.firestore,cg(this._delegate,function VW(...n){return Qx._create("startAt",n,!0)}(...e)))}catch(t){throw jo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new $o(this.firestore,cg(this._delegate,function LW(...n){return Qx._create("startAfter",n,!1)}(...e)))}catch(t){throw jo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new $o(this.firestore,cg(this._delegate,function UW(...n){return Yx._create("endBefore",n,!1)}(...e)))}catch(t){throw jo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new $o(this.firestore,cg(this._delegate,function BW(...n){return Yx._create("endAt",n,!0)}(...e)))}catch(t){throw jo(t,"endAt()","Query.endAt()")}}isEqual(e){return Kk(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function KW(n){n=Pn(n,zs);const e=Pn(n.firestore,kr),t=Di(e),r=new dg(e);return function sW(n,e){const t=new fs;return n.asyncQueue.enqueueAndForget((0,H.Z)(function*(){var r;return function(s,u,l){return(r=r||(0,H.Z)(function*(f,y,I){try{const w=yield Px(f,y,!0),x=new Y4(y,w.Ps),M=x.ha(w.documents),B=x.applyChanges(M,!1);I.resolve(B.snapshot)}catch(w){const x=Y0(w,`Failed to execute query '${y} against cache`);I.reject(x)}})).apply(this,arguments)}(yield nE(n),e,t)})),t.promise}(t,n._query).then(i=>new lg(e,r,n,i))}(this._delegate):"server"===e?.source?function ZW(n){n=Pn(n,zs);const e=Pn(n.firestore,kr),t=Di(e),r=new dg(e);return l6(t,n._query,{source:"server"}).then(i=>new lg(e,r,n,i))}(this._delegate):function WW(n){n=Pn(n,zs);const e=Pn(n.firestore,kr),t=Di(e),r=new dg(e);return P6(n._query),l6(t,n._query).then(i=>new lg(e,r,n,i))}(this._delegate),t.then(r=>new aO(this.firestore,new lg(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Y6(e),r=J6(e,i=>new aO(this.firestore,new lg(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return j6(this._delegate,t,r)}withConverter(e){return new $o(this.firestore,this._delegate.withConverter(e?O_.getInstance(this.firestore,e):null))}}class IK{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ZC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class aO{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new $o(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ZC(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new IK(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new ZC(this._firestore,r))})}isEqual(e){return L6(this._delegate,e._delegate)}}class oE extends $o{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Gu(this.firestore,e):null}doc(e){try{return new Gu(this.firestore,void 0===e?$x(this._delegate):$x(this._delegate,e))}catch(t){throw jo(t,"doc()","CollectionReference.doc()")}}add(e){return function YW(n,e){const t=Pn(n.firestore,kr),r=$x(n),i=Jx(n.converter,e);return sE(t,[zx(M_(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ri.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Gu(this.firestore,t))}isEqual(e){return E6(this._delegate,e._delegate)}withConverter(e){return new oE(this.firestore,this._delegate.withConverter(e?O_.getInstance(this.firestore,e):null))}}function F_(n){return Pn(n,zr)}class uO{constructor(...e){this._delegate=new Qh(...e)}static documentId(){return new uO(hi.keyField().canonicalString())}isEqual(e){return(e=(0,Et.m9)(e))instanceof Qh&&this._delegate._internalPath.isEqual(e._internalPath)}}class V_{constructor(e){this._delegate=e}static serverTimestamp(){const e=function dK(){return new Qk("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new V_(e)}static delete(){const e=function lK(){return new jC("deleteField")}();return e._methodName="FieldValue.delete",new V_(e)}static arrayUnion(...e){const t=function hK(...n){return new SW("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new V_(t)}static arrayRemove(...e){const t=function fK(...n){return new xW("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new V_(t)}static increment(e){const t=function pK(n){return new RW("increment",n)}(e);return t._methodName="FieldValue.increment",new V_(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const wK={Firestore:K6,GeoPoint:Hx,Timestamp:ni,Blob:WC,Transaction:Z6,WriteBatch:Q6,DocumentReference:Gu,DocumentSnapshot:KC,Query:$o,QueryDocumentSnapshot:ZC,QuerySnapshot:aO,CollectionReference:oE,FieldPath:uO,FieldValue:V_,setLogLevel:function EK(n){!function a7(n){Wp.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function CK(n){(function TK(n,e){n.INTERNAL.registerComponent(new xa.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},wK)))})(n,(e,t)=>new K6(e,t,new vK)),n.registerVersion("@firebase/firestore-compat","0.3.17")}(e3);let AK=(()=>{class n{constructor(t){this.firestore=t}getCommentsForVillage(t){return this.firestore.collection("villages").doc(t).collection("comments").valueChanges()}addCommentToVillage(t,r){return this.firestore.collection("villages").doc(t).collection("comments").add({content:r})}getVillages(){return this.firestore.collection("villages").snapshotChanges()}addVillage(t){return this.firestore.collection("villages").add(t)}updateAidCategory(t,r,i){return this.firestore.collection("villages").doc(t).update({[r]:i})}deleteVillage(t){return this.firestore.collection("villages").doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Y1))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function bK(n,e){if(1&n){const t=p.EpF();p.ynx(0),p.TgZ(1,"td"),p._uU(2),p.qZA(),p.TgZ(3,"td")(4,"button",19),p.NdJ("click",function(){p.CHM(t);const i=p.oxw().$implicit,s=p.oxw();return p.KtG(s.decrement(i,"medicaments"))}),p._uU(5,"-"),p.qZA(),p._uU(6),p.TgZ(7,"button",19),p.NdJ("click",function(){p.CHM(t);const i=p.oxw().$implicit,s=p.oxw();return p.KtG(s.increment(i,"medicaments"))}),p._uU(8,"+"),p.qZA()(),p.TgZ(9,"td")(10,"button",19),p.NdJ("click",function(){p.CHM(t);const i=p.oxw().$implicit,s=p.oxw();return p.KtG(s.decrement(i,"alimentation"))}),p._uU(11,"-"),p.qZA(),p._uU(12),p.TgZ(13,"button",19),p.NdJ("click",function(){p.CHM(t);const i=p.oxw().$implicit,s=p.oxw();return p.KtG(s.increment(i,"alimentation"))}),p._uU(14,"+"),p.qZA()(),p.TgZ(15,"td")(16,"button",19),p.NdJ("click",function(){p.CHM(t);const i=p.oxw().$implicit,s=p.oxw();return p.KtG(s.decrement(i,"habits"))}),p._uU(17,"-"),p.qZA(),p._uU(18),p.TgZ(19,"button",19),p.NdJ("click",function(){p.CHM(t);const i=p.oxw().$implicit,s=p.oxw();return p.KtG(s.increment(i,"habits"))}),p._uU(20,"+"),p.qZA()(),p.TgZ(21,"td")(22,"button",19),p.NdJ("click",function(){p.CHM(t);const i=p.oxw().$implicit,s=p.oxw();return p.KtG(s.decrement(i,"draps"))}),p._uU(23,"-"),p.qZA(),p._uU(24),p.TgZ(25,"button",19),p.NdJ("click",function(){p.CHM(t);const i=p.oxw().$implicit,s=p.oxw();return p.KtG(s.increment(i,"draps"))}),p._uU(26,"+"),p.qZA()(),p.TgZ(27,"td")(28,"button",20),p.NdJ("click",function(){p.CHM(t);const i=p.oxw().$implicit,s=p.oxw();return p.KtG(s.viewComments(i))}),p._uU(29,"Voir commentaires"),p.qZA()(),p.BQk()}if(2&n){const t=p.oxw().$implicit;p.xp6(2),p.Oqu(t.nom),p.xp6(4),p.hij(" ",t.medicaments," "),p.xp6(6),p.hij(" ",t.alimentation," "),p.xp6(6),p.hij(" ",t.habits," "),p.xp6(6),p.hij(" ",t.draps," ")}}function DK(n,e){if(1&n&&(p.TgZ(0,"tr"),p.YNc(1,bK,30,5,"ng-container",18),p.qZA()),2&n){const t=e.$implicit,r=p.oxw();p.xp6(1),p.Q6J("ngIf",t.nom.toLowerCase().includes(r.searchTerm.toLowerCase()))}}function SK(n,e){if(1&n&&(p.TgZ(0,"li"),p._uU(1),p.qZA()),2&n){const t=e.$implicit;p.xp6(1),p.AsE("",t.text," (",t.displayTime,")")}}let xK=(()=>{class n{constructor(t,r){this.firebaseService=t,this.firestore=r,this.currentVillage=null,this.villageComments=[],this.newComment="",this.searchTerm="",this.villagesToAdd=[{nom:"Ait Haddou | \u0627\u064a\u062a \u062d\u062f\u0648",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Tadafalt | \u062a\u062f\u0627\u0641\u0627\u0644\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Tansghart | \u062a\u0646\u0635\u063a\u0627\u0631\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Asghmo | \u0623\u0633\u063a\u0645\u0648",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Tasli | \u062a\u0627\u0633\u0644\u0649",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Timditane | \u062a\u064a\u0645\u062f\u064a\u062a\u0627\u0646",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Tasghimout | \u062a\u0627\u0633\u063a\u064a\u0645\u0648\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Ikis | \u0625\u0643\u064a\u0633",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Inzal | \u0627\u0646\u0632\u0627\u0644",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Amasine | \u0623\u0645\u0627\u0633\u064a\u0646",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Ait Hamou | \u0627\u064a\u062a \u062d\u0645\u0648",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Oulad Addi | \u0623\u0648\u0644\u0627\u062f\u0639\u062f\u064a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Al Wus | \u0627\u0644\u0648\u0633",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Tanmitert | \u062a\u0627\u0646\u0645\u064a\u062a\u0631\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Ahl Tifout | \u0623\u0647\u0644 \u062a\u064a\u0641\u062a\u0648\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Talmoudat | \u062a\u0627\u0644\u0645\u0648\u062f\u0627\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Tamsoult | \u062a\u0627\u0645\u0633\u0648\u0644\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Tawtighran | \u062a\u0648\u0637\u063a\u0631\u0627\u0646",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Asarak | \u0623\u0627\u0633\u0627\u0631\u0627\u0643",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Arg | \u0627\u0631\u063a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Ikidi | \u0625\u0643\u064a\u062f\u0649",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Agbar | \u0627\u063a\u0628\u0627\u0631",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Azghros | \u0623\u0627\u0632\u063a\u0631\u0648\u0633",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Adsiar | \u0627\u062f\u0633\u064a\u0627\u0631",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Amrgn | \u0627\u0645\u0631\u063a\u0646\u0649",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Igoukak A | \u0625\u064a\u062c\u0648\u0643\u0627\u0643 \u0627",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Onayn | \u0627\u0648\u0646\u0627\u064a\u0646",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Tamarot | \u062a\u0645\u0627\u0631\u0648\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Izalagn | \u0625\u064a\u0632\u0627\u0644\u0627\u063a\u0646",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Amizmiz | \u0623\u0645\u064a\u0632\u0645\u064a\u0632",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Anerni | \u0623\u0646\u064a\u0631\u0646\u0649",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Aolouz | \u0622\u0648\u0644\u0648\u0632",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Tadouni | \u062a\u0627\u062f\u0648\u0646\u064a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Takoucht | \u062a\u0627\u0643\u0648\u0634\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Tamjout | \u062a\u0627\u0645\u062c\u0648\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Talyouine | \u062a\u0627\u0644\u064a\u0648\u064a\u0646",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Iaagma | \u0625\u064a\u0639\u063a\u0639\u0631\u0645",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Taghnit | \u062a\u0627\u063a\u0646\u064a\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Tafnout | \u062a\u0641\u0646\u0648\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Taajgalt | \u062a\u0627\u062c\u063a\u0627\u0644\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Ait Maalid | \u0627\u064a\u062a \u0645\u0639\u0644\u062f",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Ifasfas | \u0625\u0641\u0627\u0633\u0641\u0627\u0633",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Tizi NTest | \u062a\u064a\u0632\u0649 \u0646\u062a\u0633\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Adbadi | \u0623\u062f\u0628\u062f\u0649\u064a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Amkarnis | \u0623\u0645\u0643\u0631\u0646\u064a\u0633",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Amghernis | \u0623\u0645\u063a\u0631\u0646\u064a\u0633",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Ikisan | \u0625\u0643\u064a\u0633\u0627\u0646",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Agurd Ourig | \u0623\u063a\u0631\u062f \u0623\u0648\u0631\u064a\u063a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Tikouka | \u062a\u064a\u0643\u0648\u0643\u0627",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Rkto | \u0631\u0643\u062a\u0648",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Waounsaout | \u0648\u0627\u0648\u0646\u0633\u0627\u0648\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Fnso | \u0641\u0646\u0633\u0648",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Ighlamln | \u0625\u063a\u0644\u0645\u0644\u0646",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Abdellah Ousaid | \u0639\u0628\u062f \u0627\u0644\u0644\u0647 \u0623\u0648\u0633\u0639\u064a\u062f",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Takoucht | \u062a\u0627\u0643\u0648\u0634\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Adaw Mahmoud | \u0627\u062f\u0627\u0648\u0645\u062d\u0645\u0648\u062f",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Talbort | \u062a\u0627\u0644\u0628\u0648\u0631\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Imoulas | \u0625\u064a\u0645\u0648\u0644\u0627\u0633",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Iguel | \u0625\u063a\u064a\u0644",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Amassa | \u0623\u0645\u0627\u0633\u0627",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Ait Mhanad | \u0627\u064a\u062a \u0645\u062d\u0627\u0646\u062f",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Lalla Aziza | \u0644\u0627\u0644\u0629 \u0639\u0632\u064a\u0632\u0629",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Imintanout | \u0625\u064a\u0645\u064a\u0646\u062a\u0627\u0646\u0648\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Ain Tazdoutnout | \u0639\u064a\u0646 \u062a\u0627\u0632\u062f\u062a\u0648\u0646\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Tamzkadyouin | \u062a\u0645\u0632\u0643\u0627\u062f\u064a\u0648\u064a\u0646",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Ait Bahamah | \u0627\u064a\u062a \u0628\u0627\u062d\u0645\u0647",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Nafis | \u0646\u0641\u064a\u0633",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Inzkarn | \u0627\u0646\u0632\u0643\u0627\u0631\u0646",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Tiznitakoucht | \u062a\u064a\u0632\u0649 \u0646\u062a\u0627\u0643\u0648\u0634\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Takniet | \u062a\u0627\u0643\u0646\u064a\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Talkejount | \u062a\u0627\u0644\u0643\u062c\u0648\u0646\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Idouiran | \u0625\u062f\u0648\u064a\u0631\u0627\u0646",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Al Zawiyah An Nahlia | \u0627\u0644\u0632\u0627\u0648\u064a\u0629 \u0627\u0644\u0646\u062d\u0644\u064a\u0629",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Asif Al Mal | \u0623\u0633\u064a\u0641 \u0627\u0644\u0645\u0627\u0644",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Ait Aithman | \u0627\u064a\u062a \u0627\u0639\u062b\u0645\u0627\u0646",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Anierni | \u0622\u0646\u064a\u0631\u0646\u0649",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Tafnighoult | \u062a\u0627\u0641\u0646\u064a\u063a\u0648\u0644\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Izakn | \u0625\u0632\u0627\u0643\u0646",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Tmisha | \u062a\u0645\u064a\u0634\u0627",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Imndar | \u0627\u0645\u0646\u062f\u0627\u0631",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Inzkarn | \u0627\u0646\u0632\u0643\u0627\u0631\u0646",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Hammam Adouiran | \u062d\u0645\u0627\u0645 \u0627\u062f\u0648\u064a\u0631\u0627\u0646",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Ikidi | \u0625\u0643\u064a\u062f\u0649",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Malaab Tansghart | \u0645\u0644\u0639\u0628 \u062a\u0646\u0635\u063a\u0627\u0631\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Anierni | \u0622\u0646\u064a\u0631\u0646\u0649",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Afouda | \u0622\u0641\u0648\u062f\u0627",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Azoran | \u0627\u0632\u0648\u0631\u0627\u0646",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Mzey | \u0645\u0632\u064a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Tazka | \u062a\u0632\u0643\u0649",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Aqlou | \u0623\u0643\u0644\u0648",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Toufguine | \u062a\u0648\u0641\u063a\u064a\u0646",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Tashbibt | \u062a\u0627\u0634\u0628\u064a\u0628\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Zawiyat Al Maadin | \u0632\u0627\u0648\u064a\u0629 \u0627\u0644\u0645\u0639\u062f\u0646",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Amazira | \u0627\u0645\u0627\u0632\u064a\u0631\u0627",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Takhzennit | \u062a\u062e\u0632\u0646\u064a\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Douzr9 | \u062f\u0648\u0632\u06319",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Akhfis - Amasine | \u0627\u062e\u0641\u064a\u0633 - \u0627\u0645\u0627\u0633\u064a\u0646",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Ait Boured | \u0627\u064a\u062a \u0628\u0648\u0631\u062f",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Ait Mbarak | \u0627\u064a\u062a \u0645\u0628\u0627\u0631\u0643",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Taoungast | \u062a\u0627\u0648\u0646\u063a\u0627\u0633\u062a",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Isbakn Ait Zghar | \u0625\u0633\u0628\u0627\u0643\u0646 \u0627\u064a\u062a \u0632\u063a\u0627\u0631",medicaments:0,draps:0,habits:0,alimentation:0},{nom:"Adsiar Amazighni | \u0627\u062f\u0633\u064a\u0627\u0631 \u0623\u0645\u0632\u063a\u0646\u0649",medicaments:0,draps:0,habits:0,alimentation:0}],this.villages=[]}ngOnInit(){this.firebaseService.getVillages().subscribe(t=>{this.villages=t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()})),console.log(this.villages)})}addVillages(){var t=this;return(0,H.Z)(function*(){const r=t.firestore.firestore.batch();return t.villagesToAdd.forEach(i=>{const s=t.firestore.collection("villages").doc().ref;r.set(s,i)}),r.commit()})()}increment(t,r){t[r]++,this.updateVillageInFirestore(t.id,{[r]:t[r]})}decrement(t,r){t[r]>0&&(t[r]--,this.updateVillageInFirestore(t.id,{[r]:t[r]}))}viewComments(t){this.currentVillage=t,this.firestore.collection("villages").doc(this.currentVillage.id).collection("comments",r=>r.orderBy("timestamp","desc")).valueChanges().subscribe(r=>{this.villageComments=r.map(i=>{const s=new Date(i.timestamp),u=`${s.getHours()}:${s.getMinutes()}`;return{...i,displayTime:u}}),$("#commentsModal").modal("show")})}closeModal(){this.newComment="",$("#commentsModal").modal("hide")}addComment(t){const r={text:t,timestamp:(new Date).toISOString()};return this.newComment="",this.firestore.collection("villages").doc(this.currentVillage?.id).collection("comments").add(r).then(()=>{console.log("Comment added successfully")}).catch(i=>{console.error("Error adding comment:",i)})}updateVillageInFirestore(t,r){this.firestore.collection("villages").doc(t).update(r).catch(i=>{console.error("Erreur lors de la mise \xe0 jour du village:",i)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(AK),p.Y36(Y1))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-village-list"]],decls:39,vars:5,consts:[[1,"card","container"],[1,"card-header","text-center"],[1,"card-body"],[1,"input-group","mb-3"],["type","text","placeholder","Rechercher un village...",1,"form-control","my-custom-input",3,"ngModel","ngModelChange"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],["id","commentsModal","tabindex","-1","aria-labelledby","commentsModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","commentsModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["placeholder","Ajouter un commentaire...",1,"my-textarea",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[4,"ngIf"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"btn","btn-info",3,"click"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1),p._uU(2," Liste des Villages et leurs Besoins | \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0642\u0631\u0649 \u0648\u0627\u062d\u062a\u064a\u0627\u062c\u0627\u062a\u0647\u0627 "),p.qZA(),p.TgZ(3,"div",2)(4,"div",3)(5,"input",4),p.NdJ("ngModelChange",function(s){return r.searchTerm=s}),p.qZA()(),p.TgZ(6,"table",5)(7,"thead")(8,"tr")(9,"th"),p._uU(10,"Nom du Village | \u0627\u0633\u0645 \u0627\u0644\u0642\u0631\u064a\u0629"),p.qZA(),p.TgZ(11,"th"),p._uU(12,"M\xe9dicaments | \u0623\u062f\u0648\u064a\u0629"),p.qZA(),p.TgZ(13,"th"),p._uU(14,"Alimentation | \u063a\u0630\u0627\u0621"),p.qZA(),p.TgZ(15,"th"),p._uU(16,"Habits | \u0645\u0644\u0627\u0628\u0633"),p.qZA(),p.TgZ(17,"th"),p._uU(18,"Couettes et Draps | \u0644\u062d\u0627\u0641 \u0648\u0634\u0631\u0627\u0634\u0641"),p.qZA(),p.TgZ(19,"th"),p._uU(20,"Commentaires | \u062a\u0639\u0644\u064a\u0642\u0627\u062a"),p.qZA()()(),p.TgZ(21,"tbody"),p.YNc(22,DK,2,1,"tr",6),p.qZA()()()(),p.TgZ(23,"div",7)(24,"div",8)(25,"div",9)(26,"div",10)(27,"h5",11),p._uU(28),p.qZA(),p.TgZ(29,"button",12),p.NdJ("click",function(){return r.closeModal()}),p.qZA()(),p.TgZ(30,"div",13)(31,"ul"),p.YNc(32,SK,2,2,"li",6),p.qZA(),p.TgZ(33,"textarea",14),p.NdJ("ngModelChange",function(s){return r.newComment=s}),p.qZA()(),p.TgZ(34,"div",15)(35,"button",16),p.NdJ("click",function(){return r.closeModal()}),p._uU(36,"Fermer"),p.qZA(),p.TgZ(37,"button",17),p.NdJ("click",function(){return r.addComment(r.newComment)}),p._uU(38,"Ajouter un commentaire"),p.qZA()()()()()),2&t&&(p.xp6(5),p.Q6J("ngModel",r.searchTerm),p.xp6(17),p.Q6J("ngForOf",r.villages),p.xp6(6),p.hij("Commentaires pour ",null==r.currentVillage?null:r.currentVillage.nom,""),p.xp6(4),p.Q6J("ngForOf",r.villageComments),p.xp6(1),p.Q6J("ngModel",r.newComment))},dependencies:[zo,si,MT,MM,$M],styles:[".my-textarea[_ngcontent-%COMP%]{width:100%;height:150px}"]}),n})(),RK=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-village-edit"]],decls:2,vars:0,template:function(t,r){1&t&&(p.TgZ(0,"p"),p._uU(1,"village-edit works!"),p.qZA())}}),n})();class X6{}class e${}class ud{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),u=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(u):this.headers.set(s,[u])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ud?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ud;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ud?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let u=this.headers.get(t);if(!u)return;u=u.filter(l=>-1===s.indexOf(l)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class PK{encodeKey(e){return t$(e)}encodeValue(e){return t$(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const NK=/%(\d[a-f0-9])/gi,kK={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function t$(n){return encodeURIComponent(n).replace(NK,(e,t)=>kK[t]??e)}function tR(n){return`${n}`}class fg{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new PK,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function MK(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[u,l]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],f=t.get(u)||[];f.push(l),t.set(u,f)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(tR):[tR(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new fg({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(tR(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(tR(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class OK{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function n$(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function r$(n){return typeof Blob<"u"&&n instanceof Blob}function i$(n){return typeof FormData<"u"&&n instanceof FormData}class QC{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function FK(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new ud),this.context||(this.context=new OK),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const l=t.indexOf("?");this.urlWithParams=t+(-1===l?"?":l<t.length-1?"&":"")+u}}else this.params=new fg,this.urlWithParams=t}serializeBody(){return null===this.body?null:n$(this.body)||r$(this.body)||i$(this.body)||function VK(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof fg?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||i$(this.body)?null:r$(this.body)?this.body.type||null:n$(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof fg?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,u=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,l=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let f=e.headers||this.headers,y=e.params||this.params;const I=e.context??this.context;return void 0!==e.setHeaders&&(f=Object.keys(e.setHeaders).reduce((w,x)=>w.set(x,e.setHeaders[x]),f)),e.setParams&&(y=Object.keys(e.setParams).reduce((w,x)=>w.set(x,e.setParams[x]),y)),new QC(t,r,s,{params:y,headers:f,context:I,reportProgress:l,responseType:i,withCredentials:u})}}var es=(()=>((es=es||{})[es.Sent=0]="Sent",es[es.UploadProgress=1]="UploadProgress",es[es.ResponseHeader=2]="ResponseHeader",es[es.DownloadProgress=3]="DownloadProgress",es[es.Response=4]="Response",es[es.User=5]="User",es))();class cO{constructor(e,t=200,r="OK"){this.headers=e.headers||new ud,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class lO extends cO{constructor(e={}){super(e),this.type=es.ResponseHeader}clone(e={}){return new lO({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class nR extends cO{constructor(e={}){super(e),this.type=es.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new nR({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class s$ extends cO{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function dO(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let o$=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof QC)s=t;else{let f,y;f=i.headers instanceof ud?i.headers:new ud(i.headers),i.params&&(y=i.params instanceof fg?i.params:new fg({fromObject:i.params})),s=new QC(t,r,void 0!==i.body?i.body:null,{headers:f,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const u=Ft(s).pipe(Up(f=>this.handler.handle(f)));if(t instanceof QC||"events"===i.observe)return u;const l=u.pipe(Fi(f=>f instanceof nR));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return l.pipe((0,Zt.U)(f=>{if(null!==f.body&&!(f.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return f.body}));case"blob":return l.pipe((0,Zt.U)(f=>{if(null!==f.body&&!(f.body instanceof Blob))throw new Error("Response is not a Blob.");return f.body}));case"text":return l.pipe((0,Zt.U)(f=>{if(null!==f.body&&"string"!=typeof f.body)throw new Error("Response is not a string.");return f.body}));default:return l.pipe((0,Zt.U)(f=>f.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new fg).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,dO(i,r))}post(t,r,i={}){return this.request("POST",t,dO(i,r))}put(t,r,i={}){return this.request("PUT",t,dO(i,r))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(X6))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class a${constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const u$=new p.OlP("HTTP_INTERCEPTORS");let LK=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const UK=/^\)\]\}',?\n/;let c$=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ai.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((M,B)=>i.setRequestHeader(M,B.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const M=t.detectContentTypeHeader();null!==M&&i.setRequestHeader("Content-Type",M)}if(t.responseType){const M=t.responseType.toLowerCase();i.responseType="json"!==M?M:"text"}const s=t.serializeBody();let u=null;const l=()=>{if(null!==u)return u;const M=i.statusText||"OK",B=new ud(i.getAllResponseHeaders()),Z=function BK(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return u=new lO({headers:B,status:i.status,statusText:M,url:Z}),u},f=()=>{let{headers:M,status:B,statusText:Z,url:J}=l(),me=null;204!==B&&(me=typeof i.response>"u"?i.responseText:i.response),0===B&&(B=me?200:0);let Oe=B>=200&&B<300;if("json"===t.responseType&&"string"==typeof me){const Ie=me;me=me.replace(UK,"");try{me=""!==me?JSON.parse(me):null}catch($e){me=Ie,Oe&&(Oe=!1,me={error:$e,text:me})}}Oe?(r.next(new nR({body:me,headers:M,status:B,statusText:Z,url:J||void 0})),r.complete()):r.error(new s$({error:me,headers:M,status:B,statusText:Z,url:J||void 0}))},y=M=>{const{url:B}=l(),Z=new s$({error:M,status:i.status||0,statusText:i.statusText||"Unknown Error",url:B||void 0});r.error(Z)};let I=!1;const w=M=>{I||(r.next(l()),I=!0);let B={type:es.DownloadProgress,loaded:M.loaded};M.lengthComputable&&(B.total=M.total),"text"===t.responseType&&!!i.responseText&&(B.partialText=i.responseText),r.next(B)},x=M=>{let B={type:es.UploadProgress,loaded:M.loaded};M.lengthComputable&&(B.total=M.total),r.next(B)};return i.addEventListener("load",f),i.addEventListener("error",y),i.addEventListener("timeout",y),i.addEventListener("abort",y),t.reportProgress&&(i.addEventListener("progress",w),null!==s&&i.upload&&i.upload.addEventListener("progress",x)),i.send(s),r.next({type:es.Sent}),()=>{i.removeEventListener("error",y),i.removeEventListener("abort",y),i.removeEventListener("load",f),i.removeEventListener("timeout",y),t.reportProgress&&(i.removeEventListener("progress",w),null!==s&&i.upload&&i.upload.removeEventListener("progress",x)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Yu))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const hO=new p.OlP("XSRF_COOKIE_NAME"),fO=new p.OlP("XSRF_HEADER_NAME");class l${}let jK=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ma(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(he),p.LFG(p.Lbi),p.LFG(hO))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),pO=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(l$),p.LFG(fO))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),$K=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(u$,[]);this.chain=r.reduceRight((i,s)=>new a$(i,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(e$),p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),HK=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:pO,useClass:LK}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:hO,useValue:t.cookieName}:[],t.headerName?{provide:fO,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[pO,{provide:u$,useExisting:pO,multi:!0},{provide:l$,useClass:jK},{provide:hO,useValue:"XSRF-TOKEN"},{provide:fO,useValue:"X-XSRF-TOKEN"}]}),n})(),GK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[o$,{provide:X6,useClass:$K},c$,{provide:e$,useExisting:c$}],imports:[HK.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();function zK(n,e){1&n&&(p.TgZ(0,"div",11),p._uU(1," L'email est requis. "),p.qZA())}function qK(n,e){1&n&&(p.TgZ(0,"div",11),p._uU(1," L'email n'est pas valide. "),p.qZA())}function WK(n,e){1&n&&(p.TgZ(0,"div",11),p._uU(1," Le message est requis. "),p.qZA())}const KK=[{path:"",redirectTo:"/villages",pathMatch:"full"},{path:"villages",component:xK},{path:"edit/:id",component:RK},{path:"contact",component:(()=>{class n{constructor(t,r){this.fb=t,this.httpClient=r,this.successMessage=null,this.emailForm=this.fb.group({email:["",[SM.required,SM.email]],message:["",SM.required]})}onSubmit(){if(this.emailForm.valid){const t=this.emailForm.get("email").value,r=this.emailForm.get("message").value,i="https://formspree.io/f/mrgwknwl",s={headers:new ud({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"})};let l="";this.httpClient.post(i,`email=${t}&message=${r}`,s).subscribe({next:()=>{this.successMessage="Email envoy\xe9 avec succ\xe8s!",this.emailForm.reset()},error:f=>{l=f.message,console.error("Erreur:",l)}})}}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(qz),p.Y36(o$))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-contact"]],decls:17,vars:4,consts:[[1,"container"],[1,"row"],[1,"col-md-6","mx-auto"],[1,"my-4","p-4","border","rounded",3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","formControlName","email","required","",1,"form-control"],["class","text-danger",4,"ngIf"],["for","message"],["id","message","name","message","formControlName","message","required","",1,"form-control"],["type","submit",1,"btn","btn-primary"],[1,"text-danger"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),p.NdJ("ngSubmit",function(){return r.onSubmit()}),p.TgZ(4,"div",4)(5,"label",5),p._uU(6,"Votre email :"),p.qZA(),p._UZ(7,"input",6),p.YNc(8,zK,2,0,"div",7),p.YNc(9,qK,2,0,"div",7),p.qZA(),p.TgZ(10,"div",4)(11,"label",8),p._uU(12,"Votre message :"),p.qZA(),p._UZ(13,"textarea",9),p.YNc(14,WK,2,0,"div",7),p.qZA(),p.TgZ(15,"button",10),p._uU(16,"Envoyer"),p.qZA()()()()()),2&t&&(p.xp6(3),p.Q6J("formGroup",r.emailForm),p.xp6(5),p.Q6J("ngIf",r.emailForm.get("email").hasError("required")&&r.emailForm.get("email").touched),p.xp6(1),p.Q6J("ngIf",r.emailForm.get("email").hasError("email")&&r.emailForm.get("email").touched),p.xp6(5),p.Q6J("ngIf",r.emailForm.get("message").hasError("required")&&r.emailForm.get("message").touched))},dependencies:[si,zL,MT,MM,xL,RS,xS,qM]}),n})()}];let ZK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[nL.forRoot(KK),nL]}),n})(),QK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[ZG]}),n.\u0275inj=p.cJS({imports:[Rd,mi.hO.initializeApp(fl_firebaseConfig),E9,ZK,zz,GK,l2]}),n})();(0,p.G48)(),ll().bootstrapModule(QK).catch(n=>console.error(n))},9751:(Vt,Ve,U)=>{U.d(Ve,{y:()=>we});var p=U(2961),ne=U(727),F=U(8822),oe=U(9635),de=U(2416),_e=U(576),he=U(2806);let we=(()=>{class X{constructor(Fe){Fe&&(this._subscribe=Fe)}lift(Fe){const Re=new X;return Re.source=this,Re.operator=Fe,Re}subscribe(Fe,Re,vt){const be=function W(X){return X&&X instanceof p.Lv||function Q(X){return X&&(0,_e.m)(X.next)&&(0,_e.m)(X.error)&&(0,_e.m)(X.complete)}(X)&&(0,ne.Nn)(X)}(Fe)?Fe:new p.Hp(Fe,Re,vt);return(0,he.x)(()=>{const{operator:ye,source:Pt}=this;be.add(ye?ye.call(be,Pt):Pt?this._subscribe(be):this._trySubscribe(be))}),be}_trySubscribe(Fe){try{return this._subscribe(Fe)}catch(Re){Fe.error(Re)}}forEach(Fe,Re){return new(Re=Te(Re))((vt,be)=>{const ye=new p.Hp({next:Pt=>{try{Fe(Pt)}catch(kt){be(kt),ye.unsubscribe()}},error:be,complete:vt});this.subscribe(ye)})}_subscribe(Fe){var Re;return null===(Re=this.source)||void 0===Re?void 0:Re.subscribe(Fe)}[F.L](){return this}pipe(...Fe){return(0,oe.U)(Fe)(this)}toPromise(Fe){return new(Fe=Te(Fe))((Re,vt)=>{let be;this.subscribe(ye=>be=ye,ye=>vt(ye),()=>Re(be))})}}return X.create=We=>new X(We),X})();function Te(X){var We;return null!==(We=X??de.v.Promise)&&void 0!==We?We:Promise}},7579:(Vt,Ve,U)=>{U.d(Ve,{x:()=>he});var p=U(9751),ne=U(727);const oe=(0,U(3888).d)(Te=>function(){Te(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=U(8737),_e=U(2806);let he=(()=>{class Te extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const X=new we(this,this);return X.operator=W,X}_throwIfClosed(){if(this.closed)throw new oe}next(W){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(W)}})}error(W){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:X}=this;for(;X.length;)X.shift().error(W)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:X,isStopped:We,observers:Fe}=this;return X||We?ne.Lc:(this.currentObservers=null,Fe.push(W),new ne.w0(()=>{this.currentObservers=null,(0,de.P)(Fe,W)}))}_checkFinalizedStatuses(W){const{hasError:X,thrownError:We,isStopped:Fe}=this;X?W.error(We):Fe&&W.complete()}asObservable(){const W=new p.y;return W.source=this,W}}return Te.create=(Q,W)=>new we(Q,W),Te})();class we extends he{constructor(Q,W){super(),this.destination=Q,this.source=W}next(Q){var W,X;null===(X=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===X||X.call(W,Q)}error(Q){var W,X;null===(X=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===X||X.call(W,Q)}complete(){var Q,W;null===(W=null===(Q=this.destination)||void 0===Q?void 0:Q.complete)||void 0===W||W.call(Q)}_subscribe(Q){var W,X;return null!==(X=null===(W=this.source)||void 0===W?void 0:W.subscribe(Q))&&void 0!==X?X:ne.Lc}}},2961:(Vt,Ve,U)=>{U.d(Ve,{Hp:()=>vt,Lv:()=>X});var p=U(576),ne=U(727),F=U(2416),oe=U(7849);function de(){}const _e=Te("C",void 0,void 0);function Te(Qe,Be,Ne){return{kind:Qe,value:Be,error:Ne}}var Q=U(3410),W=U(2806);class X extends ne.w0{constructor(Be){super(),this.isStopped=!1,Be?(this.destination=Be,(0,ne.Nn)(Be)&&Be.add(this)):this.destination=kt}static create(Be,Ne,tt){return new vt(Be,Ne,tt)}next(Be){this.isStopped?Pt(function we(Qe){return Te("N",Qe,void 0)}(Be),this):this._next(Be)}error(Be){this.isStopped?Pt(function he(Qe){return Te("E",void 0,Qe)}(Be),this):(this.isStopped=!0,this._error(Be))}complete(){this.isStopped?Pt(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Be){this.destination.next(Be)}_error(Be){try{this.destination.error(Be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const We=Function.prototype.bind;function Fe(Qe,Be){return We.call(Qe,Be)}class Re{constructor(Be){this.partialObserver=Be}next(Be){const{partialObserver:Ne}=this;if(Ne.next)try{Ne.next(Be)}catch(tt){be(tt)}}error(Be){const{partialObserver:Ne}=this;if(Ne.error)try{Ne.error(Be)}catch(tt){be(tt)}else be(Be)}complete(){const{partialObserver:Be}=this;if(Be.complete)try{Be.complete()}catch(Ne){be(Ne)}}}class vt extends X{constructor(Be,Ne,tt){let nt;if(super(),(0,p.m)(Be)||!Be)nt={next:Be??void 0,error:Ne??void 0,complete:tt??void 0};else{let Ee;this&&F.v.useDeprecatedNextContext?(Ee=Object.create(Be),Ee.unsubscribe=()=>this.unsubscribe(),nt={next:Be.next&&Fe(Be.next,Ee),error:Be.error&&Fe(Be.error,Ee),complete:Be.complete&&Fe(Be.complete,Ee)}):nt=Be}this.destination=new Re(nt)}}function be(Qe){F.v.useDeprecatedSynchronousErrorHandling?(0,W.O)(Qe):(0,oe.h)(Qe)}function Pt(Qe,Be){const{onStoppedNotification:Ne}=F.v;Ne&&Q.z.setTimeout(()=>Ne(Qe,Be))}const kt={closed:!0,next:de,error:function ye(Qe){throw Qe},complete:de}},727:(Vt,Ve,U)=>{U.d(Ve,{Lc:()=>_e,w0:()=>de,Nn:()=>he});var p=U(576);const F=(0,U(3888).d)(Te=>function(W){Te(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((X,We)=>`${We+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var oe=U(8737);class de{constructor(Q){this.initialTeardown=Q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Q;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const Fe of W)Fe.remove(this);else W.remove(this);const{initialTeardown:X}=this;if((0,p.m)(X))try{X()}catch(Fe){Q=Fe instanceof F?Fe.errors:[Fe]}const{_finalizers:We}=this;if(We){this._finalizers=null;for(const Fe of We)try{we(Fe)}catch(Re){Q=Q??[],Re instanceof F?Q=[...Q,...Re.errors]:Q.push(Re)}}if(Q)throw new F(Q)}}add(Q){var W;if(Q&&Q!==this)if(this.closed)we(Q);else{if(Q instanceof de){if(Q.closed||Q._hasParent(this))return;Q._addParent(this)}(this._finalizers=null!==(W=this._finalizers)&&void 0!==W?W:[]).push(Q)}}_hasParent(Q){const{_parentage:W}=this;return W===Q||Array.isArray(W)&&W.includes(Q)}_addParent(Q){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push(Q),W):W?[W,Q]:Q}_removeParent(Q){const{_parentage:W}=this;W===Q?this._parentage=null:Array.isArray(W)&&(0,oe.P)(W,Q)}remove(Q){const{_finalizers:W}=this;W&&(0,oe.P)(W,Q),Q instanceof de&&Q._removeParent(this)}}de.EMPTY=(()=>{const Te=new de;return Te.closed=!0,Te})();const _e=de.EMPTY;function he(Te){return Te instanceof de||Te&&"closed"in Te&&(0,p.m)(Te.remove)&&(0,p.m)(Te.add)&&(0,p.m)(Te.unsubscribe)}function we(Te){(0,p.m)(Te)?Te():Te.unsubscribe()}},2416:(Vt,Ve,U)=>{U.d(Ve,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Vt,Ve,U)=>{U.d(Ve,{E:()=>ne});const ne=new(U(9751).y)(de=>de.complete())},8996:(Vt,Ve,U)=>{U.d(Ve,{D:()=>Be});var p=U(8421),ne=U(5363),F=U(9468),_e=U(9751),we=U(2202),Te=U(576),Q=U(9672);function X(Ne,tt){if(!Ne)throw new Error("Iterable cannot be null");return new _e.y(nt=>{(0,Q.f)(nt,tt,()=>{const Ee=Ne[Symbol.asyncIterator]();(0,Q.f)(nt,tt,()=>{Ee.next().then(Me=>{Me.done?nt.complete():nt.next(Me.value)})},0,!0)})})}var We=U(3670),Fe=U(8239),Re=U(1144),vt=U(6495),be=U(2206),ye=U(4532),Pt=U(3260);function Be(Ne,tt){return tt?function Qe(Ne,tt){if(null!=Ne){if((0,We.c)(Ne))return function oe(Ne,tt){return(0,p.Xf)(Ne).pipe((0,F.R)(tt),(0,ne.Q)(tt))}(Ne,tt);if((0,Re.z)(Ne))return function he(Ne,tt){return new _e.y(nt=>{let Ee=0;return tt.schedule(function(){Ee===Ne.length?nt.complete():(nt.next(Ne[Ee++]),nt.closed||this.schedule())})})}(Ne,tt);if((0,Fe.t)(Ne))return function de(Ne,tt){return(0,p.Xf)(Ne).pipe((0,F.R)(tt),(0,ne.Q)(tt))}(Ne,tt);if((0,be.D)(Ne))return X(Ne,tt);if((0,vt.T)(Ne))return function W(Ne,tt){return new _e.y(nt=>{let Ee;return(0,Q.f)(nt,tt,()=>{Ee=Ne[we.h](),(0,Q.f)(nt,tt,()=>{let Me,ct;try{({value:Me,done:ct}=Ee.next())}catch(at){return void nt.error(at)}ct?nt.complete():nt.next(Me)},0,!0)}),()=>(0,Te.m)(Ee?.return)&&Ee.return()})}(Ne,tt);if((0,Pt.L)(Ne))return function kt(Ne,tt){return X((0,Pt.Q)(Ne),tt)}(Ne,tt)}throw(0,ye.z)(Ne)}(Ne,tt):(0,p.Xf)(Ne)}},8421:(Vt,Ve,U)=>{U.d(Ve,{Xf:()=>We});var p=U(7582),ne=U(1144),F=U(8239),oe=U(9751),de=U(3670),_e=U(2206),he=U(4532),we=U(6495),Te=U(3260),Q=U(576),W=U(7849),X=U(8822);function We(Qe){if(Qe instanceof oe.y)return Qe;if(null!=Qe){if((0,de.c)(Qe))return function Fe(Qe){return new oe.y(Be=>{const Ne=Qe[X.L]();if((0,Q.m)(Ne.subscribe))return Ne.subscribe(Be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Qe);if((0,ne.z)(Qe))return function Re(Qe){return new oe.y(Be=>{for(let Ne=0;Ne<Qe.length&&!Be.closed;Ne++)Be.next(Qe[Ne]);Be.complete()})}(Qe);if((0,F.t)(Qe))return function vt(Qe){return new oe.y(Be=>{Qe.then(Ne=>{Be.closed||(Be.next(Ne),Be.complete())},Ne=>Be.error(Ne)).then(null,W.h)})}(Qe);if((0,_e.D)(Qe))return ye(Qe);if((0,we.T)(Qe))return function be(Qe){return new oe.y(Be=>{for(const Ne of Qe)if(Be.next(Ne),Be.closed)return;Be.complete()})}(Qe);if((0,Te.L)(Qe))return function Pt(Qe){return ye((0,Te.Q)(Qe))}(Qe)}throw(0,he.z)(Qe)}function ye(Qe){return new oe.y(Be=>{(function kt(Qe,Be){var Ne,tt,nt,Ee;return(0,p.mG)(this,void 0,void 0,function*(){try{for(Ne=(0,p.KL)(Qe);!(tt=yield Ne.next()).done;)if(Be.next(tt.value),Be.closed)return}catch(Me){nt={error:Me}}finally{try{tt&&!tt.done&&(Ee=Ne.return)&&(yield Ee.call(Ne))}finally{if(nt)throw nt.error}}Be.complete()})})(Qe,Be).catch(Ne=>Be.error(Ne))})}},6451:(Vt,Ve,U)=>{U.d(Ve,{T:()=>_e});var p=U(8189),ne=U(8421),F=U(515),oe=U(7669),de=U(8996);function _e(...he){const we=(0,oe.yG)(he),Te=(0,oe._6)(he,1/0),Q=he;return Q.length?1===Q.length?(0,ne.Xf)(Q[0]):(0,p.J)(Te)((0,de.D)(Q,we)):F.E}},5403:(Vt,Ve,U)=>{U.d(Ve,{x:()=>ne});var p=U(2961);function ne(oe,de,_e,he,we){return new F(oe,de,_e,he,we)}class F extends p.Lv{constructor(de,_e,he,we,Te,Q){super(de),this.onFinalize=Te,this.shouldUnsubscribe=Q,this._next=_e?function(W){try{_e(W)}catch(X){de.error(X)}}:super._next,this._error=we?function(W){try{we(W)}catch(X){de.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=he?function(){try{he()}catch(W){de.error(W)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}}},4004:(Vt,Ve,U)=>{U.d(Ve,{U:()=>F});var p=U(4482),ne=U(5403);function F(oe,de){return(0,p.e)((_e,he)=>{let we=0;_e.subscribe((0,ne.x)(he,Te=>{he.next(oe.call(de,Te,we++))}))})}},8189:(Vt,Ve,U)=>{U.d(Ve,{J:()=>F});var p=U(5577),ne=U(4671);function F(oe=1/0){return(0,p.z)(ne.y,oe)}},5577:(Vt,Ve,U)=>{U.d(Ve,{z:()=>we});var p=U(4004),ne=U(8421),F=U(4482),oe=U(9672),de=U(5403),he=U(576);function we(Te,Q,W=1/0){return(0,he.m)(Q)?we((X,We)=>(0,p.U)((Fe,Re)=>Q(X,Fe,We,Re))((0,ne.Xf)(Te(X,We))),W):("number"==typeof Q&&(W=Q),(0,F.e)((X,We)=>function _e(Te,Q,W,X,We,Fe,Re,vt){const be=[];let ye=0,Pt=0,kt=!1;const Qe=()=>{kt&&!be.length&&!ye&&Q.complete()},Be=tt=>ye<X?Ne(tt):be.push(tt),Ne=tt=>{Fe&&Q.next(tt),ye++;let nt=!1;(0,ne.Xf)(W(tt,Pt++)).subscribe((0,de.x)(Q,Ee=>{We?.(Ee),Fe?Be(Ee):Q.next(Ee)},()=>{nt=!0},void 0,()=>{if(nt)try{for(ye--;be.length&&ye<X;){const Ee=be.shift();Re?(0,oe.f)(Q,Re,()=>Ne(Ee)):Ne(Ee)}Qe()}catch(Ee){Q.error(Ee)}}))};return Te.subscribe((0,de.x)(Q,Be,()=>{kt=!0,Qe()})),()=>{vt?.()}}(X,We,Te,W)))}},5363:(Vt,Ve,U)=>{U.d(Ve,{Q:()=>oe});var p=U(9672),ne=U(4482),F=U(5403);function oe(de,_e=0){return(0,ne.e)((he,we)=>{he.subscribe((0,F.x)(we,Te=>(0,p.f)(we,de,()=>we.next(Te),_e),()=>(0,p.f)(we,de,()=>we.complete(),_e),Te=>(0,p.f)(we,de,()=>we.error(Te),_e)))})}},3099:(Vt,Ve,U)=>{U.d(Ve,{B:()=>de});var p=U(8421),ne=U(7579),F=U(2961),oe=U(4482);function de(he={}){const{connector:we=(()=>new ne.x),resetOnError:Te=!0,resetOnComplete:Q=!0,resetOnRefCountZero:W=!0}=he;return X=>{let We,Fe,Re,vt=0,be=!1,ye=!1;const Pt=()=>{Fe?.unsubscribe(),Fe=void 0},kt=()=>{Pt(),We=Re=void 0,be=ye=!1},Qe=()=>{const Be=We;kt(),Be?.unsubscribe()};return(0,oe.e)((Be,Ne)=>{vt++,!ye&&!be&&Pt();const tt=Re=Re??we();Ne.add(()=>{vt--,0===vt&&!ye&&!be&&(Fe=_e(Qe,W))}),tt.subscribe(Ne),!We&&vt>0&&(We=new F.Hp({next:nt=>tt.next(nt),error:nt=>{ye=!0,Pt(),Fe=_e(kt,Te,nt),tt.error(nt)},complete:()=>{be=!0,Pt(),Fe=_e(kt,Q),tt.complete()}}),(0,p.Xf)(Be).subscribe(We))})(X)}}function _e(he,we,...Te){if(!0===we)return void he();if(!1===we)return;const Q=new F.Hp({next:()=>{Q.unsubscribe(),he()}});return we(...Te).subscribe(Q)}},9468:(Vt,Ve,U)=>{U.d(Ve,{R:()=>ne});var p=U(4482);function ne(F,oe=0){return(0,p.e)((de,_e)=>{_e.add(F.schedule(()=>de.subscribe(_e),oe))})}},8505:(Vt,Ve,U)=>{U.d(Ve,{b:()=>de});var p=U(576),ne=U(4482),F=U(5403),oe=U(4671);function de(_e,he,we){const Te=(0,p.m)(_e)||he||we?{next:_e,error:he,complete:we}:_e;return Te?(0,ne.e)((Q,W)=>{var X;null===(X=Te.subscribe)||void 0===X||X.call(Te);let We=!0;Q.subscribe((0,F.x)(W,Fe=>{var Re;null===(Re=Te.next)||void 0===Re||Re.call(Te,Fe),W.next(Fe)},()=>{var Fe;We=!1,null===(Fe=Te.complete)||void 0===Fe||Fe.call(Te),W.complete()},Fe=>{var Re;We=!1,null===(Re=Te.error)||void 0===Re||Re.call(Te,Fe),W.error(Fe)},()=>{var Fe,Re;We&&(null===(Fe=Te.unsubscribe)||void 0===Fe||Fe.call(Te)),null===(Re=Te.finalize)||void 0===Re||Re.call(Te)}))}):oe.y}},4408:(Vt,Ve,U)=>{U.d(Ve,{o:()=>de});var p=U(727);class ne extends p.w0{constructor(he,we){super()}schedule(he,we=0){return this}}const F={setInterval(_e,he,...we){const{delegate:Te}=F;return Te?.setInterval?Te.setInterval(_e,he,...we):setInterval(_e,he,...we)},clearInterval(_e){const{delegate:he}=F;return(he?.clearInterval||clearInterval)(_e)},delegate:void 0};var oe=U(8737);class de extends ne{constructor(he,we){super(he,we),this.scheduler=he,this.work=we,this.pending=!1}schedule(he,we=0){var Te;if(this.closed)return this;this.state=he;const Q=this.id,W=this.scheduler;return null!=Q&&(this.id=this.recycleAsyncId(W,Q,we)),this.pending=!0,this.delay=we,this.id=null!==(Te=this.id)&&void 0!==Te?Te:this.requestAsyncId(W,this.id,we),this}requestAsyncId(he,we,Te=0){return F.setInterval(he.flush.bind(he,this),Te)}recycleAsyncId(he,we,Te=0){if(null!=Te&&this.delay===Te&&!1===this.pending)return we;null!=we&&F.clearInterval(we)}execute(he,we){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Te=this._execute(he,we);if(Te)return Te;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(he,we){let Q,Te=!1;try{this.work(he)}catch(W){Te=!0,Q=W||new Error("Scheduled action threw falsy error")}if(Te)return this.unsubscribe(),Q}unsubscribe(){if(!this.closed){const{id:he,scheduler:we}=this,{actions:Te}=we;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(Te,this),null!=he&&(this.id=this.recycleAsyncId(we,he,null)),this.delay=null,super.unsubscribe()}}}},7565:(Vt,Ve,U)=>{U.d(Ve,{v:()=>F});var p=U(6063);class ne{constructor(de,_e=ne.now){this.schedulerActionCtor=de,this.now=_e}schedule(de,_e=0,he){return new this.schedulerActionCtor(this,de).schedule(he,_e)}}ne.now=p.l.now;class F extends ne{constructor(de,_e=ne.now){super(de,_e),this.actions=[],this._active=!1}flush(de){const{actions:_e}=this;if(this._active)return void _e.push(de);let he;this._active=!0;do{if(he=de.execute(de.state,de.delay))break}while(de=_e.shift());if(this._active=!1,he){for(;de=_e.shift();)de.unsubscribe();throw he}}}},4986:(Vt,Ve,U)=>{U.d(Ve,{z:()=>F});var p=U(4408);const F=new(U(7565).v)(p.o)},6063:(Vt,Ve,U)=>{U.d(Ve,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(Vt,Ve,U)=>{U.d(Ve,{z:()=>p});const p={setTimeout(ne,F,...oe){const{delegate:de}=p;return de?.setTimeout?de.setTimeout(ne,F,...oe):setTimeout(ne,F,...oe)},clearTimeout(ne){const{delegate:F}=p;return(F?.clearTimeout||clearTimeout)(ne)},delegate:void 0}},2202:(Vt,Ve,U)=>{U.d(Ve,{h:()=>ne});const ne=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Vt,Ve,U)=>{U.d(Ve,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Vt,Ve,U)=>{U.d(Ve,{_6:()=>_e,jO:()=>oe,yG:()=>de});var p=U(576);function F(he){return he[he.length-1]}function oe(he){return(0,p.m)(F(he))?he.pop():void 0}function de(he){return function ne(he){return he&&(0,p.m)(he.schedule)}(F(he))?he.pop():void 0}function _e(he,we){return"number"==typeof F(he)?he.pop():we}},8737:(Vt,Ve,U)=>{function p(ne,F){if(ne){const oe=ne.indexOf(F);0<=oe&&ne.splice(oe,1)}}U.d(Ve,{P:()=>p})},3888:(Vt,Ve,U)=>{function p(ne){const oe=ne(de=>{Error.call(de),de.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}U.d(Ve,{d:()=>p})},2806:(Vt,Ve,U)=>{U.d(Ve,{O:()=>oe,x:()=>F});var p=U(2416);let ne=null;function F(de){if(p.v.useDeprecatedSynchronousErrorHandling){const _e=!ne;if(_e&&(ne={errorThrown:!1,error:null}),de(),_e){const{errorThrown:he,error:we}=ne;if(ne=null,he)throw we}}else de()}function oe(de){p.v.useDeprecatedSynchronousErrorHandling&&ne&&(ne.errorThrown=!0,ne.error=de)}},9672:(Vt,Ve,U)=>{function p(ne,F,oe,de=0,_e=!1){const he=F.schedule(function(){oe(),_e?ne.add(this.schedule(null,de)):this.unsubscribe()},de);if(ne.add(he),!_e)return he}U.d(Ve,{f:()=>p})},4671:(Vt,Ve,U)=>{function p(ne){return ne}U.d(Ve,{y:()=>p})},1144:(Vt,Ve,U)=>{U.d(Ve,{z:()=>p});const p=ne=>ne&&"number"==typeof ne.length&&"function"!=typeof ne},2206:(Vt,Ve,U)=>{U.d(Ve,{D:()=>ne});var p=U(576);function ne(F){return Symbol.asyncIterator&&(0,p.m)(F?.[Symbol.asyncIterator])}},576:(Vt,Ve,U)=>{function p(ne){return"function"==typeof ne}U.d(Ve,{m:()=>p})},3670:(Vt,Ve,U)=>{U.d(Ve,{c:()=>F});var p=U(8822),ne=U(576);function F(oe){return(0,ne.m)(oe[p.L])}},6495:(Vt,Ve,U)=>{U.d(Ve,{T:()=>F});var p=U(2202),ne=U(576);function F(oe){return(0,ne.m)(oe?.[p.h])}},8239:(Vt,Ve,U)=>{U.d(Ve,{t:()=>ne});var p=U(576);function ne(F){return(0,p.m)(F?.then)}},3260:(Vt,Ve,U)=>{U.d(Ve,{L:()=>oe,Q:()=>F});var p=U(7582),ne=U(576);function F(de){return(0,p.FC)(this,arguments,function*(){const he=de.getReader();try{for(;;){const{value:we,done:Te}=yield(0,p.qq)(he.read());if(Te)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(we)}}finally{he.releaseLock()}})}function oe(de){return(0,ne.m)(de?.getReader)}},4482:(Vt,Ve,U)=>{U.d(Ve,{A:()=>ne,e:()=>F});var p=U(576);function ne(oe){return(0,p.m)(oe?.lift)}function F(oe){return de=>{if(ne(de))return de.lift(function(_e){try{return oe(_e,this)}catch(he){this.error(he)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(Vt,Ve,U)=>{U.d(Ve,{U:()=>F,z:()=>ne});var p=U(4671);function ne(...oe){return F(oe)}function F(oe){return 0===oe.length?p.y:1===oe.length?oe[0]:function(_e){return oe.reduce((he,we)=>we(he),_e)}}},7849:(Vt,Ve,U)=>{U.d(Ve,{h:()=>F});var p=U(2416),ne=U(3410);function F(oe){ne.z.setTimeout(()=>{const{onUnhandledError:de}=p.v;if(!de)throw oe;de(oe)})}},4532:(Vt,Ve,U)=>{function p(ne){return new TypeError(`You provided ${null!==ne&&"object"==typeof ne?"an invalid object":`'${ne}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Ve,{z:()=>p})},4650:(Vt,Ve,U)=>{U.d(Ve,{$8M:()=>xd,$Z:()=>VA,AFp:()=>ID,AaK:()=>we,AsE:()=>kI,BQk:()=>ym,CHM:()=>Ea,CRH:()=>Ow,CZH:()=>Wm,CqO:()=>yI,D6c:()=>R1,EJc:()=>RO,EpF:()=>mI,F4k:()=>_I,FYo:()=>EE,FiY:()=>Vd,G48:()=>h1,GfV:()=>tm,Gpc:()=>W,JOm:()=>Is,KtG:()=>fd,LFG:()=>Xt,LSH:()=>gE,Lbi:()=>i1,Lck:()=>Om,MMx:()=>gw,NdJ:()=>mh,OlP:()=>kn,Oqu:()=>vh,PXZ:()=>Op,Q6J:()=>Xy,QGY:()=>Bl,QP$:()=>zt,Qsj:()=>xc,R0b:()=>la,RDi:()=>Bf,Rgc:()=>xp,SBq:()=>nh,Sil:()=>CD,Suo:()=>kw,TTD:()=>qo,TgZ:()=>nv,X6Q:()=>Xv,XFs:()=>At,Xpm:()=>Y,Xts:()=>Dy,Y36:()=>im,YKP:()=>km,YNc:()=>ob,Yjl:()=>ee,Yz7:()=>De,Z0I:()=>Ut,ZZ4:()=>UD,_Bn:()=>zb,_UZ:()=>iv,_Vd:()=>eh,_c5:()=>S1,_uU:()=>gb,aQg:()=>ju,c2e:()=>o1,cJS:()=>Ht,cg1:()=>gv,dDg:()=>Zv,dqk:()=>Vn,eFA:()=>e_,ekj:()=>PI,eoX:()=>eT,f3M:()=>Zt,g9A:()=>r1,h0i:()=>Sh,hGG:()=>x1,hij:()=>hp,iGM:()=>sD,ifc:()=>Ot,ip1:()=>ED,jDz:()=>Wb,kL8:()=>zI,lG2:()=>G,lqb:()=>Au,lri:()=>DD,n5z:()=>Co,oAB:()=>Tt,oxw:()=>vI,q4F:()=>nm,qLn:()=>rm,qOj:()=>uI,qZA:()=>rv,rWj:()=>Ym,sBO:()=>OO,sIi:()=>ip,s_b:()=>Rp,soG:()=>ua,tb:()=>TD,tp0:()=>H,uIk:()=>_m,vHH:()=>Re,vpe:()=>Ga,wAp:()=>Qt,xp6:()=>SE,ynx:()=>Ou,z2F:()=>n_,zSh:()=>My,zs3:()=>Ml});var p=U(7579),ne=U(727),F=U(9751),oe=U(6451),de=U(3099);function _e(o){for(let a in o)if(o[a]===_e)return a;throw Error("Could not find renamed property on target object.")}function he(o,a){for(const c in a)a.hasOwnProperty(c)&&!o.hasOwnProperty(c)&&(o[c]=a[c])}function we(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(we).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function Te(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const Q=_e({__forward_ref__:_e});function W(o){return o.__forward_ref__=W,o.toString=function(){return we(this())},o}function X(o){return We(o)?o():o}function We(o){return"function"==typeof o&&o.hasOwnProperty(Q)&&o.__forward_ref__===W}class Re extends Error{constructor(a,c){super(function vt(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}(a,c)),this.code=a}}function be(o){return"string"==typeof o?o:null==o?"":String(o)}function Be(o,a){throw new Re(-201,!1)}function ue(o,a){null==o&&function re(o,a,c,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${c} ${d} ${a} <=Actual]`))}(a,o,null,"!=")}function De(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Ht(o){return{providers:o.providers||[],imports:o.imports||[]}}function On(o){return pn(o,hn)||pn(o,ii)}function Ut(o){return null!==On(o)}function pn(o,a){return o.hasOwnProperty(a)?o[a]:null}function Dr(o){return o&&(o.hasOwnProperty(mr)||o.hasOwnProperty(pi))?o[mr]:null}const hn=_e({\u0275prov:_e}),mr=_e({\u0275inj:_e}),ii=_e({ngInjectableDef:_e}),pi=_e({ngInjectorDef:_e});var At=(()=>((At=At||{})[At.Default=0]="Default",At[At.Host=1]="Host",At[At.Self=2]="Self",At[At.SkipSelf=4]="SkipSelf",At[At.Optional=8]="Optional",At))();let ns;function Xn(o){const a=ns;return ns=o,a}function po(o,a,c){const d=On(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&At.Optional?null:void 0!==a?a:void Be(we(o))}function Hn(o){return{toString:o}.toString()}var qr=(()=>((qr=qr||{})[qr.OnPush=0]="OnPush",qr[qr.Default=1]="Default",qr))(),Ot=(()=>{return(o=Ot||(Ot={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Ot;var o})();const Vn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Kr={},Jt=[],qs=_e({\u0275cmp:_e}),Sn=_e({\u0275dir:_e}),go=_e({\u0275pipe:_e}),En=_e({\u0275mod:_e}),Or=_e({\u0275fac:_e}),Ri=_e({__NG_ELEMENT_ID__:_e});let Le=0;function Y(o){return Hn(()=>{const c=!0===o.standalone,d={},h={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===qr.OnPush,directiveDefs:null,pipeDefs:null,standalone:c,dependencies:c&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||Jt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Ot.Emulated,id:"c"+Le++,styles:o.styles||Jt,_:null,setInput:null,schemas:o.schemas||null,tView:null},_=o.dependencies,v=o.features;return h.inputs=q(o.inputs,d),h.outputs=q(o.outputs),v&&v.forEach(T=>T(h)),h.directiveDefs=_?()=>("function"==typeof _?_():_).map(rt).filter(ot):null,h.pipeDefs=_?()=>("function"==typeof _?_():_).map(dt).filter(ot):null,h})}function rt(o){return fe(o)||ae(o)}function ot(o){return null!==o}function Tt(o){return Hn(()=>({type:o.type,bootstrap:o.bootstrap||Jt,declarations:o.declarations||Jt,imports:o.imports||Jt,exports:o.exports||Jt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function q(o,a){if(null==o)return Kr;const c={};for(const d in o)if(o.hasOwnProperty(d)){let h=o[d],_=h;Array.isArray(h)&&(_=h[1],h=h[0]),c[h]=d,a&&(a[h]=_)}return c}const G=Y;function ee(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function fe(o){return o[qs]||null}function ae(o){return o[Sn]||null}function dt(o){return o[go]||null}function zt(o){const a=fe(o)||ae(o)||dt(o);return null!==a&&a.standalone}function gn(o,a){const c=o[En]||null;if(!c&&!0===a)throw new Error(`Type ${we(o)} does not have '\u0275mod' property.`);return c}function ln(o){return Array.isArray(o)&&"object"==typeof o[1]}function Ni(o){return Array.isArray(o)&&!0===o[1]}function rs(o){return 0!=(8&o.flags)}function Ku(o){return 2==(2&o.flags)}function qc(o){return 1==(1&o.flags)}function Hi(o){return null!==o.template}function cd(o){return 0!=(256&o[2])}function eu(o,a){return o.hasOwnProperty(Or)?o[Or]:null}class vo{constructor(a,c,d){this.previousValue=a,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function qo(){return ya}function ya(o){return o.type.prototype.ngOnChanges&&(o.setInput=Zc),Kc}function Kc(){const o=rf(this),a=o?.current;if(a){const c=o.previous;if(c===Kr)o.previous=a;else for(let d in a)c[d]=a[d];o.current=null,this.ngOnChanges(a)}}function Zc(o,a,c,d){const h=rf(o)||function sf(o,a){return o[Qc]=a}(o,{previous:Kr,current:null}),_=h.current||(h.current={}),v=h.previous,T=this.declaredInputs[c],A=v[T];_[T]=new vo(A&&A.currentValue,a,v===Kr),o[d]=a}qo.ngInherit=!0;const Qc="__ngSimpleChanges__";function rf(o){return o[Qc]||null}function Fr(o){for(;Array.isArray(o);)o=o[0];return o}function tu(o,a){return Fr(a[o])}function ss(o,a){return Fr(a[o.index])}function Yu(o,a){return o.data[a]}function Zr(o,a){const c=a[o];return ln(c)?c:c[0]}function Yc(o){return 64==(64&o[2])}function Zs(o,a){return null==a?null:o[a]}function va(o){o[18]=0}function gs(o,a){o[5]+=a;let c=o,d=o[3];for(;null!==d&&(1===a&&1===c[5]||-1===a&&0===c[5]);)d[5]+=a,c=d,d=d[3]}const Kt={lFrame:ru(null),bindingsEnabled:!0};function hd(){return Kt.bindingsEnabled}function Ue(){return Kt.lFrame.lView}function mn(){return Kt.lFrame.tView}function Ea(o){return Kt.lFrame.contextLView=o,o[8]}function fd(o){return Kt.lFrame.contextLView=null,o}function Ir(){let o=pd();for(;null!==o&&64===o.type;)o=o.parent;return o}function pd(){return Kt.lFrame.currentTNode}function Gi(o,a){const c=Kt.lFrame;c.currentTNode=o,c.isParent=a}function Jc(){return Kt.lFrame.isParent}function Ju(){Kt.lFrame.isParent=!1}function ki(){return Kt.lFrame.bindingIndex++}function Ys(o){const a=Kt.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,c}function Ig(o,a){const c=Kt.lFrame;c.bindingIndex=c.bindingRootIndex=o,Js(a)}function Js(o){Kt.lFrame.currentDirectiveIndex=o}function Xu(){return Kt.lFrame.currentQueryIndex}function ms(o){Kt.lFrame.currentQueryIndex=o}function Q_(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function _d(o,a,c){if(c&At.SkipSelf){let h=a,_=o;for(;!(h=h.parent,null!==h||c&At.Host||(h=Q_(_),null===h||(_=_[15],10&h.type))););if(null===h)return!1;a=h,o=_}const d=Kt.lFrame=Eo();return d.currentTNode=a,d.lView=o,!0}function _s(o){const a=Eo(),c=o[1];Kt.lFrame=a,a.currentTNode=c.firstChild,a.lView=o,a.tView=c,a.contextLView=o,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function Eo(){const o=Kt.lFrame,a=null===o?null:o.child;return null===a?ru(o):a}function ru(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function yd(){const o=Kt.lFrame;return Kt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const vd=yd;function ec(){const o=yd();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Lr(){return Kt.lFrame.selectedIndex}function Qr(o){Kt.lFrame.selectedIndex=o}function sr(){const o=Kt.lFrame;return Yu(o.tView,o.selectedIndex)}function tl(o,a){for(let c=a.directiveStart,d=a.directiveEnd;c<d;c++){const _=o.data[c].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:T,ngAfterViewInit:A,ngAfterViewChecked:R,ngOnDestroy:k}=_;v&&(o.contentHooks||(o.contentHooks=[])).push(-c,v),T&&((o.contentHooks||(o.contentHooks=[])).push(c,T),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(c,T)),A&&(o.viewHooks||(o.viewHooks=[])).push(-c,A),R&&((o.viewHooks||(o.viewHooks=[])).push(c,R),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(c,R)),null!=k&&(o.destroyHooks||(o.destroyHooks=[])).push(c,k)}}function Xs(o,a,c){Id(o,a,3,c)}function Qo(o,a,c,d){(3&o[2])===c&&Id(o,a,c,d)}function Ia(o,a){let c=o[2];(3&c)===a&&(c&=2047,c+=1,o[2]=c)}function Id(o,a,c,d){const _=d??-1,v=a.length-1;let T=0;for(let A=void 0!==d?65535&o[18]:0;A<v;A++)if("number"==typeof a[A+1]){if(T=a[A],null!=d&&T>=d)break}else a[A]<0&&(o[18]+=65536),(T<_||-1==_)&&(wd(o,c,a,A),o[18]=(4294901760&o[18])+A+2),A++}function wd(o,a,c,d){const h=c[d]<0,_=c[d+1],T=o[h?-c[d]:c[d]];if(h){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{_.call(T)}finally{}}}else try{_.call(T)}finally{}}class wa{constructor(a,c,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function rl(o,a,c){let d=0;for(;d<c.length;){const h=c[d];if("number"==typeof h){if(0!==h)break;d++;const _=c[d++],v=c[d++],T=c[d++];o.setAttribute(a,v,T,_)}else{const _=h,v=c[++d];il(_)?o.setProperty(a,_,v):o.setAttribute(a,_,v),d++}}return d}function ic(o){return 3===o||4===o||6===o}function il(o){return 64===o.charCodeAt(0)}function sc(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let c=-1;for(let d=0;d<a.length;d++){const h=a[d];"number"==typeof h?c=h:0===c||Cd(o,c,h,null,-1===c||2===c?a[++d]:null)}}return o}function Cd(o,a,c,d,h){let _=0,v=o.length;if(-1===a)v=-1;else for(;_<o.length;){const T=o[_++];if("number"==typeof T){if(T===a){v=-1;break}if(T>a){v=_-1;break}}}for(;_<o.length;){const T=o[_];if("number"==typeof T)break;if(T===c){if(null===d)return void(null!==h&&(o[_+1]=h));if(d===o[_+1])return void(o[_+2]=h)}_++,null!==d&&_++,null!==h&&_++}-1!==v&&(o.splice(v,0,a),_=v+1),o.splice(_++,0,c),null!==d&&o.splice(_++,0,d),null!==h&&o.splice(_++,0,h)}function _f(o){return-1!==o}function su(o){return 32767&o}function wo(o,a){let c=function yf(o){return o>>16}(o),d=a;for(;c>0;)d=d[15],c--;return d}let ou=!0;function oc(o){const a=ou;return ou=o,a}let ac=0;const ys={};function Ca(o,a){const c=To(o,a);if(-1!==c)return c;const d=a[1];d.firstCreatePass&&(o.injectorIndex=a.length,Dd(d.data,o),Dd(a,null),Dd(d.blueprint,null));const h=uc(o,a),_=o.injectorIndex;if(_f(h)){const v=su(h),T=wo(h,a),A=T[1].data;for(let R=0;R<8;R++)a[_+R]=T[v+R]|A[v+R]}return a[_+8]=h,_}function Dd(o,a){o.push(0,0,0,0,0,0,0,0,a)}function To(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function uc(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let c=0,d=null,h=a;for(;null!==h;){if(d=Ef(h),null===d)return-1;if(c++,h=h[15],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return-1}function sl(o,a,c){!function bd(o,a,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty(Ri)&&(d=c[Ri]),null==d&&(d=c[Ri]=ac++);const h=255&d;a.data[o+(h>>5)]|=1<<h}(o,a,c)}function al(o,a,c){if(c&At.Optional||void 0!==o)return o;Be()}function vf(o,a,c,d){if(c&At.Optional&&void 0===d&&(d=null),0==(c&(At.Self|At.Host))){const h=o[9],_=Xn(void 0);try{return h?h.get(a,d,c&At.Optional):po(a,d,c&At.Optional)}finally{Xn(_)}}return al(d,0,c)}function ul(o,a,c,d=At.Default,h){if(null!==o){if(1024&a[2]){const v=function cl(o,a,c,d,h){let _=o,v=a;for(;null!==_&&null!==v&&1024&v[2]&&!(256&v[2]);){const T=Sd(_,v,c,d|At.Self,ys);if(T!==ys)return T;let A=_.parent;if(!A){const R=v[21];if(R){const k=R.get(c,ys,d);if(k!==ys)return k}A=Ef(v),v=v[15]}_=A}return h}(o,a,c,d,ys);if(v!==ys)return v}const _=Sd(o,a,c,d,ys);if(_!==ys)return _}return vf(a,c,d,h)}function Sd(o,a,c,d,h){const _=function ey(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(Ri)?o[Ri]:void 0;return"number"==typeof a?a>=0?255&a:cE:a}(c);if("function"==typeof _){if(!_d(a,o,d))return d&At.Host?al(h,0,d):vf(a,c,d,h);try{const v=_(d);if(null!=v||d&At.Optional)return v;Be()}finally{vd()}}else if("number"==typeof _){let v=null,T=To(o,a),A=-1,R=d&At.Host?a[16][6]:null;for((-1===T||d&At.SkipSelf)&&(A=-1===T?uc(o,a):a[T+8],-1!==A&&ny(d,!1)?(v=a[1],T=su(A),a=wo(A,a)):T=-1);-1!==T;){const k=a[1];if(ty(_,T,k.data)){const L=X_(T,a,c,v,d,R);if(L!==ys)return L}A=a[T+8],-1!==A&&ny(d,a[1].data[T+8]===R)&&ty(_,T,a)?(v=k,T=su(A),a=wo(A,a)):T=-1}}return h}function X_(o,a,c,d,h,_){const v=a[1],T=v.data[o+8],k=au(T,v,c,null==d?Ku(T)&&ou:d!=v&&0!=(3&T.type),h&At.Host&&_===T);return null!==k?uu(a,v,k,T):ys}function au(o,a,c,d,h){const _=o.providerIndexes,v=a.data,T=1048575&_,A=o.directiveStart,k=_>>20,K=h?T+k:o.directiveEnd;for(let se=d?T:T+k;se<K;se++){const Pe=v[se];if(se<A&&c===Pe||se>=A&&Pe.type===c)return se}if(h){const se=v[A];if(se&&Hi(se)&&se.type===c)return A}return null}function uu(o,a,c,d){let h=o[c];const _=a.data;if(function wg(o){return o instanceof wa}(h)){const v=h;v.resolving&&function Pt(o,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Re(-200,`Circular dependency in DI detected for ${o}${c}`)}(function ye(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():be(o)}(_[c]));const T=oc(v.canSeeViewProviders);v.resolving=!0;const A=v.injectImpl?Xn(v.injectImpl):null;_d(o,d,At.Default);try{h=o[c]=v.factory(void 0,_,o,d),a.firstCreatePass&&c>=d.directiveStart&&function mf(o,a,c){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:_}=a.type.prototype;if(d){const v=ya(a);(c.preOrderHooks||(c.preOrderHooks=[])).push(o,v),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(o,v)}h&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-o,h),_&&((c.preOrderHooks||(c.preOrderHooks=[])).push(o,_),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(o,_))}(c,_[c],a)}finally{null!==A&&Xn(A),oc(T),v.resolving=!1,vd()}}return h}function ty(o,a,c){return!!(c[a+(o>>5)]&1<<o)}function ny(o,a){return!(o&At.Self||o&At.Host&&a)}class cc{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,d){return ul(this._tNode,this._lView,a,d,c)}}function cE(){return new cc(Ir(),Ue())}function Co(o){return Hn(()=>{const a=o.prototype.constructor,c=a[Or]||cu(a),d=Object.prototype;let h=Object.getPrototypeOf(o.prototype).constructor;for(;h&&h!==d;){const _=h[Or]||cu(h);if(_&&_!==c)return _;h=Object.getPrototypeOf(h)}return _=>new _})}function cu(o){return We(o)?()=>{const a=cu(X(o));return a&&a()}:eu(o)}function Ef(o){const a=o[1],c=a.type;return 2===c?a.declTNode:1===c?o[6]:null}function xd(o){return function ol(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const c=o.attrs;if(c){const d=c.length;let h=0;for(;h<d;){const _=c[h];if(ic(_))break;if(0===_)h+=2;else if("number"==typeof _)for(h++;h<d&&"string"==typeof c[h];)h++;else{if(_===a)return c[h+1];h+=2}}}return null}(Ir(),o)}const lu="__parameters__";function Yo(o,a,c){return Hn(()=>{const d=function du(o){return function(...c){if(o){const d=o(...c);for(const h in d)this[h]=d[h]}}}(a);function h(..._){if(this instanceof h)return d.apply(this,_),this;const v=new h(..._);return T.annotation=v,T;function T(A,R,k){const L=A.hasOwnProperty(lu)?A[lu]:Object.defineProperty(A,lu,{value:[]})[lu];for(;L.length<=k;)L.push(null);return(L[k]=L[k]||[]).push(v),A}}return c&&(h.prototype=Object.create(c.prototype)),h.prototype.ngMetadataName=o,h.annotationCls=h,h})}class kn{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=De({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Oi(o,a){void 0===a&&(a=o);for(let c=0;c<o.length;c++){let d=o[c];Array.isArray(d)?(a===o&&(a=o.slice(0,c)),Oi(d,a)):a!==o&&a.push(d)}return a}function Os(o,a){o.forEach(c=>Array.isArray(c)?Os(c,a):a(c))}function Ag(o,a,c){a>=o.length?o.push(c):o.splice(a,0,c)}function hu(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function qi(o,a,c){let d=fc(o,a);return d>=0?o[1|d]=c:(d=~d,function iy(o,a,c,d){let h=o.length;if(h==a)o.push(c,d);else if(1===h)o.push(d,o[0]),o[0]=c;else{for(h--,o.push(o[h-1],o[h]);h>a;)o[h]=o[h-2],h--;o[a]=c,o[a+1]=d}}(o,d,a,c)),d}function kd(o,a){const c=fc(o,a);if(c>=0)return o[1|c]}function fc(o,a){return function pu(o,a,c){let d=0,h=o.length>>c;for(;h!==d;){const _=d+(h-d>>1),v=o[_<<c];if(a===v)return _<<c;v>a?h=_:d=_+1}return~(h<<c)}(o,a,1)}const ai={},Gn="__NG_DI_FLAG__",Ao="ngTempTokenPath",Wn=/\n/gm,pl="__source";let to;function wr(o){const a=to;return to=o,a}function pc(o,a=At.Default){if(void 0===to)throw new Re(-203,!1);return null===to?po(o,void 0,a):to.get(o,a&At.Optional?null:void 0,a)}function Xt(o,a=At.Default){return(function fo(){return ns}()||pc)(X(o),a)}function Zt(o,a=At.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),Xt(o,a)}function Fd(o){const a=[];for(let c=0;c<o.length;c++){const d=X(o[c]);if(Array.isArray(d)){if(0===d.length)throw new Re(900,!1);let h,_=At.Default;for(let v=0;v<d.length;v++){const T=d[v],A=gl(T);"number"==typeof A?-1===A?h=T.token:_|=A:h=T}a.push(Xt(h,_))}else a.push(Xt(d))}return a}function vs(o,a){return o[Gn]=a,o.prototype[Gn]=a,o}function gl(o){return o[Gn]}const Vd=vs(Yo("Optional"),8),H=vs(Yo("SkipSelf"),4);var Is=(()=>((Is=Is||{})[Is.Important=1]="Important",Is[Is.DashCase=2]="DashCase",Is))();const O=new Map;let j=0;const zn="__ngContext__";function an(o,a){ln(a)?(o[zn]=a[20],function ve(o){O.set(o[20],o)}(a)):o[zn]=a}function Cl(o,a){return undefined(o,a)}function Eu(o){const a=o[3];return Ni(a)?a[3]:a}function Ug(o){return Sf(o[13])}function ly(o){return Sf(o[4])}function Sf(o){for(;null!==o&&!Ni(o);)o=o[4];return o}function vc(o,a,c,d,h){if(null!=d){let _,v=!1;Ni(d)?_=d:ln(d)&&(v=!0,d=d[0]);const T=Fr(d);0===o&&null!==c?null==h?Mf(a,c,T):ws(a,c,T,h||null,!0):1===o&&null!==c?ws(a,c,T,h||null,!0):2===o?function wu(o,a,c){const d=Tc(o,a);d&&function wc(o,a,c,d){o.removeChild(a,c,d)}(o,d,a,c)}(a,T,v):3===o&&a.destroyNode(T),null!=_&&function Lf(o,a,c,d,h){const _=c[7];_!==Fr(c)&&vc(a,o,d,_,h);for(let T=10;T<c.length;T++){const A=c[T];Tu(A[1],A,o,a,d,_)}}(a,o,_,c,h)}}function Hd(o,a,c){return o.createElement(a,c)}function fy(o,a){const c=o[9],d=c.indexOf(a),h=a[3];512&a[2]&&(a[2]&=-513,gs(h,-1)),c.splice(d,1)}function Ic(o,a){if(o.length<=10)return;const c=10+a,d=o[c];if(d){const h=d[17];null!==h&&h!==o&&fy(h,d),a>0&&(o[c-1][4]=d[4]);const _=hu(o,10+a);!function dy(o,a){Tu(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(d[1],d);const v=_[19];null!==v&&v.detachView(_[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function $g(o,a){if(!(128&a[2])){const c=a[11];c.destroyNode&&Tu(o,a,c,3,null,null),function Bg(o){let a=o[13];if(!a)return Pf(o[1],o);for(;a;){let c=null;if(ln(a))c=a[13];else{const d=a[10];d&&(c=d)}if(!c){for(;a&&!a[4]&&a!==o;)ln(a)&&Pf(a[1],a),a=a[3];null===a&&(a=o),ln(a)&&Pf(a[1],a),c=a&&a[4]}a=c}}(a)}}function Pf(o,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function Gd(o,a){let c;if(null!=o&&null!=(c=o.destroyHooks))for(let d=0;d<c.length;d+=2){const h=a[c[d]];if(!(h instanceof wa)){const _=c[d+1];if(Array.isArray(_))for(let v=0;v<_.length;v+=2){const T=h[_[v]],A=_[v+1];try{A.call(T)}finally{}}else try{_.call(h)}finally{}}}}(o,a),function py(o,a){const c=o.cleanup,d=a[7];let h=-1;if(null!==c)for(let _=0;_<c.length-1;_+=2)if("string"==typeof c[_]){const v=c[_+1],T="function"==typeof v?v(a):Fr(a[v]),A=d[h=c[_+2]],R=c[_+3];"boolean"==typeof R?T.removeEventListener(c[_],A,R):R>=0?d[h=R]():d[h=-R].unsubscribe(),_+=2}else{const v=d[h=c[_+1]];c[_].call(v)}if(null!==d){for(let _=h+1;_<d.length;_++)(0,d[_])();a[7]=null}}(o,a),1===a[1].type&&a[11].destroy();const c=a[17];if(null!==c&&Ni(a[3])){c!==a[3]&&fy(c,a);const d=a[19];null!==d&&d.detachView(o)}!function Ke(o){O.delete(o[20])}(a)}}function gy(o,a,c){return function my(o,a,c){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return c[0];if(2&d.flags){const h=o.data[d.directiveStart].encapsulation;if(h===Ot.None||h===Ot.Emulated)return null}return ss(d,c)}(o,a.parent,c)}function ws(o,a,c,d,h){o.insertBefore(a,c,d,h)}function Mf(o,a,c){o.appendChild(a,c)}function _y(o,a,c,d,h){null!==d?ws(o,a,c,d,h):Mf(o,a,c)}function Tc(o,a){return o.parentNode(a)}let Dc,Ki=function kf(o,a,c){return 40&o.type?ss(o,c):null};function Iu(o,a,c,d){const h=gy(o,d,a),_=a[11],T=function Al(o,a,c){return Ki(o,a,c)}(d.parent||a[6],d,a);if(null!=h)if(Array.isArray(c))for(let A=0;A<c.length;A++)_y(_,h,c[A],T,!1);else _y(_,h,c,T,!1)}function qd(o,a){if(null!==a){const c=a.type;if(3&c)return ss(a,o);if(4&c)return Ff(-1,o[a.index]);if(8&c){const d=a.child;if(null!==d)return qd(o,d);{const h=o[a.index];return Ni(h)?Ff(-1,h):Fr(h)}}if(32&c)return Cl(a,o)()||Fr(o[a.index]);{const d=Of(o,a);return null!==d?Array.isArray(d)?d[0]:qd(Eu(o[16]),d):qd(o,a.next)}}return null}function Of(o,a){return null!==a?o[16][6].projection[a.projection]:null}function Ff(o,a){const c=10+o+1;if(c<a.length){const d=a[c],h=d[1].firstChild;if(null!==h)return qd(d,h)}return a[7]}function Ac(o,a,c,d,h,_,v){for(;null!=c;){const T=d[c.index],A=c.type;if(v&&0===a&&(T&&an(Fr(T),d),c.flags|=4),64!=(64&c.flags))if(8&A)Ac(o,a,c.child,d,h,_,!1),vc(a,o,h,T,_);else if(32&A){const R=Cl(c,d);let k;for(;k=R();)vc(a,o,h,k,_);vc(a,o,h,T,_)}else 16&A?Vf(o,a,d,c,h,_):vc(a,o,h,T,_);c=v?c.projectionNext:c.next}}function Tu(o,a,c,d,h,_){Ac(c,d,o.firstChild,a,h,_,!1)}function Vf(o,a,c,d,h,_){const v=c[16],A=v[6].projection[d.projection];if(Array.isArray(A))for(let R=0;R<A.length;R++)vc(a,o,h,A[R],_);else Ac(o,a,A,v[3],h,_,!0)}function Uf(o,a,c){o.setAttribute(a,"style",c)}function Kd(o,a,c){""===c?o.removeAttribute(a,"class"):o.setAttribute(a,"class",c)}function Bf(o){Dc=o}class zg{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ci(o){return o instanceof zg?o.changingThisBreaksApplicationSecurity:o}const m=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Br=(()=>((Br=Br||{})[Br.NONE=0]="NONE",Br[Br.HTML=1]="HTML",Br[Br.STYLE=2]="STYLE",Br[Br.SCRIPT=3]="SCRIPT",Br[Br.URL=4]="URL",Br[Br.RESOURCE_URL=5]="RESOURCE_URL",Br))();function gE(o){const a=function xl(){const o=Ue();return o&&o[12]}();return a?a.sanitize(Br.URL,o)||"":function ea(o,a){const c=function tr(o){return o instanceof zg&&o.getTypeName()||null}(o);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===a}(o,"URL")?ci(o):function E(o){return(o=String(o)).match(m)?o:"unsafe:"+o}(be(o))}const Dy=new kn("ENVIRONMENT_INITIALIZER"),Fa=new kn("INJECTOR",-1),mE=new kn("INJECTOR_DEF_TYPES");class rA{get(a,c=ai){if(c===ai){const d=new Error(`NullInjectorError: No provider for ${we(a)}!`);throw d.name="NullInjectorError",d}return c}}function iA(...o){return{\u0275providers:Sy(0,o)}}function Sy(o,...a){const c=[],d=new Set;let h;return Os(a,_=>{const v=_;xy(v,c,[],d)&&(h||(h=[]),h.push(v))}),void 0!==h&&Gf(h,c),c}function Gf(o,a){for(let c=0;c<o.length;c++){const{providers:h}=o[c];Os(h,_=>{a.push(_)})}}function xy(o,a,c,d){if(!(o=X(o)))return!1;let h=null,_=Dr(o);const v=!_&&fe(o);if(_||v){if(v&&!v.standalone)return!1;h=o}else{const A=o.ngModule;if(_=Dr(A),!_)return!1;h=A}const T=d.has(h);if(v){if(T)return!1;if(d.add(h),v.dependencies){const A="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const R of A)xy(R,a,c,d)}}else{if(!_)return!1;{if(null!=_.imports&&!T){let R;d.add(h);try{Os(_.imports,k=>{xy(k,a,c,d)&&(R||(R=[]),R.push(k))})}finally{}void 0!==R&&Gf(R,a)}if(!T){const R=eu(h)||(()=>new h);a.push({provide:h,useFactory:R,deps:Jt},{provide:mE,useValue:h,multi:!0},{provide:Dy,useValue:()=>Xt(h),multi:!0})}const A=_.providers;null==A||T||Os(A,k=>{a.push(k)})}}return h!==o&&void 0!==o.providers}const Ry=_e({provide:String,useValue:_e});function Py(o){return null!==o&&"object"==typeof o&&Ry in o}function Rl(o){return"function"==typeof o}const My=new kn("Set Injector scope."),Jg={},_E={};let Xg;function em(){return void 0===Xg&&(Xg=new rA),Xg}class Au{}class yE extends Au{constructor(a,c,d,h){super(),this.parent=c,this.source=d,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Oy(a,v=>this.processProvider(v)),this.records.set(Fa,Xd(void 0,this)),h.has("environment")&&this.records.set(Au,Xd(void 0,this));const _=this.records.get(My);null!=_&&"string"==typeof _.value&&this.scopes.add(_.value),this.injectorDefTypes=new Set(this.get(mE.multi,Jt,At.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const c=wr(this),d=Xn(void 0);try{return a()}finally{wr(c),Xn(d)}}get(a,c=ai,d=At.Default){this.assertNotDestroyed();const h=wr(this),_=Xn(void 0);try{if(!(d&At.SkipSelf)){let T=this.records.get(a);if(void 0===T){const A=function Mo(o){return"function"==typeof o||"object"==typeof o&&o instanceof kn}(a)&&On(a);T=A&&this.injectableDefInScope(A)?Xd(Ny(a),Jg):null,this.records.set(a,T)}if(null!=T)return this.hydrate(a,T)}return(d&At.Self?em():this.parent).get(a,c=d&At.Optional&&c===ai?null:c)}catch(v){if("NullInjectorError"===v.name){if((v[Ao]=v[Ao]||[]).unshift(we(a)),h)throw v;return function gc(o,a,c,d){const h=o[Ao];throw a[pl]&&h.unshift(a[pl]),o.message=function Sa(o,a,c,d=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let h=we(a);if(Array.isArray(a))h=a.map(we).join(" -> ");else if("object"==typeof a){let _=[];for(let v in a)if(a.hasOwnProperty(v)){let T=a[v];_.push(v+":"+("string"==typeof T?JSON.stringify(T):we(T)))}h=`{${_.join(", ")}}`}return`${c}${d?"("+d+")":""}[${h}]: ${o.replace(Wn,"\n  ")}`}("\n"+o.message,h,c,d),o.ngTokenPath=h,o[Ao]=null,o}(v,a,"R3InjectorError",this.source)}throw v}finally{Xn(_),wr(h)}}resolveInjectorInitializers(){const a=wr(this),c=Xn(void 0);try{const d=this.get(Dy.multi,Jt,At.Self);for(const h of d)h()}finally{wr(a),Xn(c)}}toString(){const a=[],c=this.records;for(const d of c.keys())a.push(we(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Re(205,!1)}processProvider(a){let c=Rl(a=X(a))?a:X(a&&a.provide);const d=function aA(o){return Py(o)?Xd(void 0,o.useValue):Xd(vE(o),Jg)}(a);if(Rl(a)||!0!==a.multi)this.records.get(c);else{let h=this.records.get(c);h||(h=Xd(void 0,Jg,!0),h.factory=()=>Fd(h.multi),this.records.set(c,h)),c=a,h.multi.push(a)}this.records.set(c,d)}hydrate(a,c){return c.value===Jg&&(c.value=_E,c.value=c.factory()),"object"==typeof c.value&&c.value&&function ky(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=X(a.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}}function Ny(o){const a=On(o),c=null!==a?a.factory:eu(o);if(null!==c)return c;if(o instanceof kn)throw new Re(204,!1);if(o instanceof Function)return function Jd(o){const a=o.length;if(a>0)throw function hc(o,a){const c=[];for(let d=0;d<o;d++)c.push(a);return c}(a,"?"),new Re(204,!1);const c=function Jn(o){const a=o&&(o[hn]||o[ii]);if(a){const c=function Fn(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),a}return null}(o);return null!==c?()=>c.factory(o):()=>new o}(o);throw new Re(204,!1)}function vE(o,a,c){let d;if(Rl(o)){const h=X(o);return eu(h)||Ny(h)}if(Py(o))d=()=>X(o.useValue);else if(function oA(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...Fd(o.deps||[]));else if(function Qg(o){return!(!o||!o.useExisting)}(o))d=()=>Xt(X(o.useExisting));else{const h=X(o&&(o.useClass||o.provide));if(!function uA(o){return!!o.deps}(o))return eu(h)||Ny(h);d=()=>new h(...Fd(o.deps))}return d}function Xd(o,a,c=!1){return{factory:o,value:a,multi:c?[]:void 0}}function cA(o){return!!o.\u0275providers}function Oy(o,a){for(const c of o)Array.isArray(c)?Oy(c,a):cA(c)?Oy(c.\u0275providers,a):a(c)}class lA{}class dR{resolveComponentFactory(a){throw function Va(o){const a=Error(`No component factory found for ${we(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let eh=(()=>{class o{}return o.NULL=new dR,o})();function bu(){return th(Ir(),Ue())}function th(o,a){return new nh(ss(o,a))}let nh=(()=>{class o{constructor(c){this.nativeElement=c}}return o.__NG_ELEMENT_ID__=bu,o})();function qf(o){return o instanceof nh?o.nativeElement:o}class EE{}let xc=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function ta(){const o=Ue(),c=Zr(Ir().index,o);return(ln(c)?c:o)[11]}(),o})(),us=(()=>{class o{}return o.\u0275prov=De({token:o,providedIn:"root",factory:()=>null}),o})();class tm{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const nm=new tm("14.3.0"),rh={};function Pl(o){return o.ngOriginalError}class rm{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a);this._console.error("ERROR",a),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&Pl(a);for(;c&&Pl(c);)c=Pl(c);return c||null}}function Rc(o){return o instanceof Function?o():o}function TE(o,a,c){let d=o.length;for(;;){const h=o.indexOf(a,c);if(-1===h)return h;if(0===h||o.charCodeAt(h-1)<=32){const _=a.length;if(h+_===d||o.charCodeAt(h+_)<=32)return h}c=h+1}}const CE="ng-template";function gA(o,a,c){let d=0;for(;d<o.length;){let h=o[d++];if(c&&"class"===h){if(h=o[d],-1!==TE(h.toLowerCase(),a,0))return!0}else if(1===h){for(;d<o.length&&"string"==typeof(h=o[d++]);)if(h.toLowerCase()===a)return!0;return!1}}return!1}function AE(o){return 4===o.type&&o.value!==CE}function mA(o,a,c){return a===(4!==o.type||c?o.value:CE)}function _A(o,a,c){let d=4;const h=o.attrs||[],_=function EA(o){for(let a=0;a<o.length;a++)if(ic(o[a]))return a;return o.length}(h);let v=!1;for(let T=0;T<a.length;T++){const A=a[T];if("number"!=typeof A){if(!v)if(4&d){if(d=2|1&d,""!==A&&!mA(o,A,c)||""===A&&1===a.length){if(na(d))return!1;v=!0}}else{const R=8&d?A:a[++T];if(8&d&&null!==o.attrs){if(!gA(o.attrs,R,c)){if(na(d))return!1;v=!0}continue}const L=yA(8&d?"class":A,h,AE(o),c);if(-1===L){if(na(d))return!1;v=!0;continue}if(""!==R){let K;K=L>_?"":h[L+1].toLowerCase();const se=8&d?K:null;if(se&&-1!==TE(se,R,0)||2&d&&R!==K){if(na(d))return!1;v=!0}}}}else{if(!v&&!na(d)&&!na(A))return!1;if(v&&na(A))continue;v=!1,d=A|1&d}}return na(d)||v}function na(o){return 0==(1&o)}function yA(o,a,c,d){if(null===a)return-1;let h=0;if(d||!c){let _=!1;for(;h<a.length;){const v=a[h];if(v===o)return h;if(3===v||6===v)_=!0;else{if(1===v||2===v){let T=a[++h];for(;"string"==typeof T;)T=a[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=_?1:2}return-1}return function IA(o,a){let c=o.indexOf(4);if(c>-1)for(c++;c<o.length;){const d=o[c];if("number"==typeof d)return-1;if(d===a)return c;c++}return-1}(a,o)}function bE(o,a,c=!1){for(let d=0;d<a.length;d++)if(_A(o,a[d],c))return!0;return!1}function DE(o,a){return o?":not("+a.trim()+")":a}function TA(o){let a=o[0],c=1,d=2,h="",_=!1;for(;c<o.length;){let v=o[c];if("string"==typeof v)if(2&d){const T=o[++c];h+="["+v+(T.length>0?'="'+T+'"':"")+"]"}else 8&d?h+="."+v:4&d&&(h+=" "+v);else""!==h&&!na(v)&&(a+=DE(_,h),h=""),d=v,_=_||!na(d);c++}return""!==h&&(a+=DE(_,h)),a}const on={};function SE(o){xE(mn(),Ue(),Lr()+o,!1)}function xE(o,a,c,d){if(!d)if(3==(3&a[2])){const _=o.preOrderCheckHooks;null!==_&&Xs(a,_,c)}else{const _=o.preOrderHooks;null!==_&&Qo(a,_,0,c)}Qr(c)}function NE(o,a=null,c=null,d){const h=kE(o,a,c,d);return h.resolveInjectorInitializers(),h}function kE(o,a=null,c=null,d,h=new Set){const _=[c||Jt,iA(o)];return d=d||("object"==typeof o?void 0:we(o)),new yE(_,a||em(),d||null,h)}let Ml=(()=>{class o{static create(c,d){if(Array.isArray(c))return NE({name:""},d,c,"");{const h=c.name??"";return NE({name:h},c.parent,c.providers,h)}}}return o.THROW_IF_NOT_FOUND=ai,o.NULL=new rA,o.\u0275prov=De({token:o,providedIn:"any",factory:()=>Xt(Fa)}),o.__NG_ELEMENT_ID__=-1,o})();function im(o,a=At.Default){const c=Ue();return null===c?Xt(o,a):ul(Ir(),c,X(o),a)}function VA(){throw new Error("invalid")}function nn(o,a){return o<<17|a<<2}function Cs(o){return o>>17&32767}function Lt(o){return 2|o}function No(o){return(131068&o)>>2}function An(o,a){return-131069&o|a<<2}function Rr(o){return 1|o}function qA(o,a){const c=o.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const h=c[d],_=c[d+1];if(-1!==_){const v=o.data[_];ms(h),v.contentQueries(2,a[_],_)}}}function zy(o,a,c,d,h,_,v,T,A,R,k){const L=a.blueprint.slice();return L[0]=h,L[2]=76|d,(null!==k||o&&1024&o[2])&&(L[2]|=1024),va(L),L[3]=L[15]=o,L[8]=c,L[10]=v||o&&o[10],L[11]=T||o&&o[11],L[12]=A||o&&o[12]||null,L[9]=R||o&&o[9]||null,L[6]=_,L[20]=function te(){return j++}(),L[21]=k,L[16]=2==a.type?o[16]:L,L}function Xf(o,a,c,d,h){let _=o.data[a];if(null===_)_=function qE(o,a,c,d,h){const _=pd(),v=Jc(),A=o.data[a]=function ZA(o,a,c,d,h,_){return{type:c,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?_:_&&_.parent,c,a,d,h);return null===o.firstChild&&(o.firstChild=A),null!==_&&(v?null==_.child&&null!==A.parent&&(_.child=A):null===_.next&&(_.next=A)),A}(o,a,c,d,h),function Eg(){return Kt.lFrame.inI18n}()&&(_.flags|=64);else if(64&_.type){_.type=c,_.value=d,_.attrs=h;const v=function Zo(){const o=Kt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();_.injectorIndex=null===v?-1:v.injectorIndex}return Gi(_,!0),_}function ep(o,a,c,d){if(0===c)return-1;const h=a.length;for(let _=0;_<c;_++)a.push(d),o.blueprint.push(d),o.data.push(null);return h}function WE(o,a,c){_s(a);try{const d=o.viewQuery;null!==d&&nI(1,d,c);const h=o.template;null!==h&&WA(o,a,h,1,c),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&qA(o,a),o.staticViewQueries&&nI(2,o.viewQuery,c);const _=o.components;null!==_&&function MR(o,a){for(let c=0;c<a.length;c++)fm(o,a[c])}(a,_)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{a[2]&=-5,ec()}}function qy(o,a,c,d){const h=a[2];if(128!=(128&h)){_s(a);try{va(a),function ff(o){return Kt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==c&&WA(o,a,c,2,d);const v=3==(3&h);if(v){const R=o.preOrderCheckHooks;null!==R&&Xs(a,R,null)}else{const R=o.preOrderHooks;null!==R&&Qo(a,R,0,null),Ia(a,0)}if(function Qy(o){for(let a=Ug(o);null!==a;a=ly(a)){if(!a[2])continue;const c=a[9];for(let d=0;d<c.length;d++){const h=c[d],_=h[3];0==(512&h[2])&&gs(_,1),h[2]|=512}}}(a),function tI(o){for(let a=Ug(o);null!==a;a=ly(a))for(let c=10;c<a.length;c++){const d=a[c],h=d[1];Yc(d)&&qy(h,d,h.template,d[8])}}(a),null!==o.contentQueries&&qA(o,a),v){const R=o.contentCheckHooks;null!==R&&Xs(a,R)}else{const R=o.contentHooks;null!==R&&Qo(a,R,1),Ia(a,1)}!function RR(o,a){const c=o.hostBindingOpCodes;if(null!==c)try{for(let d=0;d<c.length;d++){const h=c[d];if(h<0)Qr(~h);else{const _=h,v=c[++d],T=c[++d];Ig(v,_),T(2,a[_])}}}finally{Qr(-1)}}(o,a);const T=o.components;null!==T&&function PR(o,a){for(let c=0;c<a.length;c++)ch(o,a[c])}(a,T);const A=o.viewQuery;if(null!==A&&nI(2,A,d),v){const R=o.viewCheckHooks;null!==R&&Xs(a,R)}else{const R=o.viewHooks;null!==R&&Qo(a,R,2),Ia(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,gs(a[3],-1))}finally{ec()}}}function WA(o,a,c,d,h){const _=Lr(),v=2&d;try{Qr(-1),v&&a.length>22&&xE(o,a,22,!1),c(d,h)}finally{Qr(_)}}function KE(o,a,c){if(rs(a)){const h=a.directiveEnd;for(let _=a.directiveStart;_<h;_++){const v=o.data[_];v.contentQueries&&v.contentQueries(1,c[_],_)}}}function ZE(o,a,c){!hd()||(function kl(o,a,c,d){const h=c.directiveStart,_=c.directiveEnd;o.firstCreatePass||Ca(c,a),an(d,a);const v=c.initialInputs;for(let T=h;T<_;T++){const A=o.data[T],R=Hi(A);R&&Zy(a,c,A);const k=uu(a,o,T,c);an(k,a),null!==v&&dm(0,T-h,k,A,0,v),R&&(Zr(c.index,a)[8]=k)}}(o,a,c,ss(c,a)),128==(128&c.flags)&&function ei(o,a,c){const d=c.directiveStart,h=c.directiveEnd,_=c.index,v=function md(){return Kt.lFrame.currentDirectiveIndex}();try{Qr(_);for(let T=d;T<h;T++){const A=o.data[T],R=a[T];Js(T),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&xu(A,R)}}finally{Qr(-1),Js(v)}}(o,a,c))}function Wy(o,a,c=ss){const d=a.localNames;if(null!==d){let h=a.index+1;for(let _=0;_<d.length;_+=2){const v=d[_+1],T=-1===v?c(a,o):o[v];o[h++]=T}}}function QE(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=YE(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function YE(o,a,c,d,h,_,v,T,A,R){const k=22+d,L=k+h,K=function JE(o,a){const c=[];for(let d=0;d<a;d++)c.push(d<o?null:on);return c}(k,L),se="function"==typeof R?R():R;return K[1]={type:o,blueprint:K,template:c,queries:null,viewQuery:T,declTNode:a,data:K.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:A,consts:se,incompleteFirstPass:!1}}function Pc(o,a,c,d){const h=rI(a);null===c?h.push(d):(h.push(c),o.firstCreatePass&&iI(o).push(d,h.length-1))}function ar(o,a,c){for(let d in o)if(o.hasOwnProperty(d)){const h=o[d];(c=null===c?{}:c).hasOwnProperty(d)?c[d].push(a,h):c[d]=[a,h]}return c}function um(o,a){const d=a.directiveEnd,h=o.data,_=a.attrs,v=[];let T=null,A=null;for(let R=a.directiveStart;R<d;R++){const k=h[R],L=k.inputs,K=null===_||AE(a)?null:Ol(L,_);v.push(K),T=ar(L,R,T),A=ar(k.outputs,R,A)}null!==T&&(T.hasOwnProperty("class")&&(a.flags|=16),T.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=v,a.inputs=T,a.outputs=A}function XE(o,a){const c=Zr(a,o);16&c[2]||(c[2]|=32)}function eI(o,a,c,d){let h=!1;if(hd()){const _=function Ky(o,a,c){const d=o.directiveRegistry;let h=null;if(d)for(let _=0;_<d.length;_++){const v=d[_];bE(c,v.selectors,!1)&&(h||(h=[]),sl(Ca(c,a),o,v.type),Hi(v)?(cm(o,c),h.unshift(v)):h.push(v))}return h}(o,a,c),v=null===d?null:{"":-1};if(null!==_){h=!0,Mc(c,o.data.length,_.length);for(let k=0;k<_.length;k++){const L=_[k];L.providersResolver&&L.providersResolver(L)}let T=!1,A=!1,R=ep(o,a,_.length,null);for(let k=0;k<_.length;k++){const L=_[k];c.mergedAttrs=sc(c.mergedAttrs,L.hostAttrs),Nc(o,c,a,R,L),kR(R,L,v),null!==L.contentQueries&&(c.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(c.flags|=128);const K=L.type.prototype;!T&&(K.ngOnChanges||K.ngOnInit||K.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(c.index),T=!0),!A&&(K.ngOnChanges||K.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(c.index),A=!0),R++}um(o,c)}v&&function lm(o,a,c){if(a){const d=o.localNames=[];for(let h=0;h<a.length;h+=2){const _=c[a[h+1]];if(null==_)throw new Re(-301,!1);d.push(a[h],_)}}}(c,d,v)}return c.mergedAttrs=sc(c.mergedAttrs,c.attrs),h}function vi(o,a,c,d,h,_){const v=_.hostBindings;if(v){let T=o.hostBindingOpCodes;null===T&&(T=o.hostBindingOpCodes=[]);const A=~a.index;(function NR(o){let a=o.length;for(;a>0;){const c=o[--a];if("number"==typeof c&&c<0)return c}return 0})(T)!=A&&T.push(A),T.push(d,h,v)}}function xu(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function cm(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function kR(o,a,c){if(c){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)c[a.exportAs[d]]=o;Hi(a)&&(c[""]=o)}}function Mc(o,a,c){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+c,o.providerIndexes=a}function Nc(o,a,c,d,h){o.data[d]=h;const _=h.factory||(h.factory=eu(h.type)),v=new wa(_,Hi(h),im);o.blueprint[d]=v,c[d]=v,vi(o,a,0,d,ep(o,c,h.hostVars,on),h)}function Zy(o,a,c){const d=ss(a,o),h=QE(c),_=o[10],v=pm(o,zy(o,h,null,c.onPush?32:16,d,a,_,_.createRenderer(d,c),null,null,null));o[a.index]=v}function ds(o,a,c,d,h,_){const v=ss(o,a);!function sa(o,a,c,d,h,_,v){if(null==_)o.removeAttribute(a,h,c);else{const T=null==v?be(_):v(_,d||"",h);o.setAttribute(a,h,T,c)}}(a[11],v,_,o.value,c,d,h)}function dm(o,a,c,d,h,_){const v=_[a];if(null!==v){const T=d.setInput;for(let A=0;A<v.length;){const R=v[A++],k=v[A++],L=v[A++];null!==T?d.setInput(c,L,R,k):c[k]=L}}}function Ol(o,a){let c=null,d=0;for(;d<a.length;){const h=a[d];if(0!==h)if(5!==h){if("number"==typeof h)break;o.hasOwnProperty(h)&&(null===c&&(c=[]),c.push(h,o[h],a[d+1])),d+=2}else d+=2;else d+=4}return c}function uh(o,a,c,d){return new Array(o,!0,!1,a,null,0,d,c,null,null)}function ch(o,a){const c=Zr(a,o);if(Yc(c)){const d=c[1];48&c[2]?qy(d,c,d.template,c[8]):c[5]>0&&hm(c)}}function hm(o){for(let d=Ug(o);null!==d;d=ly(d))for(let h=10;h<d.length;h++){const _=d[h];if(Yc(_))if(512&_[2]){const v=_[1];qy(v,_,v.template,_[8])}else _[5]>0&&hm(_)}const c=o[1].components;if(null!==c)for(let d=0;d<c.length;d++){const h=Zr(c[d],o);Yc(h)&&h[5]>0&&hm(h)}}function fm(o,a){const c=Zr(a,o),d=c[1];(function YA(o,a){for(let c=a.length;c<o.blueprint.length;c++)a.push(o.blueprint[c])})(d,c),WE(d,c,c[8])}function pm(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function np(o){for(;o;){o[2]|=32;const a=Eu(o);if(cd(o)&&!a)return o;o=a}return null}function Fl(o,a,c,d=!0){const h=a[10];h.begin&&h.begin();try{qy(o,a,o.template,c)}catch(v){throw d&&sI(a,v),v}finally{h.end&&h.end()}}function nI(o,a,c){ms(0),a(o,c)}function rI(o){return o[7]||(o[7]=[])}function iI(o){return o.cleanup||(o.cleanup=[])}function sI(o,a){const c=o[9],d=c?c.get(rm,null):null;d&&d.handleError(a)}function ur(o,a,c,d,h){for(let _=0;_<c.length;){const v=c[_++],T=c[_++],A=a[v],R=o.data[v];null!==R.setInput?R.setInput(A,h,d,T):A[T]=h}}function As(o,a,c){const d=tu(a,o);!function Ec(o,a,c){o.setValue(a,c)}(o[11],d,c)}function gm(o,a,c){let d=c?o.styles:null,h=c?o.classes:null,_=0;if(null!==a)for(let v=0;v<a.length;v++){const T=a[v];"number"==typeof T?_=T:1==_?h=Te(h,T):2==_&&(d=Te(d,T+": "+a[++v]+";"))}c?o.styles=d:o.stylesWithoutHost=d,c?o.classes=h:o.classesWithoutHost=h}function mm(o,a,c,d,h=!1){for(;null!==c;){const _=a[c.index];if(null!==_&&d.push(Fr(_)),Ni(_))for(let T=10;T<_.length;T++){const A=_[T],R=A[1].firstChild;null!==R&&mm(A[1],A,R,d)}const v=c.type;if(8&v)mm(o,a,c.child,d);else if(32&v){const T=Cl(c,a);let A;for(;A=T();)d.push(A)}else if(16&v){const T=Of(a,c);if(Array.isArray(T))d.push(...T);else{const A=Eu(a[16]);mm(A[1],A,T,d,!0)}}c=h?c.projectionNext:c.next}return d}class Ru{constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,c=a[1];return mm(c,a,c.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Ni(a)){const c=a[8],d=c?c.indexOf(this):-1;d>-1&&(Ic(a,d),hu(c,d))}this._attachedToViewContainer=!1}$g(this._lView[1],this._lView)}onDestroy(a){Pc(this._lView[1],this._lView,null,a)}markForCheck(){np(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Fl(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Rf(o,a){Tu(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Re(902,!1);this._appRef=a}}class VR extends Ru{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;Fl(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class Yy extends eh{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=fe(a);return new lh(c,this.ngModule)}}function wn(o){const a=[];for(let c in o)o.hasOwnProperty(c)&&a.push({propName:o[c],templateName:c});return a}class rp{constructor(a,c){this.injector=a,this.parentInjector=c}get(a,c,d){const h=this.injector.get(a,rh,d);return h!==rh||c===rh?h:this.parentInjector.get(a,c,d)}}class lh extends lA{constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function CA(o){return o.map(TA).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return wn(this.componentDef.inputs)}get outputs(){return wn(this.componentDef.outputs)}create(a,c,d,h){let _=(h=h||this.ngModule)instanceof Au?h:h?.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const v=_?new rp(a,_):a,T=v.get(EE,null);if(null===T)throw new Re(407,!1);const A=v.get(us,null),R=T.createRenderer(null,this.componentDef),k=this.componentDef.selectors[0][0]||"div",L=d?function KA(o,a,c){return o.selectRootElement(a,c===Ot.ShadowDom)}(R,d,this.componentDef.encapsulation):Hd(R,k,function Yn(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(k)),K=this.componentDef.onPush?288:272,se=YE(0,null,null,1,0,null,null,null,null,null),Pe=zy(null,se,null,K,null,null,T,R,A,v,null);let Ye,it;_s(Pe);try{const Rt=function JA(o,a,c,d,h,_){const v=c[1];c[22]=o;const A=Xf(v,22,2,"#host",null),R=A.mergedAttrs=a.hostAttrs;null!==R&&(gm(A,R,!0),null!==o&&(rl(h,o,R),null!==A.classes&&Kd(h,o,A.classes),null!==A.styles&&Uf(h,o,A.styles)));const k=d.createRenderer(o,a),L=zy(c,QE(a),null,a.onPush?32:16,c[22],A,d,k,_||null,null,null);return v.firstCreatePass&&(sl(Ca(A,c),v,a.type),cm(v,A),Mc(A,c.length,1)),pm(c,L),c[22]=L}(L,this.componentDef,Pe,T,R);if(L)if(d)rl(R,L,["ng-version",nm.full]);else{const{attrs:$t,classes:Ge}=function AA(o){const a=[],c=[];let d=1,h=2;for(;d<o.length;){let _=o[d];if("string"==typeof _)2===h?""!==_&&a.push(_,o[++d]):8===h&&c.push(_);else{if(!na(h))break;h=_}d++}return{attrs:a,classes:c}}(this.componentDef.selectors[0]);$t&&rl(R,L,$t),Ge&&Ge.length>0&&Kd(R,L,Ge.join(" "))}if(it=Yu(se,22),void 0!==c){const $t=it.projection=[];for(let Ge=0;Ge<this.ngContentSelectors.length;Ge++){const tn=c[Ge];$t.push(null!=tn?Array.from(tn):null)}}Ye=function XA(o,a,c,d){const h=c[1],_=function QA(o,a,c){const d=Ir();o.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),Nc(o,d,a,ep(o,a,1,null),c),um(o,d));const h=uu(a,o,d.directiveStart,d);an(h,a);const _=ss(d,a);return _&&an(_,a),h}(h,c,a);if(o[8]=c[8]=_,null!==d)for(const T of d)T(_,a);if(a.contentQueries){const T=Ir();a.contentQueries(1,_,T.directiveStart)}const v=Ir();return!h.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(Qr(v.index),vi(c[1],v,0,v.directiveStart,v.directiveEnd,a),xu(a,_)),_}(Rt,this.componentDef,Pe,[BR]),WE(se,Pe,null)}finally{ec()}return new aI(this.componentType,Ye,th(it,Pe),Pe,it)}}class aI extends class zf{}{constructor(a,c,d,h,_){super(),this.location=d,this._rootLView=h,this._tNode=_,this.instance=c,this.hostView=this.changeDetectorRef=new VR(h),this.componentType=a}setInput(a,c){const d=this._tNode.inputs;let h;if(null!==d&&(h=d[a])){const _=this._rootLView;ur(_[1],_,h,a,c),XE(_,this._tNode.index)}}get injector(){return new cc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function BR(){const o=Ir();tl(Ue()[1],o)}function uI(o){let a=function eb(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),c=!0;const d=[o];for(;a;){let h;if(Hi(o))h=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Re(903,!1);h=a.\u0275dir}if(h){if(c){d.push(h);const v=o;v.inputs=cI(o.inputs),v.declaredInputs=cI(o.declaredInputs),v.outputs=cI(o.outputs);const T=h.hostBindings;T&&$R(o,T);const A=h.viewQuery,R=h.contentQueries;if(A&&nb(o,A),R&&jR(o,R),he(o.inputs,h.inputs),he(o.declaredInputs,h.declaredInputs),he(o.outputs,h.outputs),Hi(h)&&h.data.animation){const k=o.data;k.animation=(k.animation||[]).concat(h.data.animation)}}const _=h.features;if(_)for(let v=0;v<_.length;v++){const T=_[v];T&&T.ngInherit&&T(o),T===uI&&(c=!1)}}a=Object.getPrototypeOf(a)}!function tb(o){let a=0,c=null;for(let d=o.length-1;d>=0;d--){const h=o[d];h.hostVars=a+=h.hostVars,h.hostAttrs=sc(h.hostAttrs,c=sc(c,h.hostAttrs))}}(d)}function cI(o){return o===Kr?{}:o===Jt?[]:o}function nb(o,a){const c=o.viewQuery;o.viewQuery=c?(d,h)=>{a(d,h),c(d,h)}:a}function jR(o,a){const c=o.contentQueries;o.contentQueries=c?(d,h,_)=>{a(d,h,_),c(d,h,_)}:a}function $R(o,a){const c=o.hostBindings;o.hostBindings=c?(d,h)=>{a(d,h),c(d,h)}:a}let Vl=null;function Pu(){if(!Vl){const o=Vn.Symbol;if(o&&o.iterator)Vl=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<a.length;++c){const d=a[c];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(Vl=d)}}}return Vl}function ip(o){return!!Jy(o)&&(Array.isArray(o)||!(o instanceof Map)&&Pu()in o)}function Jy(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Ui(o,a,c){return!Object.is(o[a],c)&&(o[a]=c,!0)}function _m(o,a,c,d){const h=Ue();return Ui(h,ki(),a)&&(mn(),ds(sr(),h,o,a,c,d)),_m}function fh(o,a,c,d,h,_){const T=function Oc(o,a,c,d){const h=Ui(o,a,c);return Ui(o,a+1,d)||h}(o,function oi(){return Kt.lFrame.bindingIndex}(),c,h);return Ys(2),T?a+be(c)+d+be(h)+_:on}function ob(o,a,c,d,h,_,v,T){const A=Ue(),R=mn(),k=o+22,L=R.firstCreatePass?function dn(o,a,c,d,h,_,v,T,A){const R=a.consts,k=Xf(a,o,4,v||null,Zs(R,T));eI(a,c,k,Zs(R,A)),tl(a,k);const L=k.tViews=YE(2,k,d,h,_,a.directiveRegistry,a.pipeRegistry,null,a.schemas,R);return null!==a.queries&&(a.queries.template(a,k),L.queries=a.queries.embeddedTView(k)),k}(k,R,A,a,c,d,h,_,v):R.data[k];Gi(L,!1);const K=A[11].createComment("");Iu(R,A,K,L),an(K,A),pm(A,A[k]=uh(K,A,K,L)),qc(L)&&ZE(R,A,L),null!=v&&Wy(A,L,T)}function Xy(o,a,c){const d=Ue();return Ui(d,ki(),a)&&function In(o,a,c,d,h,_,v,T){const A=ss(a,c);let k,R=a.inputs;!T&&null!=R&&(k=R[d])?(ur(o,c,k,d,h),Ku(a)&&XE(c,a.index)):3&a.type&&(d=function ls(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),h=null!=v?v(h,a.value||"",d):h,_.setProperty(A,d,h))}(mn(),sr(),d,o,a,d[11],c,!1),Xy}function ev(o,a,c,d,h){const v=h?"class":"style";ur(o,c,a.inputs[v],v,d)}function nv(o,a,c,d){const h=Ue(),_=mn(),v=22+o,T=h[11],A=h[v]=Hd(T,a,function Ed(){return Kt.lFrame.currentNamespace}()),R=_.firstCreatePass?function tv(o,a,c,d,h,_,v){const T=a.consts,R=Xf(a,o,2,h,Zs(T,_));return eI(a,c,R,Zs(T,v)),null!==R.attrs&&gm(R,R.attrs,!1),null!==R.mergedAttrs&&gm(R,R.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,R),R}(v,_,h,0,a,c,d):_.data[v];Gi(R,!0);const k=R.mergedAttrs;null!==k&&rl(T,A,k);const L=R.classes;null!==L&&Kd(T,A,L);const K=R.styles;return null!==K&&Uf(T,A,K),64!=(64&R.flags)&&Iu(_,h,A,R),0===function dd(){return Kt.lFrame.elementDepthCount}()&&an(A,h),function yg(){Kt.lFrame.elementDepthCount++}(),qc(R)&&(ZE(_,h,R),KE(_,R,h)),null!==d&&Wy(h,R),nv}function rv(){let o=Ir();Jc()?Ju():(o=o.parent,Gi(o,!1));const a=o;!function vg(){Kt.lFrame.elementDepthCount--}();const c=mn();return c.firstCreatePass&&(tl(c,o),rs(o)&&c.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Td(o){return 0!=(16&o.flags)}(a)&&ev(c,a,Ue(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function nc(o){return 0!=(32&o.flags)}(a)&&ev(c,a,Ue(),a.stylesWithoutHost,!1),rv}function iv(o,a,c,d){return nv(o,a,c,d),rv(),iv}function Ou(o,a,c){const d=Ue(),h=mn(),_=o+22,v=h.firstCreatePass?function cp(o,a,c,d,h){const _=a.consts,v=Zs(_,d),T=Xf(a,o,8,"ng-container",v);return null!==v&&gm(T,v,!0),eI(a,c,T,Zs(_,h)),null!==a.queries&&a.queries.elementStart(a,T),T}(_,h,d,a,c):h.data[_];Gi(v,!0);const T=d[_]=d[11].createComment("");return Iu(h,d,T,v),an(T,d),qc(v)&&(ZE(h,d,v),KE(h,v,d)),null!=c&&Wy(d,v),Ou}function ym(){let o=Ir();const a=mn();return Jc()?Ju():(o=o.parent,Gi(o,!1)),a.firstCreatePass&&(tl(a,o),rs(o)&&a.queries.elementEnd(o)),ym}function mI(){return Ue()}function Bl(o){return!!o&&"function"==typeof o.then}function _I(o){return!!o&&"function"==typeof o.subscribe}const yI=_I;function mh(o,a,c,d){const h=Ue(),_=mn(),v=Ir();return function Ar(o,a,c,d,h,_,v,T){const A=qc(d),k=o.firstCreatePass&&iI(o),L=a[8],K=rI(a);let se=!0;if(3&d.type||T){const it=ss(d,a),Rt=T?T(it):it,$t=K.length,Ge=T?qn=>T(Fr(qn[d.index])):d.index;let tn=null;if(!T&&A&&(tn=function zR(o,a,c,d){const h=o.cleanup;if(null!=h)for(let _=0;_<h.length-1;_+=2){const v=h[_];if(v===c&&h[_+1]===d){const T=a[7],A=h[_+2];return T.length>A?T[A]:null}"string"==typeof v&&(_+=2)}return null}(o,a,h,d.index)),null!==tn)(tn.__ngLastListenerFn__||tn).__ngNextListenerFn__=_,tn.__ngLastListenerFn__=_,se=!1;else{_=Em(d,a,L,_,!1);const qn=c.listen(Rt,h,_);K.push(_,qn),k&&k.push(h,Ge,$t,$t+1)}}else _=Em(d,a,L,_,!1);const Pe=d.outputs;let Ye;if(se&&null!==Pe&&(Ye=Pe[h])){const it=Ye.length;if(it)for(let Rt=0;Rt<it;Rt+=2){const Un=a[Ye[Rt]][Ye[Rt+1]].subscribe(_),Lh=K.length;K.push(_,Un),k&&k.push(h,d.index,Lh,-(Lh+1))}}}(_,h,h[11],v,o,a,0,d),mh}function vm(o,a,c,d){try{return!1!==c(d)}catch(h){return sI(o,h),!1}}function Em(o,a,c,d,h){return function _(v){if(v===Function)return d;np(2&o.flags?Zr(o.index,a):a);let A=vm(a,0,d,v),R=_.__ngNextListenerFn__;for(;R;)A=vm(a,0,R,v)&&A,R=R.__ngNextListenerFn__;return h&&!1===A&&(v.preventDefault(),v.returnValue=!1),A}}function vI(o=1){return function Y_(o){return(Kt.lFrame.contextLView=function el(o,a){for(;o>0;)a=a[15],o--;return a}(o,Kt.lFrame.contextLView))[8]}(o)}function li(o,a,c,d,h){const _=o[c+1],v=null===a;let T=d?Cs(_):No(_),A=!1;for(;0!==T&&(!1===A||v);){const k=o[T+1];Mn(o[T],a)&&(A=!0,o[T+1]=d?Rr(k):Lt(k)),T=d?Cs(k):No(k)}A&&(o[c+1]=d?Lt(_):Rr(_))}function Mn(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&fc(o,a)>=0}function PI(o,a){return function $a(o,a,c,d){const h=Ue(),_=mn(),v=Ys(2);_.firstUpdatePass&&function yh(o,a,c,d){const h=o.data;if(null===h[c+1]){const _=h[Lr()],v=function lv(o,a){return a>=o.expandoStartIndex}(o,c);(function pb(o,a){return 0!=(o.flags&(a?16:32))})(_,d)&&null===a&&!v&&(a=!1),a=function db(o,a,c,d){const h=function Xc(o){const a=Kt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let _=d?a.residualClasses:a.residualStyles;if(null===h)0===(d?a.classBindings:a.styleBindings)&&(c=Vc(c=dv(null,o,a,c,d),a.attrs,d),_=null);else{const v=a.directiveStylingLast;if(-1===v||o[v]!==h)if(c=dv(h,o,a,c,d),null===_){let A=function XR(o,a,c){const d=c?a.classBindings:a.styleBindings;if(0!==No(d))return o[Cs(d)]}(o,a,d);void 0!==A&&Array.isArray(A)&&(A=dv(null,o,a,A[1],d),A=Vc(A,a.attrs,d),function di(o,a,c,d){o[Cs(c?a.classBindings:a.styleBindings)]=d}(o,a,d,A))}else _=function MI(o,a,c){let d;const h=a.directiveEnd;for(let _=1+a.directiveStylingLast;_<h;_++)d=Vc(d,o[_].hostAttrs,c);return Vc(d,a.attrs,c)}(o,a,d)}return void 0!==_&&(d?a.residualClasses=_:a.residualStyles=_),c}(h,_,a,d),function KR(o,a,c,d,h,_){let v=_?a.classBindings:a.styleBindings,T=Cs(v),A=No(v);o[d]=c;let k,R=!1;if(Array.isArray(c)){const L=c;k=L[1],(null===k||fc(L,k)>0)&&(R=!0)}else k=c;if(h)if(0!==A){const K=Cs(o[T+1]);o[d+1]=nn(K,T),0!==K&&(o[K+1]=An(o[K+1],d)),o[T+1]=function xr(o,a){return 131071&o|a<<17}(o[T+1],d)}else o[d+1]=nn(T,0),0!==T&&(o[T+1]=An(o[T+1],d)),T=d;else o[d+1]=nn(A,0),0===T?T=d:o[A+1]=An(o[A+1],d),A=d;R&&(o[d+1]=Lt(o[d+1])),li(o,k,d,!0),li(o,k,d,!1),function ZR(o,a,c,d,h){const _=h?o.residualClasses:o.residualStyles;null!=_&&"string"==typeof a&&fc(_,a)>=0&&(c[d+1]=Rr(c[d+1]))}(a,k,o,d,_),v=nn(T,A),_?a.classBindings=v:a.styleBindings=v}(h,_,a,c,v,d)}}(_,o,v,d),a!==on&&Ui(h,v,a)&&function dp(o,a,c,d,h,_,v,T){if(!(3&a.type))return;const A=o.data,R=A[T+1];Cm(function LA(o){return 1==(1&o)}(R)?NI(A,a,c,h,No(R),v):void 0)||(Cm(_)||function BE(o){return 2==(2&o)}(R)&&(_=NI(A,null,c,h,T,v)),function Wd(o,a,c,d,h){if(a)h?o.addClass(c,d):o.removeClass(c,d);else{let _=-1===d.indexOf("-")?void 0:Is.DashCase;null==h?o.removeStyle(c,d,_):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),_|=Is.Important),o.setStyle(c,d,h,_))}}(d,v,tu(Lr(),c),h,_))}(_,_.data[Lr()],h,h[11],o,h[v+1]=function fb(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=we(ci(o)))),o}(a,c),d,v)}(o,a,null,!0),PI}function dv(o,a,c,d,h){let _=null;const v=c.directiveEnd;let T=c.directiveStylingLast;for(-1===T?T=c.directiveStart:T++;T<v&&(_=a[T],d=Vc(d,_.hostAttrs,h),_!==o);)T++;return null!==o&&(c.directiveStylingLast=T),d}function Vc(o,a,c){const d=c?1:2;let h=-1;if(null!==a)for(let _=0;_<a.length;_++){const v=a[_];"number"==typeof v?h=v:h===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),qi(o,v,!!c||a[++_]))}return void 0===o?null:o}function NI(o,a,c,d,h,_){const v=null===a;let T;for(;h>0;){const A=o[h],R=Array.isArray(A),k=R?A[1]:A,L=null===k;let K=c[h+1];K===on&&(K=L?Jt:void 0);let se=L?kd(K,d):k===d?K:void 0;if(R&&!Cm(se)&&(se=kd(A,d)),Cm(se)&&(T=se,v))return T;const Pe=o[h+1];h=v?Cs(Pe):No(Pe)}if(null!==a){let A=_?a.residualClasses:a.residualStyles;null!=A&&(T=kd(A,d))}return T}function Cm(o){return void 0!==o}function gb(o,a=""){const c=Ue(),d=mn(),h=o+22,_=d.firstCreatePass?Xf(d,h,1,a,null):d.data[h],v=c[h]=function xf(o,a){return o.createText(a)}(c[11],a);Iu(d,c,v,_),Gi(_,!1)}function vh(o){return hp("",o,""),vh}function hp(o,a,c){const d=Ue(),h=function Nu(o,a,c,d){return Ui(o,ki(),c)?a+be(c)+d:on}(d,o,a,c);return h!==on&&As(d,Lr(),h),hp}function kI(o,a,c,d,h){const _=Ue(),v=fh(_,o,a,c,d,h);return v!==on&&As(_,Lr(),v),kI}const Th=void 0;var Dm=["en",[["a","p"],["AM","PM"],Th],[["AM","PM"],Th,Th],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Th,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Th,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Th,"{1} 'at' {0}",Th],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function rP(o){const c=Math.floor(Math.abs(o)),d=o.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===d?1:5}];let oa={};function gv(o){const a=function xb(o){return o.toLowerCase().replace(/_/g,"-")}(o);let c=Db(a);if(c)return c;const d=a.split("-")[0];if(c=Db(d),c)return c;if("en"===d)return Dm;throw new Re(701,!1)}function zI(o){return gv(o)[Qt.PluralCase]}function Db(o){return o in oa||(oa[o]=Vn.ng&&Vn.ng.common&&Vn.ng.common.locales&&Vn.ng.common.locales[o]),oa[o]}var Qt=(()=>((Qt=Qt||{})[Qt.LocaleId=0]="LocaleId",Qt[Qt.DayPeriodsFormat=1]="DayPeriodsFormat",Qt[Qt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Qt[Qt.DaysFormat=3]="DaysFormat",Qt[Qt.DaysStandalone=4]="DaysStandalone",Qt[Qt.MonthsFormat=5]="MonthsFormat",Qt[Qt.MonthsStandalone=6]="MonthsStandalone",Qt[Qt.Eras=7]="Eras",Qt[Qt.FirstDayOfWeek=8]="FirstDayOfWeek",Qt[Qt.WeekendRange=9]="WeekendRange",Qt[Qt.DateFormat=10]="DateFormat",Qt[Qt.TimeFormat=11]="TimeFormat",Qt[Qt.DateTimeFormat=12]="DateTimeFormat",Qt[Qt.NumberSymbols=13]="NumberSymbols",Qt[Qt.NumberFormats=14]="NumberFormats",Qt[Qt.CurrencyCode=15]="CurrencyCode",Qt[Qt.CurrencySymbol=16]="CurrencySymbol",Qt[Qt.CurrencyName=17]="CurrencyName",Qt[Qt.Currencies=18]="Currencies",Qt[Qt.Directionality=19]="Directionality",Qt[Qt.PluralCase=20]="PluralCase",Qt[Qt.ExtraData=21]="ExtraData",Qt))();const Ah="en-US";let KI=Ah;function Nv(o,a,c,d,h){if(o=X(o),Array.isArray(o))for(let _=0;_<o.length;_++)Nv(o[_],a,c,d,h);else{const _=mn(),v=Ue();let T=Rl(o)?o:X(o.provide),A=vE(o);const R=Ir(),k=1048575&R.providerIndexes,L=R.directiveStart,K=R.providerIndexes>>20;if(Rl(o)||!o.multi){const se=new wa(A,h,im),Pe=Cp(T,a,h?k:k+K,L);-1===Pe?(sl(Ca(R,v),_,T),cw(_,o,a.length),a.push(T),R.directiveStart++,R.directiveEnd++,h&&(R.providerIndexes+=1048576),c.push(se),v.push(se)):(c[Pe]=se,v[Pe]=se)}else{const se=Cp(T,a,k+K,L),Pe=Cp(T,a,k,k+K),Ye=se>=0&&c[se],it=Pe>=0&&c[Pe];if(h&&!it||!h&&!Ye){sl(Ca(R,v),_,T);const Rt=function bs(o,a,c,d,h){const _=new wa(o,c,im);return _.multi=[],_.index=a,_.componentProviders=0,lw(_,h,d&&!c),_}(h?IP:dw,c.length,h,d,A);!h&&it&&(c[Pe].providerFactory=Rt),cw(_,o,a.length,0),a.push(T),R.directiveStart++,R.directiveEnd++,h&&(R.providerIndexes+=1048576),c.push(Rt),v.push(Rt)}else cw(_,o,se>-1?se:Pe,lw(c[h?Pe:se],A,!h&&d));!h&&d&&it&&c[Pe].componentProviders++}}}function cw(o,a,c,d){const h=Rl(a),_=function Yg(o){return!!o.useClass}(a);if(h||_){const A=(_?X(a.useClass):a).prototype.ngOnDestroy;if(A){const R=o.destroyHooks||(o.destroyHooks=[]);if(!h&&a.multi){const k=R.indexOf(c);-1===k?R.push(c,[d,A]):R[k+1].push(d,A)}else R.push(c,A)}}}function lw(o,a,c){return c&&o.componentProviders++,o.multi.push(a)-1}function Cp(o,a,c,d){for(let h=c;h<d;h++)if(a[h]===o)return h;return-1}function dw(o,a,c,d){return hw(this.multi,[])}function IP(o,a,c,d){const h=this.multi;let _;if(this.providerFactory){const v=this.providerFactory.componentProviders,T=uu(c,c[1],this.providerFactory.index,d);_=T.slice(0,v),hw(h,_);for(let A=v;A<T.length;A++)_.push(T[A])}else _=[],hw(h,_);return _}function hw(o,a){for(let c=0;c<o.length;c++)a.push((0,o[c])());return a}function zb(o,a=[]){return c=>{c.providersResolver=(d,h)=>function uw(o,a,c){const d=mn();if(d.firstCreatePass){const h=Hi(o);Nv(c,d.data,d.blueprint,h,!0),Nv(a,d.data,d.blueprint,h,!1)}}(d,h?h(o):o,a)}}class Sh{}class km{}function Om(o,a){return new fw(o,a??null)}class fw extends Sh{constructor(a,c){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Yy(this);const d=gn(a);this._bootstrapComponents=Rc(d.bootstrap),this._r3Injector=kE(a,c,[{provide:Sh,useValue:this},{provide:eh,useValue:this.componentFactoryResolver}],we(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class pw extends km{constructor(a){super(),this.moduleType=a}create(a){return new fw(this.moduleType,a)}}class wP extends Sh{constructor(a,c,d){super(),this.componentFactoryResolver=new Yy(this),this.instance=null;const h=new yE([...a,{provide:Sh,useValue:this},{provide:eh,useValue:this.componentFactoryResolver}],c||em(),d,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function gw(o,a,c=null){return new wP(o,a,c).injector}let TP=(()=>{class o{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c.id)){const d=Sy(0,c.type),h=d.length>0?gw([d],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c.id,h)}return this.cachedInjectors.get(c.id)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=De({token:o,providedIn:"environment",factory:()=>new o(Xt(Au))}),o})();function Wb(o){o.getStandaloneInjector=a=>a.get(TP).getOrCreateStandaloneInjector(o)}function bw(o){return a=>{setTimeout(o,void 0,a)}}const Ga=class eD extends p.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,d){let h=a,_=c||(()=>null),v=d;if(a&&"object"==typeof a){const A=a;h=A.next?.bind(A),_=A.error?.bind(A),v=A.complete?.bind(A)}this.__isAsync&&(_=bw(_),h&&(h=bw(h)),v&&(v=bw(v)));const T=super.subscribe({next:h,error:_,complete:v});return a instanceof ne.w0&&a.add(T),T}};function tD(){return this._results[Pu()]()}class Ov{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=Pu(),d=Ov.prototype;d[c]||(d[c]=tD)}get changes(){return this._changes||(this._changes=new Ga)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const d=this;d.dirty=!1;const h=Oi(a);(this._changesDetected=!function Cg(o,a,c){if(o.length!==a.length)return!1;for(let d=0;d<o.length;d++){let h=o[d],_=a[d];if(c&&(h=c(h),_=c(_)),_!==h)return!1}return!0}(d._results,h,c))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let xp=(()=>{class o{}return o.__NG_ELEMENT_ID__=BP,o})();const LP=xp,UP=class extends LP{constructor(a,c,d){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=d}createEmbeddedView(a,c){const d=this._declarationTContainer.tViews,h=zy(this._declarationLView,d,a,16,null,d.declTNode,null,null,null,null,c||null);h[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(h[19]=v.createEmbeddedView(d)),WE(d,h,a),new Ru(h)}};function BP(){return Fv(Ir(),Ue())}function Fv(o,a){return 4&o.type?new UP(a,o,th(o,a)):null}let Rp=(()=>{class o{}return o.__NG_ELEMENT_ID__=jP,o})();function jP(){return nD(Ir(),Ue())}const $P=Rp,Dw=class extends $P{constructor(a,c,d){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=d}get element(){return th(this._hostTNode,this._hostLView)}get injector(){return new cc(this._hostTNode,this._hostLView)}get parentInjector(){const a=uc(this._hostTNode,this._hostLView);if(_f(a)){const c=wo(a,this._hostLView),d=su(a);return new cc(c[1].data[d+8],c)}return new cc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=Sw(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,c,d){let h,_;"number"==typeof d?h=d:null!=d&&(h=d.index,_=d.injector);const v=a.createEmbeddedView(c||{},_);return this.insert(v,h),v}createComponent(a,c,d,h,_){const v=a&&!function zi(o){return"function"==typeof o}(a);let T;if(v)T=c;else{const L=c||{};T=L.index,d=L.injector,h=L.projectableNodes,_=L.environmentInjector||L.ngModuleRef}const A=v?a:new lh(fe(a)),R=d||this.parentInjector;if(!_&&null==A.ngModule){const K=(v?R:this.parentInjector).get(Au,null);K&&(_=K)}const k=A.create(R,h,void 0,_);return this.insert(k.hostView,T),k}insert(a,c){const d=a._lView,h=d[1];if(function cf(o){return Ni(o[3])}(d)){const k=this.indexOf(a);if(-1!==k)this.detach(k);else{const L=d[3],K=new Dw(L,L[6],L[3]);K.detach(K.indexOf(a))}}const _=this._adjustIndex(c),v=this._lContainer;!function jg(o,a,c,d){const h=10+d,_=c.length;d>0&&(c[h-1][4]=a),d<_-10?(a[4]=c[h],Ag(c,10+d,a)):(c.push(a),a[4]=null),a[3]=c;const v=a[17];null!==v&&c!==v&&function hy(o,a){const c=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===c?o[9]=[a]:c.push(a)}(v,a);const T=a[19];null!==T&&T.insertView(o),a[2]|=64}(h,d,v,_);const T=Ff(_,v),A=d[11],R=Tc(A,v[7]);return null!==R&&function hE(o,a,c,d,h,_){d[0]=h,d[6]=a,Tu(o,d,c,1,h,_)}(h,v[6],A,d,R,T),a.attachToViewContainerRef(),Ag(xw(v),_,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=Sw(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),d=Ic(this._lContainer,c);d&&(hu(xw(this._lContainer),c),$g(d[1],d))}detach(a){const c=this._adjustIndex(a,-1),d=Ic(this._lContainer,c);return d&&null!=hu(xw(this._lContainer),c)?new Ru(d):null}_adjustIndex(a,c=0){return a??this.length+c}};function Sw(o){return o[8]}function xw(o){return o[8]||(o[8]=[])}function nD(o,a){let c;const d=a[o.index];if(Ni(d))c=d;else{let h;if(8&o.type)h=Fr(d);else{const _=a[11];h=_.createComment("");const v=ss(o,a);ws(_,Tc(_,v),h,function yy(o,a){return o.nextSibling(a)}(_,v),!1)}a[o.index]=c=uh(d,a,h,o),pm(a,c)}return new Dw(c,o,a)}class Lm{constructor(a){this.queryList=a,this.matches=null}clone(){return new Lm(this.queryList)}setDirty(){this.queryList.setDirty()}}class Wl{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const d=null!==a.contentQueries?a.contentQueries[0]:c.length,h=[];for(let _=0;_<d;_++){const v=c.getByIndex(_);h.push(this.queries[v.indexInDeclarationView].clone())}return new Wl(h)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==Vv(a,c).matches&&this.queries[c].setDirty()}}class Rw{constructor(a,c,d=null){this.predicate=a,this.flags=c,this.read=d}}class Um{constructor(a=[]){this.queries=a}elementStart(a,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let d=0;d<this.length;d++){const h=null!==c?c.length:0,_=this.getByIndex(d).embeddedTView(a,h);_&&(_.indexInDeclarationView=d,null!==c?c.push(_):c=[_])}return null!==c?new Um(c):null}template(a,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Pw{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new Pw(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const _=d[h];this.matchTNodeWithReadOption(a,c,Mw(c,_)),this.matchTNodeWithReadOption(a,c,au(c,a,_,!1,!1))}else d===xp?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,au(c,a,d,!1,!1))}matchTNodeWithReadOption(a,c,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===nh||h===Rp||h===xp&&4&c.type)this.addMatch(c.index,-2);else{const _=au(c,a,h,!1,!1);null!==_&&this.addMatch(c.index,_)}else this.addMatch(c.index,d)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function Mw(o,a){const c=o.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===a)return c[d+1];return null}function zP(o,a,c,d){return-1===c?function Bc(o,a){return 11&o.type?th(o,a):4&o.type?Fv(o,a):null}(a,o):-2===c?function qP(o,a,c){return c===nh?th(a,o):c===xp?Fv(a,o):c===Rp?nD(a,o):void 0}(o,a,d):uu(o,o[1],c,a)}function iD(o,a,c,d){const h=a[19].queries[d];if(null===h.matches){const _=o.data,v=c.matches,T=[];for(let A=0;A<v.length;A+=2){const R=v[A];T.push(R<0?null:zP(a,_[R],v[A+1],c.metadata.read))}h.matches=T}return h.matches}function Nw(o,a,c,d){const h=o.queries.getByIndex(c),_=h.matches;if(null!==_){const v=iD(o,a,h,c);for(let T=0;T<_.length;T+=2){const A=_[T];if(A>0)d.push(v[T/2]);else{const R=_[T+1],k=a[-A];for(let L=10;L<k.length;L++){const K=k[L];K[17]===K[3]&&Nw(K[1],K,R,d)}if(null!==k[9]){const L=k[9];for(let K=0;K<L.length;K++){const se=L[K];Nw(se[1],se,R,d)}}}}}return d}function sD(o){const a=Ue(),c=mn(),d=Xu();ms(d+1);const h=Vv(c,d);if(o.dirty&&function _g(o){return 4==(4&o[2])}(a)===(2==(2&h.metadata.flags))){if(null===h.matches)o.reset([]);else{const _=h.crossesNgTemplate?Nw(c,a,d,[]):iD(c,a,h,d);o.reset(_,qf),o.notifyOnChanges()}return!0}return!1}function kw(o,a,c,d){const h=mn();if(h.firstCreatePass){const _=Ir();(function aD(o,a,c){null===o.queries&&(o.queries=new Um),o.queries.track(new Pw(a,c))})(h,new Rw(a,c,d),_.index),function Fw(o,a){const c=o.contentQueries||(o.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(o.queries.length-1,a)}(h,o),2==(2&c)&&(h.staticContentQueries=!0)}!function oD(o,a,c){const d=new Ov(4==(4&c));Pc(o,a,d,d.destroy),null===a[19]&&(a[19]=new Wl),a[19].queries.push(new Lm(d))}(h,Ue(),c)}function Ow(){return function KP(o,a){return o[19].queries[a].queryList}(Ue(),Xu())}function Vv(o,a){return o.queries.getByIndex(a)}function qm(...o){}const ED=new kn("Application Initializer");let Wm=(()=>{class o{constructor(c){this.appInits=c,this.resolve=qm,this.reject=qm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,h)=>{this.resolve=d,this.reject=h})}runInitializers(){if(this.initialized)return;const c=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const _=this.appInits[h]();if(Bl(_))c.push(_);else if(yI(_)){const v=new Promise((T,A)=>{_.subscribe({complete:T,error:A})});c.push(v)}}Promise.all(c).then(()=>{d()}).catch(h=>{this.reject(h)}),0===c.length&&d(),this.initialized=!0}}return o.\u0275fac=function(c){return new(c||o)(Xt(ED,8))},o.\u0275prov=De({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const ID=new kn("AppId",{providedIn:"root",factory:function wD(){return`${Ww()}${Ww()}${Ww()}`}});function Ww(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const r1=new kn("Platform Initializer"),i1=new kn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),TD=new kn("appBootstrapListener");let o1=(()=>{class o{log(c){console.log(c)}warn(c){console.warn(c)}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=De({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const ua=new kn("LocaleId",{providedIn:"root",factory:()=>Zt(ua,At.Optional|At.SkipSelf)||function Bu(){return typeof $localize<"u"&&$localize.locale||Ah}()}),RO=new kn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class a1{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let CD=(()=>{class o{compileModuleSync(c){return new pw(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),_=Rc(gn(c).declarations).reduce((v,T)=>{const A=fe(T);return A&&v.push(new lh(A)),v},[]);return new a1(d,_)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=De({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Qw=(()=>Promise.resolve(0))();function Yw(o){typeof Zone>"u"?Qw.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class la{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ga(!1),this.onMicrotaskEmpty=new Ga(!1),this.onStable=new Ga(!1),this.onError=new Ga(!1),typeof Zone>"u")throw new Re(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const _=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new _("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&c,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function c1(){let o=Vn.requestAnimationFrame,a=Vn.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function kh(o){const a=()=>{!function bD(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Vn,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,Wv(o),o.isCheckStableRunning=!0,Zm(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),Wv(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,h,_,v,T)=>{try{return Xw(o),c.invokeTask(h,_,v,T)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||o.shouldCoalesceRunChangeDetection)&&a(),Kv(o)}},onInvoke:(c,d,h,_,v,T,A)=>{try{return Xw(o),c.invoke(h,_,v,T,A)}finally{o.shouldCoalesceRunChangeDetection&&a(),Kv(o)}},onHasTask:(c,d,h,_)=>{c.hasTask(h,_),d===h&&("microTask"==_.change?(o._hasPendingMicrotasks=_.microTask,Wv(o),Zm(o)):"macroTask"==_.change&&(o.hasPendingMacrotasks=_.macroTask))},onHandleError:(c,d,h,_)=>(c.handleError(h,_),o.runOutsideAngular(()=>o.onError.emit(_)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!la.isInAngularZone())throw new Re(909,!1)}static assertNotInAngularZone(){if(la.isInAngularZone())throw new Re(909,!1)}run(a,c,d){return this._inner.run(a,c,d)}runTask(a,c,d,h){const _=this._inner,v=_.scheduleEventTask("NgZoneEvent: "+h,a,Jw,qm,qm);try{return _.runTask(v,c,d)}finally{_.cancelTask(v)}}runGuarded(a,c,d){return this._inner.runGuarded(a,c,d)}runOutsideAngular(a){return this._outer.run(a)}}const Jw={};function Zm(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function Wv(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function Xw(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function Kv(o){o._nesting--,Zm(o)}class Qm{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ga,this.onMicrotaskEmpty=new Ga,this.onStable=new Ga,this.onError=new Ga}run(a,c,d){return a.apply(c,d)}runGuarded(a,c,d){return a.apply(c,d)}runOutsideAngular(a){return a()}runTask(a,c,d,h){return a.apply(c,d)}}const DD=new kn(""),Ym=new kn("");let tT,Zv=(()=>{class o{constructor(c,d,h){this._ngZone=c,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,tT||(function Jm(o){tT=o}(h),h.addToWindow(d)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{la.assertNotInAngularZone(),Yw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Yw(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,h){let _=-1;d&&d>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==_),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:_,updateCb:h})}whenStable(c,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,d,h){return[]}}return o.\u0275fac=function(c){return new(c||o)(Xt(la),Xt(eT),Xt(Ym))},o.\u0275prov=De({token:o,factory:o.\u0275fac}),o})(),eT=(()=>{class o{constructor(){this._applications=new Map}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return tT?.findTestabilityInTree(this,c,d)??null}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=De({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})(),qa=null;const nT=new kn("AllowMultipleToken"),Xm=new kn("PlatformDestroyListeners");class Op{constructor(a,c){this.name=a,this.token=c}}function e_(o,a,c=[]){const d=`Platform: ${a}`,h=new kn(d);return(_=[])=>{let v=iT();if(!v||v.injector.get(nT,!1)){const T=[...c,..._,{provide:h,useValue:!0}];o?o(T):function MO(o){if(qa&&!qa.get(nT,!1))throw new Re(400,!1);qa=o;const a=o.get(xD);(function Yv(o){const a=o.get(r1,null);a&&a.forEach(c=>c())})(o)}(function SD(o=[],a){return Ml.create({name:a,providers:[{provide:My,useValue:"platform"},{provide:Xm,useValue:new Set([()=>qa=null])},...o]})}(T,d))}return function d1(o){const a=iT();if(!a)throw new Re(401,!1);return a}()}}function iT(){return qa?.get(xD)??null}let xD=(()=>{class o{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const h=function RD(o,a){let c;return c="noop"===o?new Qm:("zone.js"===o?void 0:o)||new la(a),c}(d?.ngZone,function t_(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(d)),_=[{provide:la,useValue:h}];return h.run(()=>{const v=Ml.create({providers:_,parent:this.injector,name:c.moduleType.name}),T=c.create(v),A=T.injector.get(rm,null);if(!A)throw new Re(402,!1);return h.runOutsideAngular(()=>{const R=h.onError.subscribe({next:k=>{A.handleError(k)}});T.onDestroy(()=>{r_(this._modules,T),R.unsubscribe()})}),function PD(o,a,c){try{const d=c();return Bl(d)?d.catch(h=>{throw a.runOutsideAngular(()=>o.handleError(h)),h}):d}catch(d){throw a.runOutsideAngular(()=>o.handleError(d)),d}}(A,h,()=>{const R=T.injector.get(Wm);return R.runInitializers(),R.donePromise.then(()=>(function mp(o){ue(o,"Expected localeId to be defined"),"string"==typeof o&&(KI=o.toLowerCase().replace(/_/g,"-"))}(T.injector.get(ua,Ah)||Ah),this._moduleDoBootstrap(T),T))})})}bootstrapModule(c,d=[]){const h=sT({},d);return function Zl(o,a,c){const d=new pw(c);return Promise.resolve(d)}(0,0,c).then(_=>this.bootstrapModuleFactory(_,h))}_moduleDoBootstrap(c){const d=c.injector.get(n_);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!c.instance.ngDoBootstrap)throw new Re(403,!1);c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Re(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const c=this._injector.get(Xm,null);c&&(c.forEach(d=>d()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(c){return new(c||o)(Xt(Ml))},o.\u0275prov=De({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function sT(o,a){return Array.isArray(a)?a.reduce(sT,o):{...o,...a}}let n_=(()=>{class o{constructor(c,d,h){this._zone=c,this._injector=d,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new F.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),v=new F.y(T=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{la.assertNotInAngularZone(),Yw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{la.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{A.unsubscribe(),R.unsubscribe()}});this.isStable=(0,oe.T)(_,v.pipe((0,de.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,d){const h=c instanceof lA;if(!this._injector.get(Wm).done)throw!h&&zt(c),new Re(405,false);let v;v=h?c:this._injector.get(eh).resolveComponentFactory(c),this.componentTypes.push(v.componentType);const T=function l1(o){return o.isBoundToModule}(v)?void 0:this._injector.get(Sh),R=v.create(Ml.NULL,[],d||v.selector,T),k=R.location.nativeElement,L=R.injector.get(DD,null);return L?.registerApplication(k),R.onDestroy(()=>{this.detachView(R.hostView),r_(this.components,R),L?.unregisterApplication(k)}),this._loadComponent(R),R}tick(){if(this._runningTick)throw new Re(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;r_(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(TD,[]).concat(this._bootstrapListeners).forEach(h=>h(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>r_(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new Re(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(c){return new(c||o)(Xt(la),Xt(Au),Xt(rm))},o.\u0275prov=De({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function r_(o,a){const c=o.indexOf(a);c>-1&&o.splice(c,1)}let aT=!0,Jv=!1;function Xv(){return Jv=!0,aT}function h1(){if(Jv)throw new Error("Cannot enable prod mode after platform setup.");aT=!1}let OO=(()=>{class o{}return o.__NG_ELEMENT_ID__=FO,o})();function FO(o){return function Oh(o,a,c){if(Ku(o)&&!c){const d=Zr(o.index,a);return new Ru(d,d)}return 47&o.type?new Ru(a[16],a):null}(Ir(),Ue(),16==(16&o))}class VD{constructor(){}supports(a){return ip(a)}create(a){return new v1(a)}}const y1=(o,a)=>a;class v1{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||y1}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,d=this._removalsHead,h=0,_=null;for(;c||d;){const v=!d||c&&c.currentIndex<w1(d,h,_)?c:d,T=w1(v,h,_),A=v.currentIndex;if(v===d)h--,d=d._nextRemoved;else if(c=c._next,null==v.previousIndex)h++;else{_||(_=[]);const R=T-h,k=A-h;if(R!=k){for(let K=0;K<R;K++){const se=K<_.length?_[K]:_[K]=0,Pe=se+K;k<=Pe&&Pe<R&&(_[K]=se+1)}_[v.previousIndex]=k-R}}T!==A&&a(v,T,A)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!ip(a))throw new Re(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let h,_,v,c=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let T=0;T<this.length;T++)_=a[T],v=this._trackByFn(T,_),null!==c&&Object.is(c.trackById,v)?(d&&(c=this._verifyReinsertion(c,_,v,T)),Object.is(c.item,_)||this._addIdentityChange(c,_)):(c=this._mismatch(c,_,v,T),d=!0),c=c._next}else h=0,function kc(o,a){if(Array.isArray(o))for(let c=0;c<o.length;c++)a(o[c]);else{const c=o[Pu()]();let d;for(;!(d=c.next()).done;)a(d.value)}}(a,T=>{v=this._trackByFn(h,T),null!==c&&Object.is(c.trackById,v)?(d&&(c=this._verifyReinsertion(c,T,v,h)),Object.is(c.item,T)||this._addIdentityChange(c,T)):(c=this._mismatch(c,T,v,h),d=!0),c=c._next,h++}),this.length=h;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,d,h){let _;return null===a?_=this._itTail:(_=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,_,h)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,_,h)):a=this._addAfter(new E1(c,d),_,h),a}_verifyReinsertion(a,c,d,h){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==_?a=this._reinsertAfter(_,a._prev,h):a.currentIndex!=h&&(a.currentIndex=h,this._addToMoves(a,h)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const h=a._prevRemoved,_=a._nextRemoved;return null===h?this._removalsHead=_:h._nextRemoved=_,null===_?this._removalsTail=h:_._prevRemoved=h,this._insertAfter(a,c,d),this._addToMoves(a,d),a}_moveAfter(a,c,d){return this._unlink(a),this._insertAfter(a,c,d),this._addToMoves(a,d),a}_addAfter(a,c,d){return this._insertAfter(a,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,d){const h=null===c?this._itHead:c._next;return a._next=h,a._prev=c,null===h?this._itTail=a:h._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new I1),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,d=a._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new I1),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class E1{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class UO{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const c=a._prevDup,d=a._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class I1{constructor(){this.map=new Map}put(a){const c=a.trackById;let d=this.map.get(c);d||(d=new UO,this.map.set(c,d)),d.add(a)}get(a,c){const h=this.map.get(a);return h?h.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function w1(o,a,c){const d=o.previousIndex;if(null===d)return d;let h=0;return c&&d<c.length&&(h=c[d]),d+a+h}class T1{constructor(){}supports(a){return a instanceof Map||Jy(a)}create(){return new C1}}class C1{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||Jy(a)))throw new Re(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,h)=>{if(c&&c.key===h)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const _=this._getOrCreateRecordForKey(h,d);c=this._insertBeforeOrAppend(c,_)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const d=a._prev;return c._next=a,c._prev=d,a._prev=c,d&&(d._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const h=this._records.get(a);this._maybeAddToChanges(h,c);const _=h._prev,v=h._next;return _&&(_._next=v),v&&(v._prev=_),h._next=null,h._prev=null,h}const d=new A1(a);return this._records.set(a,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(d=>c(a[d],d))}}class A1{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function LD(){return new UD([new VD])}let UD=(()=>{class o{constructor(c){this.factories=c}static create(c,d){if(null!=d){const h=d.factories.slice();c=c.concat(h)}return new o(c)}static extend(c){return{provide:o,useFactory:d=>o.create(c,d||LD()),deps:[[o,new H,new Vd]]}}find(c){const d=this.factories.find(h=>h.supports(c));if(null!=d)return d;throw new Re(901,!1)}}return o.\u0275prov=De({token:o,providedIn:"root",factory:LD}),o})();function cT(){return new ju([new T1])}let ju=(()=>{class o{constructor(c){this.factories=c}static create(c,d){if(d){const h=d.factories.slice();c=c.concat(h)}return new o(c)}static extend(c){return{provide:o,useFactory:d=>o.create(c,d||cT()),deps:[[o,new H,new Vd]]}}find(c){const d=this.factories.find(h=>h.supports(c));if(d)return d;throw new Re(901,!1)}}return o.\u0275prov=De({token:o,providedIn:"root",factory:cT}),o})();const S1=e_(null,"core",[]);let x1=(()=>{class o{constructor(c){}}return o.\u0275fac=function(c){return new(c||o)(Xt(n_))},o.\u0275mod=Tt({type:o}),o.\u0275inj=Ht({}),o})();function R1(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},6101:(Vt,Ve,U)=>{U.d(Ve,{Z:()=>Re});var p=U(2090),ne=U(4859),F=U(9752);U(1877);class de{constructor(be,ye){this._delegate=be,this.firebase=ye,(0,F._addComponent)(be,new ne.wA("app-compat",()=>this,"PUBLIC")),this.container=be.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this._delegate.automaticDataCollectionEnabled=be}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(be=>{this._delegate.checkDestroyed(),be()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(be,ye=F._DEFAULT_ENTRY_NAME){var Pt;this._delegate.checkDestroyed();const kt=this._delegate.container.getProvider(be);return!kt.isInitialized()&&"EXPLICIT"===(null===(Pt=kt.getComponent())||void 0===Pt?void 0:Pt.instantiationMode)&&kt.initialize(),kt.getImmediate({identifier:ye})}_removeServiceInstance(be,ye=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(be).clearInstance(ye)}_addComponent(be){(0,F._addComponent)(this._delegate,be)}_addOrOverwriteComponent(be){(0,F._addOrOverwriteComponent)(this._delegate,be)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const he=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});function Te(){const vt=function we(vt){const be={},ye={__esModule:!0,initializeApp:function Qe(nt,Ee={}){const Me=F.initializeApp(nt,Ee);if((0,p.r3)(be,Me.name))return be[Me.name];const ct=new vt(Me,ye);return be[Me.name]=ct,ct},app:kt,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function Ne(nt){const Ee=nt.name,Me=Ee.replace("-compat","");if(F._registerComponent(nt)&&"PUBLIC"===nt.type){const ct=(at=kt())=>{if("function"!=typeof at[Me])throw he.create("invalid-app-argument",{appName:Ee});return at[Me]()};void 0!==nt.serviceProps&&(0,p.ZB)(ct,nt.serviceProps),ye[Me]=ct,vt.prototype[Me]=function(...at){return this._getService.bind(this,Ee).apply(this,nt.multipleInstances?at:[])}}return"PUBLIC"===nt.type?ye[Me]:null},removeApp:function Pt(nt){delete be[nt]},useAsService:function tt(nt,Ee){return"serverAuth"===Ee?null:Ee},modularAPIs:F}};function kt(nt){if(!(0,p.r3)(be,nt=nt||F._DEFAULT_ENTRY_NAME))throw he.create("no-app",{appName:nt});return be[nt]}return ye.default=ye,Object.defineProperty(ye,"apps",{get:function Be(){return Object.keys(be).map(nt=>be[nt])}}),kt.App=vt,ye}(de);return vt.INTERNAL=Object.assign(Object.assign({},vt.INTERNAL),{createFirebaseNamespace:Te,extendNamespace:function be(ye){(0,p.ZB)(vt,ye)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),vt}const Q=Te();(0,p.jU)()&&void 0!==self.firebase&&self;const Re=Q},9752:(Vt,Ve,U)=>{U.r(Ve),U.d(Ve,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>ii,_DEFAULT_ENTRY_NAME:()=>Ce,_addComponent:()=>Ht,_addOrOverwriteComponent:()=>On,_apps:()=>De,_clearComponents:()=>Fn,_components:()=>bt,_getProvider:()=>pn,_registerComponent:()=>Ut,_removeServiceInstance:()=>Jn,deleteApp:()=>fo,getApp:()=>At,getApps:()=>ns,initializeApp:()=>pi,onLog:()=>po,registerVersion:()=>Xn,setLogLevel:()=>pa});var _e,p=U(5861),ne=U(4859),F=U(1877),oe=U(2090);U(8766);const We=new F.Yd("@firebase/app"),Ce="[DEFAULT]",et={"@firebase/app":"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},De=new Map,bt=new Map;function Ht(Le,Y){try{Le.container.addComponent(Y)}catch(Ae){We.debug(`Component ${Y.name} failed to register with FirebaseApp ${Le.name}`,Ae)}}function On(Le,Y){Le.container.addOrOverwriteComponent(Y)}function Ut(Le){const Y=Le.name;if(bt.has(Y))return We.debug(`There were multiple attempts to register component ${Y}.`),!1;bt.set(Y,Le);for(const Ae of De.values())Ht(Ae,Le);return!0}function pn(Le,Y){const Ae=Le.container.getProvider("heartbeat").getImmediate({optional:!0});return Ae&&Ae.triggerHeartbeat(),Le.container.getProvider(Y)}function Jn(Le,Y,Ae=Ce){pn(Le,Y).clearInstance(Ae)}function Fn(){bt.clear()}const hn=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class mr{constructor(Y,Ae,rt){this._isDeleted=!1,this._options=Object.assign({},Y),this._config=Object.assign({},Ae),this._name=Ae.name,this._automaticDataCollectionEnabled=Ae.automaticDataCollectionEnabled,this._container=rt,this.container.addComponent(new ne.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Y){this.checkDestroyed(),this._automaticDataCollectionEnabled=Y}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Y){this._isDeleted=Y}checkDestroyed(){if(this.isDeleted)throw hn.create("app-deleted",{appName:this._name})}}const ii="9.23.0";function pi(Le,Y={}){let Ae=Le;"object"!=typeof Y&&(Y={name:Y});const rt=Object.assign({name:Ce,automaticDataCollectionEnabled:!1},Y),ot=rt.name;if("string"!=typeof ot||!ot)throw hn.create("bad-app-name",{appName:String(ot)});if(Ae||(Ae=(0,oe.aH)()),!Ae)throw hn.create("no-options");const Tt=De.get(ot);if(Tt){if((0,oe.vZ)(Ae,Tt.options)&&(0,oe.vZ)(rt,Tt.config))return Tt;throw hn.create("duplicate-app",{appName:ot})}const xn=new ne.H0(ot);for(const G of bt.values())xn.addComponent(G);const q=new mr(Ae,rt,xn);return De.set(ot,q),q}function At(Le=Ce){const Y=De.get(Le);if(!Y&&Le===Ce&&(0,oe.aH)())return pi();if(!Y)throw hn.create("no-app",{appName:Le});return Y}function ns(){return Array.from(De.values())}function fo(Le){return(_e=_e||(0,p.Z)(function*(Y){const Ae=Y.name;De.has(Ae)&&(De.delete(Ae),yield Promise.all(Y.container.getProviders().map(rt=>rt.delete())),Y.isDeleted=!0)})).apply(this,arguments)}function Xn(Le,Y,Ae){var rt;let ot=null!==(rt=et[Le])&&void 0!==rt?rt:Le;Ae&&(ot+=`-${Ae}`);const Tt=ot.match(/\s|\//),xn=Y.match(/\s|\//);if(Tt||xn){const q=[`Unable to register library "${ot}" with version "${Y}":`];return Tt&&q.push(`library name "${ot}" contains illegal characters (whitespace or "/")`),Tt&&xn&&q.push("and"),xn&&q.push(`version name "${Y}" contains illegal characters (whitespace or "/")`),void We.warn(q.join(" "))}Ut(new ne.wA(`${ot}-version`,()=>({library:ot,version:Y}),"VERSION"))}function po(Le,Y){if(null!==Le&&"function"!=typeof Le)throw hn.create("invalid-log-argument");(0,F.Am)(Le,Y)}function pa(Le){(0,F.Ub)(Le)}},8140:(Vt,Ve,U)=>{U.d(Ve,{C6:()=>p.getApps,Mq:()=>p.getApp});var p=U(9752)},1274:(Vt,Ve,U)=>{U.d(Ve,{Z:()=>p.Z});var p=U(6101)},8463:(Vt,Ve,U)=>{U.r(Ve);var we,Te,Q,W,X,We,Fe,Re,vt,be,ye,Ne,Ee,Me,Wt,ts,dr,Si,ue,re,et,De,bt,Ht,On,pn,Jn,Hn,qr,vn,Mt,Ot,qs,Sn,go,En,Or,Le,Y,Ae,rt,Tt,xn,G,ee,fe,ae,dt,zt,p=U(5861),ne=U(6101),F=U(2090),oe=U(9752),de=U(7582),_e=U(1877);U(4859);function Pi(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ga=Pi,Zn=new F.LL("auth","Firebase",Pi()),mo=new _e.Yd("@firebase/auth");function _o(C,...g){mo.logLevel<=_e.in.ERROR&&mo.error(`Auth (${oe.SDK_VERSION}): ${C}`,...g)}function rr(C,...g){throw yo(C,...g)}function yr(C,...g){return yo(C,...g)}function Go(C,g,m){const E=Object.assign(Object.assign({},ga()),{[g]:m});return new F.LL("auth","Firebase",E).create(g,{appName:C.name})}function er(C,g,m){if(!(g instanceof m))throw m.name!==g.constructor.name&&rr(C,"argument-error"),Go(C,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function yo(C,...g){if("string"!=typeof C){const m=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=C.name),C._errorFactory.create(m,...E)}return Zn.create(C,...g)}function ze(C,g,...m){if(!C)throw yo(g,...m)}function Sr(C){const g="INTERNAL ASSERTION FAILED: "+C;throw _o(g),new Error(g)}function Mi(C,g){C||Sr(g)}function ma(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.href)||""}function Jh(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.protocol)||null}class _a{constructor(g,m){this.shortDelay=g,this.longDelay=m,Mi(m>g,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function Xh(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function Ln(){return"http:"===Jh()||"https:"===Jh()}()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function zo(C,g){Mi(C.emulator,"Emulator should always be set here");const{url:m}=C.emulator;return g?`${m}${g.startsWith("/")?g.slice(1):g}`:m}class Wu{static initialize(g,m,E){this.fetchImpl=g,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Sr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Sr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Sr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ya={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},si=new _a(3e4,6e4);function ir(C,g){return C.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:C.tenantId}):g}function ln(C,g,m,E){return(we=we||(0,p.Z)(function*(S,N,V,z,ie={}){return Ni(S,ie,(0,p.Z)(function*(){let Se={},It={};z&&("GET"===N?It=z:Se={body:JSON.stringify(z)});const ut=(0,F.xO)(Object.assign({key:S.config.apiKey},It)).slice(1),xt=yield S._getAdditionalHeaders();return xt["Content-Type"]="application/json",S.languageCode&&(xt["X-Firebase-Locale"]=S.languageCode),Wu.fetch()(Ku(S,S.config.apiHost,V,ut),Object.assign({method:N,headers:xt,referrerPolicy:"no-referrer"},Se))}))})).apply(this,arguments)}function Ni(C,g,m){return(Te=Te||(0,p.Z)(function*(E,S,N){E._canInitEmulator=!1;const V=Object.assign(Object.assign({},Ya),S);try{const z=new qc(E),ie=yield Promise.race([N(),z.promise]);z.clearNetworkTimeout();const Se=yield ie.json();if("needConfirmation"in Se)throw Hi(E,"account-exists-with-different-credential",Se);if(ie.ok&&!("errorMessage"in Se))return Se;{const It=ie.ok?Se.errorMessage:Se.error.message,[ut,xt]=It.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ut)throw Hi(E,"credential-already-in-use",Se);if("EMAIL_EXISTS"===ut)throw Hi(E,"email-already-in-use",Se);if("USER_DISABLED"===ut)throw Hi(E,"user-disabled",Se);const sn=V[ut]||ut.toLowerCase().replace(/[_\s]+/g,"-");if(xt)throw Go(E,sn,xt);rr(E,sn)}}catch(z){if(z instanceof F.ZR)throw z;rr(E,"network-request-failed",{message:String(z)})}})).apply(this,arguments)}function rs(C,g,m,E){return(Q=Q||(0,p.Z)(function*(S,N,V,z,ie={}){const Se=yield ln(S,N,V,z,ie);return"mfaPendingCredential"in Se&&rr(S,"multi-factor-auth-required",{_serverResponse:Se}),Se})).apply(this,arguments)}function Ku(C,g,m,E){const S=`${g}${m}?${E}`;return C.config.emulator?zo(C.config,S):`${C.config.apiScheme}://${S}`}class qc{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(yr(this.auth,"network-request-failed")),si.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hi(C,g,m){const E={appName:C.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const S=yr(C,g,E);return S.customData._tokenResponse=m,S}function pg(C,g){return(X=X||(0,p.Z)(function*(m,E){return ln(m,"POST","/v1/accounts:update",E)})).apply(this,arguments)}function ef(C,g){return(We=We||(0,p.Z)(function*(m,E){return ln(m,"POST","/v1/accounts:lookup",E)})).apply(this,arguments)}function Ja(C){if(C)try{const g=new Date(Number(C));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function tf(C){return 1e3*Number(C)}function Wc(C){const[g,m,E]=C.split(".");if(void 0===g||void 0===m||void 0===E)return _o("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,F.tV)(m);return S?JSON.parse(S):(_o("Failed to decode base64 JWT payload"),null)}catch(S){return _o("Caught error parsing JWT payload as JSON",S?.toString()),null}}function vr(C,g){return(Re=Re||(0,p.Z)(function*(m,E,S=!1){if(S)return E;try{return yield E}catch(N){throw N instanceof F.ZR&&j_(N)&&m.auth.currentUser===m&&(yield m.auth.signOut()),N}})).apply(this,arguments)}function j_({code:C}){return"auth/user-disabled"===C||"auth/user-token-expired"===C}class $_{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var m;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const S=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(g=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,p.Z)(function*(){yield m.iteration()}),E)}iteration(){var g=this;return(0,p.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&g.schedule(!0))}g.schedule()})()}}class gg{constructor(g,m){this.createdAt=g,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ja(this.lastLoginAt),this.creationTime=Ja(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Zu(C){return(vt=vt||(0,p.Z)(function*(g){var m;const E=g.auth,S=yield g.getIdToken(),N=yield vr(g,ef(E,{idToken:S}));ze(N?.users.length,E,"internal-error");const V=N.users[0];g._notifyReloadListener(V);const z=null!==(m=V.providerUserInfo)&&void 0!==m&&m.length?uE(V.providerUserInfo):[],ie=nf(g.providerData,z),ut=!!g.isAnonymous&&!(g.email&&V.passwordHash||ie?.length),xt={uid:V.localId,displayName:V.displayName||null,photoURL:V.photoUrl||null,email:V.email||null,emailVerified:V.emailVerified||!1,phoneNumber:V.phoneNumber||null,tenantId:V.tenantId||null,providerData:ie,metadata:new gg(V.createdAt,V.lastLoginAt),isAnonymous:ut};Object.assign(g,xt)})).apply(this,arguments)}function nf(C,g){return[...C.filter(E=>!g.some(S=>S.providerId===E.providerId)),...g]}function uE(C){return C.map(g=>{var{providerId:m}=g,E=(0,de._T)(g,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}class Xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ze(g.idToken,"internal-error"),ze(typeof g.idToken<"u","internal-error"),ze(typeof g.refreshToken<"u","internal-error");const m="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function B_(C){const g=Wc(C);return ze(g,"internal-error"),ze(typeof g.exp<"u","internal-error"),ze(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,m)}getToken(g,m=!1){var E=this;return(0,p.Z)(function*(){return ze(!E.accessToken||E.refreshToken,g,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,m){var E=this;return(0,p.Z)(function*(){const{accessToken:S,refreshToken:N,expiresIn:V}=yield function G_(C,g){return(ye=ye||(0,p.Z)(function*(m,E){const S=yield Ni(m,{},(0,p.Z)(function*(){const N=(0,F.xO)({grant_type:"refresh_token",refresh_token:E}).slice(1),{tokenApiHost:V,apiKey:z}=m.config,ie=Ku(m,V,"/v1/token",`key=${z}`),Se=yield m._getAdditionalHeaders();return Se["Content-Type"]="application/x-www-form-urlencoded",Wu.fetch()(ie,{method:"POST",headers:Se,body:N})}));return{accessToken:S.access_token,expiresIn:S.expires_in,refreshToken:S.refresh_token}})).apply(this,arguments)}(g,m);E.updateTokensAndExpiration(S,N,Number(V))})()}updateTokensAndExpiration(g,m,E){this.refreshToken=m||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,m){const{refreshToken:E,accessToken:S,expirationTime:N}=m,V=new Xa;return E&&(ze("string"==typeof E,"internal-error",{appName:g}),V.refreshToken=E),S&&(ze("string"==typeof S,"internal-error",{appName:g}),V.accessToken=S),N&&(ze("number"==typeof N,"internal-error",{appName:g}),V.expirationTime=N),V}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Xa,this.toJSON())}_performRefresh(){return Sr("not implemented")}}function Ws(C,g){ze("string"==typeof C||typeof C>"u","internal-error",{appName:g})}class Qu{constructor(g){var{uid:m,auth:E,stsTokenManager:S}=g,N=(0,de._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new gg(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(g){var m=this;return(0,p.Z)(function*(){const E=yield vr(m,m.stsTokenManager.getToken(m.auth,g));return ze(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(g){return function Ms(C){return(Fe=Fe||(0,p.Z)(function*(g,m=!1){const E=(0,F.m9)(g),S=yield E.getIdToken(m),N=Wc(S);ze(N&&N.exp&&N.auth_time&&N.iat,E.auth,"internal-error");const V="object"==typeof N.firebase?N.firebase:void 0,z=V?.sign_in_provider;return{claims:N,token:S,authTime:Ja(tf(N.auth_time)),issuedAtTime:Ja(tf(N.iat)),expirationTime:Ja(tf(N.exp)),signInProvider:z||null,signInSecondFactor:V?.sign_in_second_factor||null}})).apply(this,arguments)}(this,g)}reload(){return function H_(C){return(be=be||(0,p.Z)(function*(g){const m=(0,F.m9)(g);yield Zu(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}(this)}_assign(g){this!==g&&(ze(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(m=>Object.assign({},m)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const m=new Qu(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(g){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,m=!1){var E=this;return(0,p.Z)(function*(){let S=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),S=!0),m&&(yield Zu(E)),yield E.auth._persistUserIfCurrent(E),S&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,p.Z)(function*(){const m=yield g.getIdToken();return yield vr(g,function cd(C,g){return(W=W||(0,p.Z)(function*(m,E){return ln(m,"POST","/v1/accounts:delete",E)})).apply(this,arguments)}(g.auth,{idToken:m})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,m){var E,S,N,V,z,ie,Se,It;const ut=null!==(E=m.displayName)&&void 0!==E?E:void 0,xt=null!==(S=m.email)&&void 0!==S?S:void 0,sn=null!==(N=m.phoneNumber)&&void 0!==N?N:void 0,Qn=null!==(V=m.photoURL)&&void 0!==V?V:void 0,Li=null!==(z=m.tenantId)&&void 0!==z?z:void 0,Zi=null!==(ie=m._redirectEventId)&&void 0!==ie?ie:void 0,Sc=null!==(Se=m.createdAt)&&void 0!==Se?Se:void 0,Ay=null!==(It=m.lastLoginAt)&&void 0!==It?It:void 0,{uid:qg,emailVerified:by,isAnonymous:Wg,providerData:Oa,stsTokenManager:Dl}=m;ze(qg&&Dl,g,"internal-error");const Sl=Xa.fromJSON(this.name,Dl);ze("string"==typeof qg,g,"internal-error"),Ws(ut,g.name),Ws(xt,g.name),ze("boolean"==typeof by,g,"internal-error"),ze("boolean"==typeof Wg,g,"internal-error"),Ws(sn,g.name),Ws(Qn,g.name),Ws(Li,g.name),Ws(Zi,g.name),Ws(Sc,g.name),Ws(Ay,g.name);const Yd=new Qu({uid:qg,auth:g,email:xt,emailVerified:by,displayName:ut,isAnonymous:Wg,photoURL:Qn,phoneNumber:sn,tenantId:Li,stsTokenManager:Sl,createdAt:Sc,lastLoginAt:Ay});return Oa&&Array.isArray(Oa)&&(Yd.providerData=Oa.map(Br=>Object.assign({},Br))),Zi&&(Yd._redirectEventId=Zi),Yd}static _fromIdTokenResponse(g,m,E=!1){return(0,p.Z)(function*(){const S=new Xa;S.updateFromServerResponse(m);const N=new Qu({uid:m.localId,auth:g,stsTokenManager:S,isAnonymous:E});return yield Zu(N),N})()}}const z_=new Map;function Ns(C){Mi(C instanceof Function,"Expected a class definition");let g=z_.get(C);return g?(Mi(g instanceof C,"Instance stored in cache mismatched with class"),g):(g=new C,z_.set(C,g),g)}function qo(C,g,m){return`firebase:${C}:${g}:${m}`}function Qc(C=(0,F.z$)()){const g=C.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Wo(C=(0,F.z$)()){return/android/i.test(C)}function Ko(C=(0,F.z$)()){return/iphone|ipad|ipod/i.test(C)||/macintosh/i.test(C)&&/mobile/i.test(C)}function W_(C=(0,F.z$)()){return Ko(C)||Wo(C)||function is(C=(0,F.z$)()){return/webos/i.test(C)}(C)||function af(C=(0,F.z$)()){return/blackberry/i.test(C)}(C)||/windows phone/i.test(C)||function sf(C=(0,F.z$)()){return/iemobile/i.test(C)}(C)}function Er(C){return(0,F.m9)(C)}class Ea{constructor(g,m){this.providerId=g,this.signInMethod=m}toJSON(){return Sr("not implemented")}_getIdTokenResponse(g){return Sr("not implemented")}_linkToIdToken(g,m){return Sr("not implemented")}_getReauthenticationResolver(g){return Sr("not implemented")}}function Ir(C,g){return(Ne=Ne||(0,p.Z)(function*(m,E){return ln(m,"POST","/v1/accounts:update",E)})).apply(this,arguments)}function Gi(C,g){return(Ee=Ee||(0,p.Z)(function*(m,E){return ln(m,"POST","/v1/accounts:sendOobCode",ir(m,E))})).apply(this,arguments)}function Jc(C,g){return(Me=Me||(0,p.Z)(function*(m,E){return Gi(m,E)})).apply(this,arguments)}function hr(C,g){return(Wt=Wt||(0,p.Z)(function*(m,E){return Gi(m,E)})).apply(this,arguments)}function oi(C,g){return(ts=ts||(0,p.Z)(function*(m,E){return rs(m,"POST","/v1/accounts:signInWithIdp",ir(m,E))})).apply(this,arguments)}class ki extends Ea{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const m=new ki(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(m.idToken=g.idToken),g.accessToken&&(m.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(m.nonce=g.nonce),g.pendingToken&&(m.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(m.accessToken=g.oauthToken,m.secret=g.oauthTokenSecret):rr("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:S}=m,N=(0,de._T)(m,["providerId","signInMethod"]);if(!E||!S)return null;const V=new ki(E,S);return V.idToken=N.idToken||void 0,V.accessToken=N.accessToken||void 0,V.secret=N.secret,V.nonce=N.nonce,V.pendingToken=N.pendingToken||null,V}_getIdTokenResponse(g){return oi(g,this.buildRequest())}_linkToIdToken(g,m){const E=this.buildRequest();return E.idToken=m,oi(g,E)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,oi(g,m)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),g.postBody=(0,F.xO)(m)}return g}}function Ys(C,g){return(dr=dr||(0,p.Z)(function*(m,E){return ln(m,"POST","/v1/accounts:sendVerificationCode",ir(m,E))})).apply(this,arguments)}const Ig={USER_NOT_FOUND:"user-not-found"};class Js extends Ea{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,m){return new Js({verificationId:g,verificationCode:m})}static _fromTokenResponse(g,m){return new Js({phoneNumber:g,temporaryProof:m})}_getIdTokenResponse(g){return function Eg(C,g){return(Si=Si||(0,p.Z)(function*(m,E){return rs(m,"POST","/v1/accounts:signInWithPhoneNumber",ir(m,E))})).apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,m){return function pf(C,g){return(ue=ue||(0,p.Z)(function*(m,E){const S=yield rs(m,"POST","/v1/accounts:signInWithPhoneNumber",ir(m,E));if(S.temporaryProof)throw Hi(m,"account-exists-with-different-credential",S);return S})).apply(this,arguments)}(g,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function md(C,g){return(re=re||(0,p.Z)(function*(m,E){return rs(m,"POST","/v1/accounts:signInWithPhoneNumber",ir(m,Object.assign(Object.assign({},E),{operation:"REAUTH"})),Ig)})).apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:m,verificationId:E,verificationCode:S}=this.params;return g&&m?{temporaryProof:g,phoneNumber:m}:{sessionInfo:E,code:S}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:m,verificationCode:E,phoneNumber:S,temporaryProof:N}=g;return E||m||S||N?new Js({verificationId:m,verificationCode:E,phoneNumber:S,temporaryProof:N}):null}}class _s{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Eo extends _s{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ru extends Eo{static credentialFromJSON(g){const m="string"==typeof g?JSON.parse(g):g;return ze("providerId"in m&&"signInMethod"in m,"argument-error"),ki._fromParams(m)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ze(g.idToken||g.accessToken,"argument-error"),ki._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ru.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ru.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:S,pendingToken:N,nonce:V,providerId:z}=g;if(!E&&!S&&!m&&!N||!z)return null;try{return new ru(z)._credential({idToken:m,accessToken:E,nonce:V,pendingToken:N})}catch{return null}}}let yd=(()=>{class C extends Eo{constructor(){super("facebook.com")}static credential(m){return ki._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return C.credentialFromTaggedObject(m)}static credentialFromError(m){return C.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return C.credential(m.oauthAccessToken)}catch{return null}}}return C.FACEBOOK_SIGN_IN_METHOD="facebook.com",C.PROVIDER_ID="facebook.com",C})(),vd=(()=>{class C extends Eo{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return ki._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return C.credentialFromTaggedObject(m)}static credentialFromError(m){return C.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:S}=m;if(!E&&!S)return null;try{return C.credential(E,S)}catch{return null}}}return C.GOOGLE_SIGN_IN_METHOD="google.com",C.PROVIDER_ID="google.com",C})(),ec=(()=>{class C extends Eo{constructor(){super("github.com")}static credential(m){return ki._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return C.credentialFromTaggedObject(m)}static credentialFromError(m){return C.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return C.credential(m.oauthAccessToken)}catch{return null}}}return C.GITHUB_SIGN_IN_METHOD="github.com",C.PROVIDER_ID="github.com",C})();class el extends Ea{constructor(g,m){super(g,g),this.pendingToken=m}_getIdTokenResponse(g){return oi(g,this.buildRequest())}_linkToIdToken(g,m){const E=this.buildRequest();return E.idToken=m,oi(g,E)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,oi(g,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:S,pendingToken:N}=m;return E&&S&&N&&E===S?new el(E,N):null}static _create(g,m){return new el(g,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let sr=(()=>{class C extends Eo{constructor(){super("twitter.com")}static credential(m,E){return ki._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return C.credentialFromTaggedObject(m)}static credentialFromError(m){return C.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:S}=m;if(!E||!S)return null;try{return C.credential(E,S)}catch{return null}}}return C.TWITTER_SIGN_IN_METHOD="twitter.com",C.PROVIDER_ID="twitter.com",C})();class ks{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,m,E,S=!1){return(0,p.Z)(function*(){const N=yield Qu._fromIdTokenResponse(g,E,S),V=gf(E);return new ks({user:N,providerId:V,_tokenResponse:E,operationType:m})})()}static _forOperation(g,m,E){return(0,p.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const S=gf(E);return new ks({user:g,providerId:S,_tokenResponse:E,operationType:m})})()}}function gf(C){return C.providerId?C.providerId:"phoneNumber"in C?"phone":null}class Ed extends F.ZR{constructor(g,m,E,S){var N;super(m.code,m.message),this.operationType=E,this.user=S,Object.setPrototypeOf(this,Ed.prototype),this.customData={appName:g.name,tenantId:null!==(N=g.tenantId)&&void 0!==N?N:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,m,E,S){return new Ed(g,m,E,S)}}function mf(C,g,m,E){return("reauthenticate"===g?m._getReauthenticationResolver(C):m._getIdTokenResponse(C)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Ed._fromErrorAndOperation(C,N,g,E):N})}function tl(C){return new Set(C.map(({providerId:g})=>g).filter(g=>!!g))}function Qo(C,g){return(De=De||(0,p.Z)(function*(m,E,S=!1){const N=yield vr(m,E._linkToIdToken(m.auth,yield m.getIdToken()),S);return ks._forOperation(m,"link",N)})).apply(this,arguments)}function Ia(C,g,m){return(bt=bt||(0,p.Z)(function*(E,S,N){yield Zu(S);const z=!1===E?"provider-already-linked":"no-such-provider";ze(tl(S.providerData).has(N)===E,S.auth,z)})).apply(this,arguments)}function Id(C,g){return(Ht=Ht||(0,p.Z)(function*(m,E,S=!1){const{auth:N}=m,V="reauthenticate";try{const z=yield vr(m,mf(N,V,E,m),S);ze(z.idToken,N,"internal-error");const ie=Wc(z.idToken);ze(ie,N,"internal-error");const{sub:Se}=ie;return ze(m.uid===Se,N,"user-mismatch"),ks._forOperation(m,V,z)}catch(z){throw"auth/user-not-found"===z?.code&&rr(N,"user-mismatch"),z}})).apply(this,arguments)}function wa(C,g){return(pn=pn||(0,p.Z)(function*(m,E){const S=(0,F.m9)(m);return yield Ia(!1,S,E.providerId),Qo(S,E)})).apply(this,arguments)}function wg(C,g){return(Jn=Jn||(0,p.Z)(function*(m,E){return Id((0,F.m9)(m),E)})).apply(this,arguments)}class iu{constructor(g,m){this.factorId=g,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(g,m){return"phoneInfo"in m?Td._fromServerResponse(g,m):"totpInfo"in m?nc._fromServerResponse(g,m):rr(g,"internal-error")}}class Td extends iu{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,m){return new Td(m)}}class nc extends iu{constructor(g){super("totp",g)}static _fromServerResponse(g,m){return new nc(m)}}function Io(C,g,m){var E;ze((null===(E=m.url)||void 0===E?void 0:E.length)>0,C,"invalid-continue-uri"),ze(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,C,"invalid-dynamic-link-domain"),g.continueUrl=m.url,g.dynamicLinkDomain=m.dynamicLinkDomain,g.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ze(m.iOS.bundleId.length>0,C,"missing-ios-bundle-id"),g.iOSBundleId=m.iOS.bundleId),m.android&&(ze(m.android.packageName.length>0,C,"missing-android-pkg-name"),g.androidInstallApp=m.android.installApp,g.androidMinimumVersionCode=m.android.minimumVersion,g.androidPackageName=m.android.packageName)}function Ad(C,g){return(vn=vn||(0,p.Z)(function*(m,E){return ln(m,"POST","/v1/accounts:update",E)})).apply(this,arguments)}function Ca(C,g,m){return(Ot=Ot||(0,p.Z)(function*(E,S,N){const{auth:V}=E,ie={idToken:yield E.getIdToken(),returnSecureToken:!0};S&&(ie.email=S),N&&(ie.password=N);const Se=yield vr(E,Ir(V,ie));yield E._updateTokensIfNecessary(Se,!0)})).apply(this,arguments)}class To{constructor(g,m,E={}){this.isNewUser=g,this.providerId=m,this.profile=E}}class uc extends To{constructor(g,m,E,S){super(g,m,E),this.username=S}}class sl extends To{constructor(g,m){super(g,"facebook.com",m)}}class ol extends uc{constructor(g,m){super(g,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class al extends To{constructor(g,m){super(g,"google.com",m)}}class vf extends uc{constructor(g,m,E){super(g,"twitter.com",m,E)}}function ul(C){const{user:g,_tokenResponse:m}=C;return g.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Dd(C){var g,m;if(!C)return null;const{providerId:E}=C,S=C.rawUserInfo?JSON.parse(C.rawUserInfo):{},N=C.isNewUser||"identitytoolkit#SignupNewUserResponse"===C.kind;if(!E&&C?.idToken){const V=null===(m=null===(g=Wc(C.idToken))||void 0===g?void 0:g.firebase)||void 0===m?void 0:m.sign_in_provider;if(V)return new To(N,"anonymous"!==V&&"custom"!==V?V:null)}if(!E)return null;switch(E){case"facebook.com":return new sl(N,S);case"github.com":return new ol(N,S);case"google.com":return new al(N,S);case"twitter.com":return new vf(N,S,C.screenName||null);case"custom":case"anonymous":return new To(N,null);default:return new To(N,E,S)}}(m)}class Co{constructor(g,m,E){this.type=g,this.credential=m,this.auth=E}static _fromIdtoken(g,m){return new Co("enroll",g,m)}static _fromMfaPendingCredential(g){return new Co("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var m,E;if(g?.multiFactorSession){if(null!==(m=g.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Co._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(E=g.multiFactorSession)&&void 0!==E&&E.idToken)return Co._fromIdtoken(g.multiFactorSession.idToken)}return null}}class cu{constructor(g,m,E){this.session=g,this.hints=m,this.signInResolver=E}static _fromError(g,m){var E;const S=Er(g),N=m.customData._serverResponse,V=(N.mfaInfo||[]).map(ie=>iu._fromServerResponse(S,ie));ze(N.mfaPendingCredential,S,"internal-error");const z=Co._fromMfaPendingCredential(N.mfaPendingCredential);return new cu(z,V,function(ie){return(E=E||(0,p.Z)(function*(Se){const It=yield Se._process(S,z);delete N.mfaInfo,delete N.mfaPendingCredential;const ut=Object.assign(Object.assign({},N),{idToken:It.idToken,refreshToken:It.refreshToken});switch(m.operationType){case"signIn":const xt=yield ks._fromIdTokenResponse(S,m.operationType,ut);return yield S._updateCurrentUser(xt.user),xt;case"reauthenticate":return ze(m.user,S,"internal-error"),ks._forOperation(m.user,m.operationType,ut);default:rr(S,"internal-error")}})).apply(this,arguments)})}resolveSignIn(g){var m=this;return(0,p.Z)(function*(){return m.signInResolver(g)})()}}function Ef(C,g){return ln(C,"POST","/v2/accounts/mfaEnrollment:start",ir(C,g))}class lc{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>iu._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new lc(g)}getSession(){var g=this;return(0,p.Z)(function*(){return Co._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,m){var E=this;return(0,p.Z)(function*(){const S=g,N=yield E.getSession(),V=yield vr(E.user,S._process(E.user.auth,N,m));return yield E.user._updateTokensIfNecessary(V),E.user.reload()})()}unenroll(g){var m=this;return(0,p.Z)(function*(){const E="string"==typeof g?g:g.uid,S=yield m.user.getIdToken();try{const N=yield vr(m.user,function ba(C,g){return ln(C,"POST","/v2/accounts/mfaEnrollment:withdraw",ir(C,g))}(m.user.auth,{idToken:S,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:V})=>V!==E),yield m.user._updateTokensIfNecessary(N),yield m.user.reload()}catch(N){throw N}})()}}const du=new WeakMap;class dl{constructor(g,m){this.storageRetriever=g,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem("__sak","1"),this.storage.removeItem("__sak"),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,m){return this.storage.setItem(g,JSON.stringify(m)),Promise.resolve()}_get(g){const m=this.storage.getItem(g);return Promise.resolve(m?JSON.parse(m):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Pd=(()=>{class C extends dl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function kn(){const C=(0,F.z$)();return Qc(C)||Ko(C)}()&&function Fr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=W_(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const S=this.storage.getItem(E),N=this.localCache[E];S!==N&&m(E,N,S)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((z,ie,Se)=>{this.notifyListeners(z,Se)});const S=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const z=this.storage.getItem(S);if(m.newValue!==z)null!==m.newValue?this.storage.setItem(S,m.newValue):this.storage.removeItem(S);else if(this.localCache[S]===m.newValue&&!E)return}const N=()=>{const z=this.storage.getItem(S);!E&&this.localCache[S]===z||this.notifyListeners(S,z)},V=this.storage.getItem(S);!function q_(){return(0,F.w1)()&&10===document.documentMode}()||V===m.newValue||m.newValue===m.oldValue?N():setTimeout(N,10)}notifyListeners(m,E){this.localCache[m]=E;const S=this.listeners[m];if(S)for(const N of Array.from(S))N(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var S=()=>super._set,N=this;return(0,p.Z)(function*(){yield S().call(N,m,E),N.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,S=this;return(0,p.Z)(function*(){const N=yield E().call(S,m);return S.localCache[m]=JSON.stringify(N),N})()}_remove(m){var E=()=>super._remove,S=this;return(0,p.Z)(function*(){yield E().call(S,m),delete S.localCache[m]})()}}return C.type="LOCAL",C})(),Da=(()=>{class C extends dl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return C.type="SESSION",C})();function hl(C="",g=10){let m="";for(let E=0;E<g;E++)m+=Math.floor(10*Math.random());return C+m}function fn(){return window}function Tf(C,g){return ln(C,"POST","/v2/accounts/mfaSignIn:start",ir(C,g))}const pl="recaptcha";class Xt{constructor(g,m){this.verificationId=g,this.onConfirmation=m}confirm(g){const m=Js._fromVerification(this.verificationId,g);return this.onConfirmation(m)}}function vs(C,g,m){return(go=go||(0,p.Z)(function*(E,S,N){var V;const z=yield N.verify();try{let ie;if(ze("string"==typeof z,E,"argument-error"),ze(N.type===pl,E,"argument-error"),ie="string"==typeof S?{phoneNumber:S}:S,"session"in ie){const Se=ie.session;if("phoneNumber"in ie)return ze("enroll"===Se.type,E,"internal-error"),(yield Ef(E,{idToken:Se.credential,phoneEnrollmentInfo:{phoneNumber:ie.phoneNumber,recaptchaToken:z}})).phoneSessionInfo.sessionInfo;{ze("signin"===Se.type,E,"internal-error");const It=(null===(V=ie.multiFactorHint)||void 0===V?void 0:V.uid)||ie.multiFactorUid;return ze(It,E,"missing-multi-factor-info"),(yield Tf(E,{mfaPendingCredential:Se.credential,mfaEnrollmentId:It,phoneSignInInfo:{recaptchaToken:z}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Se}=yield Ys(E,{phoneNumber:ie.phoneNumber,recaptchaToken:z});return Se}}finally{N._reset()}})).apply(this,arguments)}let gc=(()=>{class C{constructor(m){this.providerId=C.PROVIDER_ID,this.auth=Er(m)}verifyPhoneNumber(m,E){return vs(this.auth,m,(0,F.m9)(E))}static credential(m,E){return Js._fromVerification(m,E)}static credentialFromResult(m){return C.credentialFromTaggedObject(m)}static credentialFromError(m){return C.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:S}=m;return E&&S?Js._fromTokenResponse(E,S):null}}return C.PROVIDER_ID="phone",C.PHONE_SIGN_IN_METHOD="phone",C})();function Sa(C,g){return g?Ns(g):(ze(C._popupRedirectResolver,C,"argument-error"),C._popupRedirectResolver)}class Fi extends Ea{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return oi(g,this._buildIdpRequest())}_linkToIdToken(g,m){return oi(g,this._buildIdpRequest(m))}_getReauthenticationResolver(g){return oi(g,this._buildIdpRequest())}_buildIdpRequest(g){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(m.idToken=g),m}}function Vd(C){return function wd(C,g){return(On=On||(0,p.Z)(function*(m,E,S=!1){const N="signIn",V=yield mf(m,N,E),z=yield ks._fromIdTokenResponse(m,N,V);return S||(yield m._updateCurrentUser(z.user)),z})).apply(this,arguments)}(C.auth,new Fi(C),C.bypassAuthState)}function xg(C){const{auth:g,user:m}=C;return ze(m,g,"internal-error"),Id(m,new Fi(C),C.bypassAuthState)}function H(C){return(Or=Or||(0,p.Z)(function*(g){const{auth:m,user:E}=g;return ze(E,m,"internal-error"),Qo(E,new Fi(g),g.bypassAuthState)})).apply(this,arguments)}class ml{constructor(g,m,E,S,N=!1){this.auth=g,this.resolver=E,this.user=S,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var m,g=this;return new Promise(function(E,S){return(m=m||(0,p.Z)(function*(N,V){g.pendingPromise={resolve:N,reject:V};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(z){g.reject(z)}})).apply(this,arguments)})}onAuthEvent(g){var m=this;return(0,p.Z)(function*(){const{urlResponse:E,sessionId:S,postBody:N,tenantId:V,error:z,type:ie}=g;if(z)return void m.reject(z);const Se={auth:m.auth,requestUri:E,sessionId:S,tenantId:V||void 0,postBody:N||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(ie)(Se))}catch(It){m.reject(It)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Vd;case"linkViaPopup":case"linkViaRedirect":return H;case"reauthViaPopup":case"reauthViaRedirect":return xg;default:rr(this.auth,"internal-error")}}resolve(g){Mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xa=new _a(2e3,1e4);let Wi=(()=>{class C extends ml{constructor(m,E,S,N,V){super(m,E,N,V),this.provider=S,this.authWindow=null,this.pollId=null,C.currentPopupAction&&C.currentPopupAction.cancel(),C.currentPopupAction=this}executeNotNull(){var m=this;return(0,p.Z)(function*(){const E=yield m.execute();return ze(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,p.Z)(function*(){Mi(1===m.filter.length,"Popup operations only handle one event");const E=hl();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(S=>{m.reject(S)}),m.resolver._isIframeWebStorageSupported(m.auth,S=>{S||m.reject(yr(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(yr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,S;this.pollId=null!==(S=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(yr(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,xa.get())};m()}}return C.currentPopupAction=null,C})();const Es=new Map;class Yt extends ml{constructor(g,m,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,m=this;return(0,p.Z)(function*(){let E=Es.get(m.auth._key());if(!E){try{const N=(yield function _l(C,g){return(Ae=Ae||(0,p.Z)(function*(m,E){const S=Af(E),N=Rg(m);if(!(yield N._isAvailable()))return!1;const V="true"===(yield N._get(S));return yield N._remove(S),V})).apply(this,arguments)}(m.resolver,m.auth))?yield g().call(m):null;E=()=>Promise.resolve(N)}catch(S){E=()=>Promise.reject(S)}Es.set(m.auth._key(),E)}return m.bypassAuthState||Es.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var m=()=>super.onAuthEvent,E=this;return(0,p.Z)(function*(){if("signInViaRedirect"===g.type)return m().call(E,g);if("unknown"!==g.type){if(g.eventId){const S=yield E.auth._redirectUserForId(g.eventId);if(S)return E.user=S,m().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function _u(C,g){return(rt=rt||(0,p.Z)(function*(m,E){return Rg(m)._set(Af(E),"true")})).apply(this,arguments)}function yl(C,g){Es.set(C._key(),g)}function Rg(C){return Ns(C._redirectPersistence)}function Af(C){return qo("pendingRedirect",C.config.apiKey,C.name)}function bo(C,g){return(G=G||(0,p.Z)(function*(m,E,S=!1){const N=Er(m),V=Sa(N,E),ie=yield new Yt(N,V,S).execute();return ie&&!S&&(delete ie.user._redirectEventId,yield N._persistUserIfCurrent(ie.user),yield N._setRedirectUser(null,E)),ie})).apply(this,arguments)}function El(C){return(ee=ee||(0,p.Z)(function*(g){const m=hl(`${g.uid}:::`);return g._redirectEventId=m,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),m})).apply(this,arguments)}class Mg{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(m=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Do(C){switch(C.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bd(C);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=g,m=!0)),m}sendToConsumer(g,m){var E;if(g.error&&!Bd(g)){const S=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(yr(this.auth,S))}else m.onAuthEvent(g)}isEventForConsumer(g,m){const E=null===m.eventId||!!g.eventId&&g.eventId===m.eventId;return m.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pa(g))}saveEventToCache(g){this.cachedEventUids.add(Pa(g)),this.lastProcessedEventTime=Date.now()}}function Pa(C){return[C.type,C.eventId,C.sessionId,C.tenantId].filter(g=>g).join("-")}function Bd({type:C,error:g}){return"unknown"===C&&"auth/no-auth-event"===g?.code}function yu(C){return(fe=fe||(0,p.Z)(function*(g,m={}){return ln(g,"GET","/v1/projects",m)})).apply(this,arguments)}const mc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ng=/^https?/;function kg(C){const g=ma(),{protocol:m,hostname:E}=new URL(g);if(C.startsWith("chrome-extension://")){const V=new URL(C);return""===V.hostname&&""===E?"chrome-extension:"===m&&C.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===m&&V.hostname===E}if(!Ng.test(m))return!1;if(mc.test(C))return E===C;const S=C.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(E)}const Jo=new _a(3e4,6e4);function jd(){const C=fn().___jsl;if(C?.H)for(const g of Object.keys(C.H))if(C.H[g].r=C.H[g].r||[],C.H[g].L=C.H[g].L||[],C.H[g].r=[...C.H[g].L],C.CP)for(let m=0;m<C.CP.length;m++)C.CP[m]=null}let vu=null;function $d(C){return vu=vu||function Xo(C){return new Promise((g,m)=>{var E,S,N;function V(){jd(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{jd(),m(yr(C,"network-request-failed"))},timeout:Jo.get()})}if(null!==(S=null===(E=fn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==S&&S.Iframe)g(gapi.iframes.getContext());else{if(null===(N=fn().gapi)||void 0===N||!N.load){const z=function _g(C){return`__${C}${Math.floor(1e6*Math.random())}`}("iframefcb");return fn()[z]=()=>{gapi.load?V():m(yr(C,"network-request-failed"))},function Zr(C){return new Promise((g,m)=>{const E=document.createElement("script");E.setAttribute("src",C),E.onload=g,E.onerror=S=>{const N=yr("internal-error");N.customData=S,m(N)},E.type="text/javascript",E.charset="UTF-8",function nu(){var C,g;return null!==(g=null===(C=document.getElementsByTagName("head"))||void 0===C?void 0:C[0])&&void 0!==g?g:document}().appendChild(E)})}(`https://apis.google.com/js/api.js?onload=${z}`).catch(ie=>m(ie))}V()}}).catch(g=>{throw vu=null,g})}(C),vu}const yc=new _a(5e3,15e3),bf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},b=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function D(C){const g=C.config;ze(g.authDomain,C,"auth-domain-config-required");const m=g.emulator?zo(g,"emulator/auth/iframe"):`https://${C.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:C.name,v:oe.SDK_VERSION},S=b.get(C.config.apiHost);S&&(E.eid=S);const N=C._getFrameworks();return N.length&&(E.fw=N.join(",")),`${m}?${(0,F.xO)(E).slice(1)}`}const O={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ke{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gt(C,g,m,E=500,S=600){const N=Math.max((window.screen.availHeight-S)/2,0).toString(),V=Math.max((window.screen.availWidth-E)/2,0).toString();let z="";const ie=Object.assign(Object.assign({},O),{width:E.toString(),height:S.toString(),top:N,left:V}),Se=(0,F.z$)().toLowerCase();m&&(z=function rf(C=(0,F.z$)()){return/crios\//i.test(C)}(Se)?"_blank":m),function Zc(C=(0,F.z$)()){return/firefox\//i.test(C)}(Se)&&(g=g||"http://localhost",ie.scrollbars="yes");const It=Object.entries(ie).reduce((xt,[sn,Qn])=>`${xt}${sn}=${Qn},`,"");if(function Ks(C=(0,F.z$)()){var g;return Ko(C)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Se)&&"_self"!==z)return function st(C,g){const m=document.createElement("a");m.href=C,m.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(g||"",z),new Ke(null);const ut=window.open(g||"",z,It);ze(ut,C,"popup-blocked");try{ut.focus()}catch{}return new Ke(ut)}const zn=encodeURIComponent("fac");function an(C,g,m,E,S,N){return(zt=zt||(0,p.Z)(function*(V,z,ie,Se,It,ut){ze(V.config.authDomain,V,"auth-domain-config-required"),ze(V.config.apiKey,V,"invalid-api-key");const xt={apiKey:V.config.apiKey,appName:V.name,authType:ie,redirectUrl:Se,v:oe.SDK_VERSION,eventId:It};if(z instanceof _s){z.setDefaultLanguage(V.languageCode),xt.providerId=z.providerId||"",(0,F.xb)(z.getCustomParameters())||(xt.customParameters=JSON.stringify(z.getCustomParameters()));for(const[Zi,Sc]of Object.entries(ut||{}))xt[Zi]=Sc}if(z instanceof Eo){const Zi=z.getScopes().filter(Sc=>""!==Sc);Zi.length>0&&(xt.scopes=Zi.join(","))}V.tenantId&&(xt.tid=V.tenantId);const sn=xt;for(const Zi of Object.keys(sn))void 0===sn[Zi]&&delete sn[Zi];const Qn=yield V._getAppCheckToken(),Li=Qn?`#${zn}=${encodeURIComponent(Qn)}`:"";return`${Cr(V)}?${(0,F.xO)(sn).slice(1)}${Li}`})).apply(this,arguments)}function Cr({config:C}){return C.emulator?zo(C,"emulator/auth/handler"):`https://${C.authDomain}/__/auth/handler`}const Ur="webStorageSupport";var Sf,dE,vc,xf,Ec;function xo(){return window}function hy(C){return(xf=xf||(0,p.Z)(function*(g){const m=fy(g),E=yield crypto.subtle.digest("SHA-256",m);return Array.from(new Uint8Array(E)).map(N=>N.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function fy(C){if(Mi(/[0-9a-zA-Z]+/.test(C),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(C);const g=new ArrayBuffer(C.length),m=new Uint8Array(g);for(let E=0;E<C.length;E++)m[E]=C.charCodeAt(E);return m}class $g extends Mg{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(g)),super.onEvent(g)}initialized(){var g=this;return(0,p.Z)(function*(){yield g.initPromise})()}}function Gd(C){return(Ec=Ec||(0,p.Z)(function*(g){const m=yield ws()._get(Mf(g));return m&&(yield ws()._remove(Mf(g))),m})).apply(this,arguments)}function gy(C,g){var m,E;const S=function wc(C){const g=Nf(C),m=g.link?decodeURIComponent(g.link):void 0,E=Nf(m).link,S=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Nf(S).link||S||E||m||C}(g);if(S.includes("/__/auth/callback")){const N=Nf(S),V=N.firebaseError?function _y(C){try{return JSON.parse(C)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,z=null===(E=null===(m=V?.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],ie=z?yr(z):null;return ie?{type:C.type,eventId:C.eventId,tenantId:C.tenantId,error:ie,urlResponse:null,sessionId:null,postBody:null}:{type:C.type,eventId:C.eventId,tenantId:C.tenantId,sessionId:C.sessionId,urlResponse:S,postBody:null}}return null}function my(){const C=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*g.length);C.push(g.charAt(E))}return C.join("")}function ws(){return Ns(Pd)}function Mf(C){return qo("authEvent",C.config.apiKey,C.name)}function Nf(C){if(!C?.includes("?"))return{};const[g,...m]=C.split("?");return(0,F.zd)(m.join("?"))}function kf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:yr("no-auth-event")}}var zd,Cc,Iu;function wu(){var C;return(null===(C=self?.location)||void 0===C?void 0:C.protocol)||null}function bc(){return function Tu(C=(0,F.z$)()){return!("file:"!==wu()&&"ionic:"!==wu()&&"capacitor:"!==wu()||!C.toLowerCase().match(/iphone|ipad|ipod|android/))}()&&typeof document<"u"}const Ey="persistence";function Bf(C){return(Cc=Cc||(0,p.Z)(function*(g){yield g._initializationPromise;const m=Na(),E=qo(Ey,g.config.apiKey,g.name);m&&m.setItem(E,g._getPersistence())})).apply(this,arguments)}function Na(){var C;try{return(null===(C=function vy(){return typeof window<"u"?window:null}())||void 0===C?void 0:C.sessionStorage)||null}catch{return null}}const ka=ze;class Ro{constructor(){this.browserResolver=Ns(class en{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Da,this._completeRedirectFn=bo,this._overrideRedirectResult=yl}_openPopup(g,m,E,S){var N=this;return(0,p.Z)(function*(){var V;Mi(null===(V=N.eventManagers[g._key()])||void 0===V?void 0:V.manager,"_initialize() not called before _openPopup()");const z=yield an(g,m,E,ma(),S);return gt(g,z,hl())})()}_openRedirect(g,m,E,S){var N=this;return(0,p.Z)(function*(){return yield N._originValidation(g),function dc(C){fn().location.href=C}(yield an(g,m,E,ma(),S)),new Promise(()=>{})})()}_initialize(g){const m=g._key();if(this.eventManagers[m]){const{manager:S,promise:N}=this.eventManagers[m];return S?Promise.resolve(S):(Mi(N,"If manager is not set, promise should be"),N)}const E=this.initAndGetManager(g);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(g){var m=this;return(0,p.Z)(function*(){const E=yield function P(C){return(dt=dt||(0,p.Z)(function*(g){const m=yield $d(g),E=fn().gapi;return ze(E,g,"internal-error"),m.open({where:document.body,url:D(g),messageHandlersFilter:E.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bf,dontclear:!0},S=>{var N;return new Promise(function(V,z){return(N=N||(0,p.Z)(function*(ie,Se){yield S.restyle({setHideOnLeave:!1});const It=yr(g,"network-request-failed"),ut=fn().setTimeout(()=>{Se(It)},yc.get());function xt(){fn().clearTimeout(ut),ie(S)}S.ping(xt).then(xt,()=>{Se(It)})})).apply(this,arguments)})})})).apply(this,arguments)}(g),S=new Mg(g);return E.register("authEvent",N=>(ze(N?.authEvent,g,"invalid-auth-event"),{status:S.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[g._key()]={manager:S},m.iframes[g._key()]=E,S})()}_isIframeWebStorageSupported(g,m){this.iframes[g._key()].send(Ur,{type:Ur},S=>{var N;const V=null===(N=S?.[0])||void 0===N?void 0:N[Ur];void 0!==V&&m(!!V),rr(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function _c(C){return(ae=ae||(0,p.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:m}=yield yu(g);for(const E of m)try{if(kg(E))return}catch{}rr(g,"unauthorized-domain")})).apply(this,arguments)}(g)),this.originValidationPromises[m]}get _shouldInitProactively(){return W_()||Qc()||Ko()}}),this.cordovaResolver=Ns(class yy{constructor(){this._redirectPersistence=Da,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=bo,this._overrideRedirectResult=yl}_initialize(g){var m=this;return(0,p.Z)(function*(){const E=g._key();let S=m.eventManagers.get(E);return S||(S=new $g(g),m.eventManagers.set(E,S),m.attachCallbackListeners(g,S)),S})()}_openPopup(g){rr(g,"operation-not-supported-in-this-environment")}_openRedirect(g,m,E,S){var N=this;return(0,p.Z)(function*(){!function jg(C){var g,m,E,S,N,V,z,ie,Se,It;const ut=xo();ze("function"==typeof(null===(g=ut?.universalLinks)||void 0===g?void 0:g.subscribe),C,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ze(typeof(null===(m=ut?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ze("function"==typeof(null===(N=null===(S=null===(E=ut?.cordova)||void 0===E?void 0:E.plugins)||void 0===S?void 0:S.browsertab)||void 0===N?void 0:N.openUrl),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ze("function"==typeof(null===(ie=null===(z=null===(V=ut?.cordova)||void 0===V?void 0:V.plugins)||void 0===z?void 0:z.browsertab)||void 0===ie?void 0:ie.isAvailable),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ze("function"==typeof(null===(It=null===(Se=ut?.cordova)||void 0===Se?void 0:Se.InAppBrowser)||void 0===It?void 0:It.open),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const V=yield N._initialize(g);yield V.initialized(),V.resetRedirect(),function Cf(){Es.clear()}(),yield N._originValidation(g);const z=function Pf(C,g,m=null){return{type:g,eventId:m,urlResponse:null,sessionId:my(),postBody:null,tenantId:C.tenantId,error:yr(C,"no-auth-event")}}(g,E,S);yield function py(C,g){return ws()._set(Mf(C),g)}(g,z);const ie=yield function dy(C,g,m){return(Sf=Sf||(0,p.Z)(function*(E,S,N){var V;const{BuildInfo:z}=xo();Mi(S.sessionId,"AuthEvent did not contain a session ID");const ie=yield hy(S.sessionId),Se={};return Ko()?Se.ibi=z.packageName:Wo()?Se.apn=z.packageName:rr(E,"operation-not-supported-in-this-environment"),z.displayName&&(Se.appDisplayName=z.displayName),Se.sessionId=ie,an(E,N,S.type,void 0,null!==(V=S.eventId)&&void 0!==V?V:void 0,Se)})).apply(this,arguments)}(g,z,m),Se=yield function Rf(C){const{cordova:g}=xo();return new Promise(m=>{g.plugins.browsertab.isAvailable(E=>{let S=null;E?g.plugins.browsertab.openUrl(C):S=g.InAppBrowser.open(C,function ld(C=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(C)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(C)}()?"_blank":"_system","location=yes"),m(S)})})}(ie);return function Bg(C,g,m){return(vc=vc||(0,p.Z)(function*(E,S,N){const{cordova:V}=xo();let z=()=>{};try{yield new Promise((ie,Se)=>{let It=null;function ut(){var Qn;ie();const Li=null===(Qn=V.plugins.browsertab)||void 0===Qn?void 0:Qn.close;"function"==typeof Li&&Li(),"function"==typeof N?.close&&N.close()}function xt(){It||(It=window.setTimeout(()=>{Se(yr(E,"redirect-cancelled-by-user"))},2e3))}function sn(){"visible"===document?.visibilityState&&xt()}S.addPassiveListener(ut),document.addEventListener("resume",xt,!1),Wo()&&document.addEventListener("visibilitychange",sn,!1),z=()=>{S.removePassiveListener(ut),document.removeEventListener("resume",xt,!1),document.removeEventListener("visibilitychange",sn,!1),It&&window.clearTimeout(It)}})}finally{z()}})).apply(this,arguments)}(g,V,Se)})()}_isIframeWebStorageSupported(g,m){throw new Error("Method not implemented.")}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function hE(C){return(dE=dE||(0,p.Z)(function*(g){const{BuildInfo:m}=xo(),E={};Ko()?E.iosBundleId=m.packageName:Wo()?E.androidPackageName=m.packageName:rr(g,"operation-not-supported-in-this-environment"),yield yu(g,E)})).apply(this,arguments)}(g)),this.originValidationPromises[m]}attachCallbackListeners(g,m){var E,S;const{universalLinks:N,handleOpenURL:V,BuildInfo:z}=xo(),ie=setTimeout((0,p.Z)(function*(){yield Gd(g),m.onEvent(kf())}),500),Se=function(sn){return(E=E||(0,p.Z)(function*(Qn){clearTimeout(ie);const Li=yield Gd(g);let Zi=null;Li&&Qn?.url&&(Zi=gy(Li,Qn.url)),m.onEvent(Zi||kf())})).apply(this,arguments)};typeof N<"u"&&"function"==typeof N.subscribe&&N.subscribe(null,Se);const It=V,ut=`${z.packageName.toLowerCase()}://`;xo().handleOpenURL=function(xt){return(S=S||(0,p.Z)(function*(sn){if(sn.toLowerCase().startsWith(ut)&&Se({url:sn}),"function"==typeof It)try{It(sn)}catch(Qn){console.error(Qn)}})).apply(this,arguments)}}}),this.underlyingResolver=null,this._redirectPersistence=Da,this._completeRedirectFn=bo,this._overrideRedirectResult=yl}_initialize(g){var m=this;return(0,p.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,m,E,S){var N=this;return(0,p.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(g,m,E,S)})()}_openRedirect(g,m,E,S){var N=this;return(0,p.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(g,m,E,S)})()}_isIframeWebStorageSupported(g,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,m)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return bc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ka(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,p.Z)(function*(){if(g.underlyingResolver)return;const m=yield function Ma(){return(zd=zd||(0,p.Z)(function*(){return!!bc()&&new Promise(C=>{const g=setTimeout(()=>{C(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),C(!0)})})})).apply(this,arguments)}();g.underlyingResolver=m?g.cordovaResolver:g.browserResolver})()}}function Gg(C){return C.unwrap()}function zg(C){return Ty(C)}function Ty(C){const{_tokenResponse:g}=C instanceof F.ZR?C.customData:C;if(!g)return null;if(!(C instanceof F.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return gc.credentialFromResult(C);const m=g.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=vd;break;case"facebook.com":E=yd;break;case"github.com":E=ec;break;case"twitter.com":E=sr;break;default:const{oauthIdToken:S,oauthAccessToken:N,oauthTokenSecret:V,pendingToken:z,nonce:ie}=g;return N||V||S||z?z?m.startsWith("saml.")?el._create(m,z):ki._fromParams({providerId:m,signInMethod:m,pendingToken:z,idToken:S,accessToken:N}):new ru(m).credential({idToken:S,accessToken:N,rawNonce:ie}):null}return C instanceof F.ZR?E.credentialFromError(C):E.credentialFromResult(C)}function Jr(C,g){return g.catch(m=>{throw m instanceof F.ZR&&function wy(C,g){var m;const E=null===(m=g.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===g?.code)g.resolver=new jf(C,function cl(C,g){var m;const E=(0,F.m9)(C),S=g;return ze(g.customData.operationType,E,"argument-error"),ze(null===(m=S.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),cu._fromError(E,S)}(C,g));else if(E){const S=Ty(g),N=g;S&&(N.credential=S,N.tenantId=E.tenantId||void 0,N.email=E.email||void 0,N.phoneNumber=E.phoneNumber||void 0)}}(C,m),m}).then(m=>{const S=m.user;return{operationType:m.operationType,credential:zg(m),additionalUserInfo:ul(m),user:ci.getOrCreate(S)}})}function Po(C,g){return(Iu=Iu||(0,p.Z)(function*(m,E){const S=yield E;return{verificationId:S.verificationId,confirm:N=>Jr(m,S.confirm(N))}})).apply(this,arguments)}class jf{constructor(g,m){this.resolver=m,this.auth=function Iy(C){return C.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return Jr(Gg(this.auth),this.resolver.resolveSignIn(g))}}class ci{constructor(g){this._delegate=g,this.multiFactor=function Yo(C){const g=(0,F.m9)(C);return du.has(g)||du.set(g,lc._fromUser(g)),du.get(g)}(g)}static getOrCreate(g){return ci.USER_MAP.has(g)||ci.USER_MAP.set(g,new ci(g)),ci.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var m=this;return(0,p.Z)(function*(){return Jr(m.auth,wa(m._delegate,g))})()}linkWithPhoneNumber(g,m){var E=this;return(0,p.Z)(function*(){return Po(E.auth,function Zt(C,g,m){return(qs=qs||(0,p.Z)(function*(E,S,N){const V=(0,F.m9)(E);yield Ia(!1,V,"phone");const z=yield vs(V.auth,S,(0,F.m9)(N));return new Xt(z,ie=>wa(V,ie))})).apply(this,arguments)}(E._delegate,g,m))})()}linkWithPopup(g){var m=this;return(0,p.Z)(function*(){return Jr(m.auth,function Ld(C,g,m){return(Y=Y||(0,p.Z)(function*(E,S,N){const V=(0,F.m9)(E);er(V.auth,S,_s);const z=Sa(V.auth,N);return new Wi(V.auth,"linkViaPopup",S,z,V).executeNotNull()})).apply(this,arguments)}(m._delegate,g,Ro))})()}linkWithRedirect(g){var m=this;return(0,p.Z)(function*(){return yield Bf(Er(m.auth)),function no(C,g,m){return function vl(C,g,m){return(xn=xn||(0,p.Z)(function*(E,S,N){const V=(0,F.m9)(E);er(V.auth,S,_s),yield V.auth._initializationPromise;const z=Sa(V.auth,N);yield Ia(!1,V,S.providerId),yield _u(z,V.auth);const ie=yield El(V);return z._openRedirect(V.auth,S,"linkViaRedirect",ie)})).apply(this,arguments)}(C,g,m)}(m._delegate,g,Ro)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var m=this;return(0,p.Z)(function*(){return Jr(m.auth,wg(m._delegate,g))})()}reauthenticateWithPhoneNumber(g,m){return Po(this.auth,function Fd(C,g,m){return(Sn=Sn||(0,p.Z)(function*(E,S,N){const V=(0,F.m9)(E),z=yield vs(V.auth,S,(0,F.m9)(N));return new Xt(z,ie=>wg(V,ie))})).apply(this,arguments)}(this._delegate,g,m))}reauthenticateWithPopup(g){return Jr(this.auth,function Et(C,g,m){return(Le=Le||(0,p.Z)(function*(E,S,N){const V=(0,F.m9)(E);er(V.auth,S,_s);const z=Sa(V.auth,N);return new Wi(V.auth,"reauthViaPopup",S,z,V).executeNotNull()})).apply(this,arguments)}(this._delegate,g,Ro))}reauthenticateWithRedirect(g){var m=this;return(0,p.Z)(function*(){return yield Bf(Er(m.auth)),function Ra(C,g,m){return function Tr(C,g,m){return(Tt=Tt||(0,p.Z)(function*(E,S,N){const V=(0,F.m9)(E);er(V.auth,S,_s),yield V.auth._initializationPromise;const z=Sa(V.auth,N);yield _u(z,V.auth);const ie=yield El(V);return z._openRedirect(V.auth,S,"reauthViaRedirect",ie)})).apply(this,arguments)}(C,g,m)}(m._delegate,g,Ro)})()}sendEmailVerification(g){return function Tg(C,g){return(Hn=Hn||(0,p.Z)(function*(m,E){const S=(0,F.m9)(m),V={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};E&&Io(S.auth,V,E);const{email:z}=yield Jc(S.auth,V);z!==m.email&&(yield m.reload())})).apply(this,arguments)}(this._delegate,g)}unlink(g){var m=this;return(0,p.Z)(function*(){return yield function Xs(C,g){return(et=et||(0,p.Z)(function*(m,E){const S=(0,F.m9)(m);yield Ia(!0,S,E);const{providerUserInfo:N}=yield pg(S.auth,{idToken:yield S.getIdToken(),deleteProvider:[E]}),V=tl(N||[]);return S.providerData=S.providerData.filter(z=>V.has(z.providerId)),V.has("phone")||(S.phoneNumber=null),yield S.auth._persistUserIfCurrent(S),S})).apply(this,arguments)}(m._delegate,g),m})()}updateEmail(g){return function ys(C,g){return Ca((0,F.m9)(C),g,null)}(this._delegate,g)}updatePassword(g){return function bd(C,g){return Ca((0,F.m9)(C),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function gl(C,g){return(En=En||(0,p.Z)(function*(m,E){yield Qo((0,F.m9)(m),E)})).apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function ac(C,g){return(Mt=Mt||(0,p.Z)(function*(m,{displayName:E,photoURL:S}){if(void 0===E&&void 0===S)return;const N=(0,F.m9)(m),z={idToken:yield N.getIdToken(),displayName:E,photoUrl:S,returnSecureToken:!0},ie=yield vr(N,Ad(N.auth,z));N.displayName=ie.displayName||null,N.photoURL=ie.photoUrl||null;const Se=N.providerData.find(({providerId:It})=>"password"===It);Se&&(Se.displayName=N.displayName,Se.photoURL=N.photoURL),yield N._updateTokensIfNecessary(ie)})).apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,m){return function Ta(C,g,m){return(qr=qr||(0,p.Z)(function*(E,S,N){const V=(0,F.m9)(E),ie={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:S};N&&Io(V.auth,ie,N);const{email:Se}=yield hr(V.auth,ie);Se!==E.email&&(yield E.reload())})).apply(this,arguments)}(this._delegate,g,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ci.USER_MAP=new WeakMap;class bl{constructor(){this.providerId="phone",this._delegate=new gc(Gg(ne.Z.auth()))}static credential(g,m){return gc.credential(g,m)}verifyPhoneNumber(g,m){return this._delegate.verifyPhoneNumber(g,m)}unwrap(){return this._delegate}}bl.PHONE_SIGN_IN_METHOD=gc.PHONE_SIGN_IN_METHOD,bl.PROVIDER_ID=gc.PROVIDER_ID},9681:(Vt,Ve,U)=>{U.r(Ve),U.d(Ve,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>ii,_DEFAULT_ENTRY_NAME:()=>Ce,_addComponent:()=>Ht,_addOrOverwriteComponent:()=>On,_apps:()=>De,_clearComponents:()=>Fn,_components:()=>bt,_getProvider:()=>pn,_registerComponent:()=>Ut,_removeServiceInstance:()=>Jn,deleteApp:()=>fo,getApp:()=>At,getApps:()=>ns,initializeApp:()=>pi,onLog:()=>po,registerVersion:()=>Xn,setLogLevel:()=>pa});var _e,he,we,p=U(5861),ne=U(4859),F=U(1877),oe=U(2090),de=U(8766);class Te{constructor(Y){this.container=Y}getPlatformInfoString(){return this.container.getProviders().map(Ae=>{if(function Q(Le){return"VERSION"===Le.getComponent()?.type}(Ae)){const rt=Ae.getImmediate();return`${rt.library}/${rt.version}`}return null}).filter(Ae=>Ae).join(" ")}}const W="@firebase/app",X="0.9.18",We=new F.Yd("@firebase/app"),Ce="[DEFAULT]",et={[W]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},De=new Map,bt=new Map;function Ht(Le,Y){try{Le.container.addComponent(Y)}catch(Ae){We.debug(`Component ${Y.name} failed to register with FirebaseApp ${Le.name}`,Ae)}}function On(Le,Y){Le.container.addOrOverwriteComponent(Y)}function Ut(Le){const Y=Le.name;if(bt.has(Y))return We.debug(`There were multiple attempts to register component ${Y}.`),!1;bt.set(Y,Le);for(const Ae of De.values())Ht(Ae,Le);return!0}function pn(Le,Y){const Ae=Le.container.getProvider("heartbeat").getImmediate({optional:!0});return Ae&&Ae.triggerHeartbeat(),Le.container.getProvider(Y)}function Jn(Le,Y,Ae=Ce){pn(Le,Y).clearInstance(Ae)}function Fn(){bt.clear()}const hn=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class mr{constructor(Y,Ae,rt){this._isDeleted=!1,this._options=Object.assign({},Y),this._config=Object.assign({},Ae),this._name=Ae.name,this._automaticDataCollectionEnabled=Ae.automaticDataCollectionEnabled,this._container=rt,this.container.addComponent(new ne.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Y){this.checkDestroyed(),this._automaticDataCollectionEnabled=Y}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Y){this._isDeleted=Y}checkDestroyed(){if(this.isDeleted)throw hn.create("app-deleted",{appName:this._name})}}const ii="10.3.1";function pi(Le,Y={}){let Ae=Le;"object"!=typeof Y&&(Y={name:Y});const rt=Object.assign({name:Ce,automaticDataCollectionEnabled:!1},Y),ot=rt.name;if("string"!=typeof ot||!ot)throw hn.create("bad-app-name",{appName:String(ot)});if(Ae||(Ae=(0,oe.aH)()),!Ae)throw hn.create("no-options");const Tt=De.get(ot);if(Tt){if((0,oe.vZ)(Ae,Tt.options)&&(0,oe.vZ)(rt,Tt.config))return Tt;throw hn.create("duplicate-app",{appName:ot})}const xn=new ne.H0(ot);for(const G of bt.values())xn.addComponent(G);const q=new mr(Ae,rt,xn);return De.set(ot,q),q}function At(Le=Ce){const Y=De.get(Le);if(!Y&&Le===Ce&&(0,oe.aH)())return pi();if(!Y)throw hn.create("no-app",{appName:Le});return Y}function ns(){return Array.from(De.values())}function fo(Le){return(_e=_e||(0,p.Z)(function*(Y){const Ae=Y.name;De.has(Ae)&&(De.delete(Ae),yield Promise.all(Y.container.getProviders().map(rt=>rt.delete())),Y.isDeleted=!0)})).apply(this,arguments)}function Xn(Le,Y,Ae){var rt;let ot=null!==(rt=et[Le])&&void 0!==rt?rt:Le;Ae&&(ot+=`-${Ae}`);const Tt=ot.match(/\s|\//),xn=Y.match(/\s|\//);if(Tt||xn){const q=[`Unable to register library "${ot}" with version "${Y}":`];return Tt&&q.push(`library name "${ot}" contains illegal characters (whitespace or "/")`),Tt&&xn&&q.push("and"),xn&&q.push(`version name "${Y}" contains illegal characters (whitespace or "/")`),void We.warn(q.join(" "))}Ut(new ne.wA(`${ot}-version`,()=>({library:ot,version:Y}),"VERSION"))}function po(Le,Y){if(null!==Le&&"function"!=typeof Le)throw hn.create("invalid-log-argument");(0,F.Am)(Le,Y)}function pa(Le){(0,F.Ub)(Le)}const vn="firebase-heartbeat-store";let Mt=null;function Ot(){return Mt||(Mt=(0,de.X3)("firebase-heartbeat-database",1,{upgrade:(Le,Y)=>{0===Y&&Le.createObjectStore(vn)}}).catch(Le=>{throw hn.create("idb-open",{originalErrorMessage:Le.message})})),Mt}function xi(Le,Y){return(we=we||(0,p.Z)(function*(Ae,rt){try{const Tt=(yield Ot()).transaction(vn,"readwrite");yield Tt.objectStore(vn).put(rt,Wr(Ae)),yield Tt.done}catch(ot){if(ot instanceof oe.ZR)We.warn(ot.message);else{const Tt=hn.create("idb-set",{originalErrorMessage:ot?.message});We.warn(Tt.message)}}})).apply(this,arguments)}function Wr(Le){return`${Le.name}!${Le.options.appId}`}class qs{constructor(Y){this.container=Y,this._heartbeatsCache=null;const Ae=this.container.getProvider("app").getImmediate();this._storage=new En(Ae),this._heartbeatsCachePromise=this._storage.read().then(rt=>(this._heartbeatsCache=rt,rt))}triggerHeartbeat(){var Y=this;return(0,p.Z)(function*(){const rt=Y.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ot=Sn();if(null===Y._heartbeatsCache&&(Y._heartbeatsCache=yield Y._heartbeatsCachePromise),Y._heartbeatsCache.lastSentHeartbeatDate!==ot&&!Y._heartbeatsCache.heartbeats.some(Tt=>Tt.date===ot))return Y._heartbeatsCache.heartbeats.push({date:ot,agent:rt}),Y._heartbeatsCache.heartbeats=Y._heartbeatsCache.heartbeats.filter(Tt=>{const xn=new Date(Tt.date).valueOf();return Date.now()-xn<=2592e6}),Y._storage.overwrite(Y._heartbeatsCache)})()}getHeartbeatsHeader(){var Y=this;return(0,p.Z)(function*(){if(null===Y._heartbeatsCache&&(yield Y._heartbeatsCachePromise),null===Y._heartbeatsCache||0===Y._heartbeatsCache.heartbeats.length)return"";const Ae=Sn(),{heartbeatsToSend:rt,unsentEntries:ot}=function go(Le,Y=1024){const Ae=[];let rt=Le.slice();for(const ot of Le){const Tt=Ae.find(xn=>xn.agent===ot.agent);if(Tt){if(Tt.dates.push(ot.date),Or(Ae)>Y){Tt.dates.pop();break}}else if(Ae.push({agent:ot.agent,dates:[ot.date]}),Or(Ae)>Y){Ae.pop();break}rt=rt.slice(1)}return{heartbeatsToSend:Ae,unsentEntries:rt}}(Y._heartbeatsCache.heartbeats),Tt=(0,oe.L)(JSON.stringify({version:2,heartbeats:rt}));return Y._heartbeatsCache.lastSentHeartbeatDate=Ae,ot.length>0?(Y._heartbeatsCache.heartbeats=ot,yield Y._storage.overwrite(Y._heartbeatsCache)):(Y._heartbeatsCache.heartbeats=[],Y._storage.overwrite(Y._heartbeatsCache)),Tt})()}}function Sn(){return(new Date).toISOString().substring(0,10)}class En{constructor(Y){this.app=Y,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Y=this;return(0,p.Z)(function*(){return(yield Y._canUseIndexedDBPromise)&&(yield function Vn(Le){return(he=he||(0,p.Z)(function*(Y){try{return yield(yield Ot()).transaction(vn).objectStore(vn).get(Wr(Y))}catch(Ae){if(Ae instanceof oe.ZR)We.warn(Ae.message);else{const rt=hn.create("idb-get",{originalErrorMessage:Ae?.message});We.warn(rt.message)}}})).apply(this,arguments)}(Y.app))||{heartbeats:[]}})()}overwrite(Y){var Ae=this;return(0,p.Z)(function*(){var rt;if(yield Ae._canUseIndexedDBPromise){const Tt=yield Ae.read();return xi(Ae.app,{lastSentHeartbeatDate:null!==(rt=Y.lastSentHeartbeatDate)&&void 0!==rt?rt:Tt.lastSentHeartbeatDate,heartbeats:Y.heartbeats})}})()}add(Y){var Ae=this;return(0,p.Z)(function*(){var rt;if(yield Ae._canUseIndexedDBPromise){const Tt=yield Ae.read();return xi(Ae.app,{lastSentHeartbeatDate:null!==(rt=Y.lastSentHeartbeatDate)&&void 0!==rt?rt:Tt.lastSentHeartbeatDate,heartbeats:[...Tt.heartbeats,...Y.heartbeats]})}})()}}function Or(Le){return(0,oe.L)(JSON.stringify({version:2,heartbeats:Le})).length}!function Ri(Le){Ut(new ne.wA("platform-logger",Y=>new Te(Y),"PRIVATE")),Ut(new ne.wA("heartbeat",Y=>new qs(Y),"PRIVATE")),Xn(W,X,Le),Xn(W,X,"esm2017"),Xn("fire-js","")}("")},4859:(Vt,Ve,U)=>{U.d(Ve,{H0:()=>we,wA:()=>F});var p=U(5861),ne=U(2090);class F{constructor(Q,W,X){this.name=Q,this.instanceFactory=W,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Q){return this.instantiationMode=Q,this}setMultipleInstances(Q){return this.multipleInstances=Q,this}setServiceProps(Q){return this.serviceProps=Q,this}setInstanceCreatedCallback(Q){return this.onInstanceCreated=Q,this}}const oe="[DEFAULT]";class de{constructor(Q,W){this.name=Q,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Q){const W=this.normalizeInstanceIdentifier(Q);if(!this.instancesDeferred.has(W)){const X=new ne.BH;if(this.instancesDeferred.set(W,X),this.isInitialized(W)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:W});We&&X.resolve(We)}catch{}}return this.instancesDeferred.get(W).promise}getImmediate(Q){var W;const X=this.normalizeInstanceIdentifier(Q?.identifier),We=null!==(W=Q?.optional)&&void 0!==W&&W;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Fe){if(We)return null;throw Fe}}getComponent(){return this.component}setComponent(Q){if(Q.name!==this.name)throw Error(`Mismatching Component ${Q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Q,this.shouldAutoInitialize()){if(function he(Te){return"EAGER"===Te.instantiationMode}(Q))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[W,X]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier(W);try{const Fe=this.getOrInitializeService({instanceIdentifier:We});X.resolve(Fe)}catch{}}}}clearInstance(Q=oe){this.instancesDeferred.delete(Q),this.instancesOptions.delete(Q),this.instances.delete(Q)}delete(){var Q=this;return(0,p.Z)(function*(){const W=Array.from(Q.instances.values());yield Promise.all([...W.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...W.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Q=oe){return this.instances.has(Q)}getOptions(Q=oe){return this.instancesOptions.get(Q)||{}}initialize(Q={}){const{options:W={}}=Q,X=this.normalizeInstanceIdentifier(Q.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:X,options:W});for(const[Fe,Re]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Fe)&&Re.resolve(We);return We}onInit(Q,W){var X;const We=this.normalizeInstanceIdentifier(W),Fe=null!==(X=this.onInitCallbacks.get(We))&&void 0!==X?X:new Set;Fe.add(Q),this.onInitCallbacks.set(We,Fe);const Re=this.instances.get(We);return Re&&Q(Re,We),()=>{Fe.delete(Q)}}invokeOnInitCallbacks(Q,W){const X=this.onInitCallbacks.get(W);if(X)for(const We of X)try{We(Q,W)}catch{}}getOrInitializeService({instanceIdentifier:Q,options:W={}}){let X=this.instances.get(Q);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(Te=Q,Te===oe?void 0:Te),options:W}),this.instances.set(Q,X),this.instancesOptions.set(Q,W),this.invokeOnInitCallbacks(X,Q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Q,X)}catch{}var Te;return X||null}normalizeInstanceIdentifier(Q=oe){return this.component?this.component.multipleInstances?Q:oe:Q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class we{constructor(Q){this.name=Q,this.providers=new Map}addComponent(Q){const W=this.getProvider(Q.name);if(W.isComponentSet())throw new Error(`Component ${Q.name} has already been registered with ${this.name}`);W.setComponent(Q)}addOrOverwriteComponent(Q){this.getProvider(Q.name).isComponentSet()&&this.providers.delete(Q.name),this.addComponent(Q)}getProvider(Q){if(this.providers.has(Q))return this.providers.get(Q);const W=new de(Q,this);return this.providers.set(Q,W),W}getProviders(){return Array.from(this.providers.values())}}},1877:(Vt,Ve,U)=>{U.d(Ve,{Am:()=>Te,Ub:()=>we,Yd:()=>he,in:()=>ne});const p=[];var ne=(()=>{return(Q=ne||(ne={}))[Q.DEBUG=0]="DEBUG",Q[Q.VERBOSE=1]="VERBOSE",Q[Q.INFO=2]="INFO",Q[Q.WARN=3]="WARN",Q[Q.ERROR=4]="ERROR",Q[Q.SILENT=5]="SILENT",ne;var Q})();const F={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},oe=ne.INFO,de={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},_e=(Q,W,...X)=>{if(W<Q.logLevel)return;const We=(new Date).toISOString(),Fe=de[W];if(!Fe)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[Fe](`[${We}]  ${Q.name}:`,...X)};class he{constructor(W){this.name=W,this._logLevel=oe,this._logHandler=_e,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in ne))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?F[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...W),this._logHandler(this,ne.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...W),this._logHandler(this,ne.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...W),this._logHandler(this,ne.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...W),this._logHandler(this,ne.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...W),this._logHandler(this,ne.ERROR,...W)}}function we(Q){p.forEach(W=>{W.setLogLevel(Q)})}function Te(Q,W){for(const X of p){let We=null;W&&W.level&&(We=F[W.level]),X.userLogHandler=null===Q?null:(Fe,Re,...vt)=>{const be=vt.map(ye=>{if(null==ye)return null;if("string"==typeof ye)return ye;if("number"==typeof ye||"boolean"==typeof ye)return ye.toString();if(ye instanceof Error)return ye.message;try{return JSON.stringify(ye)}catch{return null}}).filter(ye=>ye).join(" ");Re>=(We??Fe.logLevel)&&Q({level:ne[Re].toLowerCase(),message:be,args:vt,type:Fe.name})}}}},8766:(Vt,Ve,U)=>{U.d(Ve,{X3:()=>kt});var p=U(5861);let F,oe;const he=new WeakMap,we=new WeakMap,Te=new WeakMap,Q=new WeakMap,W=new WeakMap;let Fe={get(Ee,Me,ct){if(Ee instanceof IDBTransaction){if("done"===Me)return we.get(Ee);if("objectStoreNames"===Me)return Ee.objectStoreNames||Te.get(Ee);if("store"===Me)return ct.objectStoreNames[1]?void 0:ct.objectStore(ct.objectStoreNames[0])}return ye(Ee[Me])},set:(Ee,Me,ct)=>(Ee[Me]=ct,!0),has:(Ee,Me)=>Ee instanceof IDBTransaction&&("done"===Me||"store"===Me)||Me in Ee};function be(Ee){return"function"==typeof Ee?function vt(Ee){return Ee!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ee)?function(...Me){return Ee.apply(Pt(this),Me),ye(he.get(this))}:function(...Me){return ye(Ee.apply(Pt(this),Me))}:function(Me,...ct){const at=Ee.call(Pt(this),Me,...ct);return Te.set(at,Me.sort?Me.sort():[Me]),ye(at)}}(Ee):(Ee instanceof IDBTransaction&&function We(Ee){if(we.has(Ee))return;const Me=new Promise((ct,at)=>{const Wt=()=>{Ee.removeEventListener("complete",lt),Ee.removeEventListener("error",$n),Ee.removeEventListener("abort",$n)},lt=()=>{ct(),Wt()},$n=()=>{at(Ee.error||new DOMException("AbortError","AbortError")),Wt()};Ee.addEventListener("complete",lt),Ee.addEventListener("error",$n),Ee.addEventListener("abort",$n)});we.set(Ee,Me)}(Ee),((Ee,Me)=>Me.some(ct=>Ee instanceof ct))(Ee,function de(){return F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ee,Fe):Ee)}function ye(Ee){if(Ee instanceof IDBRequest)return function X(Ee){const Me=new Promise((ct,at)=>{const Wt=()=>{Ee.removeEventListener("success",lt),Ee.removeEventListener("error",$n)},lt=()=>{ct(ye(Ee.result)),Wt()},$n=()=>{at(Ee.error),Wt()};Ee.addEventListener("success",lt),Ee.addEventListener("error",$n)});return Me.then(ct=>{ct instanceof IDBCursor&&he.set(ct,Ee)}).catch(()=>{}),W.set(Me,Ee),Me}(Ee);if(Q.has(Ee))return Q.get(Ee);const Me=be(Ee);return Me!==Ee&&(Q.set(Ee,Me),W.set(Me,Ee)),Me}const Pt=Ee=>W.get(Ee);function kt(Ee,Me,{blocked:ct,upgrade:at,blocking:Wt,terminated:lt}={}){const $n=indexedDB.open(Ee,Me),ts=ye($n);return at&&$n.addEventListener("upgradeneeded",dr=>{at(ye($n.result),dr.oldVersion,dr.newVersion,ye($n.transaction),dr)}),ct&&$n.addEventListener("blocked",dr=>ct(dr.oldVersion,dr.newVersion,dr)),ts.then(dr=>{lt&&dr.addEventListener("close",()=>lt()),Wt&&dr.addEventListener("versionchange",Si=>Wt(Si.oldVersion,Si.newVersion,Si))}).catch(()=>{}),ts}const Be=["get","getKey","getAll","getAllKeys","count"],Ne=["put","add","delete","clear"],tt=new Map;function nt(Ee,Me){var ct;if(!(Ee instanceof IDBDatabase)||Me in Ee||"string"!=typeof Me)return;if(tt.get(Me))return tt.get(Me);const at=Me.replace(/FromIndex$/,""),Wt=Me!==at,lt=Ne.includes(at);if(!(at in(Wt?IDBIndex:IDBObjectStore).prototype)||!lt&&!Be.includes(at))return;const $n=function(dr){return(ct=ct||(0,p.Z)(function*(Si,...ue){const re=this.transaction(Si,lt?"readwrite":"readonly");let xe=re.store;return Wt&&(xe=xe.index(ue.shift())),(yield Promise.all([xe[at](...ue),lt&&re.done]))[0]})).apply(this,arguments)};return tt.set(Me,$n),$n}!function Re(Ee){Fe=Ee(Fe)}(Ee=>({...Ee,get:(Me,ct,at)=>nt(Me,ct)||Ee.get(Me,ct,at),has:(Me,ct)=>!!nt(Me,ct)||Ee.has(Me,ct)}))},5861:(Vt,Ve,U)=>{function p(F,oe,de,_e,he,we,Te){try{var Q=F[we](Te),W=Q.value}catch(X){return void de(X)}Q.done?oe(W):Promise.resolve(W).then(_e,he)}function ne(F){return function(){var oe=this,de=arguments;return new Promise(function(_e,he){var we=F.apply(oe,de);function Te(W){p(we,_e,he,Te,Q,"next",W)}function Q(W){p(we,_e,he,Te,Q,"throw",W)}Te(void 0)})}}U.d(Ve,{Z:()=>ne})},7582:(Vt,Ve,U)=>{function oe(ue,re){var xe={};for(var Ce in ue)Object.prototype.hasOwnProperty.call(ue,Ce)&&re.indexOf(Ce)<0&&(xe[Ce]=ue[Ce]);if(null!=ue&&"function"==typeof Object.getOwnPropertySymbols){var et=0;for(Ce=Object.getOwnPropertySymbols(ue);et<Ce.length;et++)re.indexOf(Ce[et])<0&&Object.prototype.propertyIsEnumerable.call(ue,Ce[et])&&(xe[Ce[et]]=ue[Ce[et]])}return xe}function X(ue,re,xe,Ce){return new(xe||(xe=Promise))(function(De,bt){function Ht(pn){try{Ut(Ce.next(pn))}catch(Jn){bt(Jn)}}function On(pn){try{Ut(Ce.throw(pn))}catch(Jn){bt(Jn)}}function Ut(pn){pn.done?De(pn.value):function et(De){return De instanceof xe?De:new xe(function(bt){bt(De)})}(pn.value).then(Ht,On)}Ut((Ce=Ce.apply(ue,re||[])).next())})}function Qe(ue){return this instanceof Qe?(this.v=ue,this):new Qe(ue)}function Be(ue,re,xe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var et,Ce=xe.apply(ue,re||[]),De=[];return et={},bt("next"),bt("throw"),bt("return"),et[Symbol.asyncIterator]=function(){return this},et;function bt(Fn){Ce[Fn]&&(et[Fn]=function(Dr){return new Promise(function(hn,mr){De.push([Fn,Dr,hn,mr])>1||Ht(Fn,Dr)})})}function Ht(Fn,Dr){try{!function On(Fn){Fn.value instanceof Qe?Promise.resolve(Fn.value.v).then(Ut,pn):Jn(De[0][2],Fn)}(Ce[Fn](Dr))}catch(hn){Jn(De[0][3],hn)}}function Ut(Fn){Ht("next",Fn)}function pn(Fn){Ht("throw",Fn)}function Jn(Fn,Dr){Fn(Dr),De.shift(),De.length&&Ht(De[0][0],De[0][1])}}function tt(ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xe,re=ue[Symbol.asyncIterator];return re?re.call(ue):(ue=function vt(ue){var re="function"==typeof Symbol&&Symbol.iterator,xe=re&&ue[re],Ce=0;if(xe)return xe.call(ue);if(ue&&"number"==typeof ue.length)return{next:function(){return ue&&Ce>=ue.length&&(ue=void 0),{value:ue&&ue[Ce++],done:!ue}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(ue),xe={},Ce("next"),Ce("throw"),Ce("return"),xe[Symbol.asyncIterator]=function(){return this},xe);function Ce(De){xe[De]=ue[De]&&function(bt){return new Promise(function(Ht,On){!function et(De,bt,Ht,On){Promise.resolve(On).then(function(Ut){De({value:Ut,done:Ht})},bt)}(Ht,On,(bt=ue[De](bt)).done,bt.value)})}}}U.d(Ve,{FC:()=>Be,KL:()=>tt,_T:()=>oe,mG:()=>X,qq:()=>Qe}),"function"==typeof SuppressedError&&SuppressedError}},Vt=>{Vt(Vt.s=7815)}]);